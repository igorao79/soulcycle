# Инструкция по деплою проекта на GitHub Pages

## Подготовка к деплою

### 1. Создание отдельного проекта Supabase для продакшена

Рекомендуется создать отдельный проект Supabase для продакшена, чтобы не смешивать тестовые и боевые данные:

1. Зайдите в [dashboard.supabase.com](https://dashboard.supabase.com/)
2. Создайте новый проект для продакшена
3. Повторите настройку таблиц, выполнив SQL-скрипты из директории проекта:
   - `supabase_tables.sql`
   - `supabase_profiles.sql`

### 2. Настройка переменных окружения

Создайте файл `.env.production` в корне проекта со следующим содержимым:

```
VITE_SUPABASE_URL=https://ваш-продакшен-проект.supabase.co
VITE_SUPABASE_ANON_KEY=ваш-продакшен-ключ-доступа
VITE_APP_NAME=SoulCycle
```

## Деплой на GitHub Pages

### 1. Установка gh-pages пакета

```bash
npm install --save-dev gh-pages
```

### 2. Добавление скриптов в package.json

Добавьте следующие скрипты в ваш файл package.json:

```json
"scripts": {
  "predeploy": "npm run build",
  "deploy": "gh-pages -d dist"
}
```

### 3. Настройка репозитория

1. Создайте репозиторий на GitHub
2. Инициализируйте Git в проекте (если еще не сделано):
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   ```
3. Подключите ваш локальный репозиторий к GitHub:
   ```bash
   git remote add origin https://github.com/username/repository.git
   ```

### 4. Деплой

Запустите команду:

```bash
npm run deploy
```

После завершения сборки ваш проект будет доступен по адресу:
`https://username.github.io/repository/`

## Важные замечания

### Безопасность ключей API

- В этом проекте для GitHub Pages мы используем публичный анонимный ключ Supabase, который безопасно использовать на клиенте
- Все данные защищены на уровне базы данных с помощью Row Level Security (RLS)
- НЕ публикуйте в репозитории:
  - Административные ключи Supabase (service_role)
  - Данные для доступа к базе данных напрямую
  - Пароли и секретные ключи

### Дополнительная защита

Для повышения безопасности можно:

1. В Supabase Dashboard настроить CORS, разрешив только доступ с вашего домена
2. Настроить дополнительные правила RLS для таблиц
3. Включить защиту от XSS и CSRF атак

## Проверка после деплоя

После деплоя убедитесь, что:

1. Регистрация и вход пользователей работают корректно
2. Данные загружаются из Supabase
3. Новые записи сохраняются в базе данных
4. Стили и изображения отображаются правильно 