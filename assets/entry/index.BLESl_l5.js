!function(){"use strict";try{if("undefined"!=typeof document){var r=document.createElement("style");r.appendChild(document.createTextNode('@charset "UTF-8";:root{--font-base: "graphr", sans-serif;--font-bold: "graphb", sans-serif;--text-color: #000;--text-primary: #222222;--text-secondary: #555555;--text-tertiary: #888888;--background-color: #fff;--background-color2: #f2f2f2;--bg-highlight: #f5f8fa;--bg-secondary: #f8f9fa;--bg-input: #ffffff;--border-color: #ddd;--border-color2: white;--border: #e1e8ed;--accent-color: #555555;--accent: #555555;--accent-rgb: 32, 178, 170;--accent-light: rgba(32, 178, 170, .1);--accent-hover: #555555;--success: #34d399;--success-rgb: 52, 211, 153;--warning: #fbbf24;--warning-rgb: 251, 191, 36;--error: #f87171;--error-rgb: 248, 113, 113;--error-light: rgba(248, 113, 113, .1);--info: #60a5fa;--info-rgb: 96, 165, 250;--overlay-color: rgba(0, 0, 0, .5);--shadow: 0 2px 8px rgba(0, 0, 0, .1);--shadow-hover: 0 5px 15px rgba(0, 0, 0, .15);--modal-bg: #ffffff;--modal-bg-rgb: 255, 255, 255;--modal-bg-end-rgb: 240, 240, 240;--modal-border: rgba(0, 0, 0, .15);--input-bg: #f8f8f8;--svg-color: %23000000;--gradient-start: #333333;--gradient-end: #666666;--transition-fast: .2s ease;--transition-normal: .3s ease;--transition-slow: .5s ease;--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--radius-xl: 16px;--radius-full: 9999px;--scrollbar-width: 8px;--scrollbar-track: #f1f1f1;--scrollbar-thumb: #c1c1c1;--scrollbar-thumb-hover: #a1a1a1}[data-theme=dark]{--text-color: #e0e0e0;--text-primary: #e0e0e0;--text-secondary: #b0b0b0;--text-tertiary: #808080;--background-color: #1e1e1e;--background-color2: #333333;--bg-highlight: #2a2a2a;--bg-secondary: #292929;--bg-input: #252525;--border-color: #555;--border-color2: black;--border: rgba(255, 255, 255, .1);--accent-color: #333333;--accent: #333333;--accent-rgb: 187, 134, 252;--accent-light: rgba(187, 134, 252, .1);--accent-hover: #333333;--overlay-color: rgba(255, 255, 255, .5);--shadow: 0 2px 8px rgba(0, 0, 0, .3);--shadow-hover: 0 5px 15px rgba(0, 0, 0, .4);--modal-bg: #2a2a2a;--modal-bg-rgb: 42, 42, 42;--modal-bg-end-rgb: 60, 60, 65;--modal-border: rgba(255, 255, 255, .2);--input-bg: #222222;--svg-color: %23ffffff;--gradient-start: #ffffff;--gradient-end: #a0a0a0;--scrollbar-track: #2a2a2a;--scrollbar-thumb: #444444;--scrollbar-thumb-hover: #555555}::-webkit-scrollbar{width:var(--scrollbar-width);height:var(--scrollbar-width)}::-webkit-scrollbar-track{background:var(--scrollbar-track);border-radius:var(--radius-full)}::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb);border-radius:var(--radius-full)}::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover)}*{scrollbar-width:thin;scrollbar-color:var(--scrollbar-thumb) var(--scrollbar-track)}*,*:after,*:before{padding:0;margin:0;box-sizing:border-box}html,body{font-size:10px;color:var(--text-color);background-color:var(--background-color);font-family:var(--font-base)}h1,h2,h3,h4,h5,h6{font-family:var(--font-bold);color:var(--text-primary)}._page_1f14w_168{max-width:2000px;min-height:100vh;display:flex;align-items:center;justify-content:center;margin:0 auto;background-color:var(--background-color);background-image:var(--page-bg);background-size:cover;background-position:center;background-repeat:no-repeat;position:relative;transition:all var(--transition-slow);overflow:hidden;background-attachment:fixed}img{vertical-align:top}button{border:none;cursor:pointer;transition:all var(--transition-fast)}a{text-decoration:none;color:var(--accent);transition:color var(--transition-fast)}._card_1f14w_203{background-color:var(--bg-secondary);border-radius:var(--radius-md);box-shadow:var(--shadow);padding:20px;border:1px solid var(--border);transition:all var(--transition-fast)}._btn_1f14w_212{display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;border-radius:var(--radius-md);font-size:14px;font-weight:500;transition:all var(--transition-fast)}._btn-primary_1f14w_223{background-color:var(--accent);color:#fff}._btn-primary_1f14w_223:hover{background-color:var(--accent-hover)}._btn-secondary_1f14w_232{background-color:var(--bg-highlight);color:var(--text-primary);border:1px solid var(--border)}._btn-secondary_1f14w_232:hover{background-color:var(--background-color2)}@font-face{font-family:graphb;src:url(/soulcycle/assets/fonts/GraphikLCG-Bold.oGnNkPcM.woff2) format("woff2");font-weight:700;font-style:normal;font-display:swap}@font-face{font-family:graphr;src:url(/soulcycle/assets/fonts/GraphikLCG-Regular.BteGvBxa.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}._text-animation_1f14w_262{display:inline-block}._text-animation_1f14w_262 span{display:inline-block;opacity:0;transform:translateY(20px);animation:_fadeIn_1f14w_1 .5s ease forwards}._text-animation-slow_1f14w_273 span{animation:_fadeIn_1f14w_1 1.2s ease forwards}@keyframes _fadeIn_1f14w_1{to{opacity:1;transform:translateY(0)}}._window_52q69_2{height:75vh;position:relative;background-color:var(--background-color);border-radius:5px;display:flex;align-items:center;overflow:hidden;transition:width .3s,height .3s;z-index:1!important}._window__message_52q69_13{position:absolute;left:35%;top:50%;text-transform:uppercase;color:var(--text-color)}._window__message_52q69_13 h2{font-size:clamp(3rem,3vw,3rem)}._window__panel_52q69_23{position:absolute;min-height:80vh;max-width:200px!important;display:flex;flex-direction:column;align-items:center;justify-content:center;border-right:2px solid var(--border-color);z-index:5!important;background-color:var(--background-color)}._window__panel__iconWrapper_52q69_35{display:flex;flex-direction:column;gap:50px;z-index:5!important}._window__panel__navButtons_52q69_41{display:flex;flex-direction:column;gap:20px;z-index:5!important}._window__panel__navButtons__navButton_52q69_47{background:none;border:none;color:var(--text-color);z-index:5!important}._window__panel__navButtons__navButton__arrow_52q69_53{background:none;border:none;fill:var(--text-color);z-index:5!important}._window__message_52q69_13{display:flex;align-items:center;justify-content:center}._disabled_52q69_65{fill:#a9a9a9;opacity:.5;pointer-events:none}@media only screen and (max-width: 760px){._window_52q69_2{top:-20px;flex-direction:column;margin:0 20px!important;height:85vh}._window__panel_52q69_23{position:absolute;rotate:90deg;gap:20px;top:-42.5%}._window__panel__iconWrapper_52q69_35,._window__panel__navButtons_52q69_41{gap:10px}._window__message_52q69_13{left:5%;font-size:2.5rem}}._menu_1mm9j_2{width:100%;height:100%;display:flex;align-items:center;justify-content:center;gap:7%;background-color:#fffefe;position:relative;z-index:1;overflow:hidden}._menu__left_1mm9j_14{max-width:500px;min-height:100px;display:flex;flex-direction:column;gap:100px;align-items:center;justify-content:center;aspect-ratio:1/1}._menu__left__pic_1mm9j_24{max-width:500px;min-height:70px;aspect-ratio:1/1}._menu__left__pic_1mm9j_24 img{width:100%;height:100%;object-fit:contain;display:block}._menu__right_1mm9j_35{max-width:500px;min-height:100px;display:flex;flex-direction:column;gap:60px;padding:20px 80px;align-items:center;justify-content:center;background-color:#fff;border-radius:10px;border:2px solid black}[data-theme=dark] ._menu__right_1mm9j_35{background-color:#000;border:2px solid white}._menu__right__titleblock_1mm9j_52{width:100%;display:flex;flex-direction:column;gap:50px;align-items:center;justify-content:center}._menu__right__titleblock__fullname_1mm9j_60{font-size:2rem}._menu__right__titleblock__maininfo_1mm9j_63{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.8rem;gap:10px}._menu__right__lore_1mm9j_71{font-size:1.6rem;max-width:120px;min-height:30px;padding:20px 10px}._menu_1mm9j_2[id=faust]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/faustb.svg);z-index:-1;filter:blur(2.5px)}[data-theme=dark] ._menu_1mm9j_2[id=faust]:before{background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/faustb-black.svg)}._menu_1mm9j_2[id=lonarius]:before{content:"";position:absolute;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/lonariusb.svg);background-repeat:no-repeat;background-position:center;background-size:cover;z-index:-1;filter:blur(1.5px)}[data-theme=dark] ._menu_1mm9j_2[id=lonarius]:before{background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/lonariusb-black.svg);background-size:cover}._menu_1mm9j_2[id=vivian]:before{content:"";position:absolute;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/vivianb.svg);z-index:-1;filter:blur(1.5px)}[data-theme=dark] ._menu_1mm9j_2[id=vivian]:before{content:"";background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/vivianb-black.svg);position:absolute;width:100%;height:100%;z-index:-1;filter:blur(1.5px)}._menu_1mm9j_2[id=akito]:before{content:"";position:absolute;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/akitob2.svg);background-color:#fff;background-repeat:no-repeat;background-position:center;background-size:cover;z-index:-1;filter:blur(1.5px)}[data-theme=dark] ._menu_1mm9j_2[id=akito]:before{content:"";background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/akitob2.svg);position:absolute;width:100%;height:100%;z-index:-1;filter:blur(1.5px)}@media only screen and (max-width: 760px){._menu_1mm9j_2{flex-direction:column;gap:50px}._menu__left_1mm9j_14{max-width:320px!important;padding-top:40px}._menu__right_1mm9j_35{max-width:300px!important;padding:20px;gap:20px}._menu__right__titleblock_1mm9j_52{gap:20px}}@media (min-width: 761px) and (max-width: 1024px) and (orientation: portrait){._menu_1mm9j_2{flex-direction:column}._menu__left_1mm9j_14{max-width:500px!important;padding-top:40px;padding-left:3%}._menu__right_1mm9j_35{max-width:350px!important;padding:20px 40px;gap:20px}._menu__right__titleblock_1mm9j_52{gap:20px}}._button_1jwbf_1{position:relative;transition:all .3s ease-in-out;box-shadow:0 10px 20px rgba(0,0,0,.2);padding-block:.5rem;padding-inline:1.25rem;background-color:#000;border-radius:9999px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff!important;gap:10px;font-weight:700;border:3px solid rgba(255,255,255,.3019607843);outline:none;overflow:hidden;font-size:15px}._button_1jwbf_1:hover{transform:scale(1.05);border-color:rgba(255,255,255,.6)}._button_1jwbf_1:before{content:"";position:absolute;width:100px;height:100%;background-image:linear-gradient(120deg,rgba(255,255,255,0) 30%,rgba(255,255,255,.8),rgba(255,255,255,0) 70%);top:0;left:-100px;opacity:.6}._button_1jwbf_1:hover:before{animation:_shine_1jwbf_1 1.5s ease-out infinite}._icon_1jwbf_39{width:24px;height:24px;transition:all .3s ease-in-out}._button_1jwbf_1:hover ._icon_1jwbf_39{transform:translate(4px)}@keyframes _shine_1jwbf_1{0%{left:-100px}60%{left:100%}to{left:100%}}._modalOverlay_1214q_2{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;z-index:1000;padding:5px}._modalOverlay__content_1214q_15{background-color:var(--background-color);color:var(--text-color);padding:0 20px 40px;border-radius:8px;max-width:1000px;width:100%;position:relative;z-index:1001;display:flex;flex-direction:column;align-items:center;border:2px solid var(--border-color)}._modalOverlay__closeButton_1214q_29{position:absolute;top:10px;right:10px;background:none;border:none;cursor:pointer;transition:.4s ease;fill:var(--text-color)}._modalOverlay__closeButton_1214q_29:hover{fill:red}._modalOverlay__textContent_1214q_42{display:flex;flex-direction:column;align-items:center;gap:30px}._modalOverlay__navigation_1214q_48{display:flex;justify-content:space-between;align-items:center;width:100%}._modalOverlay__arrowRight_1214q_54,._modalOverlay__arrowLeft_1214q_54{position:absolute;bottom:1%;font-size:3rem;background:none;fill:var(--text-color)}._modalOverlay__arrowRight_1214q_54{right:2%}._modalOverlay__arrowLeft_1214q_54{left:2%}._modalOverlay__title_1214q_67{text-transform:uppercase;font-size:2rem;color:var(--text-color);position:relative}._modalOverlay__title_1214q_67:after{content:"";display:block;width:100%;height:4px;background:var(--border-color);position:absolute;bottom:-5px;left:0;transform:scaleX(0);animation:_appear_1214q_1 .5s forwards;animation-delay:.2s}._modalOverlay__textBlock_1214q_86{min-height:500px;width:100%}._modalOverlay__textBlock__textCont_1214q_90{display:flex;flex-direction:column;gap:20px;font-size:1.65rem;line-height:1.6;color:var(--text-color);transition:opacity .3s ease-in-out}._modalOverlay__textBlock__textCont_1214q_90 span{filter:blur(4px)}._modalOverlay__textBlock__textCont_1214q_90 blockquote{color:var(--accent-color)}._modalOverlay__pageIndicator_1214q_105{font-size:1.5rem;color:var(--text-color);position:absolute;bottom:2%}@keyframes _appear_1214q_1{to{transform:scaleX(1)}}._fadeIn_1214q_117{opacity:1}._fadeOut_1214q_121{opacity:0}._disabled_1214q_125{fill:#a9a9a9;opacity:.5;pointer-events:none}@media only screen and (max-width: 760px){._modalOverlay__textContent_1214q_42{min-height:700px}}._btn_2wi9v_2{max-width:78px;min-height:78px;display:flex;align-items:center;justify-content:center;background-color:var(--background-color);aspect-ratio:1;background:none;border:none;cursor:pointer;padding:0;transition:transform .2s ease}._btn_2wi9v_2:hover{transform:scale(1.1)}._btn__pic_2wi9v_19{width:100%;height:100%;display:block;transition:filter .3s ease}._btn__pic_2wi9v_19 img{width:100%;height:100%;object-fit:contain}._btn__pic_2wi9v_19._darkTheme_2wi9v_30{filter:invert(1) brightness(1.5)}hr{height:3px;background-color:var(--border-color)}._icon_2wi9v_39 img{content:attr(data-light)}[data-theme=dark] ._icon_2wi9v_39 img{content:attr(data-dark)}@media only screen and (max-width: 760px){._btn_2wi9v_2{rotate:270deg;max-width:60px;min-height:60px}}._aboutblock_kg2nj_3{max-width:1200px;margin:0 auto;padding:3rem 2rem;background-color:var(--bg-primary);color:var(--text-primary);display:flex;align-items:center;justify-content:center;flex-direction:column;gap:2.5rem;border-radius:15px;transition:all .3s ease}._aboutblock__header_kg2nj_17{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2rem}._aboutblock__header__htitle_kg2nj_25{font-family:graphb,sans-serif;font-size:clamp(2.2rem,4vw,3rem);color:var(--text-primary);position:relative;margin-bottom:1.5rem;padding-bottom:1rem;text-align:center}._aboutblock__header__htitle_kg2nj_25:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:60px;height:4px;background:var(--accent);border-radius:2px}._aboutblock__header__textblock_kg2nj_45{width:100%;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;align-items:stretch;justify-content:center;position:relative}._aboutblock__header__textblock__card_kg2nj_54{display:flex;flex-direction:column;background:var(--bg-secondary);border-radius:15px;padding:1.5rem;transition:all .3s ease;height:100%;position:relative;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.05);border:1px solid var(--border-color)}._aboutblock__header__textblock__card_kg2nj_54:hover{transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,0,0,.08)}._aboutblock__header__textblock__card_kg2nj_54:hover ._aboutblock__header__textblock__card__icon_kg2nj_71{transform:scale(1.05)}._aboutblock__header__textblock__card__icon_kg2nj_71{display:flex;justify-content:center;margin-bottom:1rem;transition:transform .4s ease}._aboutblock__header__textblock__card__icon__main_kg2nj_80{fill:var(--accent);animation:_wiggle_kg2nj_1 3s infinite ease-in-out}[data-theme=dark] ._aboutblock__header__textblock__card__icon__main_kg2nj_80{fill:var(--text-primary)}._aboutblock__header__textblock__card__icon__small_kg2nj_87{fill:var(--accent);opacity:.9;animation:_float_kg2nj_1 4s infinite ease-in-out}[data-theme=dark] ._aboutblock__header__textblock__card__icon__small_kg2nj_87{fill:var(--text-primary);opacity:.8}._aboutblock__header__textblock__card__content_kg2nj_96{flex:1;display:flex;flex-direction:column;justify-content:center}._aboutblock__header__textblock__card__content_kg2nj_96 p{font-size:clamp(.95rem,1vw + .5rem,1.2rem);line-height:1.6;margin:0}._aboutblock__header__textblock__card__link_kg2nj_107{color:gray;text-decoration:none;position:relative;transition:all .2s ease}._aboutblock__header__textblock__card__link_kg2nj_107:hover{text-decoration:none;opacity:.9}._aboutblock__header__textblock__card__link_kg2nj_107:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:1px;background-color:gray;transform:scaleX(0);transform-origin:right;transition:transform .3s ease}._aboutblock__header__textblock__card__link_kg2nj_107:hover:after{transform:scaleX(1);transform-origin:left}._aboutblock__header__textblock__telegram_kg2nj_133{display:flex;justify-content:center;align-items:center;grid-column:1/-1;margin-top:1rem}._aboutblock__divider_kg2nj_140{width:100%;display:flex;align-items:center;justify-content:center;gap:1rem;padding:.5rem 0}._aboutblock__divider__line_kg2nj_148{height:1px;flex:1;background:linear-gradient(to right,transparent,var(--border-color),transparent)}._aboutblock__divider__icon_kg2nj_153{font-size:1.8rem;color:var(--accent);animation:_pulse_kg2nj_1 3s infinite ease-in-out}._aboutblock__main_kg2nj_158{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2rem}._aboutblock__main__btitle_kg2nj_166,._aboutblock__main__dtitle_kg2nj_166{font-family:graphb,sans-serif;font-size:clamp(1.8rem,3vw,2.5rem);color:var(--text-primary);position:relative;margin-bottom:.5rem}._aboutblock__main__btitle_kg2nj_166:before,._aboutblock__main__dtitle_kg2nj_166:before{content:"✧";margin-right:.5rem;color:var(--accent);font-size:.8em;animation:_spin_kg2nj_1 4s linear infinite;display:inline-block}._aboutblock__main__authors_kg2nj_181,._aboutblock__main__developers_kg2nj_181{width:100%;display:flex;flex-wrap:wrap;gap:2rem;justify-content:center;padding:1.5rem;border-radius:15px;background-color:var(--bg-secondary);box-shadow:0 5px 20px rgba(0,0,0,.04);border:1px solid var(--border-color)}[data-theme=dark] ._aboutblock__main__authors_kg2nj_181,[data-theme=dark] ._aboutblock__main__developers_kg2nj_181{box-shadow:0 5px 20px rgba(0,0,0,.15)}._aboutblock__social_kg2nj_196{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem;margin-top:1rem}._aboutblock__social__title_kg2nj_205{font-family:graphb,sans-serif;font-size:clamp(1.8rem,3vw,2.5rem);color:var(--text-primary);position:relative;margin-bottom:.5rem;text-align:center}._aboutblock__social__title_kg2nj_205:before{content:"♥";margin-right:.5rem;color:var(--accent);font-size:.8em;animation:_pulse_kg2nj_1 2s infinite ease-in-out;display:inline-block}._aboutblock__social__links_kg2nj_221{display:flex;justify-content:center;gap:1.5rem;margin:1rem 0;padding:1.5rem;border-radius:15px;background-color:var(--bg-secondary);box-shadow:0 5px 15px rgba(0,0,0,.05);border:1px solid var(--border-color)}[data-theme=dark] ._aboutblock__social__links_kg2nj_221{box-shadow:0 5px 15px rgba(0,0,0,.2)}._aboutblock__social__links_kg2nj_221 a{transition:transform .3s ease}._aboutblock__social__links_kg2nj_221 a:hover{transform:translateY(-5px)}@keyframes _float_kg2nj_1{0%,to{transform:translateY(0)}50%{transform:translateY(-7px)}}@keyframes _wiggle_kg2nj_1{0%,to{transform:rotate(0)}25%{transform:rotate(3deg)}75%{transform:rotate(-3deg)}}@keyframes _pulse_kg2nj_1{0%,to{transform:scale(1);opacity:.8}50%{transform:scale(1.1);opacity:1}}@keyframes _spin_kg2nj_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){._aboutblock_kg2nj_3{padding:2rem 1rem;gap:2rem}._aboutblock__header__htitle_kg2nj_25{margin-bottom:1rem}._aboutblock__header__textblock_kg2nj_45{grid-template-columns:1fr}._aboutblock__header__textblock__card__content_kg2nj_96 p{font-size:1.05rem}._aboutblock__social__links_kg2nj_221{width:100%;max-width:100%}}@media (max-width: 480px){._aboutblock_kg2nj_3{padding:1.5rem 1rem}._aboutblock__header__htitle_kg2nj_25{font-size:1.8rem}._aboutblock__header__htitle_kg2nj_25:after{width:40px}._aboutblock__header__textblock__card__content_kg2nj_96 p{font-size:1.1rem;line-height:1.5}._aboutblock__divider__icon_kg2nj_153{font-size:1.4rem}}._member_17rw5_2{position:relative;display:flex;align-items:center;padding:20px;border-radius:16px;width:100%;max-width:340px;min-height:120px;overflow:hidden;background-color:var(--bg-primary);border:1px solid var(--border-color);transition:all .3s ease;box-shadow:0 5px 15px rgba(0,0,0,.05)}._member_17rw5_2:hover{transform:translateY(-5px);box-shadow:0 12px 30px rgba(0,0,0,.1)}._member_17rw5_2:hover ._member__info__details__name_17rw5_21:after{transform:scaleX(1);transform-origin:left}._member_17rw5_2:hover ._member__imageContainer_17rw5_25{transform:scale(1.05)}._member__imageWrapper_17rw5_28{position:relative;min-width:80px;width:80px;height:80px;overflow:hidden;border-radius:50%;z-index:1}._member__imageWrapper_17rw5_28:after{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:linear-gradient(45deg,var(--accent),transparent);border-radius:50%;z-index:-1;animation:_borderRotate_17rw5_1 4s linear infinite}._member__imageContainer_17rw5_25{width:100%;height:100%;overflow:hidden;border-radius:50%;background:var(--bg-primary);display:flex;align-items:center;justify-content:center;transition:transform .35s ease;border:3px solid var(--bg-primary)}._member__imageContainer_17rw5_25 a{width:100%;height:100%;display:block}._member__image_17rw5_25{width:100%;height:100%;object-fit:cover;border-radius:50%;transition:filter .3s ease}._member__info_17rw5_21{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:8px;flex:1;padding-left:20px}._member__info__details_17rw5_21{display:flex;flex-direction:column;gap:4px}._member__info__details__name_17rw5_21{font-size:1.4rem;margin:0;color:var(--text-primary);position:relative;display:inline-block;font-weight:600;letter-spacing:.5px;width:fit-content}._member__info__details__name_17rw5_21:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:2px;background:var(--accent);transform:scaleX(0);transform-origin:right;transition:transform .4s ease}._member__info__details__link_17rw5_109{color:var(--text-primary);text-decoration:none;transition:color .3s ease;position:relative}._member__info__details__link_17rw5_109:hover{color:var(--accent)}._member__info__details__link_17rw5_109:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:2px;background:var(--accent);transform:scaleX(0);transform-origin:right;transition:transform .4s ease}._member__info__details__link_17rw5_109:hover:after{transform:scaleX(1);transform-origin:left}._member__info__details__role_17rw5_134{font-size:1.1rem;color:var(--text-secondary);font-style:italic;margin-top:2px}._member__info__bio_17rw5_140{font-size:1rem;line-height:1.5;color:var(--text-secondary);margin-top:5px;margin-bottom:0}._member--igor_17rw5_147{position:relative;overflow:hidden}._member--igor_17rw5_147:before{content:"✧";position:absolute;top:15px;right:15px;font-size:1.5rem;color:var(--accent);opacity:.8;animation:_rotate_17rw5_1 8s linear infinite}._member--igor_17rw5_147:after{content:"";position:absolute;top:-30px;right:-30px;width:60px;height:60px;background:radial-gradient(circle,var(--accent) 0%,transparent 70%);opacity:.15;z-index:0}._member--lesya_17rw5_172{position:relative;overflow:hidden}._member--lesya_17rw5_172:before{content:"♥";position:absolute;top:15px;right:15px;font-size:1.5rem;color:var(--accent);opacity:.8;animation:_heartbeat_17rw5_1 2s infinite ease-in-out}._member--lesya_17rw5_172:after{content:"";position:absolute;bottom:-20px;left:-20px;width:60px;height:60px;background:radial-gradient(circle,var(--accent) 0%,transparent 70%);opacity:.15;z-index:0}[data-theme=dark] ._member_17rw5_2{background-color:var(--bg-secondary);border-color:var(--border-color);box-shadow:0 5px 15px rgba(0,0,0,.2)}[data-theme=dark] ._member_17rw5_2:hover{box-shadow:0 12px 30px rgba(0,0,0,.3)}[data-theme=dark] ._member_17rw5_2 ._member__imageContainer_17rw5_25{border-color:var(--bg-secondary)}[data-theme=dark] ._member_17rw5_2:after{opacity:.25}@keyframes _borderRotate_17rw5_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _heartbeat_17rw5_1{0%,to{transform:scale(1)}50%{transform:scale(1.2);opacity:1}}@keyframes _rotate_17rw5_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _float_17rw5_1{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}@media (max-width: 768px){._member_17rw5_2{padding:15px;min-height:100px;max-width:100%;flex-direction:row}._member__imageWrapper_17rw5_28{min-width:70px;width:70px;height:70px}._member__info_17rw5_21{padding-left:15px}._member__info__details__name_17rw5_21{font-size:1.2rem}._member__info__details__role_17rw5_134{font-size:.95rem}._member__info__bio_17rw5_140{font-size:1.1rem;line-height:1.4}._member--igor_17rw5_147:before,._member--lesya_17rw5_172:before{font-size:1.3rem;top:10px;right:10px}}@media (max-width: 480px){._member_17rw5_2{padding:12px;min-height:90px}._member__imageWrapper_17rw5_28{min-width:60px;width:60px;height:60px}._member__info_17rw5_21{padding-left:15px}._member__info__details__name_17rw5_21{font-size:1.1rem}._member__info__details__role_17rw5_134{font-size:.9rem}._member__info__bio_17rw5_140{font-size:1rem;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}._member--igor_17rw5_147:before,._member--lesya_17rw5_172:before{font-size:1.2rem;top:8px;right:8px}}._button_n0lbf_1{font-family:graphb;background:var(--text-color);color:var(--background-color);font-size:20px;border:none;border-radius:.7em;letter-spacing:.08em;position:relative;display:flex;align-content:center;align-items:center;overflow:hidden;height:2.5em;padding:.35em .92em .35em 2.8em;z-index:1}._button_n0lbf_1 ._icon_n0lbf_21{background:var(--background-color);height:2em;width:2em;border-radius:2em;position:absolute;display:flex;align-items:center;justify-content:center;left:.4em;transition:all .5s}._icon_n0lbf_21 svg{margin-left:.1em;transition:all .5s;color:var(--text-color);width:2.5rem;height:2.5rem;position:absolute;right:18%}._button_n0lbf_1:hover ._icon_n0lbf_21 svg{transform:rotate(360deg);right:40%}._button_n0lbf_1:hover ._icon_n0lbf_21{width:calc(100% - 1.5rem);border-radius:.5em}._main_1s4pe_1{max-width:1500px;width:100%;min-height:100vh;position:relative;display:flex;flex-direction:column;gap:20px;padding:1% 6%;background:rgba(255,255,255,.85);backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,.1);border:1px solid rgba(255,255,255,.2)}._main_1s4pe_1:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(135deg,rgba(255,255,255,.2),rgba(255,255,255,0));border-radius:12px;pointer-events:none}[data-theme=dark] ._main_1s4pe_1{background:rgba(20,18,18,.85);box-shadow:0 8px 32px rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.1)}[data-theme=dark] ._main_1s4pe_1:before{background:linear-gradient(135deg,rgba(50,50,70,.3),rgba(10,10,20,0))}._main__header_1s4pe_35{max-width:200px;display:flex;gap:10px;align-items:end}._main__header__pic_1s4pe_41{max-width:80px;min-height:80px;aspect-ratio:1;display:flex;align-items:center;justify-content:center;transition:filter .3s ease}._main__header__pic_1s4pe_41 img{width:100%;height:100%;object-fit:contain}._main__header__pic_1s4pe_41._darkTheme_1s4pe_55{filter:invert(.8) brightness(1.5) hue-rotate(180deg)}._main__header__title_1s4pe_58{font-size:2rem;color:var(--text-color)}._main__header__logo_1s4pe_62{max-width:160px;height:auto;object-fit:contain;margin-right:1rem}._main__nav_1s4pe_68{display:flex;justify-content:space-between;align-items:center;position:relative}._main__nav__perexod_1s4pe_74{display:flex;gap:20px;list-style:none;font-size:clamp(2rem,2vw,3rem);font-family:var(--font-bold)}._main__nav__perexod__link_1s4pe_81 a{color:var(--text-color)}._main__nav__auth_1s4pe_84{display:flex;align-items:center}._main__nav__burger_1s4pe_88{display:none;flex-direction:column;justify-content:space-between;width:30px;height:25px;cursor:pointer;z-index:1001;padding:0;background:none;border:none;transition:all .3s ease}._main__nav__burger__line_1s4pe_101{width:100%;height:2px;background:var(--text-color, #333);transition:all .3s cubic-bezier(.4,0,.2,1);transform-origin:left center}[data-theme=light] ._main__nav__burger__line_1s4pe_101{background:#333}[data-theme=dark] ._main__nav__burger__line_1s4pe_101{background:#fff}._main__nav__burger_1s4pe_88._open_1s4pe_114 ._main__nav__burger__line_1s4pe_101:first-child{transform:rotate(45deg)}._main__nav__burger_1s4pe_88._open_1s4pe_114 ._main__nav__burger__line_1s4pe_101:nth-child(2){opacity:0}._main__nav__burger_1s4pe_88._open_1s4pe_114 ._main__nav__burger__line_1s4pe_101:last-child{transform:rotate(-45deg)}._main__nav__mobile_1s4pe_123{position:fixed;top:0;right:-100%;width:80%;max-width:300px;height:100vh;background:var(--bg-primary);z-index:1000;padding:80px 20px 20px;transition:right .3s cubic-bezier(.4,0,.2,1);box-shadow:-5px 0 15px rgba(0,0,0,.1);border-left:1px solid var(--border)}[data-theme=dark] ._main__nav__mobile_1s4pe_123{background:#1e1e23;border-left:1px solid rgba(255,255,255,.1);box-shadow:-5px 0 15px rgba(0,0,0,.3)}._main__nav__mobile_1s4pe_123._open_1s4pe_114{right:0}._main__nav__mobile__list_1s4pe_145{list-style:none;padding:0;margin:0}._main__nav__mobile__list__item_1s4pe_150{margin-bottom:15px}._main__nav__mobile__list__item_1s4pe_150 a{display:block;padding:12px 15px;color:var(--text-primary);text-decoration:none;font-size:16px;border-radius:8px;transition:all .2s ease}._main__nav__mobile__list__item_1s4pe_150 a:hover{background:var(--bg-highlight);color:var(--accent)}@media (max-width: 768px){._main_1s4pe_1{padding:1% 0%}._main__nav__perexod_1s4pe_74{display:none}._main__nav__burger_1s4pe_88{display:flex;margin-right:10px}._main__nav__auth_1s4pe_84{margin-left:auto}}._characters_1s4pe_182{display:flex;justify-content:center;align-items:center;width:100%}._homepage_1s4pe_189{max-width:800px;margin:0 auto;padding:20px}._loading_1s4pe_195,._error_1s4pe_195{display:flex;justify-content:center;align-items:center;height:200px;font-size:18px;color:var(--text-primary)}._error_1s4pe_195{color:#e74c3c}._postsList_1s4pe_208{display:flex;flex-direction:column;gap:20px}._postCard_1s4pe_214{background-color:var(--bg-secondary);border-radius:8px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,.1)}._postTitle_1s4pe_221{font-size:22px;margin-bottom:10px;color:var(--text-primary)}._postMeta_1s4pe_227{display:flex;justify-content:space-between;margin-bottom:15px;font-size:14px;color:var(--text-secondary)}._postImage_1s4pe_235{margin-bottom:15px}._postImage_1s4pe_235 img{width:100%;max-height:400px;object-fit:cover;border-radius:4px}._postContent_1s4pe_245{color:var(--text-primary);line-height:1.5;white-space:pre-wrap}._noPostsMessage_1s4pe_251{text-align:center;color:var(--text-secondary);padding:40px 0}._perkBase_co662_18{font-weight:600!important;font-size:inherit!important;line-height:inherit!important;font-family:inherit!important;letter-spacing:inherit!important;display:inline-block!important}._sponsorPerk_co662_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)!important}._earlyUserPerk_co662_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)!important}._adminPerk_co662_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)!important}._userPerk_co662_45{color:var(--user-color)!important;text-shadow:none!important}._authContainer_co662_51{position:relative;z-index:10}._loginButton_co662_56{background:linear-gradient(90deg,#666,#444);color:#fff;border:none;padding:10px 20px;border-radius:30px;font-size:1.2rem;font-weight:600;cursor:pointer;transition:all .3s;box-shadow:0 4px 10px rgba(0,0,0,.2);position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;gap:8px;letter-spacing:.5px}._loginButton_co662_56:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(0,0,0,.3);background:linear-gradient(90deg,#777,#555)}._loginButton_co662_56:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.2),transparent);transform:rotate(45deg);transition:all .5s;opacity:0}._loginButton_co662_56:hover:before{animation:_shine_co662_1 1.5s infinite}[data-theme=light] ._loginButton_co662_56{background:linear-gradient(90deg,#888,#666);box-shadow:0 4px 10px rgba(100,100,100,.2)}[data-theme=light] ._loginButton_co662_56:hover{background:linear-gradient(90deg,#999,#777);box-shadow:0 6px 15px rgba(100,100,100,.3)}._userProfile_co662_104{position:relative;display:flex;justify-content:center}._profileButton_co662_110{display:flex;align-items:center;background:rgba(50,50,55,.7);border:1px solid rgba(100,100,100,.2);padding:6px 14px 6px 6px;cursor:pointer;border-radius:30px;transition:all .3s;backdrop-filter:blur(4px);box-shadow:0 4px 10px rgba(0,0,0,.1)}._profileButton_co662_110:hover{background:rgba(60,60,65,.8);transform:translateY(-2px);box-shadow:0 6px 15px rgba(0,0,0,.15)}[data-theme=light] ._profileButton_co662_110{background:rgba(240,240,245,.7);border:1px solid rgba(180,180,180,.3);box-shadow:0 4px 10px rgba(100,100,100,.1)}[data-theme=light] ._profileButton_co662_110:hover{background:rgba(245,245,250,.9);box-shadow:0 6px 15px rgba(100,100,100,.15)}._avatar_co662_137{width:42px;height:42px;border-radius:50%;object-fit:cover;margin-right:10px;border:2px solid rgba(150,150,150,.5);box-shadow:0 2px 5px rgba(0,0,0,.1)}[data-theme=light] ._avatar_co662_137{border:2px solid rgba(100,100,100,.3)}._username_co662_150{font-size:1.2rem;font-weight:600;color:#e0e0e0;max-width:150px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}@media (max-width: 600px){._username_co662_150{max-width:100px;font-size:1rem}}[data-theme=light] ._username_co662_150{color:#333}._username_co662_150._sponsorPerk_co662_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)}._username_co662_150._earlyUserPerk_co662_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)}._username_co662_150._adminPerk_co662_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)}._userMenu_co662_181{position:absolute;top:115%;right:0;background:rgba(36,36,40,.95);backdrop-filter:blur(10px);border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.3),0 0 15px rgba(255,255,255,.05) inset;min-width:200px;overflow:hidden;border:1px solid rgba(100,100,100,.2);z-index:1000;padding:5px}._userMenu_co662_181:before{content:"";position:absolute;top:-7px;right:20px;transform:rotate(45deg);width:20px;height:20px;background:rgba(36,36,40,.95);border-left:1px solid rgba(100,100,100,.2);border-top:1px solid rgba(100,100,100,.2);z-index:-1}._userMenu_co662_181 ul{list-style:none;margin:0;padding:5px}._userMenu_co662_181 li{margin:5px 0}._userMenu_co662_181 li:last-child{margin-top:5px}[data-theme=light] ._userMenu_co662_181{background:rgba(250,250,255,.95);box-shadow:0 10px 25px rgba(0,0,0,.15),0 0 15px rgba(255,255,255,.1) inset;border:1px solid rgba(200,200,200,.3)}[data-theme=light] ._userMenu_co662_181:before{background:rgba(250,250,255,.95);border-left:1px solid rgba(200,200,200,.3);border-top:1px solid rgba(200,200,200,.3)}._menuItem_co662_230{display:block;width:100%;text-align:left;padding:10px 14px;background:rgba(32,32,37,.7);border:none;border-radius:8px;font-size:1.2rem;color:#e0e0e0;cursor:pointer;font-weight:500;transition:all .25s;display:flex;align-items:center;gap:10px;position:relative;overflow:hidden}._menuItem_co662_230:before{content:"";position:absolute;left:0;top:0;height:100%;width:3px;background:transparent;transition:all .25s}._menuItem_co662_230 svg{color:#8e8e9a;stroke-width:2px;transition:all .25s}._menuItem_co662_230:hover{background:rgba(45,45,50,.9);transform:translateY(-2px)}._menuItem_co662_230:hover svg{color:#a0a0b0}[data-theme=light] ._menuItem_co662_230{background:rgba(240,240,245,.7);color:#333}[data-theme=light] ._menuItem_co662_230 svg{color:#6a6a75}[data-theme=light] ._menuItem_co662_230:hover{background:rgba(230,230,235,.9)}[data-theme=light] ._menuItem_co662_230:hover svg{color:#555565}._logoutButton_co662_285{color:#f0f0f0;background:rgba(210,40,60,.25)}._logoutButton_co662_285:before{background:rgba(210,40,60,.6)}._logoutButton_co662_285 svg{color:rgba(210,60,80,.9);filter:drop-shadow(0 0 2px rgba(210,40,60,.3))}._logoutButton_co662_285:hover{background:rgba(220,50,70,.35)}._logoutButton_co662_285:hover:before{background:rgba(220,50,70,.8)}._logoutButton_co662_285:hover svg{color:#e1465a}[data-theme=light] ._logoutButton_co662_285{color:#333;background:rgba(220,53,69,.1)}[data-theme=light] ._logoutButton_co662_285:before{background:rgba(220,53,69,.4)}[data-theme=light] ._logoutButton_co662_285 svg{color:rgba(200,50,60,.8);filter:drop-shadow(0 0 1px rgba(200,50,60,.2))}[data-theme=light] ._logoutButton_co662_285:hover{background:rgba(220,53,69,.2)}[data-theme=light] ._logoutButton_co662_285:hover:before{background:rgba(220,53,69,.6)}[data-theme=light] ._logoutButton_co662_285:hover svg{color:#c82832}._adminButton_co662_326{color:#f0f0f0;background:linear-gradient(90deg,rgba(100,100,110,.3),rgba(80,80,90,.3));position:relative;overflow:hidden}._adminButton_co662_326:before{background:rgba(80,140,200,.6)}._adminButton_co662_326 svg{color:rgba(70,150,210,.9);filter:drop-shadow(0 0 2px rgba(70,150,210,.3))}._adminButton_co662_326:after{content:"";position:absolute;top:0;right:0;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(70,150,210,.1),transparent);opacity:0;transition:opacity .3s ease}._adminButton_co662_326:hover{background:linear-gradient(90deg,rgba(110,110,120,.35),rgba(90,90,100,.35))}._adminButton_co662_326:hover:before{background:rgba(80,160,220,.8)}._adminButton_co662_326:hover:after{opacity:1}._adminButton_co662_326:hover svg{color:#50a0e6}[data-theme=light] ._adminButton_co662_326{color:#333;background:linear-gradient(90deg,rgba(230,230,240,.5),rgba(210,210,220,.5))}[data-theme=light] ._adminButton_co662_326:before{background:rgba(60,120,190,.5)}[data-theme=light] ._adminButton_co662_326 svg{color:rgba(50,120,180,.9);filter:drop-shadow(0 0 1px rgba(50,120,180,.2))}[data-theme=light] ._adminButton_co662_326:hover{background:linear-gradient(90deg,rgba(220,220,230,.6),rgba(200,200,210,.6))}[data-theme=light] ._adminButton_co662_326:hover:before{background:rgba(60,130,200,.7)}[data-theme=light] ._adminButton_co662_326:hover svg{color:#2878c8}@keyframes _shine_co662_1{0%{left:-150%;opacity:0}50%{opacity:.4}to{left:150%;opacity:0}}._profileMenuItem_co662_396:before{background:rgba(120,180,120,.6)}._profileMenuItem_co662_396 svg{color:rgba(120,180,120,.9);filter:drop-shadow(0 0 2px rgba(120,180,120,.3))}._profileMenuItem_co662_396:hover:before{background:rgba(130,200,130,.8)}._profileMenuItem_co662_396:hover svg{color:#8cd28c}[data-theme=light] ._profileMenuItem_co662_396:before{background:rgba(100,160,100,.5)}[data-theme=light] ._profileMenuItem_co662_396 svg{color:rgba(100,160,100,.9);filter:drop-shadow(0 0 1px rgba(100,160,100,.2))}[data-theme=light] ._profileMenuItem_co662_396:hover:before{background:rgba(110,180,110,.7)}[data-theme=light] ._profileMenuItem_co662_396:hover svg{color:#5a965a}._feedbackButton_co662_423:before{background:rgba(180,130,200,.6)}._feedbackButton_co662_423 svg{color:rgba(180,130,200,.9);filter:drop-shadow(0 0 2px rgba(180,130,200,.3))}._feedbackButton_co662_423:hover:before{background:rgba(200,140,220,.8)}._feedbackButton_co662_423:hover svg{color:#d296e6}[data-theme=light] ._feedbackButton_co662_423:before{background:rgba(160,110,180,.5)}[data-theme=light] ._feedbackButton_co662_423 svg{color:rgba(160,110,180,.9);filter:drop-shadow(0 0 1px rgba(160,110,180,.2))}[data-theme=light] ._feedbackButton_co662_423:hover:before{background:rgba(170,120,190,.7)}[data-theme=light] ._feedbackButton_co662_423:hover svg{color:#9664aa}@media (max-width: 768px){._avatar_co662_137{width:36px;height:36px}._username_co662_150{font-size:1rem}._profileButton_co662_110{padding:4px 10px 4px 4px}._userMenu_co662_181{right:0;min-width:180px}._userMenu_co662_181:before{right:20px}}._backdrop_1kje4_1{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,rgba(var(--modal-bg-rgb, 33, 33, 38),.85),rgba(var(--modal-bg-end-rgb, 68, 68, 77),.85));display:flex;justify-content:center;align-items:center;z-index:10000;backdrop-filter:blur(8px);perspective:1000px;box-sizing:border-box;overscroll-behavior:contain;transform:translateZ(0);isolation:isolate}._modal_1kje4_20{position:relative;max-width:450px;width:90%;border-radius:var(--radius-xl);background:var(--modal-bg);backdrop-filter:blur(10px);border:1px solid var(--modal-border);box-shadow:var(--modal-shadow);overflow:hidden;z-index:10001!important;padding:0;transform-style:preserve-3d;margin:auto;max-height:90vh;display:flex;flex-direction:column}._modalContent_1kje4_39{padding:30px;position:relative;z-index:5;overflow-y:auto;flex:1}._closeButton_1kje4_47{position:absolute;top:15px;right:15px;background:rgba(var(--accent-rgb),.1);border:none;font-size:20px;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--text-primary);cursor:pointer;z-index:10;box-shadow:var(--shadow);transition:all var(--transition-fast)}._closeButton_1kje4_47:hover{background:rgba(var(--accent-rgb),.2);transform:scale(1.05)}._formWrapper_1kje4_71{width:100%;position:relative;z-index:10}._formWrapper_1kje4_71 h2{font-size:2rem;margin-bottom:30px;color:var(--text-primary);text-align:center;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.1);background:linear-gradient(135deg,var(--gradient-start, #ffffff),var(--gradient-end, #a0a0a0));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}._formWrapper_1kje4_71 input{background:var(--bg-input);border:1px solid var(--border);color:var(--text-primary);position:relative;z-index:15;width:100%;padding:12px;border-radius:6px}._formWrapper_1kje4_71 input::placeholder{color:var(--text-tertiary)}._formWrapper_1kje4_71 input:focus{box-shadow:0 0 0 2px var(--accent-light);border-color:var(--accent);background:var(--bg-highlight);outline:none}._formWrapper_1kje4_71 .form-group{position:relative;z-index:20;margin-bottom:20px}._formWrapper_1kje4_71 label{color:var(--text-secondary);font-weight:500;display:block;margin-bottom:8px;position:relative;z-index:15}._formWrapper_1kje4_71 .submitButton{background:linear-gradient(90deg,var(--accent),var(--accent-hover));border-radius:var(--radius-full);font-weight:600;letter-spacing:.5px;padding:12px;box-shadow:var(--shadow);transform:translateY(0);transition:all var(--transition-normal);position:relative;overflow:hidden}._formWrapper_1kje4_71 .submitButton:hover:not(:disabled){background:linear-gradient(90deg,var(--accent-hover),var(--accent));transform:translateY(-2px);box-shadow:var(--shadow-hover)}._formWrapper_1kje4_71 .submitButton:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.2),transparent);transform:rotate(45deg);transition:all .5s;opacity:0}._formWrapper_1kje4_71 .submitButton:hover:not(:disabled):before{animation:shine 1.5s infinite}._formWrapper_1kje4_71 .switchButton{color:var(--text-tertiary);font-weight:600;transition:all var(--transition-fast)}._formWrapper_1kje4_71 .switchButton:hover:not(:disabled){color:var(--text-primary);transform:translateY(-1px)}._formWrapper_1kje4_71 p{color:var(--text-secondary)}._formWrapper_1kje4_71 .errorMessage{background-color:rgba(var(--error-rgb, 220, 53, 69),.15);border-left:3px solid var(--error);color:var(--text-primary)}._patternOverlay_1kje4_170{position:absolute;top:0;left:0;right:0;bottom:0;opacity:.05;background-image:linear-gradient(30deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(150deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(30deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(150deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(60deg,rgba(var(--accent-rgb),.2) 25%,transparent 25.5%,transparent 75%,rgba(var(--accent-rgb),.2) 75%,rgba(var(--accent-rgb),.2));background-size:40px 70px;mix-blend-mode:overlay;z-index:1;pointer-events:none}@keyframes _shine_1kje4_1{0%{left:-200%;opacity:0}20%{opacity:1}to{left:100%;opacity:0}}@media (max-width: 600px){._backdrop_1kje4_1{align-items:center;padding:0}._modal_1kje4_20{width:100%;max-height:min(100vh - 40px,600px);border-radius:12px;margin:0 10px}._modalContent_1kje4_39{padding:24px 20px;overflow:hidden}}.ban-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:1200;backdrop-filter:blur(4px)}[data-theme=dark] .ban-modal-overlay{background-color:rgba(0,0,0,.75)}.ban-modal{background-color:var(--background-color, white);border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,.25);width:90%;max-width:480px;overflow:hidden}[data-theme=dark] .ban-modal{box-shadow:0 8px 30px rgba(0,0,0,.4)}.ban-modal-header{background-color:#e74c3c;color:#fff;padding:20px;position:relative;display:flex;flex-direction:column;align-items:center;text-align:center}.ban-modal-header h2{margin:15px 0 0;font-size:22px;font-weight:600}.ban-modal-header .ban-close-button{position:absolute;top:15px;right:15px;background:none;border:none;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:50%;padding:6px;transition:background-color .2s}.ban-modal-header .ban-close-button:hover{background-color:rgba(255,255,255,.2)}.ban-modal-header .ban-icon-wrapper{display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:50%;width:60px;height:60px}.ban-modal-header .ban-icon-wrapper .ban-icon{color:#e74c3c;font-size:30px}[data-theme=dark] .ban-modal-header{background-color:#c0392b}.ban-modal-content{padding:25px}[data-theme=dark] .ban-modal-content{color:var(--text-primary, #e0e0e0)}.ban-details{display:flex;flex-direction:column;gap:20px;margin-bottom:25px}.ban-details .ban-reason,.ban-details .ban-admin,.ban-details .ban-time{display:flex;align-items:flex-start;gap:15px}.ban-details .ban-reason .ban-detail-icon,.ban-details .ban-admin .ban-detail-icon,.ban-details .ban-time .ban-detail-icon{font-size:22px;color:#e74c3c;flex-shrink:0;margin-top:3px}[data-theme=dark] .ban-details .ban-reason .ban-detail-icon,[data-theme=dark] .ban-details .ban-admin .ban-detail-icon,[data-theme=dark] .ban-details .ban-time .ban-detail-icon{color:#e67e22}.ban-details .ban-reason h3,.ban-details .ban-admin h3,.ban-details .ban-time h3{margin:0 0 8px;font-size:15px;font-weight:600;color:var(--text-secondary, #666)}[data-theme=dark] .ban-details .ban-reason h3,[data-theme=dark] .ban-details .ban-admin h3,[data-theme=dark] .ban-details .ban-time h3{color:#aaa}.ban-details .ban-reason p,.ban-details .ban-admin p,.ban-details .ban-time p{margin:0;padding:10px 15px;background-color:rgba(0,0,0,.05);border-radius:6px;font-size:14px;line-height:1.5;color:var(--text-primary, #333)}[data-theme=dark] .ban-details .ban-reason p,[data-theme=dark] .ban-details .ban-admin p,[data-theme=dark] .ban-details .ban-time p{background-color:rgba(255,255,255,.08)}.ban-details .ban-reason p.ban-permanent,.ban-details .ban-admin p.ban-permanent,.ban-details .ban-time p.ban-permanent{color:#c0392b;font-weight:600}[data-theme=dark] .ban-details .ban-reason p.ban-permanent,[data-theme=dark] .ban-details .ban-admin p.ban-permanent,[data-theme=dark] .ban-details .ban-time p.ban-permanent{color:#e74c3c}.ban-details .ban-reason p.ban-short,.ban-details .ban-admin p.ban-short,.ban-details .ban-time p.ban-short{color:#27ae60}[data-theme=dark] .ban-details .ban-reason p.ban-short,[data-theme=dark] .ban-details .ban-admin p.ban-short,[data-theme=dark] .ban-details .ban-time p.ban-short{color:#2ecc71}.ban-details .ban-reason p.ban-medium,.ban-details .ban-admin p.ban-medium,.ban-details .ban-time p.ban-medium{color:#f39c12}[data-theme=dark] .ban-details .ban-reason p.ban-medium,[data-theme=dark] .ban-details .ban-admin p.ban-medium,[data-theme=dark] .ban-details .ban-time p.ban-medium{color:#f1c40f}.ban-details .ban-reason p.ban-long,.ban-details .ban-admin p.ban-long,.ban-details .ban-time p.ban-long{color:#e67e22}[data-theme=dark] .ban-details .ban-reason p.ban-long,[data-theme=dark] .ban-details .ban-admin p.ban-long,[data-theme=dark] .ban-details .ban-time p.ban-long{color:#e74c3c}.ban-message{padding:15px;background-color:rgba(231,76,60,.07);border-radius:6px;border-left:3px solid #e74c3c;margin-bottom:25px}.ban-message p{margin:0;font-size:14px;line-height:1.5;color:var(--text-secondary, #666)}[data-theme=dark] .ban-message p{color:#bbb}[data-theme=dark] .ban-message{background-color:rgba(231,76,60,.15);border-color:#c0392b}.ban-ok-button{display:block;width:100%;padding:12px;background-color:#e74c3c;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s}.ban-ok-button:hover,[data-theme=dark] .ban-ok-button{background-color:#c0392b}[data-theme=dark] .ban-ok-button:hover{background-color:#a93226}@media (max-width: 480px){.ban-modal{width:95%;max-height:90vh;overflow-y:auto}.ban-modal-header h2{font-size:20px}.ban-details{gap:15px}}._form_16czx_1{display:flex;flex-direction:column;width:100%}._title_16czx_7{font-size:1.5rem;font-weight:600;margin-bottom:1.5rem;text-align:center;color:var(--text-primary)}._error_16czx_15{background-color:var(--error-light, rgba(239, 68, 68, .1));color:var(--error);padding:10px;border-radius:var(--radius-md);margin-bottom:16px;font-size:.875rem}._field_16czx_24{margin-bottom:16px}._label_16czx_28{display:block;margin-bottom:6px;font-size:.875rem;font-weight:500;color:var(--text-secondary)}._input_16czx_36{width:100%;padding:10px 12px;font-size:1rem;border:1px solid var(--border);border-radius:var(--radius-md);background-color:var(--bg-input);color:var(--text-primary);transition:border-color var(--transition-fast)}._input_16czx_36:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light)}._input_16czx_36::placeholder{color:var(--text-tertiary)}._input_16czx_36:disabled{background-color:var(--bg-highlight);cursor:not-allowed}._forgotPassword_16czx_59{text-align:right;margin-bottom:16px}._textButton_16czx_64{background:none;border:none;color:var(--accent);font-size:.875rem;cursor:pointer;padding:0}._textButton_16czx_64:hover{text-decoration:underline;color:var(--accent-hover)}._submitButton_16czx_77{padding:10px 16px;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:1rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}._submitButton_16czx_77:hover:not(:disabled){background-color:var(--accent-hover)}._terms_16czx_96{margin-bottom:16px;font-size:.75rem;color:var(--text-tertiary);text-align:center}._link_16czx_103{color:var(--accent);text-decoration:none}._link_16czx_103:hover{text-decoration:underline;color:var(--accent-hover)}._formContainer_16czx_112{display:flex;flex-direction:column;width:100%;color:var(--text-primary)}._formContainer_16czx_112 h2{text-align:center;margin-bottom:30px;color:var(--text-primary);font-size:28px;font-weight:700;letter-spacing:.5px;text-shadow:0 2px 4px rgba(0,0,0,.1);background:linear-gradient(135deg,var(--gradient-start, #ffffff),var(--gradient-end, #a0a0a0));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}._errorMessage_16czx_133{background-color:rgba(var(--error-rgb, 220, 53, 69),.15);border-left:3px solid var(--error);color:var(--text-primary);padding:12px 15px;border-radius:var(--radius-md);margin-bottom:20px;font-size:14px;box-shadow:var(--shadow)}._formGroup_16czx_144{margin-bottom:24px}._formGroup_16czx_144 label{display:flex;align-items:center;margin-bottom:10px;color:var(--text-secondary);font-weight:500;font-size:16px}._formGroup_16czx_144 ._inputIcon_16czx_155{margin-right:8px;font-size:18px;color:var(--text-tertiary)}._formGroup_16czx_144 ._inputWrapper_16czx_160{position:relative;width:100%}._formGroup_16czx_144 ._inputIconInside_16czx_164{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-tertiary);font-size:16px;pointer-events:none;opacity:.9;z-index:30}._formGroup_16czx_144 ._inputIconInside_16czx_164 svg{stroke-width:2px}._formGroup_16czx_144 input{width:100%;padding:14px 14px 14px 40px;border:1px solid var(--border);border-radius:var(--radius-md);background-color:var(--bg-input);color:var(--text-primary);font-size:16px;transition:all var(--transition-normal);position:relative;z-index:25}._formGroup_16czx_144 input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light);background-color:var(--bg-highlight)}._formGroup_16czx_144 input:disabled{opacity:.7;cursor:not-allowed}._formGroup_16czx_144 input::placeholder{color:var(--text-tertiary)}._charCounter_16czx_204{display:block;text-align:right;margin-top:4px;font-size:12px;color:var(--text-tertiary);transition:color var(--transition-fast)}._submitButton_16czx_77{width:100%;padding:14px;background:linear-gradient(90deg,var(--accent),var(--accent-hover));color:#fff;border:none;border-radius:var(--radius-full);font-size:16px;font-weight:600;cursor:pointer;margin-bottom:20px;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden;box-shadow:var(--shadow)}._submitButton_16czx_77 ._buttonIcon_16czx_231{margin-right:8px;font-size:18px}._submitButton_16czx_77:hover:not(:disabled){background:linear-gradient(90deg,var(--accent-hover),var(--accent));box-shadow:var(--shadow-hover);transform:translateY(-2px)}._submitButton_16czx_77:disabled{opacity:.7;cursor:not-allowed}._submitButton_16czx_77:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(to right,rgba(255,255,255,0),rgba(255,255,255,.2),rgba(255,255,255,0));transform:rotate(45deg);opacity:0;transition:all .5s}._submitButton_16czx_77:hover:not(:disabled):before{animation:_shimmer_16czx_1 1.5s infinite}._switchForm_16czx_260{display:flex;flex-direction:column;align-items:center;margin-top:10px}._switchForm_16czx_260 p{color:var(--text-secondary);margin-bottom:8px;font-size:15px}._switchButton_16czx_272{background:none;border:none;color:var(--text-tertiary);font-weight:600;font-size:15px;cursor:pointer;padding:0;position:relative;z-index:1;transition:all var(--transition-fast)}._switchButton_16czx_272:after{content:"";position:absolute;width:100%;height:2px;bottom:-2px;left:0;background:linear-gradient(90deg,var(--accent),var(--accent-hover));transform:scaleX(0);transform-origin:bottom right;transition:transform .3s ease-out}._switchButton_16czx_272:hover:not(:disabled){color:var(--text-primary)}._switchButton_16czx_272:hover:not(:disabled):after{transform:scaleX(1);transform-origin:bottom left}._switchButton_16czx_272:disabled{opacity:.7;cursor:not-allowed}@keyframes _shimmer_16czx_1{0%{left:-150%;opacity:0}50%{opacity:.4}to{left:150%;opacity:0}}@media (max-width: 600px){._formContainer_16czx_112 h2{font-size:24px;margin-bottom:20px}._formGroup_16czx_144{margin-bottom:18px}._formGroup_16czx_144 input{padding:12px 12px 12px 36px}}._perkBase_14u1w_18{font-weight:600!important;font-size:inherit!important;line-height:inherit!important;font-family:inherit!important;letter-spacing:inherit!important;display:inline-block!important}._sponsorPerk_14u1w_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)!important}._earlyUserPerk_14u1w_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)!important}._adminPerk_14u1w_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)!important}._userPerk_14u1w_45{color:var(--user-color)!important;text-shadow:none!important}:root{--sponsor-color: #ffcf4a;--sponsor-color-rgb: 255, 207, 74;--sponsor-shadow-color: rgba(255, 207, 74, .5);--early-user-color: #8bc9e3;--early-user-color-rgb: 139, 201, 227;--early-user-shadow-color: rgba(139, 201, 227, .5);--admin-color: #ff6b6b;--admin-color-rgb: 255, 107, 107;--admin-shadow-color: rgba(255, 107, 107, .5);--user-color: #888888;--user-color-rgb: 136, 136, 136;--user-shadow-color: rgba(136, 136, 136, .5)}._perkBase_1bbdr_18{font-weight:600!important;font-size:inherit!important;line-height:inherit!important;font-family:inherit!important;letter-spacing:inherit!important;display:inline-block!important}._sponsorPerk_1bbdr_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)!important}._earlyUserPerk_1bbdr_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)!important}._adminPerk_1bbdr_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)!important}._userPerk_1bbdr_45{color:var(--user-color)!important;text-shadow:none!important}._profileContainer_1bbdr_51{max-width:900px;margin:30px auto;padding:30px;background-color:var(--bg-secondary);border-radius:var(--radius-lg);box-shadow:var(--shadow)}@media (max-width: 600px){._profileContainer_1bbdr_51{padding:20px 15px}}._loading_1bbdr_65,._error_1bbdr_65{display:flex;justify-content:center;align-items:center;height:200px;font-size:18px;color:var(--text-primary)}._error_1bbdr_65{color:var(--error)}._profileHeader_1bbdr_78{display:flex;margin-bottom:40px}@media (max-width: 600px){._profileHeader_1bbdr_78{flex-direction:column;align-items:center}}._avatarSection_1bbdr_89{position:relative;margin-right:40px}@media (max-width: 600px){._avatarSection_1bbdr_89{margin-right:0;margin-bottom:20px}}._avatarContainer_1bbdr_100{position:relative;width:180px;height:180px;border-radius:50%;overflow:hidden}._profileAvatar_1bbdr_108{width:100%;height:100%;object-fit:cover;border:5px solid var(--accent);border-radius:50%;box-shadow:0 4px 10px rgba(0,0,0,.1)}._changeAvatarButton_1bbdr_117{display:flex;align-items:center;justify-content:center;gap:8px;background-color:var(--accent);color:#fff;border:none;border-radius:8px;padding:8px 16px;font-size:16px;font-weight:600;cursor:pointer;margin-top:16px;box-shadow:0 2px 6px rgba(0,0,0,.2);transition:all .2s ease}._changeAvatarButton_1bbdr_117:hover{background-color:var(--accent-dark);transform:translateY(-2px)}@media (max-width: 600px){._changeAvatarButton_1bbdr_117{position:absolute;bottom:0;right:0;width:auto;height:auto;padding:8px;border-radius:50%;background-color:var(--accent);color:#fff;font-size:0;margin:0;transform:translate(5px,-5px)}._changeAvatarButton_1bbdr_117 svg{font-size:18px}._changeAvatarButton_1bbdr_117:hover{transform:translate(5px,-5px) scale(1.1)}}._profileInfo_1bbdr_161{flex:1}._displayName_1bbdr_165{font-size:2rem!important;font-weight:700;margin-bottom:20px;text-shadow:0 1px 3px rgba(0,0,0,.3);line-height:1.2;word-wrap:break-word;word-break:break-word;overflow-wrap:break-word;max-width:100%}@media (max-width: 600px){._displayName_1bbdr_165{font-size:1.75rem!important;text-align:center}}._userMeta_1bbdr_183{display:grid;gap:15px}@media (max-width: 600px){._userMeta_1bbdr_183{width:100%}}._userRole_1bbdr_193,._userJoined_1bbdr_193,._userEmail_1bbdr_193,._userPrivileges_1bbdr_193{display:flex;align-items:flex-start;font-size:16px;flex-wrap:wrap}@media (max-width: 600px){._userRole_1bbdr_193,._userJoined_1bbdr_193,._userEmail_1bbdr_193,._userPrivileges_1bbdr_193{flex-direction:column;gap:5px}}._label_1bbdr_206{min-width:170px;font-weight:600;color:var(--text-secondary)}@media (max-width: 600px){._label_1bbdr_206{min-width:unset;width:100%}}._value_1bbdr_218{color:var(--text-primary);font-weight:500;word-wrap:break-word;word-break:break-word;overflow-wrap:break-word;max-width:100%}._privilegeContainer_1bbdr_227{display:flex;align-items:center;gap:15px;flex-wrap:wrap}@media (max-width: 600px){._privilegeContainer_1bbdr_227{width:100%}}._changePerkButton_1bbdr_239{background-color:var(--accent);color:#fff;border:none;border-radius:4px;padding:5px 10px;font-size:12px;cursor:pointer}._changePerkButton_1bbdr_239:hover{background-color:var(--accent-dark)}._adminActions_1bbdr_252,._personalSettings_1bbdr_252{margin-top:30px;padding-top:20px;border-top:1px solid var(--border)}._adminActions_1bbdr_252 h2,._personalSettings_1bbdr_252 h2{font-size:20px;margin-bottom:15px;color:var(--text-primary)}._adminActions_1bbdr_252 h2{display:flex;align-items:center;gap:10px}._adminActions_1bbdr_252 h2 svg{color:var(--accent)}._actionButtons_1bbdr_273{display:flex;gap:10px}._editButton_1bbdr_278,._banButton_1bbdr_278,._saveButton_1bbdr_278,._cancelButton_1bbdr_278{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-weight:500;display:flex;align-items:center;gap:6px}._editButton_1bbdr_278:hover,._banButton_1bbdr_278:hover,._saveButton_1bbdr_278:hover,._cancelButton_1bbdr_278:hover{opacity:.9}._editButton_1bbdr_278{background-color:var(--accent);color:#fff}._banButton_1bbdr_278{background-color:#e74c3c!important;color:#fff;position:relative;overflow:hidden}._banButton_1bbdr_278:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:.5s}._banButton_1bbdr_278:hover:before{left:100%}._banButton_1bbdr_278:hover:not(:disabled){background-color:#c0392b!important;transform:translateY(-3px);box-shadow:0 8px 15px rgba(231,76,60,.4)!important}._saveButton_1bbdr_278{background-color:#2ecc71;color:#fff}._cancelButton_1bbdr_278{background-color:#f1f1f1;color:#333}[data-theme=dark] ._cancelButton_1bbdr_278{background-color:#333;color:#f1f1f1}._settingGroup_1bbdr_336{margin-bottom:15px}._settingGroup_1bbdr_336 label{display:block;margin-bottom:5px;color:var(--text-secondary)}._settingControl_1bbdr_345{display:flex;gap:10px}._settingControl_1bbdr_345 input{flex:1;padding:8px;border:1px solid var(--border);border-radius:4px;background-color:var(--bg-primary);color:var(--text-primary)}._backdrop_1bbdr_359{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,rgba(var(--modal-bg-rgb, 33, 33, 38),.85),rgba(var(--modal-bg-end-rgb, 68, 68, 77),.85));display:flex;justify-content:center;align-items:center;z-index:10000;backdrop-filter:blur(8px);perspective:1000px;box-sizing:border-box;overscroll-behavior:contain;transform:translateZ(0);isolation:isolate;padding:20px}@media (max-width: 600px){._backdrop_1bbdr_359{padding:0}}._modal_1bbdr_386{position:relative;max-width:450px;width:90%;border-radius:var(--radius-xl);background:var(--modal-bg, var(--bg-secondary));backdrop-filter:blur(10px);border:1px solid var(--modal-border, var(--border));box-shadow:var(--modal-shadow, var(--shadow));overflow:hidden;z-index:10001!important;padding:0;transform-style:preserve-3d;margin:auto;max-height:90vh;display:flex;flex-direction:column}@media (max-width: 600px){._modal_1bbdr_386{width:100%;height:100vh;max-height:100vh;border-radius:0;margin:0}}._modalContent_1bbdr_415{padding:30px;position:relative;z-index:5;overflow-y:auto;flex:1}@media (max-width: 600px){._modalContent_1bbdr_415{padding:24px 20px}}._modalContent_1bbdr_415 h3{font-size:22px;margin-bottom:20px;color:var(--text-primary);text-align:center;font-weight:600}._closeButton_1bbdr_435{position:absolute;top:15px;right:15px;background:rgba(var(--accent-rgb),.1);border:none;font-size:20px;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--text-primary);cursor:pointer;z-index:10;box-shadow:var(--shadow);transition:all var(--transition-fast);margin:0}._closeButton_1bbdr_435:hover{background:rgba(var(--accent-rgb),.2);transform:scale(1.05)}._avatarsGrid_1bbdr_461{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:20px;margin-top:20px}._avatarCard_1bbdr_468{cursor:pointer;padding:15px;border-radius:12px;display:flex;flex-direction:column;align-items:center;border:1px solid var(--border);background:var(--bg-secondary);transition:all .2s ease;position:relative}._avatarCard_1bbdr_468._selectedAvatar_1bbdr_480{border:2px solid var(--accent);background:var(--bg-highlight)}._avatarCard_1bbdr_468:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.1)}._avatarImageContainer_1bbdr_489{position:relative;width:90px;height:90px;margin-bottom:10px}._avatarImage_1bbdr_489{width:90px;height:90px;border-radius:50%;object-fit:cover;border:1px solid var(--border)}._selectedAvatar_1bbdr_480 ._avatarImage_1bbdr_489{border:3px solid var(--accent)}._selectedIndicator_1bbdr_507{position:absolute;top:-8px;right:-8px;background:var(--accent);border-radius:50%;padding:3px;display:flex;justify-content:center;align-items:center}._avatarName_1bbdr_519{font-size:14px;font-weight:500;color:var(--text-primary)}._selectedAvatar_1bbdr_480 ._avatarName_1bbdr_519{font-weight:600}._perksList_1bbdr_529{display:flex;flex-direction:column;gap:12px}._perkOption_1bbdr_535{display:flex;justify-content:space-between;align-items:center;padding:15px;background-color:var(--bg-highlight);border-radius:8px;cursor:pointer;border:1px solid var(--border);transition:all .2s ease}._perkOption_1bbdr_535:hover{transform:translate(5px);background-color:var(--bg-hover);border-color:var(--accent)}._activePerkOption_1bbdr_552{border:2px solid var(--accent);background-color:rgba(var(--accent-rgb),.1)}._perkName_1bbdr_557{font-weight:600;font-size:16px;padding:6px 12px;border-radius:20px;display:inline-block}._activePerkIndicator_1bbdr_565{display:flex;align-items:center;justify-content:center;background-color:var(--accent);color:#fff;width:24px;height:24px;border-radius:50%}._modalMotion_1bbdr_576{width:90%;max-width:500px;overflow:visible}@media (max-width: 600px){._modalMotion_1bbdr_576{width:100%;height:100%;max-width:100%}}._modalFooter_1bbdr_589{text-align:center;margin-top:10px}._modalForm_1bbdr_594{display:flex;flex-direction:column;gap:20px;width:100%}._formGroup_1bbdr_601{display:flex;flex-direction:column;gap:8px}._formGroup_1bbdr_601 label{font-weight:500;font-size:15px;color:var(--text-primary)}._formGroup_1bbdr_601 ._formControl_1bbdr_611{padding:14px 16px;border-radius:10px;border:1px solid var(--border);background-color:var(--bg-input);color:var(--text-primary);font-size:16px;transition:all .3s;width:100%}._formGroup_1bbdr_601 ._formControl_1bbdr_611:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(var(--accent-rgb),.2);background-color:var(--bg-secondary)}._formGroup_1bbdr_601 ._formControl_1bbdr_611:disabled{opacity:.7;cursor:not-allowed}._formActions_1bbdr_632{display:flex;justify-content:flex-end;gap:14px;margin-top:20px}._formActions_1bbdr_632 button{padding:12px 22px;border-radius:10px;font-weight:500;font-size:16px;transition:all .3s;cursor:pointer;display:flex;align-items:center;gap:8px}._formActions_1bbdr_632 button:disabled{opacity:.7;cursor:not-allowed}._formActions_1bbdr_632 ._cancelButton_1bbdr_278{background-color:var(--bg-primary);border:1px solid var(--border);color:var(--text-secondary)}._formActions_1bbdr_632 ._cancelButton_1bbdr_278:hover:not(:disabled){background-color:var(--bg-hover);transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.1)}._formActions_1bbdr_632 ._cancelButton_1bbdr_278:active:not(:disabled){transform:translateY(0);box-shadow:none}._formActions_1bbdr_632 ._submitButton_1bbdr_667{background-color:var(--accent);border:none;color:#fff;box-shadow:0 4px 10px rgba(var(--accent-rgb),.3)}._formActions_1bbdr_632 ._submitButton_1bbdr_667:hover:not(:disabled){background-color:var(--accent-dark);transform:translateY(-3px);box-shadow:0 8px 15px rgba(var(--accent-rgb),.4)}._formActions_1bbdr_632 ._submitButton_1bbdr_667:active:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px rgba(var(--accent-rgb),.3)}._formActions_1bbdr_632 ._banButton_1bbdr_278{background-color:var(--error)}._formActions_1bbdr_632 ._banButton_1bbdr_278:hover:not(:disabled){background-color:var(--error-dark, #c0392b)}._modalHeader_1bbdr_689{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:18px;border-bottom:2px solid rgba(var(--accent-rgb),.1)}@media (max-width: 600px){._modalHeader_1bbdr_689{margin-bottom:16px;margin-top:8px}}._modalHeader_1bbdr_689 h3{font-size:22px;font-weight:600;margin:0;color:var(--text-primary);text-align:left}._modalHeader_1bbdr_689 ._closeButton_1bbdr_435{background:rgba(0,0,0,.05);border:none;color:var(--text-secondary);cursor:pointer;padding:10px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease;margin:0;width:auto;box-shadow:none}._modalHeader_1bbdr_689 ._closeButton_1bbdr_435:hover{background-color:rgba(var(--accent-rgb),.1);color:var(--accent);transform:none;box-shadow:none}._errorMessage_1bbdr_732,._successMessage_1bbdr_732{padding:14px;border-radius:8px;display:flex;align-items:center;gap:12px;font-size:14px;line-height:1.4;animation:_fadeIn_1bbdr_1 .3s ease-in-out}._errorMessage_1bbdr_732{background-color:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);color:#dc2626}._successMessage_1bbdr_732{background-color:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.2);color:#16a34a}@keyframes _fadeIn_1bbdr_1{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}._passwordStrength_1bbdr_765{margin-top:8px;width:100%}._passwordStrengthInfo_1bbdr_770{display:flex;justify-content:space-between;margin-bottom:4px}._passwordStrengthText_1bbdr_776{font-size:14px;font-weight:500}._passwordStrengthPercentage_1bbdr_781{font-size:14px;color:var(--text-secondary)}._passwordStrengthBar_1bbdr_786{height:6px;width:100%;background-color:#e5e7eb;border-radius:3px;overflow:hidden;position:relative}._passwordStrengthFill_1bbdr_795{height:100%;position:absolute;left:0;top:0;border-radius:3px;transition:width .3s ease-out}._formActions_1bbdr_632 ._submitButton_1bbdr_667{min-width:130px;display:flex;justify-content:center;align-items:center}._formActions_1bbdr_632 ._submitButton_1bbdr_667 span{display:inline-flex;align-items:center}._successMessage_1bbdr_732{padding:40px 20px;display:flex;flex-direction:column;align-items:center;gap:20px;text-align:center}._successMessage_1bbdr_732 svg{font-size:45px;color:#16a34a;background:rgba(34,197,94,.2);padding:18px;border-radius:50%;box-shadow:0 5px 15px rgba(34,197,94,.3)}[data-theme=dark] ._successMessage_1bbdr_732 svg{color:#22c55e;background:rgba(22,163,74,.25);box-shadow:0 0 0 3px rgba(34,197,94,.4),0 5px 15px rgba(34,197,94,.4)}._successMessage_1bbdr_732 span{font-weight:600;font-size:20px;color:var(--text-primary)}._avatarWrapper_1bbdr_843{position:relative;border-radius:50%;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.1);transition:all .3s ease}._avatarWrapper_1bbdr_843:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(0,0,0,.2)}._loadingOverlay_1bbdr_855{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(var(--accent-rgb),.7);display:flex;align-items:center;justify-content:center;border-radius:50%;z-index:2}._avatarHint_1bbdr_869{text-align:center;color:var(--text-secondary);margin-top:20px;font-size:15px;line-height:1.5;padding:0 15px}._avatarHint_1bbdr_869:before{content:"";display:block;width:40px;height:2px;background-color:rgba(var(--accent-rgb),.3);margin:0 auto 15px}._adminEditForm_1bbdr_886{background-color:var(--bg-secondary);padding:20px;border-radius:8px;margin-top:20px;border:1px solid var(--border)}[data-theme=dark] ._adminEditForm_1bbdr_886{background-color:rgba(255,255,255,.05)}._formGroup_1bbdr_601{margin-bottom:20px}._formGroup_1bbdr_601 label{display:block;margin-bottom:8px;font-weight:500;color:var(--text-primary)}._blockLabel_1bbdr_907{display:block;margin-bottom:10px;font-weight:500;color:var(--text-primary)}._formInput_1bbdr_914,._formSelect_1bbdr_914{width:100%;padding:10px;border:1px solid var(--border);border-radius:4px;background-color:var(--bg-input);color:var(--text-primary);font-size:16px}._formInput_1bbdr_914:focus,._formSelect_1bbdr_914:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.1)}[data-theme=dark] ._formInput_1bbdr_914,[data-theme=dark] ._formSelect_1bbdr_914{background-color:rgba(255,255,255,.1);border-color:rgba(255,255,255,.2)}._checkboxGroup_1bbdr_933{display:flex;flex-direction:column;gap:12px}._checkboxLabel_1bbdr_939{display:flex;align-items:flex-start;gap:10px;cursor:pointer}._checkboxLabel_1bbdr_939 input[type=checkbox]{margin-top:3px;cursor:pointer}._checkboxLabel_1bbdr_939 input[type=checkbox]:disabled{cursor:not-allowed;opacity:.7}._checkboxText_1bbdr_954{display:flex;flex-direction:column}._statusMessage_1bbdr_959{padding:12px;border-radius:4px;margin-bottom:20px;display:flex;align-items:center;gap:10px}._statusMessage_1bbdr_959._error_1bbdr_65{background-color:rgba(231,76,60,.1);color:#e74c3c;border-left:3px solid #e74c3c}._statusMessage_1bbdr_959._success_1bbdr_732{background-color:rgba(46,204,113,.1);color:#2ecc71;border-left:3px solid #2ecc71}._statusMessage_1bbdr_959._info_1bbdr_977{background-color:rgba(52,152,219,.1);color:#3498db;border-left:3px solid #3498db}._statusMessage_1bbdr_959 svg{font-size:18px}._loadingIcon_1bbdr_986{animation:_spin_1bbdr_1 1s linear infinite}@keyframes _spin_1bbdr_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._adminActions_1bbdr_252{margin-top:2rem;padding:1.5rem;background-color:#f8f9fa;border-radius:10px;border:1px solid #eee;box-shadow:0 2px 10px rgba(0,0,0,.05)}[data-theme=dark] ._adminActions_1bbdr_252{background-color:#292929;border-color:#333;box-shadow:0 2px 10px rgba(0,0,0,.2)}._adminActions_1bbdr_252 h2{font-size:1.25rem;margin-bottom:1rem;color:#333;display:flex;align-items:center;gap:8px}[data-theme=dark] ._adminActions_1bbdr_252 h2{color:#e0e0e0}._adminActions_1bbdr_252 h2 svg{color:#666}[data-theme=dark] ._adminActions_1bbdr_252 h2 svg{color:#999}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273{display:flex;gap:10px}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button{padding:10px 15px;border:none;border-radius:5px;font-size:.9rem;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .2s ease}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button svg{font-size:1rem}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278{background-color:#3498db;color:#fff}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278:hover{background-color:#2980b9;transform:translateY(-2px);box-shadow:0 2px 5px rgba(0,0,0,.2)}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278{background-color:#2980b9}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278:hover{background-color:#3498db;box-shadow:0 2px 5px rgba(0,0,0,.4)}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278{background-color:#e74c3c;color:#fff}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278:hover{background-color:#c0392b;transform:translateY(-2px);box-shadow:0 2px 5px rgba(0,0,0,.2)}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278{background-color:#c0392b}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278:hover{background-color:#e74c3c;box-shadow:0 2px 5px rgba(0,0,0,.4)}._adminEditForm_1bbdr_886{background-color:#fff;padding:1.5rem;border-radius:8px;border:1px solid #eee;margin-top:1rem}[data-theme=dark] ._adminEditForm_1bbdr_886{background-color:#252530;border-color:#333}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601{margin-bottom:1.25rem}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label{display:block;margin-bottom:.75rem;font-size:.95rem;font-weight:500;color:#444;display:flex;align-items:center;gap:6px}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label{color:#ccc}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label svg{color:#666}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label svg{color:#999}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]{width:100%;padding:.75rem 1rem;border:1px solid #ddd;border-radius:6px;font-size:1rem}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.2)}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]{background-color:#1e1e24;border-color:#444;color:#e0e0e0}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]:focus{border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.3)}._adminEditForm_1bbdr_886 ._perksOptions_1bbdr_1133{display:flex;flex-direction:column;gap:.75rem;padding:1rem;background-color:#f8f9fa;border-radius:6px;border:1px solid #eee}[data-theme=dark] ._adminEditForm_1bbdr_886 ._perksOptions_1bbdr_1133{background-color:#1e1e24;border-color:#333}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535{display:flex;align-items:center}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 label{margin:0 0 0 .75rem;font-weight:400;cursor:pointer;font-size:.95rem}[data-theme=dark] ._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 label{color:#ccc}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 input[type=checkbox]{cursor:pointer;width:18px;height:18px}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 input[type=checkbox]:checked{accent-color:#3498db}._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167{background-color:rgba(52,152,219,.05);padding:10px;border-radius:6px;border-left:3px solid #3498db}[data-theme=dark] ._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167{background-color:rgba(52,152,219,.1)}._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167 ._baseLabel_1bbdr_1176{font-weight:500}._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167 ._baseLabel_1bbdr_1176 ._baseNote_1bbdr_1179{font-size:.8rem;opacity:.7;font-style:italic;margin-left:5px}._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185{width:100%;padding:.75rem 1rem;border:1px solid #ddd;border-radius:6px;font-size:1rem;background-color:#fff}._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.2)}[data-theme=dark] ._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185{background-color:#1e1e24;border-color:#444;color:#e0e0e0}[data-theme=dark] ._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185:focus{border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.3)}[data-theme=dark] ._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185 option{background-color:#1e1e24}._adminEditForm_1bbdr_886 ._formActions_1bbdr_632{display:flex;justify-content:flex-end;gap:.75rem;margin-top:1.5rem}._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278,._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278{padding:.75rem 1.5rem;border-radius:6px;font-size:.95rem;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .2s ease}._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278{background-color:#f0f0f0;border:none;color:#333}._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278:hover{background-color:#e0e0e0}[data-theme=dark] ._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278{background-color:#3a3a3a;color:#ddd}[data-theme=dark] ._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278:hover{background-color:#444}._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278{background-color:#3498db;border:none;color:#fff}._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278:hover:not(:disabled){background-color:#2980b9}._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278:disabled{opacity:.7;cursor:not-allowed}[data-theme=dark] ._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278{background-color:#2980b9}[data-theme=dark] ._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278:hover:not(:disabled){background-color:#3498db}._statusMessage_1bbdr_959{padding:.75rem 1rem;border-radius:6px;margin-bottom:1rem;font-size:.9rem;display:flex;align-items:center;gap:8px}._statusMessage_1bbdr_959 svg{font-size:1.1rem;flex-shrink:0}._statusMessage_1bbdr_959._success_1bbdr_732{background-color:rgba(46,204,113,.1);border-left:3px solid #2ecc71;color:#2ecc71}[data-theme=dark] ._statusMessage_1bbdr_959._success_1bbdr_732{background-color:rgba(46,204,113,.15)}._statusMessage_1bbdr_959._error_1bbdr_65{background-color:rgba(231,76,60,.1);border-left:3px solid #e74c3c;color:#e74c3c}[data-theme=dark] ._statusMessage_1bbdr_959._error_1bbdr_65{background-color:rgba(231,76,60,.15)}._statusMessage_1bbdr_959._info_1bbdr_977{background-color:rgba(52,152,219,.1);border-left:3px solid #3498db;color:#3498db}[data-theme=dark] ._statusMessage_1bbdr_959._info_1bbdr_977{background-color:rgba(52,152,219,.15)}._banInfoBox_1bbdr_1299{background-color:rgba(231,76,60,.1);border-left:4px solid #e74c3c;border-radius:4px;padding:15px;margin-bottom:20px}._banInfoBox_1bbdr_1299 h3{color:#e74c3c;margin-top:0;margin-bottom:15px;font-size:16px;display:flex;align-items:center}._banInfoBox_1bbdr_1299 h3:before{content:"⚠️";margin-right:8px}[data-theme=dark] ._banInfoBox_1bbdr_1299{background-color:rgba(231,76,60,.2);border-color:#c0392b}[data-theme=dark] ._banInfoBox_1bbdr_1299 h3{color:#e67e22}._banDetails_1bbdr_1326{margin-bottom:15px}._banDetails_1bbdr_1326 p{margin:8px 0;color:var(--text-primary);font-size:14px}._banDetails_1bbdr_1326 ._bannedStatus_1bbdr_1334{display:inline-block;background-color:#e74c3c;color:#fff;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500}[data-theme=dark] ._banDetails_1bbdr_1326 ._bannedStatus_1bbdr_1334{background-color:#c0392b}._banDetails_1bbdr_1326 ._banDuration_1bbdr_1346{display:inline-flex;align-items:center;gap:5px;color:var(--text-primary)}._banDetails_1bbdr_1326 ._banDuration_1bbdr_1346 svg{color:#e74c3c}._unbanButton_1bbdr_1356{background-color:#27ae60;color:#fff;border:none;border-radius:4px;padding:8px 16px;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:8px;transition:background-color .2s}._unbanButton_1bbdr_1356:hover{background-color:#2ecc71}._unbanButton_1bbdr_1356:disabled{opacity:.7;cursor:not-allowed}[data-theme=dark] ._unbanButton_1bbdr_1356{background-color:#219653}[data-theme=dark] ._unbanButton_1bbdr_1356:hover{background-color:#27ae60}._activePerk_1bbdr_552{font-size:1.8rem!important;border-radius:6px;display:inline-flex;align-items:center;cursor:pointer;background-color:var(--bg-secondary);box-shadow:0 2px 4px rgba(0,0,0,.05);margin-bottom:10px}._activePerk_1bbdr_552 ._editPerkIcon_1bbdr_1393{margin-left:8px}._profileDetail_1bbdr_1397{font-size:16px;margin-bottom:12px;display:flex;align-items:center;gap:10px}._profileDetail_1bbdr_1397:last-child{margin-bottom:0}._profileDetail_1bbdr_1397 ._detailIcon_1bbdr_1407{color:var(--text-secondary);flex-shrink:0}@media (max-width: 600px){._buttonText_1bbdr_1413{display:none}}textarea._formControl_1bbdr_611{min-height:120px;resize:vertical;line-height:1.5}textarea._formControl_1bbdr_611::placeholder{color:var(--text-tertiary, #999)}select._formControl_1bbdr_611{-webkit-appearance:none;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'currentColor\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'%3e%3cpolyline points=\'6 9 12 15 18 9\'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 16px center;background-size:16px;padding-right:40px}select._formControl_1bbdr_611 option{padding:10px}._banModalHeader_1bbdr_1441{background-color:rgba(231,76,60,.1);border-left:4px solid #e74c3c;padding:12px 15px;margin-bottom:24px;border-radius:6px}._banModalHeader_1bbdr_1441 h3{display:flex;align-items:center;gap:10px;color:#e74c3c;font-weight:600;margin:0}._banModalHeader_1bbdr_1441 h3 svg{flex-shrink:0}._banModalHeader_1bbdr_1441 p{margin:10px 0 0;font-size:14px;color:var(--text-secondary);line-height:1.5}._modalDivider_1bbdr_1467{height:1px;background:linear-gradient(to right,transparent,var(--border),transparent);margin:20px 0;opacity:.5}._errorMessage_1bbdr_732{display:flex;align-items:flex-start;gap:10px;padding:12px 15px;margin-bottom:20px;border-radius:6px;background-color:rgba(231,76,60,.1);border-left:4px solid #e74c3c;color:var(--text-primary);font-size:14px;line-height:1.5}._errorMessage_1bbdr_732 svg{color:#e74c3c;margin-top:2px;flex-shrink:0}._adminAvatar_1bbdr_1494{position:relative;border:2px solid #5c6bc0;box-shadow:0 0 10px rgba(92,107,192,.5)}._adminAvatar_1bbdr_1494:hover{box-shadow:0 0 15px rgba(92,107,192,.7)}[data-theme=dark] ._adminAvatar_1bbdr_1494{border-color:#3f51b5;box-shadow:0 0 10px rgba(63,81,181,.6)}[data-theme=dark] ._adminAvatar_1bbdr_1494:hover{box-shadow:0 0 15px rgba(63,81,181,.8)}._adminAvatarBadge_1bbdr_1510{position:absolute;top:-8px;right:-8px;background-color:#5c6bc0;color:#fff;font-size:11px;font-weight:600;padding:2px 6px;border-radius:10px;z-index:2}[data-theme=dark] ._adminAvatarBadge_1bbdr_1510{background-color:#3f51b5;box-shadow:0 0 5px rgba(0,0,0,.3)}._postsContainer_17n5r_2{width:100%;max-width:800px;margin:0 auto;padding:20px}._postsHeader_17n5r_9{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}._postsHeader_17n5r_9 h2{font-size:22px;display:flex;align-items:center;gap:8px;color:var(--text-primary);margin:0}._postsHeader_17n5r_9 h2 svg{color:var(--accent)}@media (max-width: 480px){._postsHeader_17n5r_9 h2{font-size:18px;width:100%}}._postsHeader_17n5r_9 ._headerButtons_17n5r_34{display:flex;gap:10px;align-items:center;flex-wrap:wrap}@media (max-width: 480px){._postsHeader_17n5r_9 ._headerButtons_17n5r_34{width:100%;justify-content:space-between}}._postsHeader_17n5r_9 ._refreshButton_17n5r_46,._postsHeader_17n5r_9 ._rulesButton_17n5r_46{display:flex;align-items:center;gap:6px;padding:8px 14px;border-radius:8px;font-size:14px;font-weight:500;transition:all .2s ease;background:var(--bg-secondary);color:var(--text-secondary);border:1px solid var(--border);white-space:nowrap}._postsHeader_17n5r_9 ._refreshButton_17n5r_46 svg,._postsHeader_17n5r_9 ._rulesButton_17n5r_46 svg{font-size:16px}._postsHeader_17n5r_9 ._refreshButton_17n5r_46:hover,._postsHeader_17n5r_9 ._rulesButton_17n5r_46:hover{background:var(--bg-highlight);transform:translateY(-2px);box-shadow:0 3px 8px rgba(0,0,0,.1)}._postsHeader_17n5r_9 ._refreshButton_17n5r_46:disabled,._postsHeader_17n5r_9 ._rulesButton_17n5r_46:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 480px){._postsHeader_17n5r_9 ._refreshButton_17n5r_46,._postsHeader_17n5r_9 ._rulesButton_17n5r_46{flex:1;justify-content:center;padding:10px 8px;font-size:13px}}._postsHeader_17n5r_9 ._rulesButton_17n5r_46{background:var(--accent-light);color:var(--accent);border:1px solid transparent}._postsHeader_17n5r_9 ._rulesButton_17n5r_46 svg{color:var(--accent)}._postsHeader_17n5r_9 ._rulesButton_17n5r_46:hover{background:var(--accent-light);opacity:.9}[data-theme=dark] ._postsHeader_17n5r_9 ._rulesButton_17n5r_46{background-color:#d3d3d3;color:var(--accent);border:1px solid var(--accent)}[data-theme=dark] ._postsHeader_17n5r_9 ._rulesButton_17n5r_46:hover{background-color:rgba(52,152,219,.3)}._refreshButton_17n5r_46{padding:8px 16px;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:14px;font-weight:500;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:8px}._refreshButton_17n5r_46:hover:not(:disabled){background-color:var(--bg-color);transform:translateY(-2px)}._refreshButton_17n5r_46:disabled{opacity:.7;cursor:not-allowed}._refreshButton_17n5r_46 svg{font-size:16px}._postsList_17n5r_129{display:flex;flex-direction:column;gap:24px;margin-top:20px}._loading_17n5r_136{text-align:center;padding:40px 0;color:var(--text-secondary);font-size:18px;display:flex;align-items:center;justify-content:center;gap:10px}._loading_17n5r_136 svg{animation:_spin_17n5r_1 1s linear infinite}._errorMessage_17n5r_158{background-color:rgba(231,76,60,.1);color:var(--error);padding:12px 16px;border-radius:var(--radius-md);margin-bottom:20px;font-size:14px;display:flex;align-items:center;gap:8px;border-left:3px solid var(--error)}._errorMessage_17n5r_158 svg{font-size:18px}._noPosts_17n5r_174{text-align:center;padding:40px 0;color:var(--text-secondary);font-size:16px;display:flex;flex-direction:column;align-items:center;gap:16px}._noPosts_17n5r_174 svg{font-size:48px;opacity:.5}._notAuthenticatedMessage_17n5r_189{text-align:center;padding:16px;background-color:var(--bg-secondary);border-radius:var(--radius-md);color:var(--text-secondary);margin-bottom:20px;font-size:15px;display:flex;align-items:center;justify-content:center;gap:8px}._notAuthenticatedMessage_17n5r_189 svg{color:var(--accent)}._createPostContainer_17n5r_206{background:var(--bg-secondary);border-radius:var(--radius-lg);border:1px solid var(--border);padding:20px;margin-bottom:24px;transition:all var(--transition-fast)}._createPostTitle_17n5r_215{font-size:1.25rem;font-weight:600;margin:0 0 16px;color:var(--text-primary);display:flex;align-items:center;gap:8px}._createPostTitle_17n5r_215 svg{color:var(--accent)}._createPostForm_17n5r_228{display:flex;flex-direction:column;gap:16px}._contentInput_17n5r_234{width:100%;padding:16px;border:1px solid var(--border);border-radius:var(--radius-md);resize:none;min-height:100px;background-color:var(--bg-input);color:var(--text-primary);font-size:1.5rem!important}._contentInput_17n5r_234:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light)}._contentInput_17n5r_234::placeholder{color:var(--text-tertiary)}._imageUrlInput_17n5r_254{width:100%;padding:12px 16px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary)}._imageUrlInput_17n5r_254:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._imageUrlInput_17n5r_254::placeholder{color:var(--text-tertiary)}._pollContainer_17n5r_271{display:flex;flex-direction:column;gap:15px;padding:20px;margin-top:15px;margin-bottom:15px;background-color:var(--bg-highlight);border-radius:12px;border:1px solid var(--border-color);position:relative}[data-theme=dark] ._pollContainer_17n5r_271{background-color:rgba(255,255,255,.03);border-color:rgba(255,255,255,.1)}._pollContainer_17n5r_271:before{content:"📊 Опрос";position:absolute;top:-10px;left:15px;background-color:var(--accent);color:#fff;font-size:12px;font-weight:600;padding:3px 10px;border-radius:12px;box-shadow:0 2px 8px rgba(29,161,242,.2);display:none}._pollQuestionInput_17n5r_302{width:100%;padding:12px 16px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);font-size:15px}._pollQuestionInput_17n5r_302:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._pollQuestionInput_17n5r_302::placeholder{color:var(--text-tertiary)}[data-theme=dark] ._pollQuestionInput_17n5r_302{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(255,255,255,.9)}[data-theme=dark] ._pollQuestionInput_17n5r_302::placeholder{color:rgba(255,255,255,.5)}._pollOptionInputWrapper_17n5r_334{display:flex;gap:10px;align-items:center}._pollOptionInput_17n5r_334{flex:1;padding:12px 16px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);font-size:14px}._pollOptionInput_17n5r_334:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._pollOptionInput_17n5r_334::placeholder{color:var(--text-tertiary)}[data-theme=dark] ._pollOptionInput_17n5r_334{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(255,255,255,.9)}[data-theme=dark] ._pollOptionInput_17n5r_334::placeholder{color:rgba(255,255,255,.5)}._removeOptionButton_17n5r_366{width:32px;height:32px;border:none;background-color:rgba(231,76,60,.1);color:#e74c3c;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}._removeOptionButton_17n5r_366:hover{background-color:rgba(231,76,60,.2);transform:scale(1.1)}._removeOptionButton_17n5r_366 svg{font-size:16px}[data-theme=dark] ._removeOptionButton_17n5r_366{background-color:rgba(231,76,60,.2);color:#ff6b6b}[data-theme=dark] ._removeOptionButton_17n5r_366:hover{background-color:rgba(231,76,60,.3)}._addOptionButton_17n5r_394{margin-top:5px;padding:8px 16px;background:none;border:1px dashed var(--border);border-radius:8px;color:var(--accent);font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}._addOptionButton_17n5r_394:hover{background-color:rgba(29,161,242,.05);border-color:var(--accent)}[data-theme=dark] ._addOptionButton_17n5r_394:hover{background-color:rgba(29,161,242,.1);border-color:var(--accent)}._formOptions_17n5r_422{display:flex;justify-content:space-between;align-items:center;margin-top:16px}._formToggles_17n5r_429{display:flex;gap:12px;flex-wrap:wrap}._optionToggle_17n5r_435{display:flex;align-items:center;gap:5px;font-size:14px;color:var(--text-secondary);cursor:pointer;padding:6px 12px;border-radius:var(--radius-md);background-color:var(--bg-tertiary);transition:all var(--transition-fast)}._optionToggle_17n5r_435:hover{background-color:var(--bg-hover)}._optionToggle_17n5r_435 input[type=checkbox]{margin-right:5px;cursor:pointer}._optionToggle_17n5r_435 svg{font-size:16px;color:var(--text-secondary);pointer-events:none}._optionToggle_17n5r_435 *{cursor:pointer}._submitButton_17n5r_463{padding:10px 18px;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:14px;font-weight:500;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:8px}._submitButton_17n5r_463:hover:not(:disabled){background-color:var(--accent-hover)}._submitButton_17n5r_463:disabled{opacity:.7;cursor:not-allowed}._submitButton_17n5r_463 svg{font-size:16px}._postItem_17n5r_488{background-color:var(--bg-secondary);border-radius:16px;padding:24px;box-shadow:0 2px 8px rgba(0,0,0,.05);transition:all .2s ease;position:relative;border:1px solid var(--border)}[data-theme=dark] ._postItem_17n5r_488{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);box-shadow:0 4px 20px rgba(0,0,0,.2)}._postItem_17n5r_488:hover{box-shadow:0 4px 12px rgba(0,0,0,.08)}[data-theme=dark] ._postItem_17n5r_488:hover{box-shadow:0 8px 24px rgba(0,0,0,.25);border-color:rgba(255,255,255,.15)}._postItem_17n5r_488._pinnedPost_17n5r_509{border:2px solid var(--accent);position:relative}._postItem_17n5r_488._pinnedPost_17n5r_509:before{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:linear-gradient(45deg,var(--accent),transparent 60%);border-radius:16px;z-index:-1;opacity:.1;transition:opacity .3s ease}._postItem_17n5r_488._pinnedPost_17n5r_509:hover:before{opacity:.2}[data-theme=dark] ._postItem_17n5r_488._pinnedPost_17n5r_509{border:2px solid var(--accent)}[data-theme=dark] ._postItem_17n5r_488._pinnedPost_17n5r_509:before{background:linear-gradient(45deg,var(--accent),transparent 80%);opacity:.15}[data-theme=dark] ._postItem_17n5r_488._pinnedPost_17n5r_509:hover:before{opacity:.25}._postHeader_17n5r_540{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}._authorInfo_17n5r_547{display:flex;align-items:center;text-decoration:none;color:inherit;gap:12px;font-size:1.5rem}._authorName_17n5r_556{font-weight:500}._avatar_17n5r_560{width:40px;height:40px;border-radius:50%;object-fit:cover;box-shadow:0 2px 6px rgba(0,0,0,.1)}[data-theme=dark] ._avatar_17n5r_560{box-shadow:0 2px 6px rgba(0,0,0,.25)}._postDate_17n5r_571{font-size:14px;color:var(--text-tertiary);display:flex;align-items:center;gap:6px}._postDate_17n5r_571 svg{font-size:14px}._postContent_17n5r_582{margin:15px 0;font-size:1.8rem!important;line-height:1.5;white-space:pre-wrap;word-break:break-word;color:var(--text-primary)}[data-theme=dark] ._postContent_17n5r_582 ._darkTextConversion_17n5r_590{color:var(--text-primary)!important}@media (max-width: 768px){._postContent_17n5r_582{line-height:1.6}._postContent_17n5r_582 p,._postContent_17n5r_582 span,._postContent_17n5r_582 div{font-size:inherit}}@media (max-width: 480px){._postContent_17n5r_582{font-size:18px;line-height:1.7}}._postImage_17n5r_608{width:100%;margin:10px 0;border-radius:12px;overflow:hidden}._postImage_17n5r_608 img{width:100%;height:auto;border-radius:8px;display:block}._postPoll_17n5r_621{background-color:var(--bg-highlight);border-radius:8px;padding:16px;margin-bottom:16px}[data-theme=dark] ._postPoll_17n5r_621{background-color:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.1)}._pollTitle_17n5r_632{font-weight:500;margin-bottom:12px;color:var(--text-primary);font-size:16px}@media (max-width: 768px){._pollTitle_17n5r_632{font-size:17px}}._pollOptions_17n5r_328{display:flex;flex-direction:column;gap:10px}._pollOption_17n5r_328{display:flex;flex-direction:column}._pollOption_17n5r_328 label{display:flex;align-items:center;gap:10px;cursor:pointer;padding:10px;border-radius:8px;transition:background-color .2s ease}._pollOption_17n5r_328 label:hover{background-color:var(--bg-hover)}._pollOption_17n5r_328 label input{cursor:pointer}[data-theme=dark] ._pollOption_17n5r_328 label:hover{background-color:rgba(255,255,255,.08)}@media (max-width: 768px){._pollOption_17n5r_328 label{font-size:16px;padding:12px 10px}}._pollResults_17n5r_679{margin-top:16px}._pollResults_17n5r_679 ._pollResultOption_17n5r_682{margin-bottom:10px}._pollResults_17n5r_679 ._pollResultOption_17n5r_682 ._pollOptionText_17n5r_685{display:flex;justify-content:space-between;font-size:14px;margin-bottom:4px}._pollResults_17n5r_679 ._pollResultOption_17n5r_682 ._pollOptionText_17n5r_685 ._pollOptionVotes_17n5r_691{color:var(--text-secondary)}._pollResults_17n5r_679 ._pollResultOption_17n5r_682 ._pollProgressBar_17n5r_694{height:8px;background-color:var(--bg-input);border-radius:4px;overflow:hidden}._pollResults_17n5r_679 ._pollResultOption_17n5r_682 ._pollProgressBar_17n5r_694 ._pollProgress_17n5r_694{height:100%;background-color:var(--accent);border-radius:4px;transition:width .5s ease}._pollVotersCount_17n5r_707{font-size:12px;margin-top:16px;color:var(--text-tertiary);text-align:right}._postActions_17n5r_714{display:flex;align-items:center;justify-content:space-between;border-top:1px solid var(--border);padding-top:16px;margin-top:16px}._actionButtons_17n5r_723{display:flex;gap:16px}._actionButtons_17n5r_723 button{background:none;border:none;padding:8px;border-radius:50%;cursor:pointer;display:flex;align-items:center;color:var(--text-secondary);transition:all .2s}._actionButtons_17n5r_723 button:hover{background-color:rgba(29,161,242,.1);color:var(--accent)}[data-theme=dark] ._actionButtons_17n5r_723 button:hover{background-color:rgba(29,161,242,.2)}._actionButtons_17n5r_723 button svg{font-size:20px}._likeButton_17n5r_749{color:var(--text-secondary);display:flex;align-items:center;gap:8px}._likeButton_17n5r_749._liked_17n5r_755{color:#e0245e}._likeButton_17n5r_749._liked_17n5r_755:hover{color:#e0245e;background-color:rgba(224,36,94,.1)}[data-theme=dark] ._likeButton_17n5r_749._liked_17n5r_755:hover{background-color:rgba(224,36,94,.2)}._likeCount_17n5r_766{font-size:14px}._commentButton_17n5r_770{display:flex;align-items:center;gap:8px;background:none;border:none;color:var(--text-secondary);padding:8px 12px;border-radius:8px;cursor:pointer;transition:all .2s ease}._commentButton_17n5r_770:hover{background-color:var(--bg-hover)}._commentButton_17n5r_770 svg{font-size:20px}._deleteButton_17n5r_789{background-color:rgba(231,76,60,.1);color:#e74c3c;border:none;border-radius:6px;padding:6px 10px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:4px;cursor:pointer;transition:all .2s}._deleteButton_17n5r_789 svg{font-size:16px}._deleteButton_17n5r_789:hover{background-color:rgba(231,76,60,.2);transform:translateY(-1px)}._deleteButton_17n5r_789:disabled{opacity:.6;cursor:not-allowed;transform:none}[data-theme=dark] ._deleteButton_17n5r_789{background-color:rgba(231,76,60,.2);color:#ff6b6b}[data-theme=dark] ._deleteButton_17n5r_789:hover{background-color:rgba(231,76,60,.3)}._commentsSection_17n5r_823{margin-top:20px;padding-top:15px;border-top:1px solid var(--border)}._commentsHeading_17n5r_829{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600;margin-bottom:15px;color:var(--text-primary)}._loadingComments_17n5r_839{display:flex;align-items:center;justify-content:center;padding:20px;color:var(--text-secondary);gap:8px}._loadingComments_17n5r_839 svg{animation:_spin_17n5r_1 1s linear infinite}._noComments_17n5r_851{padding:20px;text-align:center;color:var(--text-secondary);background-color:var(--bg-highlight);border-radius:8px;font-style:italic}._commentForm_17n5r_860{margin-top:20px;padding:15px;border-radius:10px;background-color:var(--bg-highlight);box-shadow:0 2px 8px rgba(0,0,0,.1)}[data-theme=dark] ._commentForm_17n5r_860{background-color:rgba(255,255,255,.05);box-shadow:0 2px 8px rgba(0,0,0,.2)}._commentForm_17n5r_860 textarea{width:100%;min-height:80px;padding:12px;border-radius:8px;border:1px solid var(--border);background-color:var(--bg-input);color:var(--text-primary);font-size:15px;margin-bottom:12px;transition:border-color .2s,box-shadow .2s}._commentForm_17n5r_860 textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}[data-theme=dark] ._commentForm_17n5r_860 textarea{background-color:rgba(255,255,255,.08);border-color:rgba(255,255,255,.15)}[data-theme=dark] ._commentForm_17n5r_860 textarea:focus{box-shadow:0 0 0 2px rgba(29,161,242,.3)}._commentForm_17n5r_860 button{background-color:var(--accent);color:#fff;border:none;border-radius:24px;padding:10px 20px;font-size:15px;font-weight:600;display:flex;align-items:center;gap:8px;cursor:pointer;margin-left:auto;transition:background-color .2s}._commentForm_17n5r_860 button:hover:not(:disabled){background-color:var(--accent-dark)}._commentForm_17n5r_860 button:disabled{opacity:.6;cursor:not-allowed}._commentForm_17n5r_860 button svg{font-size:18px}._errorMessage_17n5r_158{display:flex;align-items:center;gap:8px;padding:10px;margin-bottom:12px;background-color:rgba(231,76,60,.1);border-left:3px solid #e74c3c;color:#e74c3c;border-radius:4px}[data-theme=dark] ._errorMessage_17n5r_158{background-color:rgba(231,76,60,.2)}._errorMessage_17n5r_158 svg{flex-shrink:0}._commentItem_17n5r_939{margin-bottom:20px;padding-left:10px;border-left:3px solid var(--accent)}[data-theme=dark] ._commentItem_17n5r_939{border-left-color:rgba(29,161,242,.6)}._commentItem_17n5r_939._commentReply_17n5r_947{margin-left:25px;padding-left:15px;border-left:2px solid var(--border);margin-top:10px}[data-theme=dark] ._commentItem_17n5r_939._commentReply_17n5r_947{border-left:2px solid var(--border)}._commentHeader_17n5r_957{display:flex;align-items:center;margin-bottom:8px}._commentAuthorAvatar_17n5r_963{width:32px;height:32px;border-radius:50%;overflow:hidden;margin-right:10px}._commentAuthorAvatar_17n5r_963 img{width:100%;height:100%;object-fit:cover}._commentAuthorInfo_17n5r_976{display:flex;flex-direction:column}._commentAuthor_17n5r_963{text-decoration:none;font-weight:600;font-size:14px}._commentAuthor_17n5r_963:hover{text-decoration:underline}._commentContent_17n5r_990{margin-bottom:8px;font-size:14px;line-height:1.5;color:var(--text-primary);white-space:pre-wrap;word-break:break-word}._commentDate_17n5r_999{font-size:12px;color:var(--text-tertiary);display:flex;align-items:center;gap:5px;margin-bottom:8px}._commentDate_17n5r_999 svg{font-size:12px}._commentActions_17n5r_1011{display:flex;gap:12px;margin-top:8px;flex-wrap:wrap;width:100%}._replyButton_17n5r_1019,._deleteCommentButton_17n5r_1020{background:none;border:none;font-size:13px;color:var(--text-secondary);display:flex;align-items:center;gap:5px;cursor:pointer;padding:6px 10px;border-radius:var(--radius-sm);transition:all var(--transition-fast)}._replyButton_17n5r_1019:hover,._deleteCommentButton_17n5r_1020:hover{background-color:var(--bg-hover)}._replyButton_17n5r_1019 svg,._deleteCommentButton_17n5r_1020 svg{font-size:16px}@media (max-width: 576px){._replyButton_17n5r_1019,._deleteCommentButton_17n5r_1020{font-size:12px;padding:8px 12px;flex:1;justify-content:center}}._deleteCommentButton_17n5r_1020{color:var(--error)}._deleteCommentButton_17n5r_1020:hover{background-color:rgba(231,76,60,.1)}._repliesContainer_17n5r_1058{margin-top:12px}._replyForm_17n5r_1062{margin:10px 0 10px 30px;background:var(--bg-comment-form);border-radius:var(--radius-md);padding:12px;border-left:3px solid var(--accent)}._replyForm_17n5r_1062 textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:var(--radius-sm);background-color:var(--bg-input);color:var(--text-primary);resize:vertical;font-size:14px;min-height:60px;margin-bottom:8px}._replyForm_17n5r_1062 textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}._replyForm_17n5r_1062 ._replyFormActions_17n5r_1086{display:flex;justify-content:flex-end;gap:10px}._replyForm_17n5r_1062 ._replyFormActions_17n5r_1086 button{padding:6px 12px;border-radius:var(--radius-sm);font-size:14px;display:flex;align-items:center;gap:6px;cursor:pointer;transition:all var(--transition-fast)}._replyForm_17n5r_1062 ._replyFormActions_17n5r_1086 button:disabled{opacity:.7;cursor:not-allowed}._replyForm_17n5r_1062 ._replyFormActions_17n5r_1086 button svg{font-size:16px}._replyForm_17n5r_1062 ._replyFormActions_17n5r_1086 ._cancelReplyButton_17n5r_1108{background:none;border:1px solid var(--border);color:var(--text-secondary)}._replyForm_17n5r_1062 ._replyFormActions_17n5r_1086 ._cancelReplyButton_17n5r_1108:hover:not(:disabled){background:var(--bg-hover)}._replyForm_17n5r_1062 ._replyFormActions_17n5r_1086 ._submitReplyButton_17n5r_1116{background:var(--accent);color:#fff;border:none}._replyForm_17n5r_1062 ._replyFormActions_17n5r_1086 ._submitReplyButton_17n5r_1116:hover:not(:disabled){background:var(--accent-hover)}@media screen and (max-width: 768px){._postsContainer_17n5r_2{padding:15px}._formOptions_17n5r_422{flex-direction:column;align-items:flex-start;gap:15px}._formToggles_17n5r_429,._submitButton_17n5r_463{width:100%}._postHeader_17n5r_540{flex-wrap:wrap}._postActions_17n5r_714{flex-direction:column;gap:10px}._actionButtons_17n5r_723{width:100%;justify-content:space-between}._commentActions_17n5r_1011{width:100%;justify-content:flex-start}._commentHeader_17n5r_957{flex-wrap:wrap}}@media screen and (max-width: 576px){._optionToggle_17n5r_435{padding:5px 10px;font-size:13px}._replyButton_17n5r_1019,._deleteCommentButton_17n5r_1020{font-size:12px;padding:3px 6px}._postTitle_17n5r_1169{font-size:1.3rem}._postContent_17n5r_582{font-size:1.1rem}}textarea{resize:none!important;font-family:inherit}[data-theme=dark] textarea{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(255,255,255,.9)}[data-theme=dark] textarea::placeholder{color:rgba(255,255,255,.5)}._stylingOptions_17n5r_1189{margin-top:15px;padding:20px;background-color:var(--bg-highlight);border-radius:12px;border:1px solid var(--border);position:relative}[data-theme=dark] ._stylingOptions_17n5r_1189{background-color:rgba(255,255,255,.03);border-color:rgba(255,255,255,.1)}._stylingOptions_17n5r_1189:before{content:"🎨 Стиль";position:absolute;top:-10px;left:15px;background-color:var(--accent);color:#fff;font-size:12px;font-weight:600;padding:3px 10px;border-radius:12px;box-shadow:0 2px 8px rgba(29,161,242,.2)}._stylingTitle_17n5r_1215{font-size:16px;font-weight:600;margin-bottom:15px;color:var(--text-primary);display:flex;align-items:center;gap:8px}._stylingTitle_17n5r_1215 svg{color:var(--accent)}._stylingGroup_17n5r_1228{margin-bottom:15px}._stylingGroup_17n5r_1228 label{display:block;margin-bottom:8px;color:var(--text-secondary);font-size:14px;font-weight:500}._colorSelector_17n5r_1239{display:flex;flex-wrap:wrap;gap:10px;margin-top:5px}._colorOption_17n5r_1246{width:24px;height:24px;border-radius:50%;cursor:pointer;border:2px solid transparent;transition:all .2s ease}._colorOption_17n5r_1246:hover{transform:scale(1.2)}._colorOption_17n5r_1246._active_17n5r_1257{border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.3)}._fontSelector_17n5r_1262{width:100%;padding:10px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);cursor:pointer}._fontSelector_17n5r_1262:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}._fontSelector_17n5r_1262 option{padding:8px}[data-theme=dark] ._fontSelector_17n5r_1262{background-color:rgba(255,255,255,.15);border-color:rgba(255,255,255,.3);color:#fff;font-weight:500;text-shadow:0 0 1px rgba(0,0,0,.5)}[data-theme=dark] ._fontSelector_17n5r_1262 option{background-color:#2a2a2a;color:#fff;font-weight:400;padding:12px 8px}._addOptionButton_17n5r_394{display:flex;align-items:center;justify-content:center;gap:8px;background:none;border:1px dashed var(--border);width:100%;padding:10px;border-radius:8px;margin-top:10px;cursor:pointer;color:var(--accent);font-size:14px;transition:all .2s ease}._addOptionButton_17n5r_394:hover:not(:disabled){background-color:rgba(29,161,242,.05);border-color:var(--accent)}._addOptionButton_17n5r_394:disabled{opacity:.5;cursor:not-allowed}[data-theme=dark] ._addOptionButton_17n5r_394{border-color:rgba(255,255,255,.2)}[data-theme=dark] ._addOptionButton_17n5r_394:hover:not(:disabled){background-color:rgba(29,161,242,.1)}._addOptionButton_17n5r_394 svg{font-size:16px}._colorPickerContainer_17n5r_1327{position:relative;display:inline-block}._colorPreview_17n5r_1332{width:42px;height:42px;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;border:2px solid var(--border);transition:all .2s ease}._colorPreview_17n5r_1332:hover{transform:scale(1.1);box-shadow:0 2px 8px rgba(0,0,0,.1)}[data-theme=dark] ._colorPreview_17n5r_1332{border-color:rgba(255,255,255,.2)}[data-theme=dark] ._colorPreview_17n5r_1332:hover{box-shadow:0 2px 8px rgba(0,0,0,.2)}._dropletIcon_17n5r_1354{color:rgba(255,255,255,.8);font-size:20px;filter:drop-shadow(0 0 1px rgba(0,0,0,.8))}._colorPickerPopup_17n5r_1360{position:absolute;z-index:100;top:calc(100% + 5px);left:0}._colorPickerPopup_17n5r_1360 ._react-colorful_17n5r_1366{border-radius:8px;box-shadow:0 2px 15px rgba(0,0,0,.15)}[data-theme=dark] ._colorPickerPopup_17n5r_1360 ._react-colorful_17n5r_1366{box-shadow:0 2px 15px rgba(0,0,0,.3)}._colorPickerCover_17n5r_1374{position:fixed;top:0;right:0;bottom:0;left:0;z-index:-1}._colorNote_17n5r_1383{font-size:12px;margin-top:8px;color:var(--accent);font-style:italic;line-height:1.4;padding:5px 8px;background-color:rgba(var(--accent-rgb),.1);border-radius:4px}[data-theme=dark] ._colorNote_17n5r_1383{background-color:rgba(var(--accent-rgb),.15)}._likeAnimation_17n5r_1397{animation:_likePulse_17n5r_1 .5s cubic-bezier(.4,0,.2,1)}@keyframes _likePulse_17n5r_1{0%{transform:scale(1)}50%{transform:scale(1.3)}to{transform:scale(1)}}._authPrompt_17n5r_1412{text-align:center;padding:20px;background:var(--bg-secondary);border-radius:12px;margin-bottom:20px;border:1px solid var(--border)}._authPrompt_17n5r_1412 p{margin:0 0 10px;color:var(--text-secondary)}._authPrompt_17n5r_1412 ._loginButton_17n5r_1424{display:inline-block;padding:8px 16px;background:var(--accent);color:#fff;text-decoration:none;border-radius:6px;transition:all .2s ease}._authPrompt_17n5r_1412 ._loginButton_17n5r_1424:hover{background:var(--accent-hover);transform:translateY(-1px)}._titleInput_17n5r_1438{width:100%;padding:12px 16px;border:1px solid var(--border);border-radius:8px;margin-bottom:12px;background-color:var(--bg-input);color:var(--text-primary);font-size:18px;font-weight:600}._titleInput_17n5r_1438:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._titleInput_17n5r_1438::placeholder{color:var(--text-tertiary);font-weight:400}[data-theme=dark] ._titleInput_17n5r_1438{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1)}[data-theme=dark] ._titleInput_17n5r_1438:focus{box-shadow:0 0 0 2px rgba(76,155,254,.2)}._postTitle_17n5r_1169{font-size:22px;font-weight:700;margin:0 0 16px;line-height:1.3;color:var(--text-primary);word-break:break-word}[data-theme=dark] ._postTitle_17n5r_1169 ._darkTextConversion_17n5r_590{color:var(--text-primary)!important}._editButton_17n5r_1478{background-color:rgba(46,204,113,.1);color:#2ecc71;border:none;border-radius:6px;padding:6px 10px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:4px;cursor:pointer;transition:all .2s;margin-right:8px}._editButton_17n5r_1478 svg{font-size:16px}._editButton_17n5r_1478:hover{background-color:rgba(46,204,113,.2);transform:translateY(-1px)}[data-theme=dark] ._editButton_17n5r_1478{background-color:rgba(46,204,113,.2);color:#2eec81}[data-theme=dark] ._editButton_17n5r_1478:hover{background-color:rgba(46,204,113,.3)}._adminActions_17n5r_1508{display:flex;align-items:center}@media (max-width: 576px){._postActions_17n5r_714{flex-direction:column;align-items:flex-start;gap:10px}._adminActions_17n5r_1508{width:100%;justify-content:space-between}._editButton_17n5r_1478,._deleteButton_17n5r_789{flex:1;justify-content:center}}._imageLoading_17n5r_1530{display:flex;align-items:center;justify-content:center;min-height:100px;background-color:rgba(0,0,0,.05);border-radius:8px;color:var(--text-secondary);font-size:14px;padding:20px;animation:_pulse_17n5r_1 1.5s infinite ease-in-out}._imageError_17n5r_1546{display:flex;align-items:center;justify-content:center;min-height:60px;background-color:rgba(255,0,0,.05);border-radius:8px;color:var(--error);font-size:14px;padding:10px;border:1px dashed var(--error-light)}[data-theme=dark] ._imageError_17n5r_1546{background-color:rgba(255,0,0,.1)}@keyframes _pulse_17n5r_1{0%{opacity:.6}50%{opacity:.8}to{opacity:.6}}._editPostForm_17n5r_1573{background-color:var(--bg-highlight);border-radius:12px;padding:20px;margin-bottom:15px;border:1px solid var(--border)}[data-theme=dark] ._editPostForm_17n5r_1573{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1)}._editPostForm_17n5r_1573 ._errorMessage_17n5r_158{margin-bottom:15px}._editPostForm_17n5r_1573 form{display:flex;flex-direction:column;gap:15px}._cancelEditButton_17n5r_1593{padding:10px 18px;background-color:var(--bg-tertiary);color:var(--text-secondary);border:1px solid var(--border);border-radius:var(--radius-md);font-size:14px;font-weight:500;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:8px}._cancelEditButton_17n5r_1593:hover:not(:disabled){background-color:var(--bg-hover)}._cancelEditButton_17n5r_1593:disabled{opacity:.7;cursor:not-allowed}._cancelEditButton_17n5r_1593 svg{font-size:16px}._adminActions_17n5r_1508{display:flex;gap:8px}@media (max-width: 576px){._adminActions_17n5r_1508{width:100%;margin-top:10px}._adminActions_17n5r_1508 button{flex:1;justify-content:center}}._imagePreview_17n5r_1633{max-width:100%;margin-top:10px;border-radius:8px;overflow:hidden;border:1px solid var(--border)}._imagePreview_17n5r_1633 img{max-width:100%;height:auto;display:block;border-radius:6px}._imagePreview_17n5r_1633 ._imageNote_17n5r_1646{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--text-tertiary);padding:6px 8px;background-color:var(--bg-highlight)}._imagePreview_17n5r_1633 ._imageNote_17n5r_1646 svg{font-size:14px;color:var(--accent)}._imageLoading_17n5r_1530{display:flex;align-items:center;justify-content:center;min-height:60px;background-color:var(--bg-highlight);border-radius:8px;color:var(--text-secondary);font-size:14px;padding:10px;animation:_pulse_17n5r_1 1.5s infinite}[data-theme=dark] ._imageLoading_17n5r_1530{background-color:rgba(255,255,255,.05)}._loadMoreContainer_17n5r_1676{text-align:center;padding:25px 0;margin:10px 0;display:flex;flex-direction:column;align-items:center;justify-content:center}._loadMoreSpinner_17n5r_1686{display:flex;align-items:center;justify-content:center;gap:12px;font-size:18px;color:var(--text-secondary);padding:15px 20px;border-radius:10px;background-color:var(--bg-highlight);box-shadow:0 2px 8px rgba(0,0,0,.08);width:auto;min-width:250px}._loadMoreSpinner_17n5r_1686 svg{font-size:24px;animation:_spin_17n5r_1 1.5s linear infinite}[data-theme=dark] ._loadMoreSpinner_17n5r_1686{background-color:rgba(255,255,255,.05);box-shadow:0 2px 8px rgba(0,0,0,.15)}._noMorePosts_17n5r_1709{font-size:18px;color:var(--text-secondary);margin:15px 0;padding:15px 20px;background-color:var(--bg-highlight);border-radius:10px;text-align:center;width:auto;min-width:250px}[data-theme=dark] ._noMorePosts_17n5r_1709{background-color:rgba(255,255,255,.05)}@keyframes _spin_17n5r_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._adminPanel_guy5k_2{max-width:1200px;margin:2rem auto;padding:1.5rem;background-color:var(--bg-primary);border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,.08);position:relative;overflow:hidden;border:1px solid var(--border-color)}._adminPanel_guy5k_2:before{content:"";position:absolute;top:0;left:0;width:100%;height:4px;background:linear-gradient(90deg,#666,#444)}._title_guy5k_23{font-size:2rem;margin-bottom:1.75rem;padding-bottom:1rem;border-bottom:2px solid #666;color:var(--text-primary);font-weight:600;display:flex;align-items:center;gap:12px}._title_guy5k_23 svg{color:var(--text-secondary)}._error_guy5k_38{padding:1rem 1.25rem;margin-bottom:1.5rem;background-color:rgba(220,53,69,.08);color:#dc3545;border-radius:10px;border-left:4px solid #dc3545;font-size:1rem;display:flex;align-items:center;animation:_fadeIn_guy5k_1 .3s ease-in-out}._message_guy5k_51{padding:1rem 1.25rem;margin-bottom:1.5rem;border-radius:10px;font-size:1rem;display:flex;align-items:center;animation:_fadeIn_guy5k_1 .3s ease-in-out}._message_guy5k_51._success_guy5k_60{background-color:rgba(40,167,69,.08);border-left:4px solid #28a745;color:#28a745}._message_guy5k_51._info_guy5k_65{background-color:rgba(13,110,253,.08);border-left:4px solid #0d6efd;color:#0d6efd}._message_guy5k_51._error_guy5k_38{background-color:rgba(220,53,69,.08);border-left:4px solid #dc3545;color:#dc3545}@keyframes _fadeIn_guy5k_1{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}._content_guy5k_86{display:grid;grid-template-columns:1fr;gap:2rem}@media (min-width: 768px){._content_guy5k_86{grid-template-columns:minmax(300px,1fr) minmax(350px,1.5fr);gap:2.5rem}}@media (max-width: 767px){._content_guy5k_86 ._usersSection_guy5k_98,._content_guy5k_86 ._editSection_guy5k_98{min-width:100%}}._usersSection_guy5k_98 h2,._editSection_guy5k_98 h2{font-size:1.4rem;margin-bottom:1.25rem;color:var(--text-primary);font-weight:600;padding-bottom:.75rem;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:10px}._usersSection_guy5k_98 h2 svg,._editSection_guy5k_98 h2 svg{color:var(--text-secondary)}._loader_guy5k_118{display:flex;align-items:center;justify-content:center;height:160px;color:var(--text-secondary);font-size:1.05rem}._loader_guy5k_118 svg{margin-right:12px;animation:_spin_guy5k_1 1.2s linear infinite;font-size:1.5rem}@keyframes _spin_guy5k_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._usersList_guy5k_140{max-height:680px;overflow-y:auto;border:1px solid var(--border-color);border-radius:10px;background-color:var(--bg-primary);box-shadow:0 4px 16px rgba(0,0,0,.04)}._usersList_guy5k_140::-webkit-scrollbar{width:10px}._usersList_guy5k_140::-webkit-scrollbar-track{background:var(--bg-secondary);border-radius:10px}._usersList_guy5k_140::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:10px}._usersList_guy5k_140::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}._userItem_guy5k_163{display:flex;padding:1.25rem;border-bottom:1px solid var(--border-color);cursor:pointer!important;transition:all .25s ease}._userItem_guy5k_163:hover{background-color:var(--bg-hover);transform:translateY(-2px)}._userItem_guy5k_163._selected_guy5k_174{background-color:rgba(var(--accent-rgb),.08);border-left:4px solid var(--accent)}._userItem_guy5k_163:last-child{border-bottom:none}._userAvatar_guy5k_182{flex-shrink:0;width:60px;height:60px;margin-right:1.25rem;border-radius:50%;overflow:hidden;box-shadow:0 4px 10px rgba(0,0,0,.15)}._userAvatar_guy5k_182 img{width:100%;height:100%;border-radius:50%;object-fit:cover}._userAvatar_guy5k_182 ._noAvatar_guy5k_197{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#666,#444);color:#fff;border-radius:50%;font-weight:600;font-size:1.25rem}._userInfo_guy5k_210{flex:1;min-width:0;display:flex;flex-direction:column;justify-content:center}._userName_guy5k_218{font-weight:600;margin-bottom:.35rem;color:var(--text-primary);font-size:1.15rem}._userName_guy5k_218[title="Перейти к профилю пользователя"]{color:var(--accent);text-decoration:underline;position:relative;transition:all .2s ease;cursor:pointer}._userName_guy5k_218[title="Перейти к профилю пользователя"]:hover{color:var(--accent-dark);text-decoration:none}._userName_guy5k_218[title="Перейти к профилю пользователя"]:after{content:"";position:absolute;bottom:-2px;left:0;width:0;height:2px;background-color:var(--accent);transition:width .3s ease}._userName_guy5k_218[title="Перейти к профилю пользователя"]:hover:after{width:100%}._userEmail_guy5k_249{font-size:.95rem;color:var(--text-secondary);margin-bottom:.75rem}._userPerks_guy5k_255{display:flex;flex-wrap:wrap;gap:.6rem}._perk_guy5k_261{display:inline-flex;align-items:center;justify-content:center;font-size:.75rem;padding:.3rem .7rem;border-radius:14px;font-weight:500;letter-spacing:.4px;text-transform:uppercase}._perk_guy5k_261._user_guy5k_98{background-color:var(--bg-secondary);color:var(--text-secondary)}._perk_guy5k_261._early_user_guy5k_276{background-color:rgba(var(--early-user-color),.15);color:var(--early-user-color)}._perk_guy5k_261._sponsor_guy5k_280{background-color:rgba(var(--sponsor-color),.15);color:var(--sponsor-color)}._perk_guy5k_261._admin_guy5k_2{background-color:rgba(var(--admin-color),.15);color:var(--admin-color);font-weight:600}._editSection_guy5k_98 h2{font-size:1.25rem;margin-bottom:1rem;color:var(--text-primary);font-weight:600;padding-bottom:.5rem;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:8px}._editSection_guy5k_98 h2 svg{color:var(--text-secondary)}._editForm_guy5k_305{background-color:var(--bg-primary);padding:2rem;border-radius:12px;border:1px solid var(--border-color);box-shadow:0 4px 20px rgba(0,0,0,.05);max-width:100%}._formGroup_guy5k_314{margin-bottom:1.75rem}._formGroup_guy5k_314 label{display:block;margin-bottom:.75rem;font-size:1rem;font-weight:500;color:var(--text-primary);display:flex;align-items:center;gap:8px}._formGroup_guy5k_314 label svg{color:var(--text-secondary);font-size:1.2rem}._formGroup_guy5k_314 input[type=text],._formGroup_guy5k_314 input[type=email],._formGroup_guy5k_314 input[type=password]{width:100%;padding:.85rem 1rem;border:1px solid var(--border-color);border-radius:8px;font-size:1.05rem;background-color:var(--bg-input);color:var(--text-primary);transition:all .2s ease;height:50px}._formGroup_guy5k_314 input[type=text]:focus,._formGroup_guy5k_314 input[type=email]:focus,._formGroup_guy5k_314 input[type=password]:focus{outline:none;border-color:var(--text-secondary);box-shadow:0 0 0 4px rgba(var(--accent-rgb),.15)}._formGroup_guy5k_314 input[type=text]::placeholder,._formGroup_guy5k_314 input[type=email]::placeholder,._formGroup_guy5k_314 input[type=password]::placeholder{color:var(--text-secondary);opacity:.6}._perksOptions_guy5k_358{display:flex;flex-direction:column;gap:1rem;margin-top:.75rem;padding:1.25rem;background-color:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color)}._perkOption_guy5k_369{display:flex;align-items:center}._perkOption_guy5k_369 label{margin:0 0 0 .75rem;font-weight:400;cursor:pointer;font-size:1rem;color:var(--text-primary)}._perkOption_guy5k_369 input[type=checkbox]{cursor:pointer;width:20px;height:20px}._perkOption_guy5k_369 input[type=checkbox]:checked{accent-color:var(--accent)}._basePerk_guy5k_389{background-color:var(--bg-hover);padding:10px;border-radius:6px;margin-bottom:10px;border-left:3px solid var(--accent)}._basePerk_guy5k_389 input[type=checkbox]{opacity:.7}._basePerk_guy5k_389 ._baseLabel_guy5k_399{font-weight:500}._basePerk_guy5k_389 ._baseLabel_guy5k_399 ._baseNote_guy5k_402{font-size:.8rem;opacity:.7;font-style:italic;margin-left:5px}._protectedUser_guy5k_409{display:inline-block;font-size:.7rem;background-color:rgba(var(--admin-color),.1);color:var(--admin-color);padding:2px 6px;border-radius:4px;margin-top:5px;font-weight:600}table{width:100%;border-collapse:collapse}table th,table td{padding:12px 15px;text-align:left;border-bottom:1px solid var(--border-color)}table th{font-weight:600;color:var(--text-secondary)}table tr:hover{background-color:var(--bg-hover)}._selectedUser_guy5k_437{background-color:rgba(var(--accent-rgb),.08)!important}._editUserButton_guy5k_441{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:5px;border-radius:4px;transition:all .2s}._editUserButton_guy5k_441:hover{background-color:var(--bg-hover);color:var(--text-primary)}._editUserButton_guy5k_441:disabled{opacity:.4;cursor:not-allowed}._editUserButton_guy5k_441:disabled:hover{background:none;color:var(--text-secondary)}._formActions_guy5k_463{display:flex;justify-content:flex-end;gap:1.25rem;margin-top:2.5rem}._cancelButton_guy5k_470,._saveButton_guy5k_471{padding:.85rem 2rem;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;border:none;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;min-width:140px}._cancelButton_guy5k_470{background-color:var(--bg-secondary);color:var(--text-primary)}._cancelButton_guy5k_470:hover{background-color:var(--bg-hover);transform:translateY(-2px)}._cancelButton_guy5k_470 svg{font-size:1.1rem}._saveButton_guy5k_471{background:var(--accent);color:#fff}._saveButton_guy5k_471:hover{background:var(--accent-dark);transform:translateY(-2px);box-shadow:0 4px 12px rgba(var(--accent-rgb),.3)}._saveButton_guy5k_471:disabled{opacity:.7;cursor:not-allowed;transform:none;box-shadow:none}._saveButton_guy5k_471 svg{font-size:1.1rem}._noUserSelected_guy5k_517{background-color:var(--bg-primary);padding:3rem 2rem;border-radius:12px;border:1px solid var(--border-color);box-shadow:0 4px 20px rgba(0,0,0,.05);display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:350px;text-align:center;color:var(--text-secondary)}._noUserSelected_guy5k_517 p{margin:1.5rem 0;font-size:1.1rem}._noUserSelected_guy5k_517 svg{font-size:4rem;color:var(--border-color);margin-bottom:1.5rem}._emptyList_guy5k_541{padding:2rem;text-align:center;color:var(--text-secondary)}._userActions_guy5k_547{display:flex;gap:8px;justify-content:flex-end}._banUserButton_guy5k_553{background:none;border:none;color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;padding:6px;border-radius:4px;transition:all .2s}._banUserButton_guy5k_553:hover{background-color:rgba(231,76,60,.1);color:#e74c3c}._banUserButton_guy5k_553:disabled{opacity:.5;cursor:not-allowed}._bannedUser_guy5k_574{display:inline-block;font-size:12px;background-color:#e74c3c;color:#fff;padding:2px 8px;border-radius:12px;margin-left:8px;font-weight:500}._modalOverlay_guy5k_585{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;background:linear-gradient(135deg,rgba(0,0,0,.75),rgba(0,0,0,.85));display:flex;align-items:center;justify-content:center;z-index:10000;backdrop-filter:blur(8px);perspective:1000px;box-sizing:border-box;overscroll-behavior:contain;transform:translateZ(0);isolation:isolate}@media (max-width: 576px){._modalOverlay_guy5k_585{padding:0}}._banDialog_guy5k_611{position:relative;background-color:var(--bg-primary);border-radius:16px;box-shadow:var(--modal-shadow);width:90%;max-width:500px;overflow:hidden;animation:_fadeIn_guy5k_1 .3s ease-out;border:1px solid var(--modal-border);display:flex;flex-direction:column;transform-style:preserve-3d;max-height:90vh}@media (max-width: 576px){._banDialog_guy5k_611{width:100%;height:100vh;max-width:100%;border-radius:0;animation:_slideUp_guy5k_1 .4s ease-out;border:none}}@keyframes _fadeIn_guy5k_1{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _slideUp_guy5k_1{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}._banDialogHeader_guy5k_657{background-color:#e74c3c;color:#fff;padding:20px;display:flex;justify-content:space-between;align-items:center;position:relative}._banDialogHeader_guy5k_657 h3{margin:0;font-size:20px;font-weight:600;text-align:center;width:100%}._banDialogHeader_guy5k_657 ._closeButton_guy5k_673{background:rgba(255,255,255,.2);border:none;color:#fff;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s;position:absolute;right:15px}._banDialogHeader_guy5k_657 ._closeButton_guy5k_673:hover{background-color:rgba(255,255,255,.3);transform:rotate(90deg)}@media (max-width: 576px){._banDialogHeader_guy5k_657{padding:24px 20px}._banDialogHeader_guy5k_657 h3{font-size:22px}}._banDialogContent_guy5k_701{padding:24px;flex:1}._banDialogContent_guy5k_701 ._currentBanInfo_guy5k_705{text-align:center;padding:15px;background-color:rgba(231,76,60,.1);border-radius:8px;margin-bottom:20px}._banDialogContent_guy5k_701 ._currentBanInfo_guy5k_705 p{margin-bottom:20px;color:var(--text-primary);font-size:16px}[data-theme=dark] ._banDialogContent_guy5k_701 ._currentBanInfo_guy5k_705{background-color:rgba(231,76,60,.15)}._banDialogContent_guy5k_701 ._formGroup_guy5k_314{margin-bottom:20px}._banDialogContent_guy5k_701 ._formGroup_guy5k_314 label{display:block;margin-bottom:10px;font-weight:500;color:var(--text-primary)}._banDialogContent_guy5k_701 ._formGroup_guy5k_314 textarea,._banDialogContent_guy5k_701 ._formGroup_guy5k_314 select{width:100%;padding:12px 15px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);font-size:15px}._banDialogContent_guy5k_701 ._formGroup_guy5k_314 textarea:focus,._banDialogContent_guy5k_701 ._formGroup_guy5k_314 select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}[data-theme=dark] ._banDialogContent_guy5k_701 ._formGroup_guy5k_314 textarea,[data-theme=dark] ._banDialogContent_guy5k_701 ._formGroup_guy5k_314 select{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1)}[data-theme=dark] ._banDialogContent_guy5k_701 ._formGroup_guy5k_314 textarea:focus,[data-theme=dark] ._banDialogContent_guy5k_701 ._formGroup_guy5k_314 select:focus{box-shadow:0 0 0 2px rgba(29,161,242,.3)}._banDialogContent_guy5k_701 ._formGroup_guy5k_314 textarea{resize:none;min-height:120px}@media (max-width: 576px){._banDialogContent_guy5k_701{padding:24px;flex:1;overflow-y:auto}._banDialogContent_guy5k_701 ._formGroup_guy5k_314 label{font-size:16px}._banDialogContent_guy5k_701 textarea,._banDialogContent_guy5k_701 select{padding:15px;font-size:16px}}._banDialogActions_guy5k_769{display:flex;justify-content:flex-end;gap:12px;margin-top:25px}._banDialogActions_guy5k_769 button{padding:12px 20px;border-radius:30px;font-size:15px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}._banDialogActions_guy5k_769 button:disabled{opacity:.7;cursor:not-allowed}._banDialogActions_guy5k_769 ._cancelButton_guy5k_470{background:none;border:1px solid var(--border);color:var(--text-secondary)}._banDialogActions_guy5k_769 ._cancelButton_guy5k_470:hover:not(:disabled){background:var(--bg-hover);border-color:var(--text-secondary)}[data-theme=dark] ._banDialogActions_guy5k_769 ._cancelButton_guy5k_470{border-color:rgba(255,255,255,.2)}[data-theme=dark] ._banDialogActions_guy5k_769 ._cancelButton_guy5k_470:hover:not(:disabled){background:rgba(255,255,255,.1);border-color:rgba(255,255,255,.3)}._banDialogActions_guy5k_769 ._banButton_guy5k_806{background:#e74c3c;color:#fff;border:none}._banDialogActions_guy5k_769 ._banButton_guy5k_806:hover:not(:disabled){background:#c0392b;transform:translateY(-2px);box-shadow:0 4px 12px rgba(231,76,60,.3)}[data-theme=dark] ._banDialogActions_guy5k_769 ._banButton_guy5k_806{background:#c0392b}[data-theme=dark] ._banDialogActions_guy5k_769 ._banButton_guy5k_806:hover:not(:disabled){background:#a93226}._banDialogActions_guy5k_769 ._unbanButton_guy5k_822{background:#2ecc71;color:#fff;border:none;padding:12px 20px;border-radius:30px;font-size:15px;font-weight:500;display:flex;align-items:center;gap:8px;transition:all .2s;margin:0 auto}._banDialogActions_guy5k_769 ._unbanButton_guy5k_822:hover:not(:disabled){background:#27ae60;transform:translateY(-2px);box-shadow:0 4px 12px rgba(46,204,113,.3)}._banDialogActions_guy5k_769 ._unbanButton_guy5k_822:disabled{opacity:.7;cursor:not-allowed}[data-theme=dark] ._banDialogActions_guy5k_769 ._unbanButton_guy5k_822{background:#27ae60}[data-theme=dark] ._banDialogActions_guy5k_769 ._unbanButton_guy5k_822:hover:not(:disabled){background:#219653}@media (max-width: 576px){._banDialogActions_guy5k_769{margin-top:30px;padding-bottom:15px}._banDialogActions_guy5k_769 button{padding:15px 20px;font-size:16px}}._eventsSection_guy5k_863{margin-bottom:2rem;padding:1.5rem;background-color:var(--bg-primary);border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,.06);border:1px solid var(--border-color)}._eventsSection_guy5k_863 h2{font-size:1.4rem;margin-bottom:1.25rem;color:var(--text-primary);font-weight:600;padding-bottom:.75rem;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:10px}._eventsSection_guy5k_863 h2 svg{color:var(--text-secondary)}._eventsList_guy5k_886{display:flex;flex-direction:column;gap:1rem}._eventItem_guy5k_892{display:flex;align-items:center;justify-content:space-between;padding:1.25rem;background-color:var(--bg-secondary);border-radius:10px}@media (max-width: 768px){._eventItem_guy5k_892{flex-direction:column;align-items:flex-start;gap:1rem}}._eventInfo_guy5k_908{flex:1}._eventInfo_guy5k_908 h3{font-size:1.2rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:600}._eventInfo_guy5k_908 p{color:var(--text-secondary);margin-bottom:.5rem;font-size:.95rem;max-width:90%}._eventInfo_guy5k_908 p:last-child{margin-bottom:0}._eventInfo_guy5k_908 p strong{color:var(--text-primary)}._eventToggle_guy5k_930{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;border-radius:8px;font-weight:600;font-size:.95rem;background-color:var(--bg-hover);color:var(--text-primary);border:none;cursor:pointer;transition:all .2s ease}._eventToggle_guy5k_930:hover:not(:disabled){background-color:var(--bg-secondary)}._eventToggle_guy5k_930:disabled{opacity:.6;cursor:not-allowed}._eventToggle_guy5k_930._active_guy5k_951{background-color:#28a745;color:#fff}._eventToggle_guy5k_930._active_guy5k_951:hover:not(:disabled){background-color:#218838}._eventToggle_guy5k_930 svg{font-size:1.5rem}._resetContainer_1iy2b_1{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:2rem;background-color:var(--background-color)}._resetCard_1iy2b_10{width:100%;max-width:400px;padding:2rem;background-color:var(--bg-secondary);border-radius:var(--radius-lg);box-shadow:var(--shadow)}._resetCard_1iy2b_10 h2{text-align:center;margin-bottom:1.5rem;color:var(--text-primary)}._resetForm_1iy2b_24{display:flex;flex-direction:column}._formGroup_1iy2b_29{margin-bottom:1rem}._formGroup_1iy2b_29 label{display:block;margin-bottom:.5rem;font-size:.875rem;font-weight:500;color:var(--text-secondary)}._formGroup_1iy2b_29 input{width:100%;padding:.75rem;border:1px solid var(--border);border-radius:var(--radius-md);font-size:1rem;background-color:var(--bg-input);color:var(--text-primary);transition:all var(--transition-fast)}._formGroup_1iy2b_29 input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light)}._formGroup_1iy2b_29 input:disabled{background-color:var(--bg-highlight);cursor:not-allowed}._resetButton_1iy2b_59{margin-top:1rem;padding:.75rem 1.5rem;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:1rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}._resetButton_1iy2b_59:hover{background-color:var(--accent-hover);transform:translateY(-2px)}._resetButton_1iy2b_59:disabled{opacity:.7;cursor:not-allowed}._message_1iy2b_80{padding:.75rem;margin-bottom:1rem;border-radius:var(--radius-md);font-size:.875rem}._message_1iy2b_80._success_1iy2b_86{background-color:rgba(var(--success-rgb, 40, 167, 69),.1);border-left:4px solid var(--success);color:var(--success)}._message_1iy2b_80._info_1iy2b_91{background-color:rgba(var(--info-rgb, 13, 110, 253),.1);border-left:4px solid var(--info);color:var(--info)}._message_1iy2b_80._error_1iy2b_96{background-color:rgba(var(--error-rgb, 220, 53, 69),.1);border-left:4px solid var(--error);color:var(--error)}._pageContainer_1uaky_1{display:flex;justify-content:center;align-items:flex-start;padding:40px 20px;color:var(--text-primary, #e0e0e0)}._formContainer_1uaky_9{width:100%;max-width:800px;background-color:var(--bg-card, rgba(32, 33, 36, .8));border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.3),0 1px 2px rgba(255,255,255,.05);padding:40px;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.05)}[data-theme=light] ._formContainer_1uaky_9{background-color:var(--bg-card-light, rgba(255, 255, 255, .8));box-shadow:0 10px 30px rgba(0,0,0,.1),0 1px 5px rgba(0,0,0,.05);border:1px solid rgba(0,0,0,.05)}@media (max-width: 768px){._formContainer_1uaky_9{padding:30px 20px}}._title_1uaky_30{text-align:center;margin-bottom:30px;color:var(--text-primary, #ffffff);font-size:36px;font-weight:700;letter-spacing:.5px;text-shadow:0 2px 4px rgba(0,0,0,.2);background:linear-gradient(135deg,var(--gradient-start, #ffffff),var(--accent, #9333ea));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}[data-theme=light] ._title_1uaky_30{color:var(--text-primary-light, #333);text-shadow:0 2px 4px rgba(0,0,0,.1);background:linear-gradient(135deg,var(--gradient-start-light, #333),var(--accent, #9333ea));-webkit-background-clip:text;background-clip:text}@media (max-width: 768px){._title_1uaky_30{font-size:28px;margin-bottom:24px}}._errorMessage_1uaky_57{background-color:rgba(220,53,69,.15);border-left:3px solid #dc3545;color:var(--text-primary, #e0e0e0);padding:12px 15px;border-radius:8px;margin-bottom:20px;font-size:14px;box-shadow:0 4px 6px rgba(0,0,0,.1)}[data-theme=light] ._errorMessage_1uaky_57{color:var(--text-primary-light, #333);background-color:rgba(220,53,69,.1)}._successMessage_1uaky_72{background-color:rgba(40,167,69,.15);border-left:3px solid #28a745;color:var(--text-primary, #e0e0e0);padding:12px 15px;border-radius:8px;margin-bottom:20px;font-size:14px;box-shadow:0 4px 6px rgba(0,0,0,.1)}[data-theme=light] ._successMessage_1uaky_72{color:var(--text-primary-light, #333);background-color:rgba(40,167,69,.1)}._formGroup_1uaky_87{margin-bottom:24px}._formGroup_1uaky_87 label{display:flex;align-items:center;margin-bottom:10px;color:var(--text-secondary, #c0c0c0);font-weight:500;font-size:16px}._formGroup_1uaky_87 ._inputIcon_1uaky_98{margin-right:8px;font-size:18px;color:var(--text-tertiary, #a0a0a0)}._formGroup_1uaky_87 ._inputWrapper_1uaky_103{position:relative;width:100%}._formGroup_1uaky_87 ._inputIconInside_1uaky_107{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-tertiary, #a0a0a0);font-size:16px;pointer-events:none;opacity:.9;z-index:30}._formGroup_1uaky_87 input{width:100%;padding:14px 14px 14px 40px;border:1px solid var(--border, rgba(255, 255, 255, .1));border-radius:8px;background-color:var(--bg-input, rgba(24, 25, 28, .7));color:var(--text-primary, #e0e0e0);font-size:16px;transition:all .3s;position:relative;z-index:25}._formGroup_1uaky_87 input:focus{outline:none;border-color:var(--accent, #9333ea);box-shadow:0 0 0 2px rgba(147,51,234,.2)}._formGroup_1uaky_87 input:disabled{opacity:.8;cursor:not-allowed}._formGroup_1uaky_87 input::placeholder{color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._formGroup_1uaky_87 input{background-color:var(--bg-input-light, rgba(245, 245, 247, .7));color:var(--text-primary-light, #333);border:1px solid var(--border-light, rgba(0, 0, 0, .1))}[data-theme=light] ._formGroup_1uaky_87 input::placeholder{color:var(--text-tertiary-light, #888)}._formGroup_1uaky_87 ._disabledInput_1uaky_150{background-color:var(--bg-disabled, rgba(40, 40, 45, .7));color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._formGroup_1uaky_87 ._disabledInput_1uaky_150{background-color:var(--bg-disabled-light, rgba(235, 235, 240, .7));color:var(--text-tertiary-light, #888)}._formGroup_1uaky_87 ._textarea_1uaky_158{width:100%;padding:14px;border:1px solid var(--border, rgba(255, 255, 255, .1));border-radius:8px;background-color:var(--bg-input, rgba(24, 25, 28, .7));color:var(--text-primary, #e0e0e0);font-size:16px;resize:vertical;min-height:120px;transition:all .3s}._formGroup_1uaky_87 ._textarea_1uaky_158:focus{outline:none;border-color:var(--accent, #9333ea);box-shadow:0 0 0 2px rgba(147,51,234,.2)}._formGroup_1uaky_87 ._textarea_1uaky_158:disabled{opacity:.7;cursor:not-allowed}._formGroup_1uaky_87 ._textarea_1uaky_158::placeholder{color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._formGroup_1uaky_87 ._textarea_1uaky_158{background-color:var(--bg-input-light, rgba(245, 245, 247, .7));color:var(--text-primary-light, #333);border:1px solid var(--border-light, rgba(0, 0, 0, .1))}[data-theme=light] ._formGroup_1uaky_87 ._textarea_1uaky_158::placeholder{color:var(--text-tertiary-light, #888)}._dropArea_1uaky_191{padding:25px;border:2px dashed var(--border, rgba(255, 255, 255, .2));border-radius:8px;background-color:var(--bg-input, rgba(24, 25, 28, .5));text-align:center;transition:all .3s;cursor:pointer}._dropArea_1uaky_191:hover,._dropArea_1uaky_191._highlight_1uaky_200{border-color:var(--accent, #9333ea);background-color:var(--bg-input-hover, rgba(30, 32, 35, .7))}._dropArea_1uaky_191 p{margin:8px 0;color:var(--text-secondary, #c0c0c0)}._dropArea_1uaky_191 ._dropHint_1uaky_208{font-size:14px;color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._dropArea_1uaky_191{background-color:var(--bg-input-light, rgba(245, 245, 247, .5));border:2px dashed var(--border-light, rgba(0, 0, 0, .2))}[data-theme=light] ._dropArea_1uaky_191:hover,[data-theme=light] ._dropArea_1uaky_191._highlight_1uaky_200{border-color:var(--accent, #9333ea);background-color:var(--bg-input-hover-light, rgba(235, 235, 240, .7))}[data-theme=light] ._dropArea_1uaky_191 p{color:var(--text-secondary-light, #555)}[data-theme=light] ._dropArea_1uaky_191 ._dropHint_1uaky_208{color:var(--text-tertiary-light, #888)}._browseButton_1uaky_227{background:none;border:none;color:var(--accent, #9333ea);font-weight:600;cursor:pointer;padding:0;text-decoration:underline;transition:all .2s}._browseButton_1uaky_227:hover{color:var(--accent-hover, #a855f7)}._imagePreviewContainer_1uaky_241{display:flex;flex-wrap:wrap;gap:10px;margin-top:15px}._imagePreview_1uaky_241{position:relative;width:100px;height:100px;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px rgba(0,0,0,.2)}._imagePreview_1uaky_241 img{width:100%;height:100%;object-fit:cover}._imagePreview_1uaky_241 ._removeImageButton_1uaky_261{position:absolute;top:5px;right:5px;width:24px;height:24px;border-radius:50%;background-color:rgba(0,0,0,.6);color:#fff;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:.8;transition:all .2s}._imagePreview_1uaky_241 ._removeImageButton_1uaky_261:hover{opacity:1;background-color:rgba(220,53,69,.8)}._submitButton_1uaky_283{width:100%;padding:14px;background:linear-gradient(90deg,var(--accent, #9333ea),var(--accent-hover, #a855f7));color:#fff;border:none;border-radius:30px;font-size:16px;font-weight:600;cursor:pointer;margin-top:10px;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden;box-shadow:0 4px 10px rgba(0,0,0,.2)}._submitButton_1uaky_283 ._buttonIcon_1uaky_301{margin-right:8px;font-size:18px}._submitButton_1uaky_283:hover:not(:disabled){background:linear-gradient(90deg,var(--accent-hover, #a855f7),var(--accent, #9333ea));box-shadow:0 6px 15px rgba(0,0,0,.3);transform:translateY(-2px)}._submitButton_1uaky_283:disabled{opacity:.7;cursor:not-allowed}._submitButton_1uaky_283:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(to right,rgba(255,255,255,0),rgba(255,255,255,.2),rgba(255,255,255,0));transform:rotate(45deg);opacity:0;transition:all .5s}._submitButton_1uaky_283:hover:not(:disabled):before{animation:_shimmer_1uaky_1 1.5s infinite}@keyframes _shimmer_1uaky_1{0%{left:-150%;opacity:0}50%{opacity:.4}to{left:150%;opacity:0}}@media (max-width: 600px){._formContainer_1uaky_9{padding:25px 15px}._title_1uaky_30{font-size:24px;margin-bottom:20px}._formGroup_1uaky_87{margin-bottom:18px}._formGroup_1uaky_87 input,._formGroup_1uaky_87 ._textarea_1uaky_158{padding:12px 12px 12px 36px;font-size:14px}._formGroup_1uaky_87 label{font-size:14px}._formGroup_1uaky_87 ._inputIconInside_1uaky_107{left:10px;font-size:14px}._dropArea_1uaky_191{padding:15px}._imagePreview_1uaky_241{width:80px;height:80px}}._themeButton_x78qx_1{position:absolute;top:10px;right:10px;z-index:10;padding:10px;background:#000;border-radius:35px;cursor:pointer;transition:transform .3s ease}[data-theme=dark] ._themeButton_x78qx_1{background:#fff}._themeButton_x78qx_1:hover{transform:scale(1.1)}._themeButton_x78qx_1:focus{outline:none}')),document.head.appendChild(r)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}}();
var e,t,a,s,n,r,i,o,l,c,d,m,u,p,_,h,x,g,v,f,y,b,j,k,w,N,S,C,P,A,E,I,B,O,D,T,q,L,F,z=Object.freeze,M=Object.defineProperty,U=(e,t)=>z(M(e,"raw",{value:z(t||e.slice())}));function R(){import.meta.url,import("_").catch((()=>1)),async function*(){}().next()}import{j as G,A as H,m as V,r as W,R as J,a as $,L as Y,c as Z,F as Q,b as X,d as K,e as ee,f as te,g as ae,h as se,i as ne,k as re,u as ie,l as oe,n as le,o as ce,p as de,q as me,s as ue,t as pe,v as _e,w as he,x as xe,y as ge,z as ve,B as fe,C as ye,D as be,E as je,G as ke,H as we,I as Ne,J as Se,K as Ce,M as Pe,N as Ae,O as Ee,P as Ie,Q as Be,S as Oe,T as De,Z as Te,U as qe,V as Le,W as Fe,X as ze,Y as Me,_ as Ue,$ as Re,a0 as Ge,a1 as He,a2 as Ve,a3 as We,a4 as Je,a5 as $e,a6 as Ye,a7 as Ze,a8 as Qe}from"../chunks/vendor-react.RtR7EKhD.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Xe="_page_1f14w_168",Ke="_text-animation_1f14w_262",et="_text-animation-slow_1f14w_273",tt={window:"_window_52q69_2",window__message:"_window__message_52q69_13",window__panel:"_window__panel_52q69_23",window__panel__iconWrapper:"_window__panel__iconWrapper_52q69_35",window__panel__navButtons:"_window__panel__navButtons_52q69_41",window__panel__navButtons__navButton:"_window__panel__navButtons__navButton_52q69_47",window__panel__navButtons__navButton__arrow:"_window__panel__navButtons__navButton__arrow_52q69_53",disabled:"_disabled_52q69_65"},at=({children:e,direction:t,selectedIcon:a,showMessage:s=!0})=>G.jsx(H,{mode:"wait",custom:t,children:a?G.jsx(V.div,{custom:t,initial:{opacity:0,x:t>0?100:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:t>0?-100:100},transition:{duration:.3},layout:!0,style:{width:"100%",height:"100%"},children:e},a):s&&G.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:G.jsx("div",{className:tt.window__message,children:G.jsx("h2",{children:"Выберите персонажа"})})},"message")}),st={menu:"_menu_1mm9j_2",menu__left:"_menu__left_1mm9j_14",menu__left__pic:"_menu__left__pic_1mm9j_24",menu__right:"_menu__right_1mm9j_35",menu__right__titleblock:"_menu__right__titleblock_1mm9j_52",menu__right__titleblock__fullname:"_menu__right__titleblock__fullname_1mm9j_60",menu__right__titleblock__maininfo:"_menu__right__titleblock__maininfo_1mm9j_63"};function nt(e){if(!Number.isInteger(e)||e<0)throw new Error("Возраст должен быть неотрицательным целым числом");const t=e%10,a=e%100;return a>=11&&a<=19?"лет":1===t?"год":t>=2&&t<=4?"года":"лет"}const rt="guest",it="vivian",ot="akito",lt="lonarius",ct="faust",dt="igorpic",mt="lesyapic";function ut(e,t={}){const{format:a="auto",quality:s=90,width:n,height:r,version:i="v1746536649",dpr:o,flags:l,fetch_format:c}=t;let d=[];d.push("q_".concat(s)),o&&d.push("dpr_".concat(o)),l&&d.push("fl_".concat(l)),c&&d.push("f_".concat(c));const m=e=>e?"string"==typeof e&&e.includes("px")?parseInt(e.replace("px",""),10):e:null,u=m(n),p=m(r);u&&d.push("w_".concat(u)),p&&d.push("h_".concat(p)),"auto"===a||c||d.push("f_".concat(a));const _=d.length>0?d.join(",")+"/":"";let h=e;e.match(/\.(avif|webp|png|jpg|jpeg|svg)$/i)&&(h=e.substring(0,e.lastIndexOf(".")));const x=h.includes("/")?h.substring(h.lastIndexOf("/")+1):h;return"https://res.cloudinary.com/".concat("do9t8preg","/image/upload/").concat(_).concat(i,"/").concat(x)}const pt=({avatar:e=rt,alt:t="Аватар пользователя",className:a,style:s,size:n=40,onClick:r})=>G.jsx(_t,{path:e,alt:t,className:a,style:s,width:n,height:n,loading:"eager",onClick:r}),_t=({path:e,alt:t,className:a,style:s,width:n,height:r,loading:i="lazy",onLoad:o,onError:l,onClick:c})=>{const d={width:n,height:r},m="img_".concat(e,"_").concat(n||"auto","_").concat(r||"auto"),u=ut(e,{...d,format:"avif"}),p=ut(e,{...d,format:"webp"}),_=ut(e,{...d,format:"png"});return G.jsxs("picture",{children:[G.jsx("source",{srcSet:u,type:"image/avif"},"avif_".concat(m)),G.jsx("source",{srcSet:p,type:"image/webp"},"webp_".concat(m)),G.jsx("img",{src:_,alt:t||"Изображение",className:a,style:s,width:n,height:r,loading:i,crossOrigin:"anonymous",onLoad:o,onClick:c,onError:e=>{l&&l(e)}},"png_".concat(m))]})},ht={button:"_button_1jwbf_1",icon:"_icon_1jwbf_39"},xt=({text:e})=>G.jsx(G.Fragment,{children:e.split("").map(((e,t)=>{const a=" "===e?" ":e;return G.jsx("span",{style:{animationDelay:"".concat(.05*t,"s")},children:a},t)}))}),gt="_modalOverlay_1214q_2",vt="_modalOverlay__content_1214q_15",ft="_modalOverlay__closeButton_1214q_29",yt="_modalOverlay__textContent_1214q_42",bt="_modalOverlay__navigation_1214q_48",jt="_modalOverlay__arrowRight_1214q_54",kt="_modalOverlay__arrowLeft_1214q_54",wt="_modalOverlay__title_1214q_67",Nt="_modalOverlay__textBlock_1214q_86",St="_modalOverlay__textBlock__textCont_1214q_90",Ct="_modalOverlay__pageIndicator_1214q_105",Pt="_fadeIn_1214q_117",At="_fadeOut_1214q_121",Et="_disabled_1214q_125",It=e=>e&&"string"==typeof e?e.replace(/class=/g,"className="):"",Bt=e=>{if(!e||"string"!=typeof e)return[];if(!/<p>.*?<\/p>/g.test(e))return["<p>".concat(e,"</p>")];if(!("undefined"!=typeof window))return[e];const t=e.split("<p>").filter(Boolean).map((e=>e.split("</p>")[0].trim())),a=t.pop()||null,s=[];let n="",r=0;const i=window.innerWidth<=768,o=window.innerHeight,l=document.createElement("div");l.style.position="absolute",l.style.visibility="hidden",l.style.maxWidth="600px",l.style.fontFamily="graphr, sans-serif",l.style.fontSize="1.6rem",l.style.lineHeight="1.5",l.style.padding="10px",l.style.wordWrap="break-word";const c=document.createElement("style");c.textContent="\n    .blur {\n      filter: blur(4px);\n      display: inline-block;\n    }\n  ",document.head.appendChild(c),document.body.appendChild(l);try{const e=i&&o>400?600:800,c=i?500:1/0;if(t.length>0){const e=t.shift().trim();n="<p>".concat(e,"</p>"),r=e.length}if(t.forEach((t=>{const a=t.trim(),i="<p>".concat(a,"</p>"),o=a.length;l.innerHTML=It(n+i),l.scrollHeight>e||r+o>c?(s.push(n),n=i,r=o):(n+=i,r+=o)})),n&&s.push(n),a&&a.trim()){const t="<blockquote>".concat(a.trim(),"</blockquote>");l.innerHTML=It(n+t),l.scrollHeight>e?(s.push(n),s.push(t)):s[s.length-1]+=t}}finally{document.body.removeChild(l),document.head.removeChild(c)}return s},Ot=e=>{if(!e)return"Не найден";const{name:t}=e;return["Фауст","Лонариус"].includes(t)?"".concat(t,"а"):t},Dt={container:{fontFamily:"Graphr, sans-serif",lineHeight:"1.5"},paragraph:{marginBottom:"10px",lineHeight:"1.5",position:"relative"},bulletPoint:{marginBottom:"10px",textIndent:"0",position:"relative"},blockquote:{margin:"2rem 0rem",borderLeft:"4px solid var(--accent-color)",fontStyle:"italic",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"0 8px 8px 0"},blurredText:{filter:"blur(4px)",display:"inline-block"}},Tt=({html:e,onHeightChange:t})=>{const a=W.useRef(null);if(W.useEffect((()=>{if(a.current&&t){const e=a.current.scrollHeight;t(e)}}),[e,t]),!e||"string"!=typeof e)return null;const s=document.createElement("div");s.innerHTML=e;const n=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){const t=Array.from(e.childNodes).map(n),a={key:Math.random().toString(36).substr(2,9),className:e.className||void 0};let s={};if("p"===e.tagName.toLowerCase()){s=e.textContent.trim().startsWith("•")?{...Dt.bulletPoint}:{...Dt.paragraph}}else"blockquote"===e.tagName.toLowerCase()?s={...Dt.blockquote}:"span"===e.tagName.toLowerCase()&&e.className&&e.className.includes("blur")&&(s={...Dt.blurredText});return a.style=s,Array.from(e.attributes).forEach((e=>{"class"!==e.name&&"style"!==e.name&&(a[e.name]=e.value)})),J.createElement(e.tagName.toLowerCase(),a,...t)}return null};return G.jsx("div",{ref:a,style:Dt.container,children:n(s)})},qt=({isOpen:e,onClose:t,id:a,characters:s})=>{const[n,r]=W.useState(!1),[i,o]=W.useState(!1),[l,c]=W.useState(null),[d,m]=W.useState(0),u=W.useRef(null),{currentPage:p,nextPage:_,prevPage:h}=((e=0)=>{const[t,a]=W.useState(e);return{currentPage:t,nextPage:e=>{t<e-1&&a(t+1)},prevPage:()=>{t>0&&a(t-1)},setCurrentPage:a}})();W.useEffect((()=>(o(!0),c(document.body),()=>{o(!1),c(null)})),[]);const{character:x,pages:g}=W.useMemo((()=>{if(!s||!a)return{character:null,pages:[]};const e=((e,t)=>{const a=e[t];if(a&&a.lore&&"string"==typeof a.lore)return a})(s,a);return e&&e.lore&&""!==e.lore.trim()?{character:e,pages:Bt(e.lore)}:{character:e,pages:[]}}),[s,a]);if(!(e&&x&&0!==g.length&&i&&l))return null;return $.createPortal(G.jsx("div",{className:gt,children:G.jsxs("div",{className:vt,onClick:e=>e.stopPropagation(),children:[G.jsx("button",{onClick:t,className:ft,children:G.jsx("svg",{width:"20",height:"20",viewBox:"0 0 30 30",children:G.jsx("path",{d:"M7 4H6L4 6v2l8 7-8 7v2l2 2h2l7-8 7 8h2l2-2v-2l-8-7 8-7V6l-2-2h-2l-7 8-7-8H7z"})})}),G.jsxs("div",{className:yt,children:[G.jsxs("div",{className:bt,children:[G.jsx("button",{onClick:()=>{r(!0),setTimeout((()=>{h(),r(!1)}),300)},disabled:0===p,className:"".concat(kt," ").concat(0===p?Et:""),children:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:G.jsx("path",{d:"m12.718 4.707-1.413-1.415L2.585 12l8.72 8.707 1.413-1.415L6.417 13H20v-2H6.416l6.302-6.293z"})})}),G.jsx("button",{onClick:()=>{r(!0),setTimeout((()=>{_(g.length),r(!1)}),300)},disabled:p===g.length-1,className:"".concat(jt," ").concat(p===g.length-1?Et:""),children:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:G.jsx("path",{d:"M11.293 4.707 17.586 11H4v2h13.586l-6.293 6.293 1.414 1.414L21.414 12l-8.707-8.707-1.414 1.414z"})})})]}),G.jsxs("h2",{className:wt,children:["Лор ",Ot(x)]}),G.jsx("div",{className:Nt,ref:u,children:G.jsx("div",{className:"".concat(St," ").concat(n?At:Pt),children:G.jsx(Tt,{html:g[p],onHeightChange:e=>{m(e)}})})}),G.jsxs("div",{className:Ct,children:["Страница ",p+1," из ",g.length]})]})]})}),l)},Lt=({id:e,characters:t})=>{const[a,s]=W.useState(!1),[n,r]=W.useState(!1);W.useEffect((()=>(r(!0),()=>r(!1))),[]);const i=()=>{s(!1)},o=e=>{"Escape"===e.key&&i()};return W.useEffect((()=>(window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)})),[]),n?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:ht.wrapper,children:G.jsxs("button",{className:ht.button,onClick:()=>{s(!0)},children:[G.jsx("span",{className:"".concat(Ke," ").concat(et),children:G.jsx(xt,{text:"Читать лор"})}),G.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:ht.icon,children:G.jsx("path",{clipRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm4.28 10.28a.75.75 0 000-1.06l-3-3a.75.75 0 10-1.06 1.06l1.72 1.72H8.25a.75.75 0 000 1.5h5.69l-1.72 1.72a.75.75 0 101.06 1.06l3-3z",fillRule:"evenodd"})})]})}),n&&a&&G.jsx(qt,{isOpen:a,onClose:i,id:e,characters:t})]}):null};function Ft({id:e,src:t,name:a,surname:s="",age:n="?",height:r,bd:i="?",lore:o,characters:l}){const c=t&&(t.startsWith("./")||t.startsWith("http")),d=a=>c?"./pics/char/picsfull/".concat(t,".").concat(a):ut("".concat(e,"full"),{quality:90,format:a});return G.jsxs("div",{id:e,className:st.menu,children:[G.jsx("div",{className:st.menu__left,children:G.jsxs("picture",{className:st.menu__left__pic,children:[G.jsx("source",{srcSet:d("avif"),type:"image/avif"}),G.jsx("source",{srcSet:d("webp"),type:"image/webp"}),G.jsx("img",{src:d("png"),alt:"icon-".concat(a),loading:"lazy",onError:e=>{}})]})}),G.jsxs("div",{className:st.menu__right,children:[G.jsxs("div",{className:st.menu__right__titleblock,children:[G.jsx("h2",{className:"".concat(st.menu__right__titleblock__fullname," ").concat(Ke),children:G.jsx(xt,{text:"".concat(a," ").concat(s)})}),G.jsxs("div",{className:st.menu__right__titleblock__maininfo,children:[G.jsx("span",{className:"".concat(st.menu__right__titleblock__maininfo__age," ").concat(Ke),children:G.jsx(xt,{text:"Возраст: ".concat(n," ").concat("?"!==n&&nt(n))})}),G.jsx("span",{className:"".concat(st.menu__right__titleblock__maininfo__height," ").concat(Ke),children:G.jsx(xt,{text:"Рост: ".concat(r," см")})}),G.jsx("span",{className:"".concat(st.menu__right__titleblock__maininfo__bd," ").concat(Ke),children:G.jsx(xt,{text:"День рождения: ".concat(i)})})]})]}),G.jsx(Lt,{id:e,characters:l})]})]})}const zt=W.createContext(),Mt={light:{"--primary-color":"#000000","--background-color":"#ffffff","--text-color":"#000000","--secondary-color":"#666666","--accent-color":"#3498db"},dark:{"--primary-color":"#ffffff","--background-color":"#1a1a1a","--text-color":"#ffffff","--secondary-color":"#999999","--accent-color":"#3498db"}},Ut=({children:e})=>{const t=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",t);const[a,s]=W.useState(t);W.useCallback((e=>{const t=Mt[e];document.documentElement.setAttribute("data-theme",e),"dark"===e?(Object.entries(t).forEach((([e,t])=>{document.documentElement.style.setProperty(e,t)})),document.documentElement.style.setProperty("--background-color","#1e1e1e"),document.documentElement.style.setProperty("--text-color","#e0e0e0"),document.documentElement.style.setProperty("--text-primary","#e0e0e0"),document.documentElement.style.setProperty("--bg-secondary","#292929")):Object.entries(t).forEach((([e,t])=>{document.documentElement.style.setProperty(e,t)}))}),[]);const n=W.useCallback((()=>{const e="light"===a?"dark":"light";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e);const t=getComputedStyle(document.documentElement);for(let a=0;a<t.length;a++){const e=t[a];e.startsWith("--")&&document.documentElement.style.removeProperty(e)}const n=Mt[e];n&&Object.entries(n).forEach((([e,t])=>{document.documentElement.style.setProperty(e,t)})),"dark"===e?(document.documentElement.style.setProperty("--background-color","#1e1e1e"),document.documentElement.style.setProperty("--text-color","#e0e0e0"),document.documentElement.style.setProperty("--text-primary","#e0e0e0"),document.documentElement.style.setProperty("--bg-secondary","#292929"),document.documentElement.style.setProperty("--bg-highlight","#2a2a2a"),document.documentElement.style.setProperty("--modal-bg","#2a2a2a")):(document.documentElement.style.setProperty("--background-color","#fff"),document.documentElement.style.setProperty("--text-color","#000"),document.documentElement.style.setProperty("--text-primary","#222222"),document.documentElement.style.setProperty("--bg-secondary","#f8f9fa"),document.documentElement.style.setProperty("--bg-highlight","#f5f8fa"),document.documentElement.style.setProperty("--modal-bg","#ffffff")),s(e),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:e}}))}),[a]);W.useEffect((()=>{document.documentElement.setAttribute("data-theme",t);const e=getComputedStyle(document.documentElement);for(let t=0;t<e.length;t++){const a=e[t];a.startsWith("--")&&document.documentElement.style.removeProperty(a)}const a=Mt[t];a&&Object.entries(a).forEach((([e,t])=>{document.documentElement.style.setProperty(e,t)})),"dark"===t&&(document.documentElement.style.setProperty("--background-color","#1e1e1e"),document.documentElement.style.setProperty("--text-color","#e0e0e0"),document.documentElement.style.setProperty("--text-primary","#e0e0e0"),document.documentElement.style.setProperty("--bg-secondary","#292929"),document.documentElement.style.setProperty("--bg-highlight","#2a2a2a"),document.documentElement.style.setProperty("--modal-bg","#2a2a2a"),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:t}}))),window.addEventListener("DOMContentLoaded",(()=>{document.documentElement.setAttribute("data-theme",t),"dark"===t?(document.documentElement.style.setProperty("--background-color","#1e1e1e"),document.documentElement.style.setProperty("--text-color","#e0e0e0")):(document.documentElement.style.setProperty("--background-color","#fff"),document.documentElement.style.setProperty("--text-color","#000"))}))}),[]);const r=W.useMemo((()=>({theme:a,toggleTheme:n,isDarkMode:"dark"===a})),[a,n]);return G.jsx(zt.Provider,{value:r,children:e})},Rt="_btn_2wi9v_2",Gt="_btn__pic_2wi9v_19",Ht="_darkTheme_2wi9v_30",Vt=J.memo((({src:e,index:t,onClick:a})=>{const{theme:s}=W.useContext(zt),n=W.useMemo((()=>e.startsWith("./")||e.startsWith("http")?{avif:"./pics/icons/".concat(e,".avif"),webp:"./pics/icons/".concat(e,".webp"),png:"./pics/icons/".concat(e,".png")}:{avif:ut(e,{quality:90,format:"avif"}),webp:ut(e,{quality:90,format:"webp"}),png:ut(e,{quality:90,format:"png"})}),[e]);return G.jsxs("div",{children:[G.jsx("hr",{}),G.jsx("button",{className:Rt,onClick:a,children:G.jsxs("picture",{className:"".concat(Gt," ").concat("dark"===s?Ht:""),children:[G.jsx("source",{srcSet:n.avif,type:"image/avif"}),G.jsx("source",{srcSet:n.webp,type:"image/webp"}),G.jsx("img",{src:n.png,alt:"icon-".concat(t),loading:"eager",decoding:"async",crossOrigin:"anonymous",onError:e=>{}})]})}),G.jsx("hr",{})]})}));Vt.displayName="Icon";const Wt=({icons:e,onIconClick:t})=>{const[a,s]=W.useState(0),n=e.slice(a,a+3);return G.jsx("div",{className:tt.window__panel,children:G.jsxs("div",{className:tt.window__panel__navButtons,children:[G.jsx("button",{className:"".concat(tt.window__panel__navButtons__navButton," ").concat(0===a?tt.disabled:""),onClick:()=>{s((e=>e>0?e-1:e))},disabled:0===a,"aria-label":"Назад",children:G.jsx("span",{className:tt.window__panel__navButtons__navButton__arrow,children:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:G.jsx("path",{d:"m3.293 11.293 1.414 1.414L11 6.414V20h2V6.414l6.293 6.293 1.414-1.414L12 2.586l-8.707 8.707z"})})})}),G.jsx("div",{className:tt.window__panel__iconWrapper,children:G.jsx(H,{mode:"popLayout",children:n.map(((e,s)=>G.jsx(V.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{duration:.3,ease:"easeOut"},className:tt.window__panel__iconWrapper__icons,children:G.jsx(Vt,{src:e,index:a+s,onClick:()=>t(e)})},a+s)))})}),G.jsx("button",{className:"".concat(tt.window__panel__navButtons__navButton," ").concat(a>=e.length-3?tt.disabled:""),onClick:()=>{s((t=>t<e.length-3?t+1:t))},disabled:a>=e.length-3,"aria-label":"Вперёд",children:G.jsx("span",{className:tt.window__panel__navButtons__navButton__arrow,children:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:G.jsx("path",{d:"M13 17.586V4h-2v13.586l-6.293-6.293-1.414 1.414L12 21.414l8.707-8.707-1.414-1.414L13 17.586z"})})})})]})})},Jt={},$t=6e5,Yt={},Zt=window.location.hostname.includes("github.io"),Qt=e=>{if(e.startsWith("/gist/")){const t=e.split("/");return{username:t[2],gistId:t[3],filename:t[t.length-1]}}return null},Xt=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return null}},Kt=(e,t)=>{try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(a){return!1}},ea=e=>{try{return localStorage.removeItem(e),!0}catch(t){return!1}},ta=async(e,t=!1)=>{const a="data_".concat(e.split("?v=")[0]),s=e.startsWith("/gist/");if(!t){if(Jt[a])return Jt[a].data;const e=Xt(a);if(e&&e.timestamp){if(Date.now()-e.timestamp<$t)return Jt[a]=e,e.data}}const n=Date.now();if(Yt[e]&&n-Yt[e]<2e3){if(Jt[a])return Jt[a].data;const e=Xt(a);return e?e.data:null}Yt[e]=n;try{const n=(e=>{if(e.startsWith("/gist/")&&Zt){const t=Qt(e);return"https://api.github.com/gists/".concat(t.gistId)}return e})(e),r=e,i=await fetch(n,{cache:t?"no-cache":"default"});if(429===i.status){if(Jt[a])return Jt[a].data;const e=Xt(a);return e?e.data:null}if(!i.ok)throw new Error("HTTP error! status: ".concat(i.status));const o=await i.json();let l=o;s&&Zt&&(l=((e,t)=>{try{const a=Qt(t);if(!a||!e.files)return null;const s=a.filename;for(const t in e.files)if(t===s||t.endsWith("/".concat(s))){const a=e.files[t].content;if(a)return JSON.parse(a)}for(const t in e.files)if(t.endsWith(".json")){const a=e.files[t].content;if(a)return JSON.parse(a)}return e}catch(a){return null}})(o,r));const c={data:l,timestamp:Date.now()};return Jt[a]=c,Kt(a,c),l}catch(r){if(Jt[a])return Jt[a].data;const e=Xt(a);return e?e.data:null}};const aa=["faust","lonarius","vivian","akito"];function sa(){var e,t,a,s,n,r,i;const[o,l]=W.useState(null),[c,d]=W.useState(1),[m,u]=W.useState(!1),[p,_]=W.useState((()=>Date.now()));W.useEffect((()=>{Object.keys(window.localStorage).filter((e=>e.includes("gist.github")||e.includes("githubusercontent"))).forEach((e=>window.localStorage.removeItem(e))),window.caches&&caches.keys().then((e=>{e.forEach((e=>{caches.delete(e)}))})),_(Date.now())}),[]);const{data:h,loading:x,error:g,refresh:v}=function(e,t={}){const{skipCache:a=!1,retryInterval:s=1e4}=t,[n,r]=W.useState(null),[i,o]=W.useState(!0),[l,c]=W.useState(null),d=W.useRef(!0),m=W.useRef(null),u=e.split("?v=")[0],p="data_".concat(u),_=W.useCallback((async(t=!1)=>{t&&o(!0);try{if(!t&&!n){const e=Xt(p);e&&e.data&&Date.now()-e.timestamp<$t&&(r(e.data),c(null),o(!1))}const s=await ta(e,t||a);if(!d.current)return;if(s)r(s),c(null),m.current&&(clearTimeout(m.current),m.current=null);else{const e=Xt(p);if(!e||!e.data)throw new Error("Failed to load data")}}catch(i){d.current&&(c(i.message),d.current&&!m.current&&(m.current=setTimeout((()=>{d.current&&(m.current=null,_(!0))}),s)))}finally{d.current&&o(!1)}}),[e,u,p,a,s,n]);W.useEffect((()=>(d.current=!0,_(),()=>{d.current=!1,m.current&&clearTimeout(m.current)})),[_]);const h=W.useCallback((()=>{const e="data_".concat(u);delete Jt[e],ea(e),_(!0)}),[u,_]);return{data:n,loading:i,error:l,refresh:()=>_(!0),clearCache:h}}("/gist/igorao79/17a1e2924e5dbee9371956c24be2a31b/raw/chlore.json?v=".concat(p),{retryInterval:3e4}),f=W.useCallback((e=>{m||(u(!0),d(o?aa.indexOf(e)>aa.indexOf(o)?1:-1:1),l(e),setTimeout((()=>u(!1)),300))}),[m,o]);return G.jsxs("div",{className:tt.window,children:[G.jsx(Wt,{icons:aa,onIconClick:f}),x?G.jsx("div",{className:tt.loading,children:"Загрузка..."}):g?G.jsxs("div",{className:tt.error,children:["Ошибка загрузки данных. ",!x&&G.jsx("button",{onClick:v,children:"Повторить"})]}):G.jsx(at,{selectedIcon:o,direction:c,children:o&&h&&h[o]&&G.jsx(Ft,{id:o,src:null==(e=h[o])?void 0:e.src,name:null==(t=h[o])?void 0:t.name,surname:null==(a=h[o])?void 0:a.surname,age:null==(s=h[o])?void 0:s.age,height:null==(n=h[o])?void 0:n.height,bd:null==(r=h[o])?void 0:r.bd,lore:(y=null==(i=h[o])?void 0:i.lore,y?y.includes("<p>")?y:"<p>".concat(y,"</p>"):""),characters:h})})]});var y}const na="_aboutblock_kg2nj_3",ra="_aboutblock__header_kg2nj_17",ia="_aboutblock__header__htitle_kg2nj_25",oa="_aboutblock__header__textblock_kg2nj_45",la="_aboutblock__header__textblock__card_kg2nj_54",ca="_aboutblock__header__textblock__card__icon_kg2nj_71",da="_aboutblock__header__textblock__card__icon__main_kg2nj_80",ma="_aboutblock__header__textblock__card__icon__small_kg2nj_87",ua="_aboutblock__header__textblock__card__content_kg2nj_96",pa="_aboutblock__header__textblock__card__link_kg2nj_107",_a="_aboutblock__divider_kg2nj_140",ha="_aboutblock__divider__line_kg2nj_148",xa="_aboutblock__divider__icon_kg2nj_153",ga="_aboutblock__main_kg2nj_158",va="_aboutblock__main__btitle_kg2nj_166",fa="_aboutblock__main__dtitle_kg2nj_166",ya="_aboutblock__main__authors_kg2nj_181",ba="_aboutblock__main__developers_kg2nj_181",ja="_aboutblock__social_kg2nj_196",ka="_aboutblock__social__title_kg2nj_205",wa="_aboutblock__social__links_kg2nj_221",Na={member:"_member_17rw5_2",member__info__details__name:"_member__info__details__name_17rw5_21",member__imageContainer:"_member__imageContainer_17rw5_25",member__imageWrapper:"_member__imageWrapper_17rw5_28",borderRotate:"_borderRotate_17rw5_1",member__image:"_member__image_17rw5_25",member__info:"_member__info_17rw5_21",member__info__details:"_member__info__details_17rw5_21",member__info__details__link:"_member__info__details__link_17rw5_109",member__info__details__role:"_member__info__details__role_17rw5_134",member__info__bio:"_member__info__bio_17rw5_140","member--igor":"_member--igor_17rw5_147",rotate:"_rotate_17rw5_1","member--lesya":"_member--lesya_17rw5_172",heartbeat:"_heartbeat_17rw5_1",float:"_float_17rw5_1"},Sa={lesya:{id:"lesya",name:"Леся",src:"lesyapic",bookteam:"Художник, Соавтор",bio:"Соавтор и основной художник проекта."},igor:{id:"igor",name:"Игорь",src:"igorpic",developerteam:"Ведущий разработчик сайта. Отвечает за техническую реализацию проекта и внедрение новых функций.",bookteam:"Автор",bio:"Создатель и автор проекта."}},Ca=J.memo((({memberId:e,profileUrl:t})=>{const{theme:a}=W.useContext(zt),s=W.useMemo((()=>Sa[e]),[e]);if(!s)return G.jsx("div",{className:Na.member__notfound,children:"Участник не найден."});const n=W.useMemo((()=>"member--".concat(s.id.replace(/\s+/g,"-").toLowerCase())),[s]),r=t?new URL(t).hash.replace("#",""):null;return G.jsxs("div",{className:"".concat(Na.member," ").concat(Na["member--".concat(s.id)]),id:n,children:[G.jsx("div",{className:Na.member__imageWrapper,children:G.jsx("div",{className:"".concat(Na.member__imageContainer," ").concat("dark"===a?Na.darkTheme:""),children:t?G.jsx(Y,{to:r,children:G.jsx(_t,{path:s.src,alt:s.name,className:Na.member__image,loading:"lazy"})}):G.jsx(_t,{path:s.src,alt:s.name,className:Na.member__image,loading:"lazy"})})}),G.jsxs("div",{className:Na.member__info,children:[G.jsxs("div",{className:Na.member__info__details,children:[G.jsx("h3",{className:Na.member__info__details__name,children:t?G.jsx(Y,{to:r,className:Na.member__info__details__link,children:s.name}):s.name}),G.jsx("p",{className:Na.member__info__details__role,children:s.bookteam})]}),G.jsx("p",{className:Na.member__info__bio,children:s.bio})]})]})}));Ca.displayName="BookMember";const Pa="_button_n0lbf_1",Aa="_icon_n0lbf_21",Ea=()=>G.jsxs("a",{href:"https://t.me/+yFsUa_nD88piNjg6",target:"_blank",rel:"noopener noreferrer",className:Pa,children:[G.jsx("div",{className:Aa,children:G.jsx("svg",{width:16,height:16,className:"bi bi-telegram",viewBox:"0 0 16 16",fill:"currentColor",children:G.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.3 6A388.8 388.8 0 0 0 3 8.3c0 .2.3.3.7.4H4l1.2.4.9-.3a82.9 82.9 0 0 1 3.6-2.1l-2 1.9-.3.3a8.2 8.2 0 0 1-.2.2c-.4.4-.7.7 0 1.1A66.2 66.2 0 0 1 9 11.4l.3.2c.3.2.6.4 1 .4.2 0 .4-.2.5-.8l1-5.8a1.4 1.4 0 0 0-.1-.3.3.3 0 0 0-.1-.2.5.5 0 0 0-.3 0c-.3 0-.8 0-3 1z"})})}),"Telegram"]}),Ia=J.memo((({memberId:e,profileUrl:t})=>{const{theme:a}=W.useContext(zt),s=W.useMemo((()=>Sa[e]),[e]);if(!s)return G.jsx("div",{className:Na.member__notfound,children:"Участник не найден."});const n=W.useMemo((()=>"member--".concat(s.id.replace(/\s+/g,"-").toLowerCase())),[s]),r=t?new URL(t).hash.replace("#",""):null;return G.jsxs("div",{className:"".concat(Na.member," ").concat(Na["member--".concat(s.id)]),id:n,children:[G.jsx("div",{className:Na.member__imageWrapper,children:G.jsx("div",{className:"".concat(Na.member__imageContainer," ").concat("dark"===a?Na.darkTheme:""),children:t?G.jsx(Y,{to:r,children:G.jsx(_t,{path:s.src,alt:s.name,className:Na.member__image,loading:"lazy"})}):G.jsx(_t,{path:s.src,alt:s.name,className:Na.member__image,loading:"lazy"})})}),G.jsx("div",{className:Na.member__info,children:G.jsxs("div",{className:Na.member__info__details,children:[G.jsx("h3",{className:Na.member__info__details__name,children:t?G.jsx(Y,{to:r,className:Na.member__info__details__link,children:s.name}):s.name}),G.jsx("p",{className:Na.member__info__details__role,children:s.developerteam})]})})]})}));function Ba(){const e={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}};return G.jsxs(V.div,{className:na,initial:"hidden",animate:"visible",variants:t,children:[G.jsxs("header",{className:ra,children:[G.jsx(V.h2,{className:ia,variants:e,children:"О нашей книге"}),G.jsxs(V.div,{className:oa,variants:t,children:[G.jsxs(V.div,{className:la,variants:e,children:[G.jsx("div",{className:ca,children:G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.9 108.7",width:"50",height:"50",children:[G.jsx("path",{className:da,d:"M95.2 91.4h-.8a1.6 1.6 0 0 1-1.6-1.7 23 23 0 0 0-1.9-9 27 27 0 0 0-13.4-13.5 23 23 0 0 0-9.1-1.8a1.6 1.6 0 0 1-1.6-1.7V63a1.6 1.6 0 0 1 1.6-1.7 22.9 22.9 0 0 0 9.1-1.8 25.4 25.4 0 0 0 8-5.5 25.6 25.6 0 0 0 5.4-7.9 22.9 22.9 0 0 0 1.8-9.1 1.6 1.6 0 0 1 1.7-1.6h.8a1.6 1.6 0 0 1 1.7 1.6 22.9 22.9 0 0 0 1.8 9.1 25.2 25.2 0 0 0 5.5 8 25.2 25.2 0 0 0 8 5.4 22.9 22.9 0 0 0 9 1.8A1.6 1.6 0 0 1 123 63v.8a1.6 1.6 0 0 1-1.7 1.7 23 23 0 0 0-9 1.8 27 27 0 0 0-13.5 13.4 23 23 0 0 0-1.8 9.1 1.6 1.6 0 0 1-1.7 1.7Z"}),G.jsx("path",{className:ma,d:"M65,55h-0.7a1,1,0,0,1-1-1,15,15,0,0,0-1.2-6,18,18,0,0,0-4.3-5.6,18,18,0,0,0-5.6-4.3,15,15,0,0,0-6-1.2,1,1,0,0,1-1-1V35a1,1,0,0,1,1-1,15,15,0,0,0,6-1.2,18,18,0,0,0,5.6-4.3,18,18,0,0,0,4.3-5.6,15,15,0,0,0,1.2-6,1,1,0,0,1,1-1H65a1,1,0,0,1,1,1,15,15,0,0,0,1.2,6,18,18,0,0,0,4.3,5.6,18,18,0,0,0,5.6,4.3,15,15,0,0,0,6,1.2,1,1,0,0,1,1,1v0.7a1,1,0,0,1-1,1,15,15,0,0,0-6,1.2,18,18,0,0,0-5.6,4.3,18,18,0,0,0-4.3,5.6,15,15,0,0,0-1.2,6,1,1,0,0,1-1,1Z",transform:"scale(0.5) translate(90,70)"})]})}),G.jsx("div",{className:ua,children:G.jsx("p",{children:"Основной жанр нашей книги - фэнтэзи с элементами дарк фэнтэзи, романтики и приключений"})})]}),G.jsxs(V.div,{className:la,variants:e,children:[G.jsx("div",{className:ca,children:G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.88 108.69",width:"50",height:"50",children:[G.jsx("path",{className:da,d:"M95.24,91.38H94.4a1.65,1.65,0,0,1-1.65-1.65,22.91,22.91,0,0,0-1.81-9.12A27.06,27.06,0,0,0,77.52,67.19a23.05,23.05,0,0,0-9.12-1.81,1.65,1.65,0,0,1-1.64-1.64v-.85a1.64,1.64,0,0,1,1.64-1.64,22.88,22.88,0,0,0,9.12-1.82,25.35,25.35,0,0,0,7.93-5.49A25.62,25.62,0,0,0,90.94,46a22.87,22.87,0,0,0,1.81-9.11,1.65,1.65,0,0,1,1.65-1.64h.84a1.65,1.65,0,0,1,1.65,1.64A22.88,22.88,0,0,0,98.7,46a25.24,25.24,0,0,0,5.49,7.93,25.19,25.19,0,0,0,7.93,5.49,22.88,22.88,0,0,0,9.12,1.82,1.64,1.64,0,0,1,1.64,1.64v.85a1.65,1.65,0,0,1-1.64,1.64,23.05,23.05,0,0,0-9.12,1.81A27.06,27.06,0,0,0,98.7,80.61a23,23,0,0,0-1.81,9.12,1.65,1.65,0,0,1-1.65,1.65Z"}),G.jsx("path",{className:ma,d:"M65,55h-0.7a1,1,0,0,1-1-1,15,15,0,0,0-1.2-6,18,18,0,0,0-4.3-5.6,18,18,0,0,0-5.6-4.3,15,15,0,0,0-6-1.2,1,1,0,0,1-1-1V35a1,1,0,0,1,1-1,15,15,0,0,0,6-1.2,18,18,0,0,0,5.6-4.3,18,18,0,0,0,4.3-5.6,15,15,0,0,0,1.2-6,1,1,0,0,1,1-1H65a1,1,0,0,1,1,1,15,15,0,0,0,1.2,6,18,18,0,0,0,4.3,5.6,18,18,0,0,0,5.6,4.3,15,15,0,0,0,6,1.2,1,1,0,0,1,1,1v0.7a1,1,0,0,1-1,1,15,15,0,0,0-6,1.2,18,18,0,0,0-5.6,4.3,18,18,0,0,0-4.3,5.6,15,15,0,0,0-1.2,6,1,1,0,0,1-1,1Z",transform:"scale(0.5) translate(90,70)"})]})}),G.jsx("div",{className:ua,children:G.jsxs("p",{children:["Книга была создана 27 июня 2024 года — совершенно спонтанно, без чётких целей. За её развитием вы можете следить ",G.jsx("a",{href:"https://t.me/+yFsUa_nD88piNjg6",className:pa,children:"здесь"})]})})]}),G.jsxs(V.div,{className:la,variants:e,children:[G.jsx("div",{className:ca,children:G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.88 108.69",width:"50",height:"50",children:[G.jsx("path",{className:da,d:"M95.24,91.38H94.4a1.65,1.65,0,0,1-1.65-1.65,22.91,22.91,0,0,0-1.81-9.12A27.06,27.06,0,0,0,77.52,67.19a23.05,23.05,0,0,0-9.12-1.81,1.65,1.65,0,0,1-1.64-1.64v-.85a1.64,1.64,0,0,1,1.64-1.64,22.88,22.88,0,0,0,9.12-1.82,25.35,25.35,0,0,0,7.93-5.49A25.62,25.62,0,0,0,90.94,46a22.87,22.87,0,0,0,1.81-9.11,1.65,1.65,0,0,1,1.65-1.64h.84a1.65,1.65,0,0,1,1.65,1.64A22.88,22.88,0,0,0,98.7,46a25.24,25.24,0,0,0,5.49,7.93,25.19,25.19,0,0,0,7.93,5.49,22.88,22.88,0,0,0,9.12,1.82,1.64,1.64,0,0,1,1.64,1.64v.85a1.65,1.65,0,0,1-1.64,1.64,23.05,23.05,0,0,0-9.12,1.81A27.06,27.06,0,0,0,98.7,80.61a23,23,0,0,0-1.81,9.12,1.65,1.65,0,0,1-1.65,1.65Z"}),G.jsx("path",{className:ma,d:"M65,55h-0.7a1,1,0,0,1-1-1,15,15,0,0,0-1.2-6,18,18,0,0,0-4.3-5.6,18,18,0,0,0-5.6-4.3,15,15,0,0,0-6-1.2,1,1,0,0,1-1-1V35a1,1,0,0,1,1-1,15,15,0,0,0,6-1.2,18,18,0,0,0,5.6-4.3,18,18,0,0,0,4.3-5.6,15,15,0,0,0,1.2-6,1,1,0,0,1,1-1H65a1,1,0,0,1,1,1,15,15,0,0,0,1.2,6,18,18,0,0,0,4.3,5.6,18,18,0,0,0,5.6,4.3,15,15,0,0,0,6,1.2,1,1,0,0,1,1,1v0.7a1,1,0,0,1-1,1,15,15,0,0,0-6,1.2,18,18,0,0,0-5.6,4.3,18,18,0,0,0-4.3,5.6,15,15,0,0,0-1.2,6,1,1,0,0,1-1,1Z",transform:"scale(0.5) translate(90,70)"})]})}),G.jsx("div",{className:ua,children:G.jsx("p",{children:"Наша книга - это погружение в мир магии, загадочных созданий и невероятных приключений. Присоединяйтесь к нашему творческому путешествию!"})})]})]})]}),G.jsxs("div",{className:_a,children:[G.jsx("div",{className:ha}),G.jsx("div",{className:xa,children:"✧"}),G.jsx("div",{className:ha})]}),G.jsxs(V.div,{className:ga,variants:t,children:[G.jsx(V.h2,{className:va,variants:e,children:"Творческая команда"}),G.jsxs(V.div,{className:ya,variants:t,children:[G.jsx(V.div,{variants:e,children:G.jsx(Ca,{memberId:"igor",profileUrl:"http://localhost:5173/#/profile/ca7fe23e-f263-4372-8aac-a652791e724c"})}),G.jsx(V.div,{variants:e,children:G.jsx(Ca,{memberId:"lesya",profileUrl:"http://localhost:5173/#/profile/f1ea0167-4743-4d9e-93fc-42e30a55f34f"})})]}),G.jsx(V.h2,{className:fa,variants:e,children:"Команда разработки"}),G.jsx(V.div,{className:ba,variants:t,children:G.jsx(V.div,{variants:e,children:G.jsx(Ia,{memberId:"igor",profileUrl:"http://localhost:5173/#/profile/ca7fe23e-f263-4372-8aac-a652791e724c"})})})]}),G.jsxs(V.div,{className:ja,variants:t,children:[G.jsx(V.h2,{className:ka,variants:e,children:"Присоединяйтесь к нам"}),G.jsx(V.div,{className:wa,variants:e,children:G.jsx(Ea,{})})]})]})}Ia.displayName="DeveloperMember";const Oa="_main_1s4pe_1",Da="_main__header_1s4pe_35",Ta="_main__header__pic_1s4pe_41",qa="_darkTheme_1s4pe_55",La="_main__header__title_1s4pe_58",Fa="_main__nav_1s4pe_68",za="_main__nav__perexod_1s4pe_74",Ma="_main__nav__perexod__link_1s4pe_81",Ua="_main__nav__auth_1s4pe_84",Ra="_main__nav__burger_1s4pe_88",Ga="_main__nav__burger__line_1s4pe_101",Ha="_open_1s4pe_114",Va="_main__nav__mobile_1s4pe_123",Wa="_main__nav__mobile__list_1s4pe_145",Ja="_main__nav__mobile__list__item_1s4pe_150",$a="_homepage_1s4pe_189",Ya=({src:e,alt:t,folder:a="logo",width:s,height:n})=>{const{theme:r}=W.useContext(zt);if(e.startsWith("./")||e.startsWith("http")){let a=e.split("/").pop();a=a.replace("-black","").replace(/\.(avif|webp|png|jpg|jpeg)$/i,"");const i="dark"===r?"".concat(a,"-black"):a,o=t=>"".concat(e.substring(0,e.lastIndexOf("/")+1)).concat(i,".").concat(t);return G.jsxs("picture",{className:"".concat(Ta," ").concat("dark"===r?qa:""),children:[G.jsx("source",{srcSet:o("avif"),type:"image/avif"}),G.jsx("source",{srcSet:o("webp"),type:"image/webp"}),G.jsx("img",{src:o("png"),alt:t,loading:"lazy",width:s,height:n,onError:e=>{}})]})}const i=e.replace(/\.(avif|webp|png|jpg|jpeg)$/i,""),o={quality:90,width:s||("sclogo"===e?160:void 0),height:n};return G.jsxs("picture",{className:"".concat(Ta," ").concat("dark"===r?qa:""),children:[G.jsx("source",{srcSet:ut(i,{...o,format:"avif"}),type:"image/avif"}),G.jsx("source",{srcSet:ut(i,{...o,format:"webp"}),type:"image/webp"}),G.jsx("img",{src:ut(i,{...o,format:"png"}),alt:t,loading:"lazy",width:s||("sclogo"===e?160:void 0),height:n,onError:e=>{}})]})},Za="_authContainer_co662_51",Qa="_loginButton_co662_56",Xa="_userProfile_co662_104",Ka="_profileButton_co662_110",es="_avatar_co662_137",ts="_username_co662_150",as="_userMenu_co662_181",ss="_menuItem_co662_230",ns="_logoutButton_co662_285",rs="_adminButton_co662_326",is="_profileMenuItem_co662_396",os="_feedbackButton_co662_423",ls="_backdrop_1kje4_1",cs="_modal_1kje4_20",ds="_modalContent_1kje4_39",ms="_closeButton_1kje4_47",us="_formWrapper_1kje4_71",ps="_patternOverlay_1kje4_170",_s={BASE_URL:"/soulcycle/",DEV:!1,LEGACY:!1,MODE:"production",PROD:!0,SSR:!1},hs=(e,t="")=>{const a="VITE_".concat(e);return"undefined"!=typeof window&&window.env&&window.env[a]&&""!==window.env[a]?window.env[a]:_s[a]||t},xs=hs("SUPABASE_URL","https://euafjzczdtitceulztfw.supabase.co"),gs=hs("SUPABASE_ANON_KEY","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV1YWZqemN6ZHRpdGNldWx6dGZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYyMDY0MTcsImV4cCI6MjA2MTc4MjQxN30.i5duBK9a2QKWbc2Y_v723APJeg0vsNNwNkgXZLyIMfM");hs("APP_NAME","SoulCycle");const vs=Z(xs,gs,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1},global:{headers:{"Content-Type":"application/json",Accept:"application/json"}}}),fs=new Map,ys=3e5,bs={profileUpdated:[]},js=(e,t)=>{bs[e]&&bs[e].forEach((e=>e(t)))},ks={async getUserProfile(e){var t,a,s,n;try{if("ca7fe23e-f263-4372-8aac-a652791e724c"===e)fs.delete(e);else if(fs.has(e))return fs.get(e);try{const{data:a,error:s}=await vs.from("profiles").select("*").eq("id",e).single();if(!s&&a){const s={id:a.id,displayName:a.display_name||"Пользователь",email:a.email,avatar:a.avatar||null,role:a.role||"user",createdAt:a.created_at,perks:a.perks||["user"],activePerk:a.active_perk||(null==(t=a.perks)?void 0:t[0])||"user"};return fs.set(e,s),setTimeout((()=>fs.delete(e)),ys),s}}catch(r){}try{const{data:t,error:s}=await vs.from("public_profiles").select("*").eq("id",e).single();if(!s&&t){const s={id:t.id,displayName:t.display_name||(null==(a=t.email)?void 0:a.split("@")[0])||"Пользователь",email:t.email,avatar:t.avatar||null,role:t.role||"user",createdAt:t.created_at,perks:t.perks||["user"],activePerk:t.active_perk||"user"};return fs.set(e,s),setTimeout((()=>fs.delete(e)),ys),s}}catch(i){}try{const{data:t,error:a}=await vs.auth.getSession();if(!a&&(null==(s=null==t?void 0:t.session)?void 0:s.user)&&t.session.user.id===e){const a=t.session.user,s=a.user_metadata||{};let r=["user"],i="user";try{const{data:t}=await vs.from("profiles").select("perks, active_perk").eq("id",e).single();t&&(r=t.perks||["user"],i=t.active_perk||r[0]||"user")}catch(o){}const l={id:e,displayName:s.display_name||(null==(n=a.email)?void 0:n.split("@")[0])||"Пользователь",email:a.email,avatar:s.avatar||null,role:s.role||"user",createdAt:a.created_at,perks:r,activePerk:i};return fs.set(e,l),setTimeout((()=>fs.delete(e)),ys),l}}catch(l){}return{id:e,displayName:"Пользователь",email:null,avatar:null,role:"user",createdAt:(new Date).toISOString(),perks:["user"],activePerk:"user"}}catch(c){return{id:e,displayName:"Пользователь",email:null,avatar:null,role:"user",createdAt:(new Date).toISOString(),perks:["user"],activePerk:"user"}}},updateProfileCache(e,t){if(fs.has(e)){const a={...fs.get(e),...t};fs.set(e,a),setTimeout((()=>fs.delete(e)),ys),js("profileUpdated",{userId:e,profileData:a})}},async updateUserProfile(e,t){try{const{data:a,error:s}=await vs.from("profiles").update(t).eq("id",e);if(s)throw s;return this.updateProfileCache(e,t),this.clearCache(),a}catch(a){throw a}},clearCache(){fs.clear()},getCurrentUserFromStorage(){try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return null}},clearProfileCache(e){e&&fs.delete(e)},getCachedProfile:e=>e&&fs.has(e)?fs.get(e):null},ws=e=>{if(!e||"string"!=typeof e)return"Произошла ошибка при авторизации";const t={"Invalid login credentials":"Неверный email или пароль","Email not confirmed":"Email не подтвержден","User already registered":"Пользователь с таким email уже зарегистрирован","Invalid email":"Неверный формат email","Password should be at least 6 characters":"Пароль должен содержать не менее 6 символов","Email already in use":"Email уже используется другим пользователем","Email already confirmed":"Email уже подтвержден","Invalid email or password":"Неверный email или пароль","Email is required":"Email обязателен","Password is required":"Пароль обязателен","Server error":"Ошибка сервера","The new password should be different from the previous password":"Новый пароль должен отличаться от текущего","Invalid refresh token":"Сессия истекла. Пожалуйста, войдите снова","Database error detecting account":"Ошибка базы данных при поиске аккаунта","Failed to establish connection":"Не удалось установить соединение с сервером","Password recovery invalid":"Неверная ссылка для восстановления пароля","Confirmation token expired or invalid":"Ссылка для подтверждения истекла или недействительна","Unable to validate email address":"Невозможно проверить email адрес","Access token is missing":"Отсутствует токен доступа","Access token has expired":"Срок действия токена доступа истек","Invalid or expired access token":"Недействительный или просроченный токен доступа","Signup is disabled":"Регистрация временно отключена","Signup email invalid":"Указан некорректный email адрес","duplicate key value violates unique constraint":"Этот адрес email уже зарегистрирован","You must log in to perform this action":"Необходимо войти для выполнения этого действия","Password must be at least 6 characters":"Пароль должен содержать не менее 6 символов","Пользователь с таким именем уже существует":"Пользователь с таким именем уже существует","Your chosen username is already taken by another user":"Выбранное вами имя пользователя уже занято","Duplicate key value":"Указанный email или имя пользователя уже используется"};if(t[e])return t[e];for(const[a,s]of Object.entries(t))if(e.includes(a))return s;return"Ошибка авторизации: "+e},Ns=async(e,t=null)=>{try{let a=vs.from("profiles").select("id").ilike("display_name",e);t&&(a=a.neq("id",t));const{data:s,error:n}=await a;return!n&&0===s.length}catch(a){return!1}},Ss={async register(e){try{const{email:t,password:a,displayName:s}=e;if(!(await Ns(s)))throw new Error("Пользователь с таким именем уже существует");const{data:n,error:r}=await vs.auth.signUp({email:t,password:a,options:{data:{display_name:s}}});if(r)throw new Error(ws(r.message)||"Ошибка при регистрации");const i={id:n.user.id,email:n.user.email,displayName:s,role:"user",perks:["user"],activePerk:"user",createdAt:n.user.created_at};return ks.updateProfileCache(i.id,{id:i.id,email:i.email,displayName:i.displayName,avatar:null,perks:["user"],activePerk:"user"}),{user:i}}catch(t){throw t.message&&(t.message=ws(t.message)),t}},async login(e){var t;try{const{email:a,password:s}=e,{data:n,error:r}=await vs.auth.signInWithPassword({email:a,password:s});if(r)throw new Error(ws(r.message)||"Ошибка при входе");const i=await this.checkUserBan(n.user.id);if(i.is_banned)throw new Error("Ваш аккаунт заблокирован: ".concat(i.reason,". Окончание блокировки: ").concat(i.end_at?new Date(i.end_at).toLocaleString():"Бессрочно"));const o="igoraor79@gmail.com"===a,{data:l,error:c}=await vs.from("profiles").select("*").eq("id",n.user.id).single();if(c&&c.code,!(null==l?void 0:l.perks)||0===l.perks.length){const{error:e}=await vs.from("profiles").update({perks:["user"],active_perk:"user"}).eq("id",n.user.id)}const d={id:n.user.id,email:n.user.email,displayName:n.user.user_metadata.display_name||"Пользователь",role:o?"admin":n.user.user_metadata.role||"user",createdAt:n.user.created_at,avatar:n.user.user_metadata.avatar||null,perks:(null==l?void 0:l.perks)||["user"],activePerk:(null==l?void 0:l.active_perk)||(null==(t=null==l?void 0:l.perks)?void 0:t[0])||"user"};return localStorage.setItem("user",JSON.stringify(d)),ks.updateProfileCache(d.id,{id:d.id,email:d.email,displayName:d.displayName,avatar:d.avatar,perks:d.perks,activePerk:d.activePerk}),{user:d,token:n.session.access_token}}catch(a){throw a.message&&(a.message=ws(a.message)),a}},async logout(){try{const{error:e}=await vs.auth.signOut();if(e)throw new Error(ws(e.message)||"Ошибка при выходе");localStorage.removeItem("user"),ks.clearCache()}catch(e){throw e.message&&(e.message=ws(e.message)),e}},async checkUserBan(e){if(!e)return{is_banned:!1};try{try{const{data:t,error:a}=await vs.from("profiles").select("id").eq("id",e).single();if(a)return{is_banned:!1}}catch(t){return{is_banned:!1}}try{const{data:s,error:n}=await vs.from("profiles").select("is_banned, ban_reason, ban_end_at, ban_admin_name").eq("id",e).single();if(n)return n.message&&n.message.includes("does not exist"),{is_banned:!1};if(!s.is_banned)return{is_banned:!1};if(s.ban_end_at){const a=new Date(s.ban_end_at);if(a<new Date){await vs.from("profiles").update({is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_id:null,ban_admin_name:null}).eq("id",e);try{await vs.from("user_bans").update({is_active:!1}).eq("user_id",e).eq("is_active",!0)}catch(t){}return{is_banned:!1}}}try{const{data:t,error:a}=await vs.from("user_bans").select("*").eq("user_id",e).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1);return a?{is_banned:!0,reason:s.ban_reason,end_at:s.ban_end_at,admin_name:s.ban_admin_name}:t&&0!==t.length?{is_banned:!0,reason:t[0].reason,end_at:t[0].end_at,admin_name:t[0].admin_name,created_at:t[0].created_at,ban_type:t[0].ban_type}:{is_banned:!0,reason:s.ban_reason,end_at:s.ban_end_at,admin_name:s.ban_admin_name}}catch(a){return{is_banned:!0,reason:s.ban_reason,end_at:s.ban_end_at,admin_name:s.ban_admin_name}}}catch(s){return{is_banned:!1}}}catch(t){return{is_banned:!1}}},async getCurrentUser(){var e;try{const a=localStorage.getItem("user");if(a){const e=JSON.parse(a);return ks.updateProfileCache(e.id,{id:e.id,email:e.email,displayName:e.displayName,avatar:e.avatar,perks:e.perks||[],activePerk:e.activePerk}),e}const{data:s,error:n}=await vs.auth.getSession();if(n||!s.session)return null;const r="igoraor79@gmail.com"===s.session.user.email,{data:i,error:o}=await vs.from("profiles").select("*").eq("id",s.session.user.id).single();if(o&&o.code,!(null==i?void 0:i.perks)||0===i.perks.length)try{await vs.from("profiles").update({perks:["user"],active_perk:"user"}).eq("id",s.session.user.id)}catch(t){}const l={id:s.session.user.id,email:s.session.user.email,displayName:s.session.user.user_metadata.display_name||"Пользователь",role:r?"admin":s.session.user.user_metadata.role||"user",createdAt:s.session.user.created_at,avatar:s.session.user.user_metadata.avatar||null,perks:(null==i?void 0:i.perks)||["user"],activePerk:(null==i?void 0:i.active_perk)||(null==(e=null==i?void 0:i.perks)?void 0:e[0])||"user"};return localStorage.setItem("user",JSON.stringify(l)),ks.updateProfileCache(l.id,{id:l.id,email:l.email,displayName:l.displayName,avatar:l.avatar,perks:l.perks,activePerk:l.activePerk}),l}catch(a){return null}},async getUserById(e){try{if(!e||"undefined"===e||"null"===e)throw new Error("Неверный ID пользователя");const a=ks.getCachedProfile(e);if(a)return a;const{data:s,error:n}=await vs.from("profiles").select("*").eq("id",e).single();if(n){if(n.message.includes("invalid input syntax for type uuid"))try{const{data:t,error:a}=await vs.from("profiles").select("*").ilike("display_name",e).limit(1);if(a||!t||0===t.length)throw new Error("Неверный формат ID: ".concat(e));return this.getUserById(t[0].id)}catch(t){throw new Error("Неверный формат ID: ".concat(e))}throw new Error(n.message||"Ошибка при получении профиля")}if(!s)throw new Error("Пользователь не найден");const r={id:s.id,displayName:s.display_name||"Пользователь",email:s.email,role:s.role||"user",avatar:s.avatar,perks:s.perks||["user"],activePerk:s.active_perk||"user",createdAt:s.created_at,is_banned:s.is_banned||!1,ban_reason:s.ban_reason,ban_end_at:s.ban_end_at,ban_admin_name:s.ban_admin_name};return ks.updateProfileCache(e,r),r}catch(a){throw a}},async updateAvatar(e){try{const{data:{user:t},error:a}=await vs.auth.getUser();if(a)throw new Error(ws(a.message)||"Ошибка при получении пользователя");if(!t)throw new Error("Пользователь не найден");const{data:s,error:n}=await vs.auth.updateUser({data:{avatar:e}});if(n)throw new Error(ws(n.message)||"Ошибка при обновлении аватара");const{error:r}=await vs.from("profiles").update({avatar:e}).eq("id",t.id),i=JSON.parse(localStorage.getItem("user"))||{};return i.avatar=e,localStorage.setItem("user",JSON.stringify(i)),ks.updateProfileCache(t.id,{avatar:e}),js("profile-updated",{userId:t.id,field:"avatar",value:e}),{success:!0,avatar:e}}catch(t){throw t.message&&(t.message=ws(t.message)),t}},isAuthenticated:()=>!!localStorage.getItem("user"),getToken(){var e;const{data:t}=vs.auth.getSession();return(null==(e=null==t?void 0:t.session)?void 0:e.access_token)||null},async updateActivePerk(e,t=null){try{const{data:a,error:s}=await vs.auth.getSession();if(s||!a.session)throw new Error("Пользователь не авторизован");const n=a.session.user.id,{error:r}=await vs.from("profiles").update({active_perk:e}).eq("id",n);if(r)throw new Error(r.message||"Ошибка при обновлении привилегии");const i=localStorage.getItem("user");if(i){const t=JSON.parse(i);t.activePerk=e,localStorage.setItem("user",JSON.stringify(t)),ks.updateProfileCache(n,{activePerk:e}),js("profileUpdated",{userId:n,profileData:{...t,activePerk:e}})}return t&&"function"==typeof t&&await t(),!0}catch(a){throw a}},async updateDisplayName(e,t,a=null){try{const{data:s,error:n}=await vs.auth.getSession();if(n||!s.session)throw new Error("Пользователь не авторизован");const r=s.session.user.id,i=s.session.user.email,{error:o}=await vs.auth.signInWithPassword({email:i,password:t});if(o)throw new Error("Неверный пароль");if(!(await Ns(e,r)))throw new Error("Пользователь с таким именем уже существует");const{data:l,error:c}=await vs.auth.updateUser({data:{display_name:e}});if(c)throw new Error(c.message||"Ошибка при обновлении имени");const{error:d}=await vs.from("profiles").update({display_name:e}).eq("id",r),m=localStorage.getItem("user");if(m){const t=JSON.parse(m);t.displayName=e,localStorage.setItem("user",JSON.stringify(t)),ks.updateProfileCache(r,{displayName:e}),js("profileUpdated",{userId:r,profileData:{...t,displayName:e}})}return a&&"function"==typeof a&&await a(),!0}catch(s){throw s}},async changePassword(e,t){try{const{data:a,error:s}=await vs.auth.getSession();if(s||!a.session)throw new Error(ws("You must log in to perform this action"));const n=a.session.user.email,{error:r}=await vs.auth.signInWithPassword({email:n,password:e});if(r)throw new Error("Неверный текущий пароль");const{error:i}=await vs.auth.updateUser({password:t});if(i)throw new Error(ws(i.message)||"Ошибка при изменении пароля");return!0}catch(a){throw a.message&&(a.message=ws(a.message)),a}},async resetPassword(e){try{const t=window.location.origin,a="".concat(t,"/reset-password"),{error:s}=await vs.auth.resetPasswordForEmail(e,{redirectTo:a});if(s)throw new Error(ws(s.message)||"Ошибка при сбросе пароля");return!0}catch(t){throw t.message&&(t.message=ws(t.message)),t}},async refreshCurrentUser(){try{const{data:e,error:t}=await vs.auth.getSession();if(t||!e.session)return localStorage.removeItem("user"),null;const{data:a,error:s}=await vs.from("profiles").select("*").eq("id",e.session.user.id).single();if(s)return null;const n="igoraor79@gmail.com"===e.session.user.email,r={id:e.session.user.id,email:e.session.user.email,displayName:a.display_name||"Пользователь",role:n?"admin":a.role||"user",createdAt:e.session.user.created_at,avatar:a.avatar||null,perks:a.perks||["user"],activePerk:a.active_perk||"user"};if(localStorage.setItem("user",JSON.stringify(r)),ks.updateProfileCache(r.id,{id:r.id,email:r.email,displayName:r.displayName,avatar:r.avatar,perks:r.perks,activePerk:r.activePerk}),"undefined"!=typeof window){const e=new CustomEvent("app:user:updated",{detail:r});window.dispatchEvent(e)}return r}catch(e){return null}},async fixProfileIssues(){try{const{data:e}=await vs.auth.getSession();if(!e||!e.session||"igoraor79@gmail.com"!==e.session.user.email)throw new Error("Только администратор может выполнять эту операцию");const t=await fetch("/src/sql/profile_navigation_fix.sql");if(!t.ok)throw new Error("Не удалось загрузить скрипт для исправления профилей");const a=await t.text(),{data:s,error:n}=await vs.rpc("execute_sql_admin",{sql_query:a});if(n)throw new Error("Ошибка при исправлении профилей: ".concat(n.message));return{success:!0,message:"Проблемы с профилями успешно исправлены",details:s}}catch(e){throw e}}},Cs=({banInfo:e,onClose:t})=>{if(!e)return null;return G.jsx("div",{className:"ban-modal-overlay",children:G.jsxs(V.div,{className:"ban-modal",initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.3}},exit:{opacity:0,y:20,scale:.95,transition:{duration:.2}}},children:[G.jsxs("div",{className:"ban-modal-header",children:[G.jsx(V.div,{className:"ban-icon-wrapper",initial:"hidden",animate:"visible",variants:{hidden:{scale:0,rotate:-180},visible:{scale:1,rotate:0,transition:{type:"spring",damping:10,stiffness:100,delay:.2}}},children:G.jsx(Q,{className:"ban-icon"})}),G.jsx("h2",{children:"Ваш аккаунт заблокирован"}),G.jsx("button",{className:"ban-close-button",onClick:t,children:G.jsx(X,{})})]}),G.jsxs("div",{className:"ban-modal-content",children:[G.jsxs("div",{className:"ban-details",children:[G.jsxs("div",{className:"ban-reason",children:[G.jsx(K,{className:"ban-detail-icon"}),G.jsxs("div",{children:[G.jsx("h3",{children:"Причина блокировки:"}),G.jsx("p",{children:e.reason})]})]}),G.jsxs("div",{className:"ban-admin",children:[G.jsx(ee,{className:"ban-detail-icon"}),G.jsxs("div",{children:[G.jsx("h3",{children:"Заблокировал:"}),G.jsx("p",{children:e.admin_name})]})]}),G.jsxs("div",{className:"ban-time",children:[G.jsx(te,{className:"ban-detail-icon"}),G.jsxs("div",{children:[G.jsx("h3",{children:"Срок блокировки:"}),G.jsx("p",{className:(()=>{if(!e.end_at)return"ban-permanent";const t=(new Date(e.end_at)-new Date)/36e5;return t<=2?"ban-short":t<=24?"ban-medium":"ban-long"})(),children:(e=>{if(!e)return"Бессрочно";const t=new Date(e),a=new Date;if(t<a)return"Истекло";const s=t-a,n=Math.floor(s/1e3),r=Math.floor(n/60),i=Math.floor(r/60),o=Math.floor(i/24);return o>0?"".concat(o," ").concat(1===o?"день":o<5?"дня":"дней"):i>0?"".concat(i," ").concat(1===i?"час":i<5?"часа":"часов"):r>0?"".concat(r," ").concat(1===r?"минута":r<5?"минуты":"минут"):"менее минуты"})(e.end_at)})]})]})]}),G.jsx("div",{className:"ban-message",children:G.jsx("p",{children:"Если вы считаете, что блокировка была наложена по ошибке, пожалуйста, свяжитесь с администрацией сайта для разрешения этой ситуации."})}),G.jsx("button",{className:"ban-ok-button",onClick:t,children:"Понятно"})]})]})})},Ps="app:user:updated",As=e=>{const t=new CustomEvent(Ps,{detail:e});window.dispatchEvent(t)},Es=W.createContext(null),Is=({children:e})=>{const[t,a]=W.useState(null),[s,n]=W.useState(!0),[r,i]=W.useState(null);W.useEffect((()=>{(async()=>{n(!0);try{const{data:e,error:t}=await vs.auth.getSession();if(t||!e.session)return localStorage.removeItem("user"),a(null),void n(!1);const s=await Ss.checkUserBan(e.session.user.id);if(s.is_banned)return i(s),await Ss.logout(),a(null),void n(!1);const r=await Ss.getCurrentUser();r?a(r):await Ss.logout()}catch(e){localStorage.removeItem("user")}finally{n(!1)}})()}),[]);const o=async()=>{if(t)try{n(!0);const e=await Ss.checkUserBan(t.id);if(e.is_banned)return i(e),await Ss.logout(),a(null),void n(!1);const{data:s,error:r}=await vs.from("profiles").select("*").eq("id",t.id).single();if(r)return;s.perks&&0!==s.perks.length||(s.perks=["user"],s.active_perk="user"),s.perks.includes(s.active_perk)||(s.active_perk=s.perks[0]||"user");const o={...t,displayName:s.display_name||t.displayName,avatar:s.avatar||t.avatar,perks:s.perks,activePerk:s.active_perk};localStorage.setItem("user",JSON.stringify(o)),As(o),a(o)}catch(e){}finally{n(!1)}};W.useEffect((()=>{if(!t)return;const e=vs.channel("profile-changes-".concat(t.id)).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:"id=eq.".concat(t.id)},(e=>{o()})).subscribe();return()=>{e.unsubscribe()}}),[t]),W.useEffect((()=>{if(!t)return;const e=(n=({userId:e,profileData:s})=>{if(t&&e===t.id){const e={...t,displayName:s.displayName||t.displayName,avatar:s.avatar||t.avatar,perks:s.perks||t.perks,activePerk:s.activePerk||t.activePerk};localStorage.setItem("user",JSON.stringify(e)),As(e),a(e);const n=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(e),url:window.location.href});window.dispatchEvent(n)}},bs[s="profileUpdated"]||(bs[s]=[]),bs[s].push(n),()=>{bs[s]=bs[s].filter((e=>e!==n))});var s,n;return()=>e()}),[t]);return G.jsxs(Es.Provider,{value:{user:t,login:async e=>{try{n(!0);const{data:t,error:s}=await vs.auth.signInWithPassword({email:e.email,password:e.password});if(s)throw new Error(s.message);const r=await Ss.checkUserBan(t.user.id);if(r.is_banned)return await Ss.logout(),i(r),n(!1),null;const o=await Ss.login(e);return a(o.user),o}catch(t){throw t}finally{n(!1)}},register:async e=>{try{n(!0);const t=await Ss.register(e);return t&&t.user&&(a(t.user),localStorage.setItem("user",JSON.stringify(t.user))),t}catch(t){throw t}finally{n(!1)}},logout:async()=>{try{n(!0),await Ss.logout(),a(null)}catch(e){}finally{n(!1)}},loginWithProvider:async e=>{try{n(!0);const{data:t,error:a}=await vs.auth.signInWithOAuth({provider:e,options:{redirectTo:window.location.origin,queryParams:{access_type:"offline",prompt:"consent",hd:"domain.com"}}});if(a)throw a;return t}catch(t){throw t}finally{n(!1)}},loading:s,refreshUser:o,isAuthenticated:!!t},children:[e,r&&G.jsx(Cs,{banInfo:r,onClose:()=>{i(null)}})]})},Bs=()=>{const e=W.useContext(Es);if(null===e)throw new Error("useAuth должен использоваться внутри AuthProvider");return e},Os="_submitButton_16czx_77",Ds="_formContainer_16czx_112",Ts="_errorMessage_16czx_133",qs="_formGroup_16czx_144",Ls="_inputIcon_16czx_155",Fs="_inputWrapper_16czx_160",zs="_inputIconInside_16czx_164",Ms="_charCounter_16czx_204",Us="_buttonIcon_16czx_231",Rs="_switchForm_16czx_260",Gs="_switchButton_16czx_272",Hs=({onSuccess:e,onSwitchToRegister:t})=>{const{login:a,loading:s}=Bs(),[n,r]=W.useState(""),[i,o]=W.useState(""),[l,c]=W.useState(""),d={focus:{scale:1.02,x:5},blur:{scale:1,x:0}};return G.jsxs("div",{className:Ds,children:[G.jsx(V.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:"Вход в аккаунт"}),l&&G.jsx(V.div,{className:Ts,initial:{opacity:0,y:-10,height:0},animate:{opacity:1,y:0,height:"auto"},transition:{duration:.3,ease:"easeOut"},children:l}),G.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),n&&i)try{c(""),await a({email:n,password:i}),e&&e()}catch(s){c(s.message||"Ошибка входа. Проверьте ваши учетные данные.")}else c("Пожалуйста, заполните все поля")},children:[G.jsxs("div",{className:qs,children:[G.jsxs("label",{htmlFor:"email",children:[G.jsx(ae,{className:Ls})," Email:"]}),G.jsx(V.div,{whileFocus:"focus",whileTap:"focus",variants:d,children:G.jsxs("div",{className:Fs,children:[G.jsx(ae,{className:zs}),G.jsx("input",{type:"email",id:"email",value:n,onChange:e=>r(e.target.value),disabled:s,placeholder:"Введите ваш email",required:!0})]})})]}),G.jsxs("div",{className:qs,children:[G.jsxs("label",{htmlFor:"password",children:[G.jsx(se,{className:Ls})," Пароль:"]}),G.jsx(V.div,{whileFocus:"focus",whileTap:"focus",variants:d,children:G.jsxs("div",{className:Fs,children:[G.jsx(se,{className:zs}),G.jsx("input",{type:"password",id:"password",value:i,onChange:e=>o(e.target.value),disabled:s,placeholder:"Введите ваш пароль",required:!0})]})})]}),G.jsx(V.button,{type:"submit",className:Os,disabled:s,variants:{hover:{scale:1.03,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)"},tap:{scale:.98}},whileHover:"hover",whileTap:"tap",children:s?"Вход...":G.jsxs(G.Fragment,{children:[G.jsx(ne,{className:Us}),G.jsx("span",{children:"Войти"})]})})]}),G.jsxs("div",{className:Rs,children:[G.jsx("p",{children:"Еще нет аккаунта?"}),G.jsx(V.button,{className:Gs,onClick:t,disabled:s,whileHover:{scale:1.05},whileTap:{scale:.98},children:"Зарегистрироваться"})]})]})},Vs=({onSuccess:e,onSwitchToLogin:t})=>{const{register:a,loading:s}=Bs(),[n,r]=W.useState(""),[i,o]=W.useState(""),[l,c]=W.useState(""),[d,m]=W.useState(""),[u,p]=W.useState(""),_={focus:{scale:1.02,x:5},blur:{scale:1,x:0}},h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}};return G.jsxs("div",{className:Ds,children:[G.jsx(V.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:"Регистрация"}),u&&G.jsx(V.div,{className:Ts,initial:{opacity:0,y:-10,height:0},animate:{opacity:1,y:0,height:"auto"},transition:{duration:.3,ease:"easeOut"},children:u}),G.jsxs(V.form,{onSubmit:async t=>{if(t.preventDefault(),n&&i&&l&&d)if(i===l)if(i.length<6)p("Пароль должен содержать не менее 6 символов");else if(i.length>15)p("Пароль не должен превышать 15 символов");else if(d.length>12)p("Имя пользователя не должно превышать 12 символов");else try{p(""),await a({email:n,password:i,displayName:d}),e&&e()}catch(s){p(s.message||"Ошибка при регистрации. Попробуйте позже.")}else p("Пароли не совпадают");else p("Пожалуйста, заполните все поля")},variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[G.jsxs(V.div,{className:qs,variants:h,children:[G.jsxs("label",{htmlFor:"displayName",children:[G.jsx(ee,{className:Ls})," Имя пользователя:"]}),G.jsx(V.div,{whileFocus:"focus",whileTap:"focus",variants:_,children:G.jsxs("div",{className:Fs,children:[G.jsx(ee,{className:zs}),G.jsx("input",{type:"text",id:"displayName",value:d,onChange:e=>{const t=e.target.value;t.length<=12&&m(t)},disabled:s,placeholder:"Введите ваше имя (до 12 символов)",required:!0,maxLength:12})]})}),G.jsxs("small",{className:Ms,children:[d.length,"/12 символов"]})]}),G.jsxs(V.div,{className:qs,variants:h,children:[G.jsxs("label",{htmlFor:"email",children:[G.jsx(ae,{className:Ls})," Email:"]}),G.jsx(V.div,{whileFocus:"focus",whileTap:"focus",variants:_,children:G.jsxs("div",{className:Fs,children:[G.jsx(ae,{className:zs}),G.jsx("input",{type:"email",id:"email",value:n,onChange:e=>r(e.target.value),disabled:s,placeholder:"Введите ваш email",required:!0})]})})]}),G.jsxs(V.div,{className:qs,variants:h,children:[G.jsxs("label",{htmlFor:"password",children:[G.jsx(se,{className:Ls})," Пароль:"]}),G.jsx(V.div,{whileFocus:"focus",whileTap:"focus",variants:_,children:G.jsxs("div",{className:Fs,children:[G.jsx(se,{className:zs}),G.jsx("input",{type:"password",id:"password",value:i,onChange:e=>{const t=e.target.value;t.length<=15&&o(t)},disabled:s,placeholder:"От 6 до 15 символов",required:!0,maxLength:15})]})}),G.jsxs("small",{className:Ms,children:[i.length,"/15 символов"]})]}),G.jsxs(V.div,{className:qs,variants:h,children:[G.jsxs("label",{htmlFor:"confirmPassword",children:[G.jsx(se,{className:Ls})," Подтвердите пароль:"]}),G.jsx(V.div,{whileFocus:"focus",whileTap:"focus",variants:_,children:G.jsxs("div",{className:Fs,children:[G.jsx(se,{className:zs}),G.jsx("input",{type:"password",id:"confirmPassword",value:l,onChange:e=>{const t=e.target.value;t.length<=15&&c(t)},disabled:s,placeholder:"Повторите пароль",required:!0,maxLength:15})]})})]}),G.jsx(V.button,{type:"submit",className:Os,disabled:s,variants:{hover:{scale:1.03,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)"},tap:{scale:.98}},whileHover:"hover",whileTap:"tap",children:s?"Регистрация...":G.jsxs(G.Fragment,{children:[G.jsx(re,{className:Us}),G.jsx("span",{children:"Зарегистрироваться"})]})})]}),G.jsxs("div",{className:Rs,children:[G.jsx("p",{children:"Уже есть аккаунт?"}),G.jsx(V.button,{className:Gs,onClick:t,disabled:s,whileHover:{scale:1.05},whileTap:{scale:.98},children:"Войти"})]})]})},Ws=({isOpen:e,onClose:t,initialView:a="login"})=>{const[s,n]=J.useState(a);W.useEffect((()=>(document.body.style.overflow=e?"hidden":"",()=>{document.body.style.overflow=""})),[e]),W.useEffect((()=>{const a=a=>{"Escape"===a.key&&e&&t()};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}}),[e,t]);return e?$.createPortal(G.jsx("div",{className:ls,onClick:e=>{e.target===e.currentTarget&&t()},children:G.jsxs("div",{className:cs,onClick:e=>e.stopPropagation(),children:[G.jsx("button",{className:ms,onClick:t,children:G.jsx(X,{})}),G.jsxs("div",{className:ds,children:[G.jsx("div",{className:ps}),G.jsx("div",{className:us,children:"login"===s?G.jsx(Hs,{onSwitchToRegister:()=>n("register"),onSuccess:()=>{setTimeout((()=>t()),500)}}):G.jsx(Vs,{onSwitchToLogin:()=>n("login"),onSuccess:()=>{setTimeout((()=>t()),500)}})})]})]})}),document.getElementById("modal-root")||document.body):null},Js="_sponsorPerk_14u1w_27 _perkBase_14u1w_18",$s="_earlyUserPerk_14u1w_33 _perkBase_14u1w_18",Ys="_adminPerk_14u1w_39 _perkBase_14u1w_18",Zs="_userPerk_14u1w_45 _perkBase_14u1w_18",Qs=({src:e,alt:t,className:a,onLoad:s,style:n})=>{let r=rt;if(e)if(e.includes("pfp1")||e.includes("vivian"))r=it;else if(e.includes("pfp2")||e.includes("akito"))r=ot;else if(e.includes("pfp3")||e.includes("lonarius"))r=lt;else if(e.includes("pfp4")||e.includes("faust"))r=ct;else if(e.includes("igorpic")||e===dt)r=dt;else if(e.includes("lesyapic")||e===mt)r=mt;else if(e.startsWith("http")||e.startsWith("data:"))return G.jsx("img",{src:e,alt:t||"Аватар пользователя",className:a,style:{...n,objectFit:"cover",imageRendering:"auto"},onLoad:s,loading:"eager",crossOrigin:"anonymous",onError:e=>{e.target.src="https://res.cloudinary.com/do9t8preg/image/upload/q_100,dpr_auto,fl_progressive/v1746775570/".concat(rt),e.target.onerror=null}});return G.jsx(pt,{avatar:r,alt:t||"Аватар пользователя",className:a,style:{...n,objectFit:"cover",imageRendering:"auto"},size:(null==n?void 0:n.width)?2*parseInt(n.width,10):(null==n?void 0:n.height)?2*parseInt(n.height,10):180,onLoad:s})},Xs=()=>{const{user:e,logout:t,isAuthenticated:a}=Bs(),s=ie(),[n,r]=W.useState(!1),[i,o]=W.useState(!1),[l,c]=W.useState("Пользователь"),[d,m]=W.useState(!1),[u,p]=W.useState(""),[,_]=W.useReducer((e=>e+1),0),[h,x]=W.useState(Date.now()),g=W.useCallback((e=>{if(!e)return"";switch(e){case"sponsor":return Js;case"early_user":return $s;case"admin":return Ys;default:return Zs}}),[]);W.useEffect((()=>{var t;if(e){c(e.displayName||"Пользователь");const a="igoraor79@gmail.com"===e.email||(null==(t=e.perks)?void 0:t.includes("admin"))||"admin"===e.activePerk;m(a),p(g(e.activePerk))}else p("")}),[e,g]),W.useEffect((()=>{const t=t=>{var a;const s=t.detail;if(s){_(),e&&e.avatar!==s.avatar&&x(Date.now());const t="igoraor79@gmail.com"===s.email||(null==(a=s.perks)?void 0:a.includes("admin"))||"admin"===s.activePerk;m(t),c(s.displayName||"Пользователь"),p(g(s.activePerk))}};return window.addEventListener(Ps,t),()=>{window.removeEventListener(Ps,t)}}),[g]),W.useEffect((()=>{const t=t=>{if("user"===t.key)try{const a=t.newValue?JSON.parse(t.newValue):null,s=e;a&&s&&a.avatar!==s.avatar&&x(Date.now()),_()}catch(a){}};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}),[e]);const v={hidden:{opacity:0,x:-5,y:5},visible:{opacity:1,x:0,y:0,transition:{type:"spring",damping:20,stiffness:300}}},f={hover:{scale:1.03,y:-2},tap:{scale:.98}};return G.jsxs("div",{className:Za,children:[a?G.jsxs("div",{className:Xa,children:[G.jsxs(V.button,{className:Ka,onClick:()=>{o(!i)},"aria-label":"Меню пользователя",variants:f,whileHover:"hover",whileTap:"tap",children:[G.jsx(Qs,{src:null==e?void 0:e.avatar,alt:"Аватар пользователя",className:es},h),G.jsx("span",{className:"".concat(ts," ").concat(u),children:l}),G.jsx(V.span,{animate:{rotate:i?180:0},transition:{duration:.3},style:{marginLeft:"3px",display:"flex",alignItems:"center"},children:G.jsx(oe,{size:14})})]}),G.jsx(H,{children:i&&G.jsx(V.div,{className:as,variants:{hidden:{opacity:0,y:-10,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",damping:25,stiffness:300,duration:.3,staggerChildren:.06}},exit:{opacity:0,y:-5,scale:.98,transition:{duration:.2}}},initial:"hidden",animate:"visible",exit:"exit",children:G.jsxs("ul",{children:[G.jsx(V.li,{variants:v,children:G.jsxs(V.button,{className:"".concat(ss," ").concat(is),onClick:()=>{s("/profile"),o(!1)},whileHover:{x:5},children:[G.jsx(ee,{})," Профиль"]})}),G.jsx(V.li,{variants:v,children:G.jsxs(V.button,{className:"".concat(ss," ").concat(os),onClick:()=>{s("/feedback"),o(!1)},whileHover:{x:5},children:[G.jsx(le,{})," Обратная связь"]})}),d&&G.jsx(V.li,{variants:v,children:G.jsxs(V.button,{className:"".concat(ss," ").concat(rs),onClick:()=>{s("/admin"),o(!1)},whileHover:{x:5},children:[G.jsx(ce,{})," Администрирование"]})}),G.jsx(V.li,{variants:v,children:G.jsxs(V.button,{className:"".concat(ss," ").concat(ns),onClick:()=>{t(),o(!1)},whileHover:{x:5},children:[G.jsx(de,{})," Выйти"]})})]})})})]}):G.jsxs(V.button,{className:Qa,onClick:()=>{r(!0)},variants:f,whileHover:"hover",whileTap:"tap",children:[G.jsx(ne,{size:16})," Войти"]}),G.jsx(Ws,{isOpen:n,onClose:()=>{r(!1)}})]})},Ks={perkBase:"_perkBase_1bbdr_18",sponsorPerk:"_sponsorPerk_1bbdr_27 _perkBase_1bbdr_18",earlyUserPerk:"_earlyUserPerk_1bbdr_33 _perkBase_1bbdr_18",adminPerk:"_adminPerk_1bbdr_39 _perkBase_1bbdr_18",userPerk:"_userPerk_1bbdr_45 _perkBase_1bbdr_18",profileContainer:"_profileContainer_1bbdr_51",loading:"_loading_1bbdr_65",error:"_error_1bbdr_65",profileHeader:"_profileHeader_1bbdr_78",avatarSection:"_avatarSection_1bbdr_89",avatarContainer:"_avatarContainer_1bbdr_100",profileAvatar:"_profileAvatar_1bbdr_108",changeAvatarButton:"_changeAvatarButton_1bbdr_117",profileInfo:"_profileInfo_1bbdr_161",displayName:"_displayName_1bbdr_165",userMeta:"_userMeta_1bbdr_183",userRole:"_userRole_1bbdr_193",userJoined:"_userJoined_1bbdr_193",userEmail:"_userEmail_1bbdr_193",userPrivileges:"_userPrivileges_1bbdr_193",label:"_label_1bbdr_206",value:"_value_1bbdr_218",privilegeContainer:"_privilegeContainer_1bbdr_227",changePerkButton:"_changePerkButton_1bbdr_239",adminActions:"_adminActions_1bbdr_252",personalSettings:"_personalSettings_1bbdr_252",actionButtons:"_actionButtons_1bbdr_273",editButton:"_editButton_1bbdr_278",banButton:"_banButton_1bbdr_278",saveButton:"_saveButton_1bbdr_278",cancelButton:"_cancelButton_1bbdr_278",settingGroup:"_settingGroup_1bbdr_336",settingControl:"_settingControl_1bbdr_345",backdrop:"_backdrop_1bbdr_359",modal:"_modal_1bbdr_386",modalContent:"_modalContent_1bbdr_415",closeButton:"_closeButton_1bbdr_435",avatarsGrid:"_avatarsGrid_1bbdr_461",avatarCard:"_avatarCard_1bbdr_468",selectedAvatar:"_selectedAvatar_1bbdr_480",avatarImageContainer:"_avatarImageContainer_1bbdr_489",avatarImage:"_avatarImage_1bbdr_489",selectedIndicator:"_selectedIndicator_1bbdr_507",avatarName:"_avatarName_1bbdr_519",perksList:"_perksList_1bbdr_529",perkOption:"_perkOption_1bbdr_535",activePerkOption:"_activePerkOption_1bbdr_552",perkName:"_perkName_1bbdr_557",activePerkIndicator:"_activePerkIndicator_1bbdr_565",modalMotion:"_modalMotion_1bbdr_576",modalFooter:"_modalFooter_1bbdr_589",modalForm:"_modalForm_1bbdr_594",formGroup:"_formGroup_1bbdr_601",formControl:"_formControl_1bbdr_611",formActions:"_formActions_1bbdr_632",submitButton:"_submitButton_1bbdr_667",modalHeader:"_modalHeader_1bbdr_689",errorMessage:"_errorMessage_1bbdr_732",successMessage:"_successMessage_1bbdr_732",fadeIn:"_fadeIn_1bbdr_1",passwordStrength:"_passwordStrength_1bbdr_765",passwordStrengthInfo:"_passwordStrengthInfo_1bbdr_770",passwordStrengthText:"_passwordStrengthText_1bbdr_776",passwordStrengthPercentage:"_passwordStrengthPercentage_1bbdr_781",passwordStrengthBar:"_passwordStrengthBar_1bbdr_786",passwordStrengthFill:"_passwordStrengthFill_1bbdr_795",avatarWrapper:"_avatarWrapper_1bbdr_843",loadingOverlay:"_loadingOverlay_1bbdr_855",avatarHint:"_avatarHint_1bbdr_869",adminEditForm:"_adminEditForm_1bbdr_886",blockLabel:"_blockLabel_1bbdr_907",formInput:"_formInput_1bbdr_914",formSelect:"_formSelect_1bbdr_914",checkboxGroup:"_checkboxGroup_1bbdr_933",checkboxLabel:"_checkboxLabel_1bbdr_939",checkboxText:"_checkboxText_1bbdr_954",statusMessage:"_statusMessage_1bbdr_959",success:"_success_1bbdr_732",info:"_info_1bbdr_977",loadingIcon:"_loadingIcon_1bbdr_986",spin:"_spin_1bbdr_1",perksOptions:"_perksOptions_1bbdr_1133",basePerk:"_basePerk_1bbdr_1167",baseLabel:"_baseLabel_1bbdr_1176",baseNote:"_baseNote_1bbdr_1179",selectPerk:"_selectPerk_1bbdr_1185",banInfoBox:"_banInfoBox_1bbdr_1299",banDetails:"_banDetails_1bbdr_1326",bannedStatus:"_bannedStatus_1bbdr_1334",banDuration:"_banDuration_1bbdr_1346",unbanButton:"_unbanButton_1bbdr_1356",activePerk:"_activePerk_1bbdr_552",editPerkIcon:"_editPerkIcon_1bbdr_1393",profileDetail:"_profileDetail_1bbdr_1397",detailIcon:"_detailIcon_1bbdr_1407",buttonText:"_buttonText_1bbdr_1413",banModalHeader:"_banModalHeader_1bbdr_1441",modalDivider:"_modalDivider_1bbdr_1467",adminAvatar:"_adminAvatar_1bbdr_1494",adminAvatarBadge:"_adminAvatarBadge_1bbdr_1510"},en=[{id:1,name:rt,displayName:"Гость"},{id:2,name:it,displayName:"Вивиан"},{id:3,name:ot,displayName:"Акито"},{id:4,name:lt,displayName:"Лонариус"},{id:5,name:ct,displayName:"Фауст"}],tn=[{id:101,name:dt,displayName:"Игорь",adminOnly:!0},{id:102,name:mt,displayName:"Леся",adminOnly:!0}],an=({perks:e,activePerk:t,onSelectPerk:a,onClose:s})=>{W.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]),W.useEffect((()=>{const e=e=>{"Escape"===e.key&&s()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[s]);return $.createPortal(G.jsx("div",{className:Ks.backdrop,onClick:e=>{e.target===e.currentTarget&&s()},children:G.jsxs("div",{className:Ks.modal,onClick:e=>e.stopPropagation(),children:[G.jsx("button",{className:Ks.closeButton,onClick:s,children:G.jsx(X,{size:20})}),G.jsxs("div",{className:Ks.modalContent,children:[G.jsx("h3",{children:"Выберите привилегию"}),G.jsx("div",{className:Ks.perksList,children:e.map((e=>{const s="sponsor"===e?Js:"early_user"===e?$s:"admin"===e?Ys:Zs;return G.jsxs(V.div,{className:"".concat(Ks.perkOption," ").concat(e===t?Ks.activePerkOption:""),whileHover:{scale:1.03},onClick:()=>a(e),children:[G.jsxs("div",{className:"".concat(Ks.perkName," ").concat(s),children:["sponsor"===e&&"Спонсор","early_user"===e&&"Ранний пользователь","admin"===e&&"Администратор","user"===e&&"Пользователь"]}),e===t&&G.jsx("div",{className:Ks.activePerkIndicator,children:G.jsx(ve,{size:16})})]},e)}))})]})]})}),document.getElementById("modal-root")||document.body)},sn=({onClose:e,onSubmit:t,initialName:a})=>{const[s,n]=W.useState(a||""),[r,i]=W.useState(""),[o,l]=W.useState(""),[c,d]=W.useState(!1),[m,u]=W.useState(!1);W.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]),W.useEffect((()=>{const t=t=>{"Escape"!==t.key||c||e()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[e,c]);return $.createPortal(G.jsx("div",{className:Ks.backdrop,onClick:t=>{t.target!==t.currentTarget||c||e()},children:G.jsxs("div",{className:Ks.modal,onClick:e=>e.stopPropagation(),children:[G.jsx("button",{className:Ks.closeButton,onClick:e,disabled:c,children:G.jsx(X,{size:20})}),G.jsxs("div",{className:Ks.modalContent,children:[G.jsx("h3",{children:"Изменить имя пользователя"}),m?G.jsxs(V.div,{className:Ks.successMessage,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[G.jsx(ve,{size:20}),G.jsx("span",{children:"Имя пользователя успешно изменено!"})]}):G.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),l(""),s.trim())if(r){d(!0);try{await t(s.trim(),r),u(!0),setTimeout((()=>e()),1500)}catch(n){l(n.message||"Не удалось обновить имя пользователя")}finally{d(!1)}}else l("Введите пароль для подтверждения");else l("Имя пользователя не может быть пустым")},className:Ks.modalForm,children:[G.jsxs("div",{className:Ks.formGroup,children:[G.jsx("label",{htmlFor:"newName",children:"Новое имя:"}),G.jsx("input",{type:"text",id:"newName",value:s,onChange:e=>n(e.target.value),placeholder:"Введите новое имя",className:Ks.formControl,disabled:c,autoFocus:!0})]}),G.jsxs("div",{className:Ks.formGroup,children:[G.jsx("label",{htmlFor:"password",children:"Введите пароль для подтверждения:"}),G.jsx("input",{type:"password",id:"password",value:r,onChange:e=>i(e.target.value),placeholder:"Ваш текущий пароль",className:Ks.formControl,disabled:c})]}),o&&G.jsxs(V.div,{className:Ks.errorMessage,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},children:[G.jsx(he,{size:18}),G.jsx("span",{children:o})]}),G.jsxs("div",{className:Ks.formActions,children:[G.jsx("button",{type:"button",className:Ks.cancelButton,onClick:e,disabled:c,children:"Отмена"}),G.jsx(V.button,{type:"submit",className:Ks.submitButton,disabled:c,whileHover:{scale:1.03},whileTap:{scale:.97},children:c?G.jsx(V.span,{animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:"Сохранение..."}):"Сохранить"})]})]})]})]})}),document.getElementById("modal-root")||document.body)},nn=({onClose:e,onSubmit:t})=>{const[a,s]=W.useState(""),[n,r]=W.useState(""),[i,o]=W.useState(""),[l,c]=W.useState(""),[d,m]=W.useState(!1),[u,p]=W.useState(!1);W.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]),W.useEffect((()=>{const t=t=>{"Escape"!==t.key||d||e()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[e,d]);return $.createPortal(G.jsx("div",{className:Ks.backdrop,onClick:t=>{t.target!==t.currentTarget||d||e()},children:G.jsxs("div",{className:Ks.modal,onClick:e=>e.stopPropagation(),children:[G.jsx("button",{className:Ks.closeButton,onClick:e,disabled:d,children:G.jsx(X,{size:20})}),G.jsxs("div",{className:Ks.modalContent,children:[G.jsx("h3",{children:"Изменить пароль"}),u?G.jsxs(V.div,{className:Ks.successMessage,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[G.jsx(ve,{size:20}),G.jsx("span",{children:"Пароль успешно изменен!"})]}):G.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),c(""),a)if(n)if(n.length<6)c("Новый пароль должен содержать не менее 6 символов");else if(n===i){m(!0);try{await t(a,n),p(!0),setTimeout((()=>e()),1500)}catch(r){c(r.message||"Не удалось изменить пароль")}finally{m(!1)}}else c("Пароли не совпадают");else c("Введите новый пароль");else c("Введите текущий пароль")},className:Ks.modalForm,children:[G.jsxs("div",{className:Ks.formGroup,children:[G.jsx("label",{htmlFor:"currentPassword",children:"Текущий пароль:"}),G.jsx("input",{type:"password",id:"currentPassword",value:a,onChange:e=>s(e.target.value),placeholder:"Введите текущий пароль",className:Ks.formControl,disabled:d,autoFocus:!0})]}),G.jsxs("div",{className:Ks.formGroup,children:[G.jsx("label",{htmlFor:"newPassword",children:"Новый пароль:"}),G.jsx("input",{type:"password",id:"newPassword",value:n,onChange:e=>r(e.target.value),placeholder:"Введите новый пароль",className:Ks.formControl,disabled:d})]}),G.jsxs("div",{className:Ks.formGroup,children:[G.jsx("label",{htmlFor:"confirmPassword",children:"Подтвердите пароль:"}),G.jsx("input",{type:"password",id:"confirmPassword",value:i,onChange:e=>o(e.target.value),placeholder:"Повторите новый пароль",className:Ks.formControl,disabled:d})]}),l&&G.jsxs(V.div,{className:Ks.errorMessage,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},children:[G.jsx(he,{size:18}),G.jsx("span",{children:l})]}),G.jsxs("div",{className:Ks.formActions,children:[G.jsx("button",{type:"button",className:Ks.cancelButton,onClick:e,disabled:d,children:"Отмена"}),G.jsx(V.button,{type:"submit",className:Ks.submitButton,disabled:d,whileHover:{scale:1.03},whileTap:{scale:.97},children:d?G.jsx(V.span,{animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:"Сохранение..."}):"Сохранить"})]})]})]})]})}),document.getElementById("modal-root")||document.body)},rn=({avatars:e,adminAvatars:t=[],isAdmin:a,onSelectAvatar:s,onClose:n})=>{const[r,i]=W.useState(null),[o,l]=W.useState(!1),[c,d]=W.useState(!1),m=a?[...e,...t]:e;W.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]),W.useEffect((()=>{const e=e=>{"Escape"!==e.key||o||c||n()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[n,o,c]);return $.createPortal(G.jsx("div",{className:Ks.backdrop,onClick:e=>{e.target!==e.currentTarget||o||c||n()},children:G.jsxs("div",{className:Ks.modal,onClick:e=>e.stopPropagation(),children:[G.jsx("button",{className:Ks.closeButton,onClick:n,disabled:o||c,children:G.jsx(X,{size:20})}),G.jsxs("div",{className:Ks.modalContent,children:[G.jsx("h3",{children:"Выберите аватар"}),c&&G.jsxs(V.div,{className:Ks.successMessage,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[G.jsx(xe,{size:40}),G.jsx("span",{children:"Аватар успешно изменен!"})]}),G.jsx("div",{className:Ks.avatarsGrid,children:m.map((e=>G.jsxs(V.div,{className:"".concat(Ks.avatarCard," ").concat((null==r?void 0:r.id)===e.id?Ks.selectedAvatar:""," ").concat(e.adminOnly?Ks.adminAvatar:""),whileHover:{scale:1.05},whileTap:{scale:.98},onClick:()=>(async e=>{o||c||(i(e),l(!0),setTimeout((()=>{d(!0),setTimeout((()=>{s(e.id)}),1e3)}),500))})(e),children:[G.jsxs("div",{className:Ks.avatarImageContainer,children:[G.jsx(Qs,{src:e.name,alt:e.displayName,className:Ks.avatarImage}),(null==r?void 0:r.id)===e.id&&G.jsx(V.div,{className:Ks.selectedIndicator,initial:{scale:0},animate:{scale:1},transition:{duration:.3,delay:.1},children:G.jsx(ve,{size:16,color:"#fff"})}),e.adminOnly&&G.jsx("span",{className:Ks.adminAvatarBadge,children:"Admin"})]}),G.jsx("span",{className:Ks.avatarName,children:e.displayName})]},e.id)))})]})]})}),document.getElementById("modal-root")||document.body)},on=({user:e,onSave:t,onCancel:a})=>{const[s,n]=W.useState({displayName:e.displayName||"",perks:e.perks||["user"],activePerk:e.activePerk||"user"}),[r,i]=W.useState(!1),[o,l]=W.useState({type:"",message:""}),c=e=>{if("user"===e)return;const t=s.perks.includes(e)?s.perks.filter((t=>t!==e)):[...s.perks,e];t.includes("user")||t.push("user"),n({...s,perks:t})};return G.jsxs("form",{className:Ks.adminEditForm,onSubmit:async a=>{a.preventDefault();try{if(i(!0),l({type:"",message:""}),!s.perks.includes(s.activePerk))return l({type:"error",message:"Активная привилегия должна быть в списке привилегий пользователя"}),void i(!1);const a={display_name:s.displayName,perks:s.perks,active_perk:s.activePerk},{error:n}=await vs.from("profiles").update(a).eq("id",e.id);if(n)throw new Error("Ошибка при обновлении профиля: ".concat(n.message));const{data:r,error:o}=await vs.from("profiles").select("*").eq("id",e.id).single();if(o)throw new Error("Ошибка при получении обновленного профиля: ".concat(o.message));const c={...e,displayName:r.display_name,perks:r.perks,activePerk:r.active_perk};l({type:"success",message:"Профиль пользователя успешно обновлен"}),setTimeout((()=>{t(c)}),1500)}catch(n){l({type:"error",message:n.message})}finally{i(!1)}},children:[o.message&&G.jsxs("div",{className:"".concat(Ks.statusMessage," ").concat(Ks[o.type]),children:["error"===o.type&&G.jsx(he,{}),"success"===o.type&&G.jsx(xe,{}),"info"===o.type&&G.jsx(K,{}),o.message]}),G.jsxs("div",{className:Ks.formGroup,children:[G.jsxs("label",{htmlFor:"displayName",children:[G.jsx(ee,{})," Отображаемое имя:"]}),G.jsx("input",{type:"text",id:"displayName",name:"displayName",value:s.displayName,onChange:e=>{const{name:t,value:a}=e.target;n({...s,[t]:a})},placeholder:"Имя пользователя"})]}),G.jsxs("div",{className:Ks.formGroup,children:[G.jsxs("label",{children:[G.jsx(_e,{})," Привилегии:"]}),G.jsxs("div",{className:Ks.perksOptions,children:[G.jsxs("div",{className:"".concat(Ks.perkOption," ").concat(Ks.basePerk),children:[G.jsx("input",{type:"checkbox",id:"perk-user",checked:!0,disabled:!0,readOnly:!0}),G.jsxs("label",{htmlFor:"perk-user",className:Ks.baseLabel,children:["Пользователь ",G.jsx("span",{className:Ks.baseNote,children:"(базовая привилегия)"})]})]}),G.jsxs("div",{className:Ks.perkOption,children:[G.jsx("input",{type:"checkbox",id:"perk-early_user",checked:s.perks.includes("early_user"),onChange:()=>c("early_user")}),G.jsx("label",{htmlFor:"perk-early_user",children:"Ранний пользователь"})]}),G.jsxs("div",{className:Ks.perkOption,children:[G.jsx("input",{type:"checkbox",id:"perk-sponsor",checked:s.perks.includes("sponsor"),onChange:()=>c("sponsor")}),G.jsx("label",{htmlFor:"perk-sponsor",children:"Спонсор"})]}),G.jsxs("div",{className:Ks.perkOption,children:[G.jsx("input",{type:"checkbox",id:"perk-admin",checked:s.perks.includes("admin"),onChange:()=>c("admin")}),G.jsx("label",{htmlFor:"perk-admin",children:"Администратор"})]})]})]}),G.jsxs("div",{className:Ks.formGroup,children:[G.jsxs("label",{htmlFor:"activePerk",children:[G.jsx(_e,{})," Активная привилегия:"]}),G.jsx("select",{id:"activePerk",name:"activePerk",value:s.activePerk,onChange:e=>{const t=e.target.value;s.perks.includes(t)?(n({...s,activePerk:t}),l({type:"",message:""})):l({type:"error",message:"Нельзя установить активную привилегию, которой нет у пользователя"})},className:Ks.selectPerk,children:s.perks.map((e=>G.jsxs("option",{value:e,children:["user"===e&&"Пользователь","early_user"===e&&"Ранний пользователь","sponsor"===e&&"Спонсор","admin"===e&&"Администратор"]},e)))})]}),G.jsxs("div",{className:Ks.formActions,children:[G.jsxs("button",{type:"button",className:Ks.cancelButton,onClick:a,children:[G.jsx(X,{})," Отмена"]}),G.jsxs("button",{type:"submit",className:Ks.saveButton,disabled:r,children:[r?G.jsx(ge,{}):G.jsx(ye,{})," Сохранить"]})]})]})},ln=({onClose:e,onBanUser:t,loading:a,username:s})=>{const[n,r]=W.useState(""),[i,o]=W.useState(""),[l,c]=W.useState("");W.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]),W.useEffect((()=>{const t=t=>{"Escape"!==t.key||a||e()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[e,a]);return $.createPortal(G.jsx("div",{className:Ks.backdrop,onClick:t=>{t.target!==t.currentTarget||a||e()},children:G.jsxs("div",{className:Ks.modal,onClick:e=>e.stopPropagation(),children:[G.jsx("button",{className:Ks.closeButton,onClick:e,disabled:a,children:G.jsx(X,{size:20})}),G.jsxs("div",{className:Ks.modalContent,children:[G.jsxs("div",{className:Ks.banModalHeader,children:[G.jsxs("h3",{children:[G.jsx(fe,{size:22})," Блокировка пользователя"]}),G.jsxs("p",{children:["Пользователь ",G.jsx("strong",{children:s})," будет заблокирован и не сможет входить в приложение или взаимодействовать с другими пользователями."]})]}),l&&G.jsxs(V.div,{className:Ks.errorMessage,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[G.jsx(he,{size:18}),G.jsx("span",{children:l})]}),G.jsxs("form",{onSubmit:e=>{e.preventDefault(),n.trim()?i?(c(""),t(n,i)):c("Пожалуйста, выберите длительность блокировки"):c("Пожалуйста, укажите причину блокировки")},className:Ks.modalForm,children:[G.jsxs("div",{className:Ks.formGroup,children:[G.jsxs("label",{htmlFor:"banReason",children:[G.jsx(K,{size:16,style:{marginRight:"6px"}}),"Причина блокировки:"]}),G.jsx("textarea",{id:"banReason",value:n,onChange:e=>r(e.target.value),placeholder:"Укажите причину блокировки пользователя",className:Ks.formControl,rows:4})]}),G.jsx("div",{className:Ks.modalDivider}),G.jsxs("div",{className:Ks.formGroup,children:[G.jsxs("label",{htmlFor:"banDuration",children:[G.jsx(te,{size:16,style:{marginRight:"6px"}}),"Длительность блокировки:"]}),G.jsxs("select",{id:"banDuration",value:i,onChange:e=>o(e.target.value),className:Ks.formControl,children:[G.jsx("option",{value:"",children:"Выберите длительность"}),G.jsx("option",{value:"30m",children:"30 минут"}),G.jsx("option",{value:"2h",children:"2 часа"}),G.jsx("option",{value:"6h",children:"6 часов"}),G.jsx("option",{value:"12h",children:"12 часов"}),G.jsx("option",{value:"1d",children:"1 день"}),G.jsx("option",{value:"3d",children:"3 дня"}),G.jsx("option",{value:"1w",children:"1 неделя"}),G.jsx("option",{value:"permanent",children:"Навсегда"})]})]}),G.jsxs("div",{className:Ks.formActions,children:[G.jsxs("button",{type:"button",className:Ks.cancelButton,onClick:e,disabled:a,children:[G.jsx(X,{})," Отмена"]}),G.jsx("button",{type:"submit",className:"".concat(Ks.submitButton," ").concat(Ks.banButton),disabled:a,children:a?G.jsxs(V.span,{animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:[G.jsx(ge,{})," Блокировка..."]}):G.jsxs(G.Fragment,{children:[G.jsx(fe,{})," Заблокировать"]})})]})]})]})]})}),document.getElementById("modal-root")||document.body)},cn=()=>{var e;const{userId:t}=me(),{user:a,isAuthenticated:s,loading:n,refreshUser:r}=Bs(),[i,o]=W.useState(null),[l,c]=W.useState(!0),[d,m]=W.useState(null),[u,p]=W.useState(!1),[_,h]=W.useState(!1),[x,g]=W.useState(!1),[v,f]=W.useState(!1),[y,b]=W.useState(""),j=ie(),[k,w]=W.useState(!1),[N,S]=W.useState({type:"",message:""}),[C,P]=W.useState(!1),[A,E]=W.useState(!1),[I,B]=W.useState(null),O=!t||a&&t===a.id,D=a&&("igoraor79@gmail.com"===a.email||(null==(e=a.perks)?void 0:e.includes("admin"))||"admin"===a.activePerk);W.useEffect((()=>{n||s||t||j("/",{replace:!0})}),[s,n,j,t]),W.useEffect((()=>{(async()=>{try{if(n)return;if(c(!0),O&&a)o({...a,role:"igoraor79@gmail.com"===a.email?"admin":a.role||"user"}),m(null);else if(t)try{/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);const e=await Ss.getUserById(t);o({id:e.id,displayName:e.displayName||"Пользователь",role:e.role||"user",email:e.email,avatar:e.avatar,perks:e.perks||["user"],activePerk:e.activePerk||"user",createdAt:e.createdAt,is_banned:e.is_banned||!1,ban_reason:e.ban_reason,ban_end_at:e.ban_end_at,ban_admin_name:e.ban_admin_name}),e.is_banned&&await T(e.id),m(null)}catch(e){if(e.message.includes("Неверный ID"))return void j("/profile",{replace:!0});o({id:t,displayName:"Пользователь",role:"user",email:D?"user@example.com":null,avatar:null,perks:["user"],activePerk:"user",createdAt:(new Date).toISOString()})}else m("Профиль не найден")}catch(e){m("Ошибка при загрузке профиля")}finally{c(!1)}})()}),[t,a,O,D,n,j]);const T=async e=>{try{const{data:t,error:a}=await vs.from("user_bans").select("*").eq("user_id",e).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1);if(a)return;t&&t.length>0&&B(t[0])}catch(t){}};if(l||!i)return G.jsx("div",{className:Ks.loading,children:"Загрузка профиля..."});if(d)return G.jsx("div",{className:Ks.error,children:d});const q=()=>(null==i?void 0:i.activePerk)?"early_user"===i.activePerk?$s:"sponsor"===i.activePerk?Js:"admin"===i.activePerk?Ys:Zs:Zs;return G.jsxs("div",{className:Ks.profileContainer,children:[G.jsxs("div",{className:Ks.profileHeader,children:[G.jsxs("div",{className:Ks.avatarSection,children:[G.jsx("div",{className:Ks.avatarContainer,children:G.jsx(Qs,{src:i.avatar||rt,alt:i.displayName||"Пользователь",className:Ks.profileAvatar})}),(O||D)&&G.jsxs("button",{className:Ks.changeAvatarButton,onClick:()=>{p(!0)},"aria-label":"Изменить аватар",children:[G.jsx(ue,{size:18})," ",G.jsx("span",{className:Ks.buttonText,children:"Изменить аватар"})]})]}),G.jsxs("div",{className:Ks.profileInfo,children:[G.jsxs("h1",{className:"".concat(Ks.displayName," ").concat(q()),children:[i.displayName||"Пользователь",D&&G.jsxs("span",{className:Ks.adminLabel,children:[" (ID: ",i.id.substring(0,8),"...)"]})]}),i.perks&&i.perks.length>0&&G.jsx("div",{className:Ks.perksContainer,children:G.jsxs("div",{className:"".concat(Ks.activePerk," ").concat(q()),onClick:(O||D)&&i.perks.length>1?()=>{(O||D)&&i.perks&&i.perks.length>1&&h(!0)}:void 0,style:{cursor:(O||D)&&i.perks.length>1?"pointer":"default"},children:[(null==i?void 0:i.activePerk)?"early_user"===i.activePerk?"Ранний пользователь":"sponsor"===i.activePerk?"Спонсор":"admin"===i.activePerk?"Администратор":"Пользователь":"Пользователь",(O||D)&&i.perks.length>1&&G.jsx(ue,{size:16,className:Ks.editPerkIcon})]})}),G.jsxs("div",{className:Ks.profileDetails,children:[i.email&&G.jsxs("div",{className:Ks.profileDetail,children:[G.jsx(ae,{className:Ks.detailIcon,size:20}),G.jsx("span",{children:i.email})]}),G.jsxs("div",{className:Ks.profileDetail,children:[G.jsx(pe,{className:Ks.detailIcon,size:20}),G.jsxs("span",{children:["Регистрация: ",(e=>{try{return new Date(e).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}catch(t){return"Неизвестно"}})(i.createdAt)]})]})]})]})]}),D&&!O&&G.jsxs("div",{className:Ks.adminActions,children:[G.jsxs("h2",{children:[G.jsx(_e,{})," Администрирование"]}),N.message&&G.jsxs("div",{className:"".concat(Ks.statusMessage," ").concat(Ks[N.type]),children:["error"===N.type?G.jsx(he,{}):"success"===N.type?G.jsx(xe,{}):G.jsx(K,{}),N.message]}),i.is_banned&&G.jsxs("div",{className:Ks.banInfoBox,children:[G.jsx("h3",{children:"Информация о блокировке"}),G.jsxs("div",{className:Ks.banDetails,children:[G.jsxs("p",{children:[G.jsx("strong",{children:"Статус:"})," ",G.jsx("span",{className:Ks.bannedStatus,children:"Заблокирован"})]}),i.ban_reason&&G.jsxs("p",{children:[G.jsx("strong",{children:"Причина:"})," ",i.ban_reason]}),i.ban_admin_name&&G.jsxs("p",{children:[G.jsx("strong",{children:"Заблокировал:"})," ",i.ban_admin_name]}),i.ban_end_at&&G.jsxs("p",{children:[G.jsx("strong",{children:"Окончание через:"}),G.jsxs("span",{className:Ks.banDuration,children:[G.jsx(te,{})," ",(e=>{if(!e)return"Навсегда";const t=new Date(e),a=new Date;if(t<a)return"Истек (требуется ручная разблокировка)";const s=t-a,n=Math.floor(s/1e3),r=Math.floor(n/60),i=Math.floor(r/60),o=Math.floor(i/24);return o>0?"".concat(o," ").concat(1===o?"день":o<5?"дня":"дней"):i>0?"".concat(i," ").concat(1===i?"час":i<5?"часа":"часов"):r>0?"".concat(r," ").concat(1===r?"минута":r<5?"минуты":"минут"):"Менее минуты"})(i.ban_end_at)]})]})]}),G.jsxs("button",{className:Ks.unbanButton,onClick:async()=>{if(i&&i.is_banned)try{E(!0);const{error:e}=await vs.from("user_bans").update({is_active:!1}).eq("user_id",i.id).eq("is_active",!0);if(e)throw new Error("Ошибка при обновлении блокировки: ".concat(e.message));const{error:t}=await vs.from("profiles").update({is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_id:null,ban_admin_name:null}).eq("id",i.id);if(t)throw new Error("Ошибка при обновлении профиля: ".concat(t.message));o({...i,is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_name:null}),B(null),S({type:"success",message:"Пользователь ".concat(i.displayName," успешно разблокирован")}),setTimeout((()=>{S({type:"",message:""})}),3e3),P(!1)}catch(e){S({type:"error",message:"Ошибка при разблокировке: ".concat(e.message)}),setTimeout((()=>{S({type:"",message:""})}),5e3)}finally{E(!1)}},disabled:A,children:[A?G.jsx(ge,{}):G.jsx(ve,{})," Снять блокировку"]})]}),k?G.jsx(on,{user:i,onSave:async e=>{o(e),S({type:"success",message:"Профиль пользователя успешно обновлен"}),w(!1),setTimeout((()=>{S({type:"",message:""})}),3e3)},onCancel:()=>w(!1)}):G.jsxs("div",{className:Ks.actionButtons,children:[G.jsxs("button",{className:Ks.editButton,onClick:()=>w(!0),children:[G.jsx(ue,{})," Редактировать профиль"]}),!i.is_banned&&"igoraor79@gmail.com"!==i.email&&G.jsxs("button",{className:Ks.banButton,onClick:()=>P(!0),disabled:A,children:[G.jsx(fe,{})," Заблокировать"]})]})]}),O&&G.jsxs("div",{className:Ks.personalSettings,children:[G.jsx("h2",{children:"Личные настройки"}),y&&G.jsxs("div",{className:Ks.successMessage,children:[G.jsx(ve,{size:16}),G.jsx("span",{children:y})]}),G.jsxs("div",{className:Ks.settingGroup,children:[G.jsx("label",{htmlFor:"displayName",children:"Имя пользователя:"}),G.jsxs("div",{className:Ks.settingControl,children:[G.jsx("input",{type:"text",id:"displayName",value:i.displayName||"Пользователь",readOnly:!0}),G.jsx("button",{className:Ks.editButton,onClick:()=>{g(!0)},children:"Изменить"})]})]}),G.jsxs("div",{className:Ks.settingGroup,children:[G.jsx("label",{htmlFor:"password",children:"Пароль:"}),G.jsxs("div",{className:Ks.settingControl,children:[G.jsx("input",{type:"password",id:"password",value:"••••••",readOnly:!0}),G.jsx("button",{className:Ks.editButton,onClick:()=>{f(!0)},children:"Изменить"})]})]})]}),u&&G.jsx(rn,{avatars:en,adminAvatars:tn,isAdmin:D||"admin"===(null==i?void 0:i.activePerk),onSelectAvatar:async e=>{try{const t=en.find((t=>t.id===e))||tn.find((t=>t.id===e));if(t&&i){if((t.name===dt||t.name===mt)&&!D&&"admin"!==i.activePerk)throw new Error("У вас нет прав для использования этого аватара");await Ss.updateAvatar(t.name),o({...i,avatar:t.name})}p(!1)}catch(t){}},onClose:()=>{p(!1)}}),_&&G.jsx(an,{perks:i.perks||["user"],activePerk:i.activePerk||"user",onSelectPerk:async e=>{try{if(!O&&!D)return;await Ss.updateActivePerk(e,r),o({...i,activePerk:e}),h(!1)}catch(t){}},onClose:()=>{h(!1)}}),x&&G.jsx(sn,{onClose:()=>g(!1),onSubmit:async(e,t)=>{try{await Ss.updateDisplayName(e,t,r),o({...i,displayName:e}),b("Имя пользователя успешно изменено"),setTimeout((()=>{b("")}),3e3)}catch(a){throw a}},initialName:null==i?void 0:i.displayName}),v&&G.jsx(nn,{onClose:()=>f(!1),onSubmit:async(e,t)=>{try{await Ss.changePassword(e,t),b("Пароль успешно изменен"),setTimeout((()=>{b("")}),3e3)}catch(a){throw a}}}),C&&G.jsx(ln,{onClose:()=>P(!1),onBanUser:async(e,t)=>{if(i)try{E(!0);let s=null;if("permanent"!==t)switch(s=new Date,t){case"30m":s.setMinutes(s.getMinutes()+30);break;case"2h":s.setHours(s.getHours()+2);break;case"6h":s.setHours(s.getHours()+6);break;case"12h":s.setHours(s.getHours()+12);break;case"1d":s.setDate(s.getDate()+1);break;case"3d":s.setDate(s.getDate()+3);break;case"1w":s.setDate(s.getDate()+7);break;default:s=null}const n={user_id:i.id,admin_id:a.id,admin_name:a.displayName,reason:e.trim(),created_at:(new Date).toISOString(),end_at:s?s.toISOString():null,is_active:!0,ban_type:t},{error:r}=await vs.from("user_bans").insert(n);if(r)throw new Error("Ошибка при создании блокировки: ".concat(r.message));const{error:l}=await vs.from("profiles").update({is_banned:!0,ban_reason:e.trim(),ban_end_at:s?s.toISOString():null,ban_admin_id:a.id,ban_admin_name:a.displayName}).eq("id",i.id);if(l)throw new Error("Ошибка при обновлении профиля: ".concat(l.message));o({...i,is_banned:!0,ban_reason:e.trim(),ban_end_at:s?s.toISOString():null,ban_admin_name:a.displayName}),T(i.id),S({type:"success",message:"Пользователь ".concat(i.displayName," успешно заблокирован")}),setTimeout((()=>{S({type:"",message:""})}),3e3),P(!1)}catch(s){S({type:"error",message:"Ошибка при блокировке: ".concat(s.message)}),setTimeout((()=>{S({type:"",message:""})}),5e3)}finally{E(!1)}},loading:A,username:i.displayName})]})},dn={async getPosts(e=1,t=10){try{let n=!1;try{const{data:e,error:t}=await vs.from("posts").select("styling").limit(1);n=!t}catch(a){}const r=(e-1)*t,{data:i,error:o,count:l}=await vs.from("posts").select("*",{count:"exact"}).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1}).range(r,r+t-1);if(o)throw o;const c=[];for(const e of i)try{const t=await ks.getUserProfile(e.user_id),{data:a,error:s}=await vs.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),r=(null==a?void 0:a.perks)||[],i=(null==a?void 0:a.active_perk)||r[0]||"user",{count:o}=await vs.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e.id),{count:l}=await vs.from("post_comments").select("*",{count:"exact",head:!0}).eq("post_id",e.id);let d=null;e.poll_data&&(d=e.poll_data),c.push({id:e.id,title:e.title||null,content:e.content,image_url:e.image_url,created_at:e.created_at,user_id:e.user_id,author:{displayName:t.displayName,avatar:t.avatar,perks:r,activePerk:i,id:e.user_id},styling:n&&e.styling||null,likes_count:o||0,comments_count:l||0,poll_data:d,is_pinned:e.is_pinned||!1})}catch(s){c.push({id:e.id,title:e.title||null,content:e.content,image_url:e.image_url,created_at:e.created_at,user_id:e.user_id,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id},styling:null,likes_count:0,comments_count:0,poll_data:null,is_pinned:e.is_pinned||!1})}return{posts:c,totalCount:l||0,hasMore:r+i.length<(l||0),nextPage:r+i.length<(l||0)?e+1:null}}catch(s){throw s}},async createPost(e){try{const{title:t,content:a,imageUrl:s,userId:n,poll:r,styling:i,isPinned:o}=e,{data:l,error:c}=await vs.from("profiles").select("perks, active_perk, email").eq("id",n).single();if(c)throw new Error("Не удалось проверить права пользователя");const d=(null==l?void 0:l.perks)||[],m=(null==l?void 0:l.active_perk)||"",u=(null==l?void 0:l.email)||"";if(!("igoraor79@gmail.com"===u||d.includes("admin")||"admin"===m))throw new Error("У вас недостаточно прав для создания постов");const p={title:t||null,content:a,image_url:s||null,user_id:n,created_at:(new Date).toISOString(),poll_data:r||null,styling:i||null,is_pinned:o||!1},{data:_,error:h}=await vs.from("posts").insert([p]).select();if(h)throw new Error(h.message);if(!_||0===_.length)throw new Error("Не удалось создать пост");const x=await ks.getUserProfile(n);return{..._[0],title:_[0].title||null,author:{id:n,displayName:x.displayName,avatar:x.avatar,activePerk:x.activePerk||"user",id:n},likes_count:0,comments_count:0,poll_data:_[0].poll_data,is_pinned:_[0].is_pinned||!1}}catch(t){throw t}},async getPostById(e){try{let s=!1;try{const{data:e,error:t}=await vs.from("posts").select("styling").limit(1);s=!t}catch(t){}const{data:n,error:r}=await vs.from("posts").select("*").eq("id",e).single();if(r)throw r;const i=await ks.getUserProfile(n.user_id),{data:o,error:l}=await vs.from("profiles").select("perks, active_perk").eq("id",n.user_id).single(),c=(null==o?void 0:o.perks)||[],d=(null==o?void 0:o.active_perk)||c[0]||"user",{count:m}=await vs.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",n.id),{data:u}=await vs.from("post_comments").select("*").eq("post_id",n.id).is("parent_id",null).order("created_at",{ascending:!0}),p=[];for(const e of u)try{const t=await ks.getUserProfile(e.user_id),{data:s}=await vs.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),r=(null==s?void 0:s.perks)||[],i=(null==s?void 0:s.active_perk)||r[0]||"user",{data:o}=await vs.from("post_comments").select("*").eq("post_id",n.id).eq("parent_id",e.id).order("created_at",{ascending:!0}),l=[];for(const e of o||[])try{const t=await ks.getUserProfile(e.user_id),{data:a}=await vs.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),s=(null==a?void 0:a.perks)||[],n=(null==a?void 0:a.active_perk)||s[0]||"user";l.push({...e,author:{displayName:t.displayName,avatar:t.avatar,perks:s,activePerk:n,id:e.user_id}})}catch(a){l.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id}})}p.push({...e,author:{displayName:t.displayName,avatar:t.avatar,perks:r,activePerk:i,id:e.user_id},replies:l})}catch(a){p.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id},replies:[]})}return{id:n.id,content:n.content,image_url:n.image_url,created_at:n.created_at,user_id:n.user_id,author:{displayName:i.displayName,avatar:i.avatar,perks:c,activePerk:d,id:n.user_id},styling:s&&n.styling||null,likes_count:m||0,comments:p,poll:n.poll_data}}catch(s){throw s}},async toggleLike(e,t){try{const{data:a,error:s}=await vs.from("post_likes").select("*").eq("post_id",e).eq("user_id",t);if(s)throw s;if(a&&a.length>0){const{error:a}=await vs.from("post_likes").delete().eq("post_id",e).eq("user_id",t);if(a)throw a;const{count:s}=await vs.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e);return{liked:!1,likesCount:s||0}}{const{error:a}=await vs.from("post_likes").insert({post_id:e,user_id:t});if(a)throw a;const{count:s}=await vs.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e);return{liked:!0,likesCount:s||0}}}catch(a){throw a}},async isLikedByUser(e,t){try{const{data:a,error:s}=await vs.from("post_likes").select("*").eq("post_id",e).eq("user_id",t);if(s)throw s;return{liked:a&&a.length>0}}catch(a){throw a}},async getLikesCount(e){try{const{count:t,error:a}=await vs.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e);if(a)throw a;return t||0}catch(t){throw t}},async deletePost(e){var t;try{const{data:a}=await vs.auth.getSession(),s=null==(t=null==a?void 0:a.session)?void 0:t.user;if(!s)throw new Error("Пользователь не авторизован");const{data:n,error:r}=await vs.from("profiles").select("perks, active_perk, email").eq("id",s.id).single();if(r)throw new Error("Не удалось проверить права пользователя");const i=(null==n?void 0:n.perks)||[],o=(null==n?void 0:n.active_perk)||"",l=(null==n?void 0:n.email)||"";if(!("igoraor79@gmail.com"===l||i.includes("admin")||"admin"===o))throw new Error("Только администраторы могут удалять посты");const{error:c}=await vs.from("post_comments").delete().eq("post_id",e),{error:d}=await vs.from("post_likes").delete().eq("post_id",e),{error:m}=await vs.from("poll_votes").delete().eq("post_id",e),{error:u}=await vs.from("posts").delete().eq("id",e);if(u)throw u;return{success:!0}}catch(a){throw a}},async getPollVoteStatus(e,t){try{const{data:s,error:n}=await vs.from("posts").select("poll_data").eq("id",e).single();if(n)throw n;if(!s.poll_data)throw new Error("У этого поста нет опроса");try{const{data:a,error:s}=await vs.from("poll_votes").select("option_index").eq("post_id",e).eq("user_id",t).throwOnError().maybeSingle(),n=await this.getPollResults(e);return{hasVoted:!!a,option:a?a.option_index:null,results:n.results}}catch(a){return{hasVoted:!1,option:null,results:(await this.getPollResults(e)).results}}}catch(s){throw s}},async votePoll(e,t){var a,s;if(!e||"string"!=typeof e)return{success:!1,message:"Некорректный ID поста"};if("number"!=typeof t||t<0)return{success:!1,message:"Некорректный индекс опции"};try{const{data:i,error:o}=await vs.auth.getSession();if(o)return{success:!1,message:"Ошибка сессии пользователя"};const l=null==(a=null==i?void 0:i.session)?void 0:a.user;if(!l)return{success:!1,message:"Пользователь не авторизован"};const c=l.id,{data:d,error:m}=await vs.from("posts").select("poll_data").eq("id",e).single();if(m)return{success:!1,message:"Не удалось получить данные поста"};if(!d.poll_data)return{success:!1,message:"В этом посте нет опроса"};if(!d.poll_data.options||!Array.isArray(d.poll_data.options))return{success:!1,message:"Некорректные данные опроса"};if(t>=d.poll_data.options.length)return{success:!1,message:"Указанный вариант не существует в опросе"};let u=null,p=!0;try{const{data:t,error:a}=await vs.from("poll_votes").select("id, option_index").eq("post_id",e).eq("user_id",c).maybeSingle();!a&&t&&(u=t,p=!1)}catch(n){}if(u){return{...await this._getPollResults(e,d.poll_data.options,u.option_index),message:"Вы уже проголосовали в этом опросе"}}if(p)try{const{error:a}=await vs.from("poll_votes").insert({post_id:e,user_id:c,option_index:t,created_at:(new Date).toISOString()});if(a){if("42P01"===a.code||(null==(s=a.message)?void 0:s.includes("does not exist"))){const e=d.poll_data.options.map(((e,a)=>({option:e,votes:a===t?1:0})));return{success:!0,votedOption:t,results:e,message:"Ваш голос учтен"}}return{success:!1,message:"Ошибка при голосовании: ".concat(a.message)}}}catch(r){const e=d.poll_data.options.map(((e,a)=>({option:e,votes:a===t?1:0})));return{success:!0,votedOption:t,results:e,message:"Ваш голос учтен"}}return{...await this._getPollResults(e,d.poll_data.options,t),message:"Ваш голос учтен"}}catch(n){return{success:!1,message:n.message||"Произошла ошибка при голосовании",error:n.toString()}}},async _getPollResults(e,t,a){try{let n=[];try{const{data:t,error:a}=await vs.from("poll_votes").select("option_index").eq("post_id",e);a||(n=t||[])}catch(s){}const r=Array(t.length).fill(0);for(const e of n)e&&"number"==typeof e.option_index&&e.option_index>=0&&e.option_index<t.length&&r[e.option_index]++;const i=t.map(((e,t)=>({option:e,votes:r[t]||0}))),o=i.reduce(((e,t)=>e+t.votes),0);return o>0&&i.forEach((e=>{Math.round(e.votes/o*100)})),{success:!0,votedOption:a,results:i}}catch(s){return{success:!0,votedOption:a,results:t.map((e=>({option:e,votes:0})))}}},async _ensurePollVotesTable(){try{const{data:e,error:t}=await vs.from("poll_votes").select("id").limit(1);if(!t)return!0;if(t&&"42P01"===t.code){await vs.rpc("create_poll_votes_table");const{error:e}=await vs.from("poll_votes").select("id").limit(1);return e&&e.code,!0}return!0}catch(e){return!0}},async getPollResults(e){try{const{data:a,error:s}=await vs.from("posts").select("poll_data").eq("id",e).single();if(s)throw new Error("Ошибка при получении поста");if(!a.poll_data)throw new Error("У этого поста нет опроса");try{const{data:t,error:s}=await vs.from("poll_votes").select("option_index, id").eq("post_id",e);if(s)throw s;const n=a.poll_data.options.map(((e,a)=>({option:e,votes:t.filter((e=>e.option_index===a)).length})));return{question:a.poll_data.question,results:n}}catch(t){const e=a.poll_data.options.map((e=>({option:e,votes:0})));return{question:a.poll_data.question,results:e}}}catch(a){throw a}},async pinPost(e){var t;try{const{data:a}=await vs.auth.getSession(),s=null==(t=null==a?void 0:a.session)?void 0:t.user;if(!s)throw new Error("Пользователь не авторизован");const{data:n,error:r}=await vs.from("profiles").select("perks, active_perk, email").eq("id",s.id).single();if(r)throw new Error("Не удалось проверить права пользователя");const i=(null==n?void 0:n.perks)||[],o=(null==n?void 0:n.active_perk)||"",l=(null==n?void 0:n.email)||"";if(!("igoraor79@gmail.com"===l||i.includes("admin")||"admin"===o))throw new Error("Только администраторы могут закреплять посты");const{data:c,error:d}=await vs.from("posts").select("id").eq("is_pinned",!0).limit(1),m=c&&c.length>0?c[0].id:null;if(!e||"string"!=typeof e||!e.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))throw new Error("Некорректный ID поста: ".concat(e));const{data:u,error:p}=await vs.rpc("pin_post",{post_id_to_pin:e});if(p){const{error:t}=await vs.from("posts").update({is_pinned:!1}).eq("is_pinned",!0);if(t)throw t;const{data:a,error:s}=await vs.from("posts").update({is_pinned:!0}).eq("id",e).select("*");if(s)throw s;return{success:!0,post:(null==a?void 0:a[0])||null,previouslyPinnedId:m}}return{success:!0,post:u,previouslyPinnedId:m}}catch(a){throw a}},async unpinPost(e){var t;try{const{data:a}=await vs.auth.getSession(),s=null==(t=null==a?void 0:a.session)?void 0:t.user;if(!s)throw new Error("Пользователь не авторизован");const{data:n,error:r}=await vs.from("profiles").select("perks, active_perk, email").eq("id",s.id).single();if(r)throw new Error("Не удалось проверить права пользователя");const i=(null==n?void 0:n.perks)||[],o=(null==n?void 0:n.active_perk)||"",l=(null==n?void 0:n.email)||"";if(!("igoraor79@gmail.com"===l||i.includes("admin")||"admin"===o))throw new Error("Только администраторы могут открепить посты");const{data:c,error:d}=await vs.from("posts").update({is_pinned:!1}).eq("id",e).select();if(d)throw d;return{success:!0,post:null==c?void 0:c[0]}}catch(a){throw a}},async updatePost(e,t){var a;try{const{data:n}=await vs.auth.getSession(),r=null==(a=null==n?void 0:n.session)?void 0:a.user;if(!r)throw new Error("Пользователь не авторизован");const{data:i,error:o}=await vs.from("profiles").select("perks, active_perk, email").eq("id",r.id).single();if(o)throw new Error("Не удалось проверить права пользователя");const l=(null==i?void 0:i.perks)||[],c=(null==i?void 0:i.active_perk)||"",d=(null==i?void 0:i.email)||"";if(!("igoraor79@gmail.com"===d||l.includes("admin")||"admin"===c))throw new Error("Только администраторы могут редактировать посты");const m={updated_at:(new Date).toISOString()};void 0!==t.title&&(m.title=t.title||null),void 0!==t.content&&(m.content=t.content),void 0===t.imageUrl&&void 0===t.image_url||(m.image_url=t.imageUrl||t.image_url||null),void 0!==t.styling&&(m.styling=t.styling),void 0!==t.poll&&(m.poll_data=t.poll);const{data:u,error:p}=await vs.from("posts").update(m).eq("id",e).select("*");if(p)throw new Error("Не удалось обновить пост: ".concat(p.message));if(!u||0===u.length)throw new Error("Не удалось найти пост для обновления");try{const e=await ks.getUserProfile(u[0].user_id);return{success:!0,post:{...u[0],author:{id:u[0].user_id,displayName:e.displayName,avatar:e.avatar,activePerk:e.activePerk||"user",id:u[0].user_id}}}}catch(s){return{success:!0,post:u[0]}}}catch(n){throw n}}},mn={"хуй":{weight:.9,variations:["xуй","хyй","х*й","х.й","х-й"]},"пизда":{weight:.9,variations:["пи3да","пизд@","писда","п*зда","п1зда"]},"блядь":{weight:.9,variations:["бл*дь","блять","blyad","бл**ь","бля"]},"ебать":{weight:.9,variations:["еб*ть","e6ать","ебaть","eбaть","еб@ть"]},"залупа":{weight:.8,variations:["zалупа","залуп@","залупо"]},"пидор":{weight:.8,variations:["п*дор","пидр","p!dor","пидoр"]},"мудак":{weight:.7,variations:["муд@к","мудaк","мудaчина"]},"хер":{weight:.6,variations:["х*р","xер","хеr"]},"шлюха":{weight:.7,variations:["шл*ха","шлюho","шлюх@"]},"дерьмо":{weight:.5,variations:["д*рьмо","dерьмо","дерьмо"]},"гондон":{weight:.6,variations:["г*ндон","гaндон","гoндон"]},"сука":{weight:.6,variations:["с*ка","сykа","сукa","cyka"]},"жопа":{weight:.4,variations:["ж*па","жoпa","jопа"]},"дурак":{weight:.3,variations:["д*рак","дуpак","дyрак"]},"придурок":{weight:.3,variations:["пр*дурок","придyрок"]},"тупой":{weight:.2,variations:["т*пой","тyпой"]}},un=["научный","образовательный","медицинский","исторический"],pn=["употребление","херсон","скипидар","хердер","захер","гексахлороциклогексан"],_n=[{pattern:/\.|\*|_|-|#|@|1|3|0|7|4/g,replacement:""},{pattern:/\s+(?=[а-яёa-z])/g,replacement:""},{pattern:/(\w)\1+/g,replacement:"$1"}];function hn(e){if(!e)return"";let t=e.toLowerCase();return _n.forEach((({pattern:e,replacement:a})=>{t=t.replace(e,a)})),t}function xn(e){const t=[e],a=e.replace(/a/g,"а").replace(/e/g,"е").replace(/o/g,"о").replace(/p/g,"р").replace(/x/g,"х").replace(/c/g,"с").replace(/y/g,"у");a!==e&&t.push(a);const s=e.replace(/а/g,"a").replace(/е/g,"e").replace(/о/g,"o").replace(/р/g,"p").replace(/х/g,"x").replace(/с/g,"c").replace(/у/g,"y");return s!==e&&t.push(s),t}function gn(e,t={}){const{threshold:a=.6,safeContext:s=!1}=t;if(!e)return{hasProfanity:!1,score:0,matches:[]};let n=0,r=0;const i=[],o=e.split(/\s+/);let l=a;(s||un.some((t=>e.includes(t))))&&(l=.85);for(const m of o){const e=xn(hn(m));for(const t of e)if(!pn.some((e=>t.includes(e)))){for(const[e,a]of Object.entries(mn))if(t===e||a.variations.includes(t)){n=Math.max(n,a.weight),r++,i.push({word:m,matchedTo:e,score:a.weight});break}if(0===i.length)for(const[e,a]of Object.entries(mn)){const s=.8*a.weight;if(t.length>3&&(t.includes(e)||a.variations.some((e=>t.includes(e))))){n=Math.max(n,s),r++,i.push({word:m,matchedTo:e,score:s});break}}}}const c=n>=l,d=r>0?Math.min(.95,n+.05*Math.min(r,5)):0;return{hasProfanity:c,score:d,matches:i,confidence:c?d>.8?"high":"medium":"low"}}function vn(e,t){if(!e)return"";if("string"!=typeof e)return"";if(function(e){return!!e&&("igoraor79@gmail.com"===e.email||"admin"===e.role||"admin"===e.activePerk||Array.isArray(e.perks)&&e.perks.includes("admin"))}(t))return e;try{return gn(e).hasProfanity?function(e,t={}){if(!e)return"";const{replacementChar:a="*",threshold:s=.6}=t,n=e.split(/(\s+)/),r=[];for(const i of n)/\s+/.test(i)?r.push(i):gn(i,{threshold:s}).hasProfanity?r.push(a.repeat(Math.max(2,i.length))):r.push(i);return r.join("")}(e):e}catch(a){return e}}const fn={async getCommentsByPostId(e){try{const{data:a,error:s}=await vs.from("post_comments").select("*").eq("post_id",e).is("parent_id",null).order("created_at",{ascending:!1});if(s)throw s;if(!a||0===a.length)return[];const n=[];for(const e of a)try{const a=await ks.getUserProfile(e.user_id),{data:s}=await vs.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),r=(null==s?void 0:s.perks)||[],i=(null==s?void 0:s.active_perk)||r[0]||"user",{data:o,error:l}=await vs.from("post_comments").select("*").eq("parent_id",e.id).order("created_at",{ascending:!0});if(l)throw l;const c=[];for(const e of o||[])try{const t=await ks.getUserProfile(e.user_id),{data:a}=await vs.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),s=(null==a?void 0:a.perks)||[],n=(null==a?void 0:a.active_perk)||s[0]||"user";c.push({...e,author:{displayName:t.displayName,avatar:t.avatar,perks:s,activePerk:n,id:e.user_id}})}catch(t){c.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id}})}n.push({...e,author:{displayName:a.displayName,avatar:a.avatar,perks:r,activePerk:i,id:e.user_id},replies:c})}catch(t){n.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id},replies:[]})}return n}catch(a){return[]}},async createComment(e){try{const t=await ks.getUserProfile(e.userId),a=vn(e.content,{id:e.userId,...t}),{data:s,error:n}=await vs.from("post_comments").insert({content:a,post_id:e.postId,user_id:e.userId,parent_id:null}).select();if(n)throw n;const{data:r}=await vs.from("profiles").select("perks, active_perk").eq("id",e.userId).single(),i=(null==r?void 0:r.perks)||[],o=(null==r?void 0:r.active_perk)||i[0]||"user";return{...s[0],author:{displayName:t.displayName,avatar:t.avatar,perks:i,activePerk:o,id:e.userId},replies:[]}}catch(t){throw t}},async replyToComment(e){try{const t=await ks.getUserProfile(e.userId),a=vn(e.content,{id:e.userId,...t}),{data:s,error:n}=await vs.from("post_comments").insert({content:a,post_id:e.postId,user_id:e.userId,parent_id:e.commentId}).select();if(n)throw n;const{data:r}=await vs.from("profiles").select("perks, active_perk").eq("id",e.userId).single(),i=(null==r?void 0:r.perks)||[],o=(null==r?void 0:r.active_perk)||i[0]||"user";return{...s[0],author:{displayName:t.displayName,avatar:t.avatar,perks:i,activePerk:o,id:e.userId}}}catch(t){throw t}},async getCommentsCount(e){try{const{count:t,error:a}=await vs.from("post_comments").select("*",{count:"exact",head:!0}).eq("post_id",e);if(a)throw a;return t||0}catch(t){throw t}},async deleteComment(e,t){try{if(t)try{const{data:a,error:s}=await vs.from("post_comments").select("user_id").eq("id",e).maybeSingle();if(s);else if(a){const e=a.user_id===t,{data:s,error:n}=await vs.from("profiles").select("perks, active_perk, email").eq("id",t).maybeSingle(),r=!n&&s&&("igoraor79@gmail.com"===s.email||s.perks&&s.perks.includes("admin")||"admin"===s.active_perk);if(!e&&!r)throw new Error("У вас нет прав для удаления этого комментария")}}catch(a){if("У вас нет прав для удаления этого комментария"===a.message)throw a}try{await vs.from("post_comments").delete().eq("parent_id",e)}catch(s){}try{return await vs.from("post_comments").delete().eq("id",e),!0}catch(a){throw a}}catch(a){throw a}}},yn={postsContainer:"_postsContainer_17n5r_2",postsHeader:"_postsHeader_17n5r_9",headerButtons:"_headerButtons_17n5r_34",refreshButton:"_refreshButton_17n5r_46",rulesButton:"_rulesButton_17n5r_46",postsList:"_postsList_17n5r_129",loading:"_loading_17n5r_136",spin:"_spin_17n5r_1",errorMessage:"_errorMessage_17n5r_158",noPosts:"_noPosts_17n5r_174",notAuthenticatedMessage:"_notAuthenticatedMessage_17n5r_189",createPostContainer:"_createPostContainer_17n5r_206",createPostTitle:"_createPostTitle_17n5r_215",createPostForm:"_createPostForm_17n5r_228",contentInput:"_contentInput_17n5r_234",imageUrlInput:"_imageUrlInput_17n5r_254",pollContainer:"_pollContainer_17n5r_271",pollQuestionInput:"_pollQuestionInput_17n5r_302",pollOptions:"_pollOptions_17n5r_328",pollOptionInputWrapper:"_pollOptionInputWrapper_17n5r_334",pollOptionInput:"_pollOptionInput_17n5r_334",removeOptionButton:"_removeOptionButton_17n5r_366",addOptionButton:"_addOptionButton_17n5r_394",formOptions:"_formOptions_17n5r_422",formToggles:"_formToggles_17n5r_429",optionToggle:"_optionToggle_17n5r_435",submitButton:"_submitButton_17n5r_463",postItem:"_postItem_17n5r_488",pinnedPost:"_pinnedPost_17n5r_509",postHeader:"_postHeader_17n5r_540",authorInfo:"_authorInfo_17n5r_547",authorName:"_authorName_17n5r_556",avatar:"_avatar_17n5r_560",postDate:"_postDate_17n5r_571",postContent:"_postContent_17n5r_582",darkTextConversion:"_darkTextConversion_17n5r_590",postImage:"_postImage_17n5r_608",postPoll:"_postPoll_17n5r_621",pollTitle:"_pollTitle_17n5r_632",pollOption:"_pollOption_17n5r_328",pollResults:"_pollResults_17n5r_679",pollResultOption:"_pollResultOption_17n5r_682",pollOptionText:"_pollOptionText_17n5r_685",pollOptionVotes:"_pollOptionVotes_17n5r_691",pollProgressBar:"_pollProgressBar_17n5r_694",pollProgress:"_pollProgress_17n5r_694",pollVotersCount:"_pollVotersCount_17n5r_707",postActions:"_postActions_17n5r_714",actionButtons:"_actionButtons_17n5r_723",likeButton:"_likeButton_17n5r_749",liked:"_liked_17n5r_755",likeCount:"_likeCount_17n5r_766",commentButton:"_commentButton_17n5r_770",deleteButton:"_deleteButton_17n5r_789",commentsSection:"_commentsSection_17n5r_823",commentsHeading:"_commentsHeading_17n5r_829",loadingComments:"_loadingComments_17n5r_839",noComments:"_noComments_17n5r_851",commentForm:"_commentForm_17n5r_860",commentItem:"_commentItem_17n5r_939",commentReply:"_commentReply_17n5r_947",commentHeader:"_commentHeader_17n5r_957",commentAuthorAvatar:"_commentAuthorAvatar_17n5r_963",commentAuthorInfo:"_commentAuthorInfo_17n5r_976",commentAuthor:"_commentAuthor_17n5r_963",commentContent:"_commentContent_17n5r_990",commentDate:"_commentDate_17n5r_999",commentActions:"_commentActions_17n5r_1011",replyButton:"_replyButton_17n5r_1019",deleteCommentButton:"_deleteCommentButton_17n5r_1020",repliesContainer:"_repliesContainer_17n5r_1058",replyForm:"_replyForm_17n5r_1062",replyFormActions:"_replyFormActions_17n5r_1086",cancelReplyButton:"_cancelReplyButton_17n5r_1108",submitReplyButton:"_submitReplyButton_17n5r_1116",postTitle:"_postTitle_17n5r_1169",stylingOptions:"_stylingOptions_17n5r_1189",stylingTitle:"_stylingTitle_17n5r_1215",stylingGroup:"_stylingGroup_17n5r_1228",colorSelector:"_colorSelector_17n5r_1239",colorOption:"_colorOption_17n5r_1246",active:"_active_17n5r_1257",fontSelector:"_fontSelector_17n5r_1262",colorPickerContainer:"_colorPickerContainer_17n5r_1327",colorPreview:"_colorPreview_17n5r_1332",dropletIcon:"_dropletIcon_17n5r_1354",colorPickerPopup:"_colorPickerPopup_17n5r_1360","react-colorful":"_react-colorful_17n5r_1366",colorPickerCover:"_colorPickerCover_17n5r_1374",colorNote:"_colorNote_17n5r_1383",likeAnimation:"_likeAnimation_17n5r_1397",likePulse:"_likePulse_17n5r_1",authPrompt:"_authPrompt_17n5r_1412",loginButton:"_loginButton_17n5r_1424",titleInput:"_titleInput_17n5r_1438",editButton:"_editButton_17n5r_1478",adminActions:"_adminActions_17n5r_1508",imageLoading:"_imageLoading_17n5r_1530",pulse:"_pulse_17n5r_1",imageError:"_imageError_17n5r_1546",editPostForm:"_editPostForm_17n5r_1573",cancelEditButton:"_cancelEditButton_17n5r_1593",imagePreview:"_imagePreview_17n5r_1633",imageNote:"_imageNote_17n5r_1646",loadMoreContainer:"_loadMoreContainer_17n5r_1676",loadMoreSpinner:"_loadMoreSpinner_17n5r_1686",noMorePosts:"_noMorePosts_17n5r_1709"},bn=be(V.div)(e||(e=U(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(135deg, rgba(33, 33, 38, 0.85) 0%, rgba(68, 68, 77, 0.85) 100%);\n  backdrop-filter: blur(8px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  perspective: 1000px;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n  transform: translateZ(0);\n  isolation: isolate;\n  padding: 20px;\n"]))),jn=be(V.div)(t||(t=U(["\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  padding: 24px;\n  width: 100%;\n  max-width: 380px;\n  box-shadow: var(--modal-shadow, 0 8px 30px rgba(0, 0, 0, 0.2));\n  position: relative;\n  border: 1px solid var(--modal-border, var(--border));\n  backdrop-filter: blur(10px);\n  transform-style: preserve-3d;\n  margin: auto;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n"]))),kn=be.div(a||(a=U(["\n  color: var(--text-secondary);\n  margin-bottom: 24px;\n  overflow-y: auto;\n  max-height: calc(90vh - 150px);\n"]))),wn=be.div(s||(s=U(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 16px;\n"]))),Nn=be.h3(n||(n=U(["\n  color: var(--text-primary);\n  font-size: 18px;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  \n  svg {\n    color: var(--error);\n  }\n"]))),Sn=be.button(r||(r=U(["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  background: none;\n  border: none;\n  color: var(--text-secondary);\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:hover {\n    background: var(--bg-highlight);\n  }\n"]))),Cn=be.div(i||(i=U(["\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n"]))),Pn=be.button(o||(o=U(["\n  background: var(--bg-highlight);\n  color: var(--text-primary);\n  border: 1px solid var(--border);\n  padding: 10px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  \n  &:hover {\n    background: var(--background-color);\n  }\n"]))),An=be.button(l||(l=U(["\n  background: var(--error);\n  color: white;\n  border: none;\n  padding: 10px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  \n  &:hover {\n    opacity: 0.9;\n  }\n"]))),En={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.3}}},In={hidden:{opacity:0,scale:.95,y:-20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:300}},exit:{opacity:0,scale:.95,y:-20,transition:{duration:.3}}},Bn=({isOpen:e,onClose:t,onConfirm:a,title:s="Подтверждение",message:n="Вы уверены?",confirmText:r="Подтвердить",cancelText:i="Отмена",isDanger:o=!0})=>(W.useEffect((()=>{if(e){const e=window.scrollY;return document.documentElement.style.setProperty("--scroll-y","".concat(e,"px")),document.body.classList.add("modal-open"),document.body.style.top="-".concat(e,"px"),document.body.style.position="fixed",document.body.style.width="100%",()=>{document.body.classList.remove("modal-open"),document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,e)}}}),[e]),e?$.createPortal(G.jsx(H,{mode:"wait",children:G.jsx(bn,{variants:En,initial:"hidden",animate:"visible",exit:"exit",onClick:e=>{e.target===e.currentTarget&&t()},children:G.jsxs(jn,{variants:In,initial:"hidden",animate:"visible",exit:"exit",onClick:e=>e.stopPropagation(),children:[G.jsxs(wn,{children:[G.jsxs(Nn,{children:[o&&G.jsx(Q,{size:20}),s]}),G.jsx(Sn,{onClick:t,children:G.jsx(X,{size:18})})]}),G.jsx(kn,{children:n}),G.jsxs(Cn,{children:[G.jsxs(Pn,{onClick:t,children:[G.jsx(X,{size:16}),i]}),G.jsxs(An,{onClick:a,style:{background:o?"var(--error)":"var(--accent)"},children:[G.jsx(ve,{size:16}),r]})]})]})})}),document.getElementById("modal-root")||document.body):null),On=new Map,Dn=e=>{if(!e||"string"!=typeof e)return null;if(On.has(e))return On.get(e);if(e.includes("res.cloudinary.com/do9t8preg/image/fetch"))return On.set(e,e),e;if(e.startsWith("data:image/"))return On.set(e,e),e;try{const t="".concat("https://res.cloudinary.com/do9t8preg/image/fetch/f_auto,q_auto:best,dpr_auto,w_auto,c_limit,w_800/").concat(encodeURIComponent(e));return On.set(e,t),t}catch(t){return e}},Tn=(e,t=!1)=>{const a=new Date(e),s=new Date,n=Math.floor((s-a)/1e3),r=Math.floor(n/60),i=Math.floor(r/60),o=Math.floor(i/24),l=Math.floor(o/7),c=Math.floor(o/30),d=Math.floor(o/365);return n<60?"только что":r<60?t?"".concat(r,"м"):"".concat(r," ").concat(qn(r,["минуту","минуты","минут"])," назад"):i<24?t?"".concat(i,"ч"):"".concat(i," ").concat(qn(i,["час","часа","часов"])," назад"):o<7?t?"".concat(o,"д"):"".concat(o," ").concat(qn(o,["день","дня","дней"])," назад"):l<4?t?"".concat(l,"нед"):"".concat(l," ").concat(qn(l,["неделю","недели","недель"])," назад"):c<12?t?"".concat(c,"мес"):"".concat(c," ").concat(qn(c,["месяц","месяца","месяцев"])," назад"):t?"".concat(d,"г"):"".concat(d," ").concat(qn(d,["год","года","лет"])," назад")},qn=(e,t)=>t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]],Ln=je(c||(c=U(["\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]))),Fn=be.div(d||(d=U(["\n  background: var(--bg-highlight, #f5f8fa);\n  border-radius: 12px;\n  padding: 20px;\n  margin: 15px 0;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  animation: ",' 0.3s ease-out;\n  border: 1px solid var(--border, #e1e8ed);\n  \n  [data-theme="dark"] & {\n    background: rgba(255, 255, 255, 0.05);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    border-color: rgba(255, 255, 255, 0.1);\n  }\n  \n  &::before {\n    display: none;\n  }\n'])),Ln),zn=be.h4(m||(m=U(["\n  color: var(--text-primary);\n  font-size: 18px;\n  font-weight: 600;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  \n  &:before {\n    content: '';\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    background-color: var(--accent, #1da1f2);\n    margin-right: 10px;\n    border-radius: 4px;\n  }\n"]))),Mn=be.div(u||(u=U(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-bottom: 20px;\n"]))),Un=be.div(p||(p=U(["\n  position: relative;\n  cursor: ",";\n  opacity: ",";\n"])),(e=>e.$disabled?"default":"pointer"),(e=>e.$disabled?"0.8":"1")),Rn=be.div(_||(_=U(["\n  padding: 12px 16px;\n  border-radius: 8px;\n  border: 1px solid var(--border, #e1e8ed);\n  background: ",";\n  display: flex;\n  align-items: center;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: ",';\n  }\n  \n  [data-theme="dark"] & {\n    border-color: rgba(255, 255, 255, 0.1);\n    background: ',";\n    color: var(--text-primary);\n    \n    &:hover {\n      background: ",";\n    }\n    \n    ","\n  }\n"])),(e=>e.$isSelected?"rgba(29, 161, 242, 0.1)":"transparent"),(e=>e.$disabled?"transparent":"rgba(29, 161, 242, 0.05)"),(e=>e.$isSelected?"rgba(29, 161, 242, 0.2)":"rgba(255, 255, 255, 0.05)"),(e=>e.$disabled?"rgba(255, 255, 255, 0.05)":"rgba(29, 161, 242, 0.1)"),(e=>e.$isSelected&&"\n      box-shadow: 0 0 5px rgba(29, 161, 242, 0.3);\n      border-color: rgba(29, 161, 242, 0.5);\n    ")),Gn=be.span(h||(h=U(["\n  color: var(--text-primary) !important;\n  font-weight: ",";\n  font-size: 15px;\n  margin-left: ",';\n  flex-grow: 1;\n  \n  // Force color to adapt to theme\n  [data-theme="dark"] & {\n    color: var(--text-primary) !important;\n    ',"\n  }\n"])),(e=>e.$isSelected?"600":"400"),(e=>e.$isVoted?"8px":"0"),(e=>e.$isSelected&&"\n      text-shadow: 0 0 1px rgba(255, 255, 255, 0.2);\n    ")),Hn=be(ve)(x||(x=U(['\n  color: var(--accent, #1da1f2);\n  margin-right: 10px;\n  \n  [data-theme="dark"] & {\n    color: white;\n    filter: drop-shadow(0 0 1px rgba(0, 0, 0, 0.7));\n  }\n']))),Vn=be.span(g||(g=U(['\n  color: var(--accent, #1da1f2);\n  font-weight: 600;\n  font-size: 14px;\n  margin-left: auto;\n  \n  [data-theme="dark"] & {\n    color: white;\n    text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n  }\n']))),Wn=be.div(v||(v=U(['\n  width: 100%;\n  height: 6px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border-radius: 3px;\n  margin-top: 8px;\n  overflow: hidden;\n  \n  [data-theme="dark"] & {\n    background-color: rgba(255, 255, 255, 0.05);\n  }\n']))),Jn=be.div(f||(f=U(["\n  height: 100%;\n  background: linear-gradient(90deg, var(--accent, #1da1f2) 0%, rgba(29, 161, 242, 0.6) 100%);\n  width: ",'%;\n  border-radius: 3px;\n  transition: width 0.5s ease-out;\n  \n  [data-theme="dark"] & {\n    background: linear-gradient(90deg, #1d9cf2 0%, #36c3ff 100%);\n    box-shadow: 0 0 5px rgba(29, 161, 242, 0.5);\n  }\n'])),(e=>e.$width)),$n=be.div(y||(y=U(['\n  text-align: right;\n  color: var(--text-secondary);\n  font-size: 14px;\n  margin-top: 10px;\n  font-style: italic;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 5px;\n  \n  [data-theme="dark"] & {\n    color: rgba(255, 255, 255, 0.6);\n  }\n']))),Yn=be.span(b||(b=U(['\n  font-size: 12px;\n  background-color: #5c6bc0;\n  color: white;\n  padding: 2px 8px;\n  border-radius: 12px;\n  margin-right: 8px;\n  font-weight: 500;\n\n  [data-theme="dark"] & {\n    background-color: #3949ab;\n  }\n']))),Zn=be(V.div)(j||(j=U(["\n  background-color: rgba(255, 152, 0, 0.1);\n  border-left: 4px solid var(--accent, #1da1f2);\n  padding: 12px 16px;\n  margin: 12px 0;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  overflow: hidden;\n  \n  svg {\n    color: var(--accent, #1da1f2);\n    font-size: 20px;\n    flex-shrink: 0;\n  }\n  \n  span {\n    font-size: 14px;\n    color: var(--text-primary);\n  }\n  \n  button {\n    background-color: var(--accent, #1da1f2);\n    color: white;\n    border: none;\n    border-radius: 4px;\n    padding: 6px 12px;\n    font-size: 13px;\n    cursor: pointer;\n    margin-left: auto;\n    transition: all 0.2s;\n    \n    &:hover {\n      background-color: rgba(29, 161, 242, 0.8);\n    }\n  }\n"]))),Qn={initial:{opacity:0,height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},animate:{opacity:1,height:"auto",marginTop:"12px",marginBottom:"12px",paddingTop:"12px",paddingBottom:"12px",transition:{opacity:{duration:.3,ease:"easeInOut"},height:{duration:.4,ease:[.04,.62,.23,.98]},marginTop:{duration:.3,ease:"easeOut"},marginBottom:{duration:.3,ease:"easeOut"},paddingTop:{duration:.3,ease:"easeOut"},paddingBottom:{duration:.3,ease:"easeOut"}}},exit:{opacity:0,height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0,transition:{opacity:{duration:.2,ease:"easeInOut"},height:{duration:.3,delay:.1,ease:[.04,.62,.23,.98]},marginTop:{duration:.2,ease:"easeIn"},marginBottom:{duration:.2,ease:"easeIn"},paddingTop:{duration:.2,ease:"easeIn"},paddingBottom:{duration:.2,ease:"easeIn"}}}},Xn={initial:{opacity:0,height:0,overflow:"hidden"},animate:{opacity:1,height:"auto",transition:{height:{duration:.4,ease:[.04,.62,.23,.98]},opacity:{duration:.3,ease:"easeInOut"}}},exit:{opacity:0,height:0,transition:{height:{duration:.3,ease:[.04,.62,.23,.98]},opacity:{duration:.2,ease:"easeInOut"}}}},Kn=({poll:e,postId:t,onVote:a,hasVoted:s,votedOption:n,results:r,isAdmin:i,user:o})=>{const{isAuthenticated:l}=Bs(),[c,d]=W.useState(!1),[m,u]=W.useState(null),[p,_]=W.useState(!1),h=e.optionsColor||e.styling&&e.styling.optionsColor||null,x=e.styling&&e.styling.fontFamily||"inherit",g=W.useMemo((()=>r&&Array.isArray(r)?r.reduce(((e,t)=>e+(t.votes||0)),0):0),[r]),v=W.useMemo((()=>{if(!r||!Array.isArray(r)||0===g)return e.options.map((()=>0));const t=r.map((e=>e.votes/g*100)),a=t.map((e=>Math.floor(e))),s=100-a.reduce(((e,t)=>e+t),0),n=t.map(((e,t)=>t));n.sort(((e,a)=>t[a]-Math.floor(t[a])-(t[e]-Math.floor(t[e]))));const i=[...a];for(let e=0;e<s;e++)i[n[e%n.length]]++;return i}),[r,g,e.options.length]);W.useEffect((()=>{r&&Array.isArray(r)&&r.forEach(((e,t)=>{}))}),[e,r,g,v]);const f=s||i;return G.jsxs(Fn,{children:[!e.hideQuestion&&G.jsx(zn,{children:e.question}),m&&G.jsx("div",{style:{padding:"10px",margin:"10px 0",backgroundColor:"rgba(255, 0, 0, 0.1)",borderLeft:"3px solid red",color:"var(--text-primary)",fontSize:"14px"},children:m}),G.jsx(Mn,{children:e.options.map(((e,t)=>{let i;r&&Array.isArray(r)?(i=r.find((t=>t.option===e)),!i&&r[t]&&(i=r[t]),i||(i={option:e,votes:0})):i={option:e,votes:0};const o=f&&v[t]||0,m=n===t;return G.jsxs(Un,{onClick:()=>s?null:(async e=>{if(l){if(!s&&!c){d(!0),u(null);try{await a(e)}catch(t){u(t.message||"Ошибка при голосовании. Пожалуйста, попробуйте позже."),setTimeout((()=>u(null)),5e3)}finally{d(!1)}}}else _(!0)})(t),$disabled:s||c,children:[G.jsxs(Rn,{$isSelected:m,$disabled:s||c,children:[c&&t===n&&G.jsx("span",{style:{marginRight:"8px"},children:"⏳"}),m&&G.jsx(Hn,{}),G.jsx(Gn,{$isSelected:m,$isVoted:s,style:{color:h||"inherit",fontFamily:x},children:e}),f&&G.jsxs(Vn,{children:[o,"%"]})]}),f&&G.jsx(Wn,{children:G.jsx(Jn,{$width:o})})]},"option-".concat(t,"-").concat(e))}))}),p&&G.jsxs(Zn,{variants:Qn,initial:"initial",animate:"animate",exit:"exit",children:[G.jsx(K,{}),G.jsx("span",{children:"Войдите, чтобы проголосовать"}),G.jsx("button",{onClick:()=>_(!1),children:"Скрыть"})]}),G.jsxs($n,{children:[i&&!s&&G.jsx(Yn,{children:"Просмотр администратора"}),G.jsx(Ae,{}),g," ",qn(g,["голос","голоса","голосов"])]})]})},er="\n  .".concat(yn.commentActions," {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n    margin-top: 8px;\n  }\n  \n  .").concat(yn.replyButton,",\n  .").concat(yn.deleteCommentButton," {\n    display: flex;\n    align-items: center;\n    gap: 5px;\n    font-size: 13px;\n    background: transparent;\n    border: none;\n    color: var(--text-secondary);\n    cursor: pointer;\n    padding: 4px 8px;\n    border-radius: 4px;\n    transition: all 0.2s;\n  }\n  \n  .").concat(yn.replyButton,":hover,\n  .").concat(yn.deleteCommentButton,":hover {\n    background-color: rgba(0, 0, 0, 0.05);\n  }\n  \n  .").concat(yn.deleteCommentButton," {\n    color: #e74c3c;\n  }\n  \n  .").concat(yn.commentItem," {\n    position: relative;\n    overflow: hidden;\n  }\n  \n  @media (max-width: 576px) {\n    .").concat(yn.commentActions," {\n      width: 100%;\n    }\n    \n    .").concat(yn.replyButton,",\n    .").concat(yn.deleteCommentButton," {\n      font-size: 12px;\n      padding: 3px 6px;\n    }\n  }\n"),tr=be.div(k||(k=U(["\n  position: relative;\n  display: inline-block;\n"]))),ar=be.button(w||(w=U(["\n  background: none;\n  border: none;\n  color: var(--text-secondary);\n  padding: 6px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: var(--bg-hover);\n  }\n  \n  svg {\n    font-size: 18px;\n  }\n"])));function sr({comment:e,onReply:t,onDelete:a}){var s;const[n,r]=W.useState(!1),[i,o]=W.useState(""),[l,c]=W.useState(!1),{user:d,isAuthenticated:m}=Bs(),[u,p]=W.useState(!1),[_,h]=W.useState(!1),[x,g]=W.useState({}),[v,f]=W.useState(!1),[y,b]=W.useState(!1),[j,k]=W.useState(null),[w,N]=W.useState(null),[S,C]=W.useState(!1),P=W.useRef(null),A=m&&d&&("igoraor79@gmail.com"===d.email||(null==(s=d.perks)?void 0:s.includes("admin"))||"admin"===d.activePerk),E=d&&d.id===e.user_id,I=A||E;W.useEffect((()=>{const e=e=>{P.current&&!P.current.contains(e.target)&&C(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const B=async(e,t)=>{const s=d&&d.id===t;if(A||s)try{await fn.deleteComment(e,null==d?void 0:d.id),a(e),(e=>{g((t=>({...t,[e]:!1})))})(e)}catch(n){alert("Не удалось удалить ответ: "+(n.message||"Неизвестная ошибка"))}};return G.jsxs("div",{className:yn.commentItem,children:[G.jsx("style",{dangerouslySetInnerHTML:{__html:er}}),G.jsxs("div",{className:"commentInner",children:[G.jsxs("div",{className:yn.commentHeader,children:[G.jsx("div",{className:yn.commentAuthorAvatar,children:G.jsx(Qs,{src:e.author.avatar,alt:e.author.displayName,className:yn.avatar})}),G.jsx("div",{className:yn.commentAuthorInfo,children:G.jsx(Y,{to:"/profile/".concat(e.user_id),className:yn.commentAuthor,children:G.jsx("span",{className:"early_user"===e.author.activePerk?$s:"sponsor"===e.author.activePerk?Js:"admin"===e.author.activePerk?Ys:Zs,style:{display:"inline-block",margin:0,padding:0},children:e.author.displayName})})})]}),G.jsx("div",{className:yn.commentContent,children:e.content}),G.jsxs("div",{className:yn.commentDate,children:[G.jsx(te,{})," ",Tn(e.created_at)]}),G.jsxs("div",{className:yn.commentActions,children:[G.jsxs("button",{className:yn.replyButton,onClick:()=>{m?(r((e=>!e)),b(!1),n||setTimeout((()=>{const e=document.querySelectorAll(".".concat(yn.replyForm," textarea"));e.length>0&&e[e.length-1].focus()}),100)):f("reply")},children:[G.jsx(Ee,{})," Ответить"]}),I&&G.jsxs("button",{className:yn.deleteCommentButton,onClick:()=>{I&&(h(!0),b(!1))},disabled:u,children:[G.jsx(Ne,{})," ",u?"Удаление...":"Удалить"]})]})]}),G.jsx(Bn,{isOpen:_,onClose:()=>{h(!1)},onConfirm:async()=>{if(I)try{p(!0),await fn.deleteComment(e.id,d.id),a(e.id),h(!1)}catch(t){alert("Не удалось удалить комментарий: "+(t.message||"Неизвестная ошибка"))}finally{p(!1)}},title:"Удаление комментария",message:"Вы уверены, что хотите удалить этот комментарий? Это действие нельзя отменить.",confirmText:"Удалить",cancelText:"Отмена",isDanger:!0}),n&&G.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),i.trim())try{c(!0);const a=vn(i,d);await t(e.id,a),o(""),r(!1)}catch(s){}finally{c(!1)}},className:yn.replyForm,children:[G.jsx("textarea",{value:i,onChange:e=>o(e.target.value),placeholder:"Напишите ответ...",disabled:l}),G.jsxs("div",{className:yn.replyFormActions,children:[G.jsxs("button",{type:"button",onClick:()=>{r(!1),o("")},className:yn.cancelReplyButton,disabled:l,children:[G.jsx(X,{})," Отмена"]}),G.jsx("button",{type:"submit",className:yn.submitReplyButton,disabled:l,children:l?G.jsxs(G.Fragment,{children:[G.jsx(ge,{})," Отправка..."]}):G.jsxs(G.Fragment,{children:[G.jsx(Ce,{})," Ответить"]})})]})]}),e.replies&&e.replies.length>0&&G.jsx("div",{className:yn.repliesContainer,children:e.replies.map((e=>{const t=d&&d.id===e.user_id,a=A||t;return G.jsxs("div",{className:"".concat(yn.commentItem," ").concat(yn.commentReply),children:[G.jsxs("div",{className:yn.commentHeader,children:[G.jsx("div",{className:yn.commentAuthorAvatar,children:G.jsx(Qs,{src:e.author.avatar,alt:e.author.displayName,className:yn.avatar})}),G.jsx("div",{className:yn.commentAuthorInfo,children:G.jsx(Y,{to:"/profile/".concat(e.user_id),className:yn.commentAuthor,children:G.jsx("span",{className:"early_user"===e.author.activePerk?$s:"sponsor"===e.author.activePerk?Js:"admin"===e.author.activePerk?Ys:Zs,style:{display:"inline-block",margin:0,padding:0},children:e.author.displayName})})}),a&&G.jsx("div",{className:yn.mobileOnly,style:{position:"absolute",top:"5px",right:"5px"},children:G.jsx(tr,{onClick:e=>e.stopPropagation(),children:G.jsx(ar,{onClick:()=>g({...x,[e.id]:!0}),children:G.jsx(Ie,{})})})})]}),G.jsx("div",{className:yn.commentContent,children:e.content}),G.jsxs("div",{className:yn.commentDate,children:[G.jsx(te,{})," ",Tn(e.created_at)]}),a&&G.jsx("div",{className:"".concat(yn.commentActions," ").concat(yn.desktopOnly),children:G.jsxs("button",{className:yn.deleteCommentButton,onClick:()=>g({...x,[e.id]:!0}),children:[G.jsx(Ne,{})," Удалить"]})}),G.jsx(Bn,{isOpen:x[e.id]||!1,onClose:()=>g({...x,[e.id]:!1}),onConfirm:()=>B(e.id,e.user_id),title:"Удаление ответа",message:"Вы уверены, что хотите удалить этот ответ? Это действие нельзя отменить.",confirmText:"Удалить",cancelText:"Отмена",isDanger:!0})]},e.id)}))}),v&&G.jsxs(Zn,{variants:Qn,initial:"initial",animate:"animate",exit:"exit",children:[G.jsx(K,{}),G.jsx("span",{children:"Войдите, чтобы ответить на комментарий"}),G.jsx("button",{onClick:()=>f(!1),children:"Скрыть"})]})]})}be(V.div)(N||(N=U(['\n  position: absolute;\n  top: 100%;\n  right: 0;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);\n  min-width: 160px;\n  z-index: 100;\n  overflow: hidden;\n  \n  [data-theme="dark"] & {\n    background: var(--bg-tertiary);\n    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3);\n  }\n']))),be.button(S||(S=U(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  width: 100%;\n  text-align: left;\n  padding: 10px 16px;\n  background: none;\n  border: none;\n  color: ",";\n  font-size: 14px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  \n  &:hover {\n    background-color: ",";\n  }\n  \n  svg {\n    font-size: 16px;\n  }\n"])),(e=>e.$danger?"var(--error)":"var(--text-primary)"),(e=>e.$danger?"rgba(231, 76, 60, 0.1)":"var(--bg-hover)")),be(V.button)(C||(C=U(["\n  background: none;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  outline: inherit;\n"])));const nr=be(V.div)(P||(P=U(["\n  overflow: hidden;\n"]))),rr=e=>{if(!e)return!1;let t=e.replace("#","");3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);return(.299*parseInt(t.substring(0,2),16)+.587*parseInt(t.substring(2,4),16)+.114*parseInt(t.substring(4,6),16))/255<.5},ir=be.div(A||(A=U(['\n  display: flex;\n  align-items: center;\n  font-size: 13px;\n  color: var(--accent, #1da1f2);\n  gap: 5px;\n  background-color: rgba(29, 161, 242, 0.1);\n  padding: 4px 10px;\n  border-radius: 12px;\n  margin-left: 10px;\n  font-weight: 500;\n  \n  svg {\n    transform: rotate(45deg);\n  }\n  \n  [data-theme="dark"] & {\n    background-color: rgba(29, 161, 242, 0.35);\n    color: #fff;\n    box-shadow: 0 0 10px rgba(29, 161, 242, 0.4);\n    border: 1px solid rgba(29, 161, 242, 0.5);\n    text-shadow: 0 0 5px rgba(255, 255, 255, 0.2);\n  }\n']))),or=be.button(E||(E=U(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  background: none;\n  border: none;\n  color: var(--text-secondary);\n  font-size: 14px;\n  cursor: pointer;\n  padding: 6px 10px;\n  border-radius: 4px;\n  transition: all 0.2s;\n  \n  &:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n    color: var(--accent);\n  }\n  \n  svg {\n    font-size: 16px;\n    ",'\n  }\n  \n  [data-theme="dark"] & {\n    &:hover {\n      background-color: rgba(255, 255, 255, 0.05);\n    }\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n'])),(e=>e.$isPinned&&"transform: rotate(45deg);")),lr=be.div(I||(I=U(["\n  position: relative;\n  border-radius: 16px;\n  margin-bottom: 20px; /* Добавляем отступ снизу, чтобы не прилипало к таймеру */\n  \n  /* Create an animated gradient border effect */\n  &:before {\n    content: '';\n    position: absolute;\n    inset: -3px; /* Увеличиваем толщину рамки */\n    border-radius: 18px;\n    padding: 3px;\n    background: linear-gradient(\n      45deg, \n      var(--accent, #1da1f2) 0%, \n      rgba(255, 255, 255, 0.3) 50%, \n      var(--accent, #1da1f2) 100%\n    );\n    -webkit-mask: \n      linear-gradient(#fff 0 0) content-box, \n      linear-gradient(#fff 0 0);\n    -webkit-mask-composite: xor;\n    mask-composite: exclude;\n    background-size: 300% 300%;\n    animation: gradientBorder 4s ease infinite;\n    opacity: 0.8;\n    \n    [data-theme=\"dark\"] & {\n      background: linear-gradient(\n        45deg, \n        var(--accent, #1da1f2) 0%, \n        rgba(29, 161, 242, 0.7) 50%, \n        var(--accent, #1da1f2) 100%\n      );\n      opacity: 0.95;\n      box-shadow: 0 0 18px rgba(29, 161, 242, 0.5);\n    }\n  }\n  \n  @keyframes gradientBorder {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n"]))),cr=({src:e,alt:t,className:a,style:s})=>{const[n,r]=W.useState(!0),[i,o]=W.useState(!1),[l,c]=W.useState(!1),{displaySrc:d,originalSrc:m}=W.useMemo((()=>({displaySrc:Dn(e)||e,originalSrc:e})),[e]);return W.useEffect((()=>{const e=setTimeout((()=>{n&&r(!1)}),5e3);return()=>clearTimeout(e)}),[]),G.jsxs("div",{className:a||"",style:s,children:[n&&G.jsx("div",{className:yn.imageLoading,children:"Загрузка..."}),i&&G.jsx("div",{className:yn.imageError,children:"Ошибка загрузки"}),d&&G.jsx("img",{src:l?m:d,alt:t,style:{display:n?"none":"block",maxWidth:"100%",height:"auto",borderRadius:"8px"},onLoad:()=>{r(!1),o(!1)},onError:()=>{l||d===m?(r(!1),o(!0)):c(!0)},loading:"lazy"})]})},dr=({post:e,onSave:t,onCancel:a,isSubmitting:s})=>{const[n,r]=W.useState(e.title||""),[i,o]=W.useState(e.content||""),[l,c]=W.useState(e.image_url||""),[d,m]=W.useState(""),[u,p]=W.useState(!1),[_,h]=W.useState("");W.useEffect((()=>{if(!l)return m(""),void p(!1);p(!0);const e=Dn(l);m(e||l);const t=setTimeout((()=>{p(!1)}),3e3);return()=>clearTimeout(t)}),[l]);return G.jsxs("div",{className:yn.editPostForm,children:[_&&G.jsxs("div",{className:yn.errorMessage,children:[G.jsx(he,{})," ",_]}),G.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!i.trim())return void h("Текст поста не может быть пустым");const a={title:n.trim()||null,content:i.trim(),imageUrl:l||null,image_url:l||null};t(a)},children:[G.jsx("input",{type:"text",className:yn.titleInput,value:n,onChange:e=>r(e.target.value),placeholder:"Заголовок поста",disabled:s}),G.jsx("textarea",{className:yn.contentInput,value:i,onChange:e=>o(e.target.value),placeholder:"Текст вашего поста...",rows:4,disabled:s,required:!0}),G.jsx("input",{type:"text",className:yn.imageUrlInput,value:l,onChange:e=>c(e.target.value),placeholder:"URL изображения (необязательно)",disabled:s}),l&&G.jsxs("div",{className:yn.imagePreview,children:[u&&G.jsx("div",{className:yn.imageLoading,children:"Загрузка..."}),G.jsx("img",{src:d||l,alt:"Предпросмотр",onLoad:()=>{p(!1)},onError:()=>{p(!1),h("Ошибка загрузки изображения. Проверьте URL.")},style:{display:u?"none":"block",maxWidth:"100%",height:"auto"}}),G.jsxs("div",{className:yn.imageNote,children:[G.jsx(Pe,{})," Изображение будет автоматически оптимизировано"]})]}),G.jsxs("div",{className:yn.formOptions,children:[G.jsxs("button",{type:"button",className:yn.cancelEditButton,onClick:a,disabled:s,children:[G.jsx(X,{})," Отмена"]}),G.jsx("button",{type:"submit",className:yn.submitButton,disabled:s,children:s?G.jsxs(G.Fragment,{children:[G.jsx(ge,{})," Сохранение..."]}):G.jsxs(G.Fragment,{children:[G.jsx(Ce,{})," Сохранить"]})})]})]})]})},mr=({post:e,onSave:t,onCancel:a,isSubmitting:s})=>{var n,r;const[i,o]=W.useState(e.title||""),[l,c]=W.useState((null==(n=e.poll_data)?void 0:n.question)||""),[d,m]=W.useState((null==(r=e.poll_data)?void 0:r.options)||["",""]),[u,p]=W.useState("");W.useEffect((()=>{""===l&&""!==i&&c(i)}),[i,l]);return G.jsxs("div",{className:yn.editPostForm,children:[u&&G.jsxs("div",{className:yn.errorMessage,children:[G.jsx(he,{})," ",u]}),G.jsxs("form",{onSubmit:a=>{if(a.preventDefault(),!i.trim()&&!l.trim())return void p("Заголовок или вопрос опроса не может быть пустым");if(d.filter((e=>""!==e.trim())).length<2)return void p("Требуется минимум два варианта ответа для опроса");const s={question:l.trim()||i.trim(),options:d.filter((e=>""!==e.trim()))},n={title:i.trim(),content:e.content||"",poll:s};t(n)},children:[G.jsx("input",{type:"text",className:yn.titleInput,value:i,onChange:e=>o(e.target.value),placeholder:"Заголовок опроса",disabled:s}),G.jsxs("div",{className:yn.pollContainer,children:[G.jsx("input",{type:"text",className:yn.pollQuestionInput,value:l,onChange:e=>c(e.target.value),placeholder:"Вопрос опроса (если отличается от заголовка)",disabled:s}),G.jsx("div",{className:yn.pollOptions,children:d.map(((e,t)=>G.jsxs("div",{className:yn.pollOptionInputWrapper,children:[G.jsx("input",{type:"text",className:yn.pollOptionInput,value:e,onChange:e=>((e,t)=>{const a=[...d];a[e]=t,m(a)})(t,e.target.value),placeholder:"Вариант ".concat(t+1),disabled:s,required:t<2}),d.length>2&&G.jsx("button",{type:"button",className:yn.removeOptionButton,onClick:()=>(e=>{if(d.length>2){const t=[...d];t.splice(e,1),m(t)}})(t),disabled:s,children:G.jsx(X,{})})]},t)))}),d.length<10&&G.jsxs("button",{type:"button",className:yn.addOptionButton,onClick:()=>{d.length<10&&m([...d,""])},disabled:s,children:[G.jsx(Be,{})," Добавить вариант"]})]}),G.jsxs("div",{className:yn.formOptions,children:[G.jsxs("button",{type:"button",className:yn.cancelEditButton,onClick:a,disabled:s,children:[G.jsx(X,{})," Отмена"]}),G.jsx("button",{type:"submit",className:yn.submitButton,disabled:s,children:s?G.jsxs(G.Fragment,{children:[G.jsx(ge,{})," Сохранение..."]}):G.jsxs(G.Fragment,{children:[G.jsx(Ce,{})," Сохранить"]})})]})]})]})},ur=({post:e,onLikeToggle:t,fullView:a=!1,onDelete:s,onPinChange:n,onUpdate:r})=>{var i;const{user:o,isAuthenticated:l}=Bs(),[c,d]=W.useState(!1),[m,u]=W.useState(e.likes_count||0),[p,_]=W.useState(a),[h,x]=W.useState([]),[g,v]=W.useState(e.comments_count||0),[f,y]=W.useState(""),[b,j]=W.useState(!1),[k,w]=W.useState(""),[N,S]=W.useState(!1),[C,P]=W.useState(!1),[A,E]=W.useState(""),[I,B]=W.useState(!1),[O,D]=W.useState(""),[T,q]=W.useState(e.is_pinned||!1),[L,F]=W.useState(!1),[z,M]=W.useState(!1),[U,R]=W.useState(!1),[V,J]=W.useState(0),[$,Z]=W.useState(!1),[Q,X]=W.useState(null),[ee,ae]=W.useState([]),se=e.title&&e.title.trim().length>0,ne=o&&("igoraor79@gmail.com"===o.email||(null==(i=o.perks)?void 0:i.includes("admin"))||"admin"===o.activePerk),re=e.styling||{},ie=re.titleColor||"#000000",oe=re.contentColor||"#000000",ce=re.fontFamily||"inherit",de=rr(ie),me=rr(oe),[pe,_e]=W.useState(window.innerWidth<=768);W.useEffect((()=>{const e=()=>{_e(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),W.useEffect((()=>{const t=()=>{E(Tn(e.created_at,pe))};t();const a=setInterval(t,6e4);return()=>clearInterval(a)}),[e.created_at,pe]),W.useEffect((()=>{(async()=>{if(l&&o)try{const{liked:t}=await dn.isLikedByUser(e.id,o.id);d(t)}catch(t){}})()}),[e.id,o,l]),W.useEffect((()=>{e.poll_data&&(async()=>{if(e.poll_data&&l&&o)try{const{hasVoted:t,option:a,results:s}=await dn.getPollVoteStatus(e.id,o.id);Z(t),X(a),ae(s)}catch(t){try{const{results:t}=await dn.getPollResults(e.id);ae(t)}catch(a){if(e.poll_data&&e.poll_data.options){const t=e.poll_data.options.map((e=>({option:e,votes:0})));ae(t)}}}else if(e.poll_data)try{const{results:t}=await dn.getPollResults(e.id);ae(t)}catch(t){if(e.poll_data&&e.poll_data.options){const t=e.poll_data.options.map((e=>({option:e,votes:0})));ae(t)}}})()}),[e.id,e.poll_data,o,l]),W.useEffect((()=>{u(e.likes_count||0)}),[e.likes_count]),W.useEffect((()=>{v(e.comments_count||0)}),[e.comments_count]);const xe=async()=>{if(l)try{const a=!c,s=a?m+1:m-1;d(a),u(s>0?s:0);const n=document.querySelector("#like-".concat(e.id));n&&(n.classList.add(yn.likeAnimation),setTimeout((()=>{n.classList.remove(yn.likeAnimation)}),1e3));const r=await dn.toggleLike(e.id,o.id);d(r.liked),u(r.likesCount),t&&t(e.id,r.liked,r.likesCount)}catch(a){d(!c);const e=c?m+1:m-1;u(e>0?e:0)}else D("like")},ve=()=>{p?_(!1):(S(!0),(async()=>{if(h.length>0&&!p)return _(!0),void S(!1);try{S(!0);const t=await fn.getCommentsByPostId(e.id);let a=0;t.forEach((e=>{e.replies&&(a+=e.replies.length)})),J(t.length);const s=t.length+a;v(s),x(t),_(!0)}catch(t){}finally{S(!1)}})())},fe=async t=>{if(l)try{const a=await dn.votePoll(e.id,t);if(!a.success)throw new Error(a.message||"Ошибка при голосовании");Z(!0),X(t),ae(a.results)}catch(a){alert("Не удалось проголосовать: ".concat(a.message||"Неизвестная ошибка")),e.poll_data&&e.poll_data.options&&e.poll_data.options.map(((e,a)=>({option:e,votes:a===t?1:0})))}else D("poll")},ye=async t=>{if(t.preventDefault(),l)if(f.trim())try{j(!0),w("");const t=vn(f,o),a=await fn.createComment({content:t,postId:e.id,userId:o.id});x([a,...h]),J((e=>e+1)),v((e=>e+1)),y("")}catch(a){w("Не удалось отправить комментарий")}finally{j(!1)}else w("Комментарий не может быть пустым");else w("Войдите, чтобы оставить комментарий")},be=async(t,a)=>{if(l)try{const s=vn(a,o),n=await fn.replyToComment({content:s,commentId:t,postId:e.id,userId:o.id}),r=h.map((e=>{if(e.id===t){const t=e.replies||[];return{...e,replies:[...t,n]}}return e}));return x(r),v((e=>e+1)),n}catch(s){throw s}else D("reply")},je=()=>{var e;l&&o&&("igoraor79@gmail.com"===o.email||(null==(e=o.perks)?void 0:e.includes("admin"))||"admin"===o.activePerk)?B(!0):alert("Только администраторы могут удалять посты")},Pe=()=>{B(!1)},Ae=async()=>{var t;if(l&&o&&("igoraor79@gmail.com"===o.email||(null==(t=o.perks)?void 0:t.includes("admin"))||"admin"===o.activePerk))try{P(!0);if(!(await dn.deletePost(e.id)).success)throw new Error("Не удалось удалить пост");s&&s(e.id),B(!1)}catch(a){alert("Не удалось удалить пост: "+(a.message||"Попробуйте позже."))}finally{P(!1)}else alert("Только администраторы могут удалять посты")},Ee=e=>{var t;const a=h.findIndex((t=>t.id===e));if(-1!==a){const s=(null==(t=h[a].replies)?void 0:t.length)||0;x(h.filter((t=>t.id!==e))),J((e=>e-1)),v((e=>e-(1+s)))}else{const t=h.map((t=>t.replies&&t.replies.some((t=>t.id===e))?{...t,replies:t.replies.filter((t=>t.id!==e))}:t));x(t),v((e=>e-1))}};W.useEffect((()=>{q(e.is_pinned||!1)}),[e.is_pinned]);const Ie=async()=>{if(ne)try{if(F(!0),T){(await dn.unpinPost(e.id)).success&&(q(!1),n&&n(e.id,!1))}else{(await dn.pinPost(e.id)).success&&(q(!0),n&&n(e.id,!0))}}catch(t){alert("Не удалось изменить статус закрепления: "+(t.message||"Неизвестная ошибка"))}finally{F(!1)}};W.useEffect((()=>{const t=()=>{E(Tn(e.created_at,pe))};return window.addEventListener("themechange",t),()=>{window.removeEventListener("themechange",t)}}),[e.created_at,pe]);const Be=async t=>{if(ne)try{R(!0);const a=await dn.updatePost(e.id,t);if(!a||!a.success)throw new Error("Не удалось обновить пост");r&&r(a.post),M(!1)}catch(a){alert("Не удалось обновить пост: "+(a.message||"Неизвестная ошибка"))}finally{R(!1)}},Oe=()=>{ne&&M(!z)},De=!!e.poll_data,[Te,qe]=W.useState(!1);return W.useEffect((()=>{De&&(async()=>{if(De)try{const{results:t}=await dn.getPollResults(e.id),a=t.some((e=>e.votes>0));qe(a)}catch(t){}})()}),[e.id,De]),G.jsx(G.Fragment,{children:T?G.jsx(lr,{children:G.jsxs("div",{className:yn.postItem,children:[z?G.jsx(dr,{post:e,onSave:Be,onCancel:()=>M(!1),isSubmitting:U}):G.jsxs(G.Fragment,{children:[G.jsxs("div",{className:yn.postHeader,children:[G.jsxs(Y,{to:"/profile/".concat(e.user_id),className:yn.authorInfo,children:[G.jsx(Qs,{src:e.author.avatar,alt:e.author.displayName,className:yn.avatar}),G.jsx("span",{className:"early_user"===e.author.activePerk?$s:"sponsor"===e.author.activePerk?Js:"admin"===e.author.activePerk?Ys:Zs,style:{display:"inline-block",margin:0,padding:0},children:e.author.displayName})]}),G.jsxs("div",{className:yn.postMeta,children:[T&&G.jsxs(ir,{children:[G.jsx(ke,{})," Закреплено"]}),G.jsxs("span",{className:yn.postDate,children:[G.jsx(te,{})," ",A]})]})]}),se&&G.jsx("h2",{className:yn.postTitle,style:{color:ie,fontFamily:ce},children:G.jsx("span",{className:de?yn.darkTextConversion:"",children:e.title})}),G.jsx("div",{className:yn.postContent,style:{color:oe,fontFamily:ce},children:G.jsx("span",{className:me?yn.darkTextConversion:"",children:e.content})}),e.image_url&&G.jsx("div",{className:yn.postImage,children:G.jsx(cr,{src:e.image_url,alt:"Изображение к посту",className:yn.postImage,style:{display:"block"}})}),e.poll_data&&G.jsx("div",{className:yn.pollContainer,children:G.jsx(Kn,{poll:{...e.poll_data,hideQuestion:e.title&&e.poll_data.question===e.title},postId:e.id,onVote:fe,hasVoted:$,votedOption:Q,results:ee,isAdmin:ne,user:o})})]}),!z&&G.jsxs("div",{className:yn.postActions,children:[G.jsxs("div",{className:yn.actionButtons,children:[G.jsxs("button",{id:"like-".concat(e.id),className:"".concat(yn.likeButton," ").concat(c?yn.liked:""),onClick:xe,children:[G.jsx(we,{})," ",G.jsx("span",{className:yn.likeCount,children:m})]}),G.jsxs("button",{className:yn.commentButton,onClick:ve,children:[G.jsx(le,{})," ",G.jsx("span",{children:g})]}),l&&ne&&G.jsxs(or,{onClick:Ie,disabled:L,$isPinned:T,children:[G.jsx(ke,{})," ",T?"Открепить":"Закрепить"]})]}),l&&ne&&G.jsxs("div",{className:yn.adminActions,children:[!De&&G.jsxs("button",{className:yn.editButton,onClick:Oe,disabled:z,children:[G.jsx(ue,{})," Изменить"]}),G.jsxs("button",{className:yn.deleteButton,onClick:je,disabled:C,children:[G.jsx(Ne,{})," ",C?"Удаление...":"Удалить"]})]})]}),G.jsx(Bn,{isOpen:I,onClose:Pe,onConfirm:Ae,title:"Удаление поста",message:"Вы уверены, что хотите удалить этот пост? Это действие нельзя отменить.",confirmText:"Удалить",cancelText:"Отмена",isDanger:!0}),G.jsx(H,{children:p&&G.jsx(nr,{variants:Xn,initial:"initial",animate:"animate",exit:"exit",children:G.jsxs("div",{className:yn.commentsSection,children:[G.jsxs("h4",{className:yn.commentsHeading,children:[G.jsx(Se,{})," Комментарии (",g,")"]}),N?G.jsxs("div",{className:yn.loadingComments,children:[G.jsx(ge,{})," Загрузка комментариев..."]}):G.jsxs(G.Fragment,{children:[h&&h.length>0?G.jsx("div",{className:yn.commentsList,children:h.map((e=>G.jsx(sr,{comment:e,onReply:be,onDelete:Ee},e.id)))}):G.jsx("div",{className:yn.noComments,children:"Комментариев пока нет. Будьте первым!"}),l&&G.jsxs("form",{onSubmit:ye,className:yn.commentForm,children:[k&&G.jsxs("div",{className:yn.errorMessage,children:[G.jsx(he,{})," ",k]}),G.jsx("textarea",{value:f,onChange:e=>y(e.target.value),placeholder:"Напишите комментарий...",disabled:b}),G.jsx("button",{type:"submit",disabled:b,children:b?G.jsxs(G.Fragment,{children:[G.jsx(ge,{})," Отправка..."]}):G.jsxs(G.Fragment,{children:[G.jsx(Ce,{})," Отправить"]})})]})]})]})})}),O&&G.jsxs(Zn,{variants:Qn,initial:"initial",animate:"animate",exit:"exit",children:[G.jsx(K,{}),G.jsxs("span",{children:["like"===O&&"Войдите, чтобы поставить лайк","poll"===O&&"Войдите, чтобы проголосовать","reply"===O&&"Войдите, чтобы ответить на комментарий"]}),G.jsx("button",{onClick:()=>D(""),children:"Скрыть"})]})]})}):G.jsxs("div",{className:yn.postItem,children:[z?De?G.jsx(mr,{post:e,onSave:Be,onCancel:()=>M(!1),isSubmitting:U}):G.jsx(dr,{post:e,onSave:Be,onCancel:()=>M(!1),isSubmitting:U}):G.jsxs(G.Fragment,{children:[G.jsxs("div",{className:yn.postHeader,children:[G.jsxs(Y,{to:"/profile/".concat(e.user_id),className:yn.authorInfo,children:[G.jsx(Qs,{src:e.author.avatar,alt:e.author.displayName,className:yn.avatar}),G.jsx("span",{className:"early_user"===e.author.activePerk?$s:"sponsor"===e.author.activePerk?Js:"admin"===e.author.activePerk?Ys:Zs,style:{display:"inline-block",margin:0,padding:0},children:e.author.displayName})]}),G.jsxs("div",{className:yn.postMeta,children:[T&&G.jsxs(ir,{children:[G.jsx(ke,{})," Закреплено"]}),G.jsxs("span",{className:yn.postDate,children:[G.jsx(te,{})," ",A]})]})]}),se&&G.jsx("h2",{className:yn.postTitle,style:{color:ie,fontFamily:ce},children:G.jsx("span",{className:de?yn.darkTextConversion:"",children:e.title})}),G.jsx("div",{className:yn.postContent,style:{color:oe,fontFamily:ce},children:G.jsx("span",{className:me?yn.darkTextConversion:"",children:e.content})}),e.image_url&&G.jsx("div",{className:yn.postImage,children:G.jsx(cr,{src:e.image_url,alt:"Изображение к посту",className:yn.postImage,style:{display:"block"}})}),e.poll_data&&G.jsx("div",{className:yn.pollContainer,children:G.jsx(Kn,{poll:{...e.poll_data,hideQuestion:e.title&&e.poll_data.question===e.title},postId:e.id,onVote:fe,hasVoted:$,votedOption:Q,results:ee,isAdmin:ne,user:o})})]}),!z&&G.jsxs("div",{className:yn.postActions,children:[G.jsxs("div",{className:yn.actionButtons,children:[G.jsxs("button",{id:"like-".concat(e.id),className:"".concat(yn.likeButton," ").concat(c?yn.liked:""),onClick:xe,children:[G.jsx(we,{})," ",G.jsx("span",{className:yn.likeCount,children:m})]}),G.jsxs("button",{className:yn.commentButton,onClick:ve,children:[G.jsx(le,{})," ",G.jsx("span",{children:g})]}),l&&ne&&G.jsxs(or,{onClick:Ie,disabled:L,$isPinned:T,children:[G.jsx(ke,{})," ",T?"Открепить":"Закрепить"]})]}),l&&ne&&G.jsxs("div",{className:yn.adminActions,children:[!De&&G.jsxs("button",{className:yn.editButton,onClick:Oe,disabled:z,children:[G.jsx(ue,{})," Изменить"]}),G.jsxs("button",{className:yn.deleteButton,onClick:je,disabled:C,children:[G.jsx(Ne,{})," ",C?"Удаление...":"Удалить"]})]})]}),G.jsx(Bn,{isOpen:I,onClose:Pe,onConfirm:Ae,title:"Удаление поста",message:"Вы уверены, что хотите удалить этот пост? Это действие нельзя отменить.",confirmText:"Удалить",cancelText:"Отмена",isDanger:!0}),G.jsx(H,{children:p&&G.jsx(nr,{variants:Xn,initial:"initial",animate:"animate",exit:"exit",children:G.jsxs("div",{className:yn.commentsSection,children:[G.jsxs("h4",{className:yn.commentsHeading,children:[G.jsx(Se,{})," Комментарии (",g,")"]}),N?G.jsxs("div",{className:yn.loadingComments,children:[G.jsx(ge,{})," Загрузка комментариев..."]}):G.jsxs(G.Fragment,{children:[h&&h.length>0?G.jsx("div",{className:yn.commentsList,children:h.map((e=>G.jsx(sr,{comment:e,onReply:be,onDelete:Ee},e.id)))}):G.jsx("div",{className:yn.noComments,children:"Комментариев пока нет. Будьте первым!"}),l&&G.jsxs("form",{onSubmit:ye,className:yn.commentForm,children:[k&&G.jsxs("div",{className:yn.errorMessage,children:[G.jsx(he,{})," ",k]}),G.jsx("textarea",{value:f,onChange:e=>y(e.target.value),placeholder:"Напишите комментарий...",disabled:b}),G.jsx("button",{type:"submit",disabled:b,children:b?G.jsxs(G.Fragment,{children:[G.jsx(ge,{})," Отправка..."]}):G.jsxs(G.Fragment,{children:[G.jsx(Ce,{})," Отправить"]})})]})]})]})})}),O&&G.jsxs(Zn,{variants:Qn,initial:"initial",animate:"animate",exit:"exit",children:[G.jsx(K,{}),G.jsxs("span",{children:["like"===O&&"Войдите, чтобы поставить лайк","poll"===O&&"Войдите, чтобы проголосовать","reply"===O&&"Войдите, чтобы ответить на комментарий"]}),G.jsx("button",{onClick:()=>D(""),children:"Скрыть"})]})]})})},pr=[{name:"По умолчанию",value:"inherit"},{name:"Arial",value:"Arial, sans-serif"},{name:"Times New Roman",value:"Times New Roman, serif"},{name:"Courier New",value:"Courier New, monospace"},{name:"Georgia",value:"Georgia, serif"},{name:"Verdana",value:"Verdana, sans-serif"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Montserrat",value:"'Montserrat', sans-serif"},{name:"Poppins",value:"'Poppins', sans-serif"},{name:"Source Sans Pro",value:"'Source Sans Pro', sans-serif"},{name:"Ubuntu",value:"'Ubuntu', sans-serif"},{name:"Raleway",value:"'Raleway', sans-serif"},{name:"Nunito",value:"'Nunito', sans-serif"}],_r="\n  .".concat(yn.formOptions," {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    margin-top: 15px;\n  }\n  \n  .").concat(yn.formToggles," {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n  \n  .").concat(yn.optionToggle," {\n    display: flex;\n    align-items: center;\n    gap: 5px;\n    background-color: rgba(0, 0, 0, 0.03);\n    padding: 6px 10px;\n    border-radius: 4px;\n    font-size: 14px;\n    cursor: pointer;\n    white-space: nowrap;\n    margin-bottom: 5px;\n  }\n  \n  .").concat(yn.submitButton," {\n    margin-top: 5px;\n    align-self: flex-end;\n  }\n\n  .").concat(yn.imagePreview," {\n    max-width: 100%;\n    margin-top: 10px;\n    border-radius: 8px;\n    overflow: hidden;\n    border: 1px solid #ddd;\n  }\n  \n  .").concat(yn.imagePreview," img {\n    max-width: 100%;\n    height: auto;\n    display: block;\n  }\n  \n  .").concat(yn.imageNote," {\n    font-size: 12px;\n    color: #666;\n    margin-top: 5px;\n  }\n  \n  @media (max-width: 768px) {\n    .").concat(yn.formOptions," {\n      width: 100%;\n    }\n    \n    .").concat(yn.formToggles," {\n      width: 100%;\n      justify-content: flex-start;\n    }\n    \n    .").concat(yn.optionToggle," {\n      flex: 0 0 auto;\n      font-size: 13px;\n    }\n    \n    .").concat(yn.submitButton," {\n      width: 100%;\n      margin-top: 10px;\n    }\n  }\n"),hr=({onPostCreated:e})=>{var t;const{user:a,isAuthenticated:s}=Bs(),[n,r]=W.useState(""),[i,o]=W.useState(""),[l,c]=W.useState(""),[d,m]=W.useState(""),[u,p]=W.useState(!1),[_,h]=W.useState(!1),[x,g]=W.useState(""),[v,f]=W.useState(!1),[y,b]=W.useState(["",""]),[j,k]=W.useState(!1),[w,N]=W.useState(!1),[S,C]=W.useState("#000000"),[P,A]=W.useState("#000000"),[E,I]=W.useState("#000000"),[B,O]=W.useState("inherit"),[D,T]=W.useState(!1),[q,L]=W.useState(!1),[F,z]=W.useState(!1);W.useEffect((()=>{if(!l)return void m("");p(!0);const e=(e=>{if(!e)return null;if(e.includes("cloudinary.com"))return e;try{return"".concat("https://res.cloudinary.com/do9t8preg/image/fetch/f_auto,q_auto:best,dpr_auto,w_auto,c_limit,w_800/").concat(encodeURIComponent(e))}catch(x){return e}})(l);m(e)}),[l]);const M=s&&a&&("igoraor79@gmail.com"===a.email||(null==(t=a.perks)?void 0:t.includes("admin"))||"admin"===a.activePerk);if(!M)return null;const U=e=>{if(!e)return!1;let t=e.replace("#","");3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);return(.299*parseInt(t.substring(0,2),16)+.587*parseInt(t.substring(2,4),16)+.114*parseInt(t.substring(4,6),16))/255<.5};return G.jsxs("div",{className:yn.createPostContainer,children:[G.jsx("style",{dangerouslySetInnerHTML:{__html:_r}}),G.jsxs("h3",{className:yn.createPostTitle,children:[G.jsx(ue,{})," Создать пост"]}),x&&G.jsxs("div",{className:yn.errorMessage,children:[G.jsx(he,{})," ",x]}),G.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),M)if(v||i.trim())if(!v||i.trim()||n.trim()){if(!(v&&y.filter((e=>e.trim().length>0)).length<2&&(g("Для опроса необходимо минимум два варианта ответа"),1)))try{h(!0),g("");const t=v?{question:n.trim()||i.trim().split(" ").slice(0,5).join(" ")+"...",options:y.filter((e=>e.trim().length>0)).map((e=>e.trim())),optionsColor:E,styling:{optionsColor:E,fontFamily:B}}:null,s={title:n.trim()||null,content:i.trim(),imageUrl:l?d:null,userId:a.id,styling:{titleColor:S,contentColor:P,fontFamily:B},poll:t,isPinned:j},u=await dn.createPost(s);r(""),o(""),c(""),m(""),f(!1),b(["",""]),N(!1),C("#000000"),A("#000000"),I("#000000"),O("inherit"),k(!1),e&&e(u)}catch(s){s.message?g("Не удалось создать пост: "+s.message):s.details?g("Ошибка: "+s.details):g("Не удалось создать пост. Попробуйте позже.")}finally{h(!1)}}else g("Добавьте текст поста или заголовок для опроса");else g("Текст поста не может быть пустым");else g("У вас недостаточно прав для создания постов")},className:yn.createPostForm,children:[G.jsx("input",{type:"text",className:yn.titleInput,value:n,onChange:e=>r(e.target.value),placeholder:"Заголовок поста",disabled:_,style:{color:S,fontFamily:B}}),G.jsx("textarea",{className:yn.contentInput,value:i,onChange:e=>o(e.target.value),placeholder:v?"Текст поста с опросом (необязательно)...":"Текст вашего поста...",rows:4,disabled:_,required:!v,style:{color:P,fontFamily:B}}),!v&&G.jsxs(G.Fragment,{children:[G.jsx("input",{type:"text",className:yn.imageUrlInput,value:l,onChange:e=>c(e.target.value),placeholder:"URL изображения (необязательно)",disabled:_}),l&&G.jsxs("div",{className:yn.imagePreview,children:[u&&G.jsx("div",{className:yn.imageLoading,children:"Загрузка..."}),G.jsx("img",{src:d||l,alt:"Предпросмотр",onLoad:()=>{p(!1)},onError:()=>{p(!1),g("Ошибка загрузки изображения. Проверьте URL.")},style:{display:u?"none":"block"}}),G.jsxs("div",{className:yn.imageNote,children:[G.jsx(Pe,{})," Изображение будет автоматически оптимизировано для быстрой загрузки"]})]})]}),v&&G.jsxs("div",{className:yn.pollContainer,children:[G.jsx("div",{className:yn.pollOptions,children:y.map(((e,t)=>G.jsx("div",{className:yn.pollOption,children:G.jsxs("div",{className:yn.pollOptionInputWrapper,children:[G.jsx("input",{type:"text",className:yn.pollOptionInput,value:e,onChange:e=>((e,t)=>{const a=[...y];a[e]=t,b(a)})(t,e.target.value),placeholder:"Вариант ".concat(t+1),disabled:_,style:{color:E,fontFamily:B}}),y.length>2&&G.jsx("button",{type:"button",onClick:()=>(e=>{if(y.length>2){const t=[...y];t.splice(e,1),b(t)}})(t),className:yn.removeOptionButton,disabled:_,children:G.jsx(Oe,{})})]})},t)))}),G.jsxs("button",{type:"button",onClick:()=>{y.length<6&&b([...y,""])},className:yn.addOptionButton,disabled:_||y.length>=6,children:[G.jsx(Be,{})," Добавить вариант"]})]}),w&&G.jsxs("div",{className:yn.stylingOptions,children:[G.jsxs("h4",{className:yn.stylingTitle,children:[G.jsx(De,{})," Настройки стиля"]}),G.jsxs("div",{className:yn.stylingGroup,children:[G.jsx("label",{children:"Шрифт:"}),G.jsx("select",{value:B,onChange:e=>O(e.target.value),className:yn.fontSelector,disabled:_,style:{fontFamily:B},children:pr.map((e=>G.jsx("option",{value:e.value,style:{fontFamily:e.value},children:e.name},e.value)))})]}),G.jsxs("div",{className:yn.stylingGroup,children:[G.jsx("label",{children:"Цвет заголовка:"}),G.jsxs("div",{className:yn.colorPickerContainer,children:[G.jsx("div",{className:yn.colorPreview,style:{backgroundColor:S},onClick:()=>T(!D),children:G.jsx(De,{className:yn.dropletIcon})}),D&&G.jsxs("div",{className:yn.colorPickerPopup,children:[G.jsx("div",{className:yn.colorPickerCover,onClick:()=>T(!1)}),G.jsx(Te,{color:S,onChange:C})]})]}),U(S)&&G.jsx("div",{className:yn.colorNote,children:"Примечание: тёмные цвета будут автоматически адаптированы в темной теме для лучшей читаемости."})]}),G.jsxs("div",{className:yn.stylingGroup,children:[G.jsx("label",{children:"Цвет текста поста:"}),G.jsxs("div",{className:yn.colorPickerContainer,children:[G.jsx("div",{className:yn.colorPreview,style:{backgroundColor:P},onClick:()=>L(!q),children:G.jsx(De,{className:yn.dropletIcon})}),q&&G.jsxs("div",{className:yn.colorPickerPopup,children:[G.jsx("div",{className:yn.colorPickerCover,onClick:()=>L(!1)}),G.jsx(Te,{color:P,onChange:A})]})]}),U(P)&&G.jsx("div",{className:yn.colorNote,children:"Примечание: тёмные цвета будут автоматически адаптированы в темной теме для лучшей читаемости."})]}),v&&G.jsxs("div",{className:yn.stylingGroup,children:[G.jsx("label",{children:"Цвет вариантов опроса:"}),G.jsxs("div",{className:yn.colorPickerContainer,children:[G.jsx("div",{className:yn.colorPreview,style:{backgroundColor:E},onClick:()=>z(!F),children:G.jsx(De,{className:yn.dropletIcon})}),F&&G.jsxs("div",{className:yn.colorPickerPopup,children:[G.jsx("div",{className:yn.colorPickerCover,onClick:()=>z(!1)}),G.jsx(Te,{color:E,onChange:I})]})]})]})]}),G.jsxs("div",{className:yn.formOptions,children:[G.jsxs("div",{className:yn.formToggles,children:[G.jsxs("label",{className:yn.optionToggle,children:[G.jsx("input",{type:"checkbox",checked:v,onChange:()=>{f(!v),b(["",""])},disabled:_}),G.jsx(Ae,{})," ",v?"Убрать опрос":"Добавить опрос"]}),G.jsxs("label",{className:yn.optionToggle,children:[G.jsx("input",{type:"checkbox",checked:w,onChange:()=>{N(!w)},disabled:_}),G.jsx(ce,{})," ",w?"Скрыть настройки":"Настройки стиля"]}),G.jsxs("label",{className:yn.optionToggle,children:[G.jsx("input",{type:"checkbox",checked:j,onChange:()=>k(!j),disabled:_}),G.jsx(ke,{})," ",j?"Открепить":"Закрепить"]})]}),G.jsx("button",{type:"submit",className:yn.submitButton,disabled:_,children:_?"Публикация...":G.jsxs(G.Fragment,{children:[G.jsx(Ce,{})," Опубликовать"]})})]})]})]})},xr=be(V.div)(B||(B=U(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(135deg, \n    rgba(33, 33, 38, 0.85) 0%, \n    rgba(68, 68, 77, 0.85) 100%\n  );\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  perspective: 1000px;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n  transform: translateZ(0);\n  isolation: isolate;\n  padding: 20px;\n"]))),gr=be(V.div)(O||(O=U(["\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  padding: 24px;\n  width: 100%;\n  max-width: 600px;\n  box-shadow: var(--modal-shadow, 0 8px 30px rgba(0, 0, 0, 0.2));\n  position: relative;\n  border: 1px solid var(--modal-border, var(--border));\n  transform-style: preserve-3d;\n  margin: auto;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n"]))),vr=be.div(D||(D=U(['\n  color: var(--text-primary);\n  margin-bottom: 24px;\n  overflow-y: auto;\n  max-height: calc(90vh - 150px);\n  padding-right: 10px;\n  font-feature-settings: "kern" 1, "liga" 1;\n  text-rendering: optimizeLegibility;\n  \n  h3 {\n    color: var(--text-primary);\n    margin: 20px 0 10px;\n    font-weight: 600;\n    font-size: 18px;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    \n    &:first-child {\n      margin-top: 0;\n    }\n  }\n  \n  p {\n    margin: 10px 0;\n    line-height: 1.6;\n    font-size: 15px;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n  \n  ul, ol {\n    margin: 10px 0;\n    padding-left: 20px;\n    font-size: 14px;\n    \n    li {\n      margin-bottom: 8px;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n    }\n  }\n  \n  .highlight {\n    background: lightgray;\n    padding: 2px 4px;\n    border-radius: 4px;\n    color: var(--accent);\n    font-weight: 500;\n  }\n  \n  @media (max-width: 480px) {\n    h3 {\n      font-size: 17px;\n    }\n    \n    p {\n      font-size: 14px;\n    }\n    \n    ul, ol {\n      font-size: 13px;\n    }\n  }\n']))),fr=be.div(T||(T=U(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 16px;\n"]))),yr=be.h2(q||(q=U(["\n  color: var(--text-primary);\n  font-size: 22px;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  \n  svg {\n    color: var(--accent);\n  }\n"]))),br=be.button(L||(L=U(["\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  background: none;\n  border: none;\n  color: var(--text-tertiary);\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: var(--bg-highlight);\n    color: var(--text-primary);\n  }\n  \n  svg {\n    width: 20px;\n    height: 20px;\n  }\n"]))),jr=be.div(F||(F=U(["\n  height: 1px;\n  background: var(--border);\n  margin: 16px 0;\n  width: 100%;\n"]))),kr={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}},wr={hidden:{opacity:0,y:20,rotateX:5},visible:{opacity:1,y:0,rotateX:0,transition:{duration:.4,ease:[.19,1,.22,1],delay:.1}},exit:{opacity:0,y:20,transition:{duration:.3}}},Nr=({isOpen:e,onClose:t})=>{const{theme:a}=W.useContext(zt);W.useEffect((()=>(document.body.style.overflow=e?"hidden":"",()=>{document.body.style.overflow=""})),[e]);return W.useEffect((()=>{const a=a=>{"Escape"===a.key&&e&&t()};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}}),[e,t]),e?$.createPortal(G.jsx(H,{mode:"wait",children:G.jsx(xr,{variants:kr,initial:"hidden",animate:"visible",exit:"exit",onClick:e=>{e.target===e.currentTarget&&t()},children:G.jsxs(gr,{variants:wr,initial:"hidden",animate:"visible",exit:"exit",onClick:e=>e.stopPropagation(),children:[G.jsx(br,{onClick:t,children:G.jsx(X,{size:20})}),G.jsx(fr,{children:G.jsxs(yr,{children:[G.jsx(qe,{size:24}),"Правила сообщества"]})}),G.jsx(jr,{}),G.jsxs(vr,{children:[G.jsx("h3",{children:"1. Общие правила"}),G.jsx("p",{children:"Добро пожаловать в наше сообщество! Эти правила помогут создать комфортную и безопасную среду для всех участников:"}),G.jsxs("ul",{children:[G.jsx("li",{children:"Относитесь к другим участникам с уважением"}),G.jsx("li",{children:"Запрещены оскорбления, унижения, травля и дискриминация"}),G.jsx("li",{children:"Уважайте личное пространство и частную информацию других пользователей"}),G.jsx("li",{children:"Не публикуйте контент, нарушающий законодательство РФ"})]}),G.jsx("h3",{children:"2. Публикации и комментарии"}),G.jsx("p",{children:"При создании постов и комментариев просим придерживаться следующих принципов:"}),G.jsxs("ul",{children:[G.jsxs("li",{children:["Используйте ",G.jsx("span",{className:"highlight",children:"понятный и уважительный язык"})]}),G.jsx("li",{children:"Не используйте нецензурную лексику и оскорбительные выражения"}),G.jsx("li",{children:"Не публикуйте спам, рекламу и другой нежелательный контент"}),G.jsx("li",{children:"Избегайте публикации недостоверной информации"}),G.jsx("li",{children:"Не публикуйте спойлеры"})]}),G.jsx("h3",{children:"3. Профиль и личные данные"}),G.jsx("p",{children:"Обеспечение безопасности ваших данных - наш приоритет:"}),G.jsxs("ul",{children:[G.jsx("li",{children:"Не публикуйте личную информацию других пользователей"}),G.jsx("li",{children:"Не размещайте в публичном доступе свои персональные данные"}),G.jsx("li",{children:"Выбирайте безопасные пароли и не передавайте их третьим лицам"})]}),G.jsx("h3",{children:"4. Нарушения и санкции"}),G.jsx("p",{children:"За нарушение правил могут последовать:"}),G.jsxs("ul",{children:[G.jsx("li",{children:"Предупреждение от модерации"}),G.jsx("li",{children:"Временная блокировка аккаунта"})]}),G.jsx("p",{children:"Правила могут обновляться и дополняться. Следите за изменениями в этом разделе."})]})]})})}),document.getElementById("modal-root")||document.body):null},Sr=()=>{var e;const{user:t,isAuthenticated:a}=Bs(),[s,n]=W.useState([]),[r,i]=W.useState(!0),[o,l]=W.useState(!1),[c,d]=W.useState(""),[m,u]=W.useState(0),[p,_]=W.useState(!1),[h,x]=W.useState(1),[g,v]=W.useState(!0),[f,y]=W.useState(0),b=W.useRef(),j=W.useRef(),k=a&&t&&("igoraor79@gmail.com"===t.email||(null==(e=t.perks)?void 0:e.includes("admin"))||"admin"===t.activePerk),w=async(e=1,t=!1)=>{try{1===e?i(!0):l(!0);const a=await dn.getPosts(e,10);if(!a||!a.posts)throw new Error("Не удалось получить данные постов");n(t?e=>[...e,...a.posts]:a.posts),v(a.hasMore),y(a.totalCount),d("")}catch(a){d("Не удалось загрузить посты. Попробуйте позже.")}finally{i(!1),l(!1)}},N=W.useCallback((()=>{if(!o&&g){const e=h+1;x(e),w(e,!0)}}),[h,o,g]);W.useEffect((()=>{b.current&&b.current.disconnect(),b.current=new IntersectionObserver((e=>{e[0].isIntersecting&&g&&!o&&!r&&N()}),{rootMargin:"100px",threshold:.1});const e=j.current;return e&&b.current.observe(e),()=>{e&&b.current.unobserve(e)}}),[N,g,o,r]),W.useEffect((()=>{x(1),w(1,!1)}),[m]);const S=(e,t,a)=>{n((t=>t.map((t=>t.id===e?{...t,likes_count:a}:t))))},C=async e=>{try{(await dn.deletePost(e)).success&&(n((t=>t.filter((t=>t.id!==e)))),y((e=>e-1)))}catch(t){d("Не удалось удалить пост. "+(t.message||"Попробуйте позже."))}},P=async(e,t,a)=>{const r=s.map((s=>s.id===e?{...s,is_pinned:t}:a&&s.id===a&&t?{...s,is_pinned:!1}:s)),i=r.filter((e=>e.is_pinned)),o=r.filter((e=>!e.is_pinned));i.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))),o.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))),n([...i,...o])},A=e=>{n((t=>t.map((t=>t.id===e.id?{...t,...e}:t))))};return G.jsxs("div",{className:yn.postsContainer,children:[G.jsxs("div",{className:yn.postsHeader,children:[G.jsxs("h2",{children:[G.jsx(Le,{})," Лента постов ",f>0&&"(".concat(s.length,"/").concat(f,")")]}),G.jsxs("div",{className:yn.headerButtons,children:[G.jsxs("button",{className:yn.rulesButton,onClick:()=>{_((e=>!e))},children:[G.jsx(Fe,{})," Правила"]}),G.jsxs("button",{className:yn.refreshButton,onClick:()=>{x(1),u((e=>e+1))},disabled:r,children:[r?G.jsx(ge,{}):G.jsx(ze,{})," Обновить"]})]})]}),k&&G.jsx(hr,{onPostCreated:e=>{n((t=>{if(e.is_pinned)return[e,...t];const a=t.filter((e=>e.is_pinned)),s=t.filter((e=>!e.is_pinned));return[...a,e,...s]})),y((e=>e+1))}}),c&&G.jsxs("div",{className:yn.errorMessage,children:[G.jsx(he,{})," ",c]}),r&&1===h?G.jsxs("div",{className:yn.loading,children:[G.jsx(ge,{})," Загрузка постов..."]}):s.length>0?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:yn.postsList,children:s.map((e=>G.jsx(ur,{post:e,onLikeToggle:S,onDelete:C,onPinChange:P,onUpdate:A},e.id)))}),G.jsxs("div",{ref:j,className:yn.loadMoreContainer,children:[o&&G.jsxs("div",{className:yn.loadMoreSpinner,children:[G.jsx(ge,{})," Загрузка старых постов..."]}),!g&&s.length>=f&&G.jsx("div",{className:yn.noMorePosts,children:"Вы загрузили все посты"})]})]}):G.jsxs("div",{className:yn.noPosts,children:[G.jsx(Me,{}),G.jsxs("p",{children:["Постов пока нет. ",k?"Создайте первый пост!":"Скоро здесь появится интересный контент!"]})]}),G.jsx(Nr,{isOpen:p,onClose:()=>_(!1)})]})},Cr={adminPanel:"_adminPanel_guy5k_2",title:"_title_guy5k_23",error:"_error_guy5k_38",fadeIn:"_fadeIn_guy5k_1",message:"_message_guy5k_51",success:"_success_guy5k_60",info:"_info_guy5k_65",content:"_content_guy5k_86",usersSection:"_usersSection_guy5k_98",editSection:"_editSection_guy5k_98",loader:"_loader_guy5k_118",spin:"_spin_guy5k_1",usersList:"_usersList_guy5k_140",userItem:"_userItem_guy5k_163",selected:"_selected_guy5k_174",userAvatar:"_userAvatar_guy5k_182",noAvatar:"_noAvatar_guy5k_197",userInfo:"_userInfo_guy5k_210",userName:"_userName_guy5k_218",userEmail:"_userEmail_guy5k_249",userPerks:"_userPerks_guy5k_255",perk:"_perk_guy5k_261",user:"_user_guy5k_98",early_user:"_early_user_guy5k_276",sponsor:"_sponsor_guy5k_280",admin:"_admin_guy5k_2",editForm:"_editForm_guy5k_305",formGroup:"_formGroup_guy5k_314",perksOptions:"_perksOptions_guy5k_358",perkOption:"_perkOption_guy5k_369",basePerk:"_basePerk_guy5k_389",baseLabel:"_baseLabel_guy5k_399",baseNote:"_baseNote_guy5k_402",protectedUser:"_protectedUser_guy5k_409",selectedUser:"_selectedUser_guy5k_437",editUserButton:"_editUserButton_guy5k_441",formActions:"_formActions_guy5k_463",cancelButton:"_cancelButton_guy5k_470",saveButton:"_saveButton_guy5k_471",noUserSelected:"_noUserSelected_guy5k_517",emptyList:"_emptyList_guy5k_541",userActions:"_userActions_guy5k_547",banUserButton:"_banUserButton_guy5k_553",bannedUser:"_bannedUser_guy5k_574",modalOverlay:"_modalOverlay_guy5k_585",banDialog:"_banDialog_guy5k_611",slideUp:"_slideUp_guy5k_1",banDialogHeader:"_banDialogHeader_guy5k_657",closeButton:"_closeButton_guy5k_673",banDialogContent:"_banDialogContent_guy5k_701",currentBanInfo:"_currentBanInfo_guy5k_705",banDialogActions:"_banDialogActions_guy5k_769",banButton:"_banButton_guy5k_806",unbanButton:"_unbanButton_guy5k_822",eventsSection:"_eventsSection_guy5k_863",eventsList:"_eventsList_guy5k_886",eventItem:"_eventItem_guy5k_892",eventInfo:"_eventInfo_guy5k_908",eventToggle:"_eventToggle_guy5k_930",active:"_active_guy5k_951"},Pr=()=>{var e;const{user:t,refreshUser:a}=Bs(),s=ie(),[n,r]=W.useState([]),[i,o]=W.useState(!0),[l,c]=W.useState(null),[d,m]=W.useState(null),[u,p]=W.useState(!1),[_,h]=W.useState({displayName:"",email:"",password:"",perks:[]}),[x,g]=W.useState(null),v=W.useRef(null),[f,y]=W.useState(!1),[b,j]=W.useState(null),[k,w]=W.useState(""),[N,S]=W.useState(""),[C,P]=W.useState(!1),[A,E]=W.useState({earlyUserPromotion:!1}),[I,B]=W.useState(!1),O=async()=>{try{o(!0);const{data:t,error:a}=await vs.from("profiles").select("*").order("created_at",{ascending:!1});if(a)return c("Ошибка загрузки профилей пользователей"),o(!1),[];if(!t||0===t.length)return r([]),o(!1),[];let s=[];try{const{data:e,error:t}=await vs.rpc("admin_get_users");!t&&e&&(s=e)}catch(e){}let n=t.map((e=>{const t=s.find((t=>t.id===e.id)),a=(null==t?void 0:t.raw_user_meta_data)||{};return{id:e.id,displayName:e.display_name||a.display_name||"Пользователь",email:(null==t?void 0:t.email)||e.email||"Нет email",perks:e.perks||["user"],activePerk:e.active_perk||"user",avatar:e.avatar||a.avatar,createdAt:(null==t?void 0:t.created_at)||e.created_at||(new Date).toISOString(),is_banned:e.is_banned||!1,ban_reason:e.ban_reason,ban_end_at:e.ban_end_at,ban_admin_id:e.ban_admin_id,ban_admin_name:e.ban_admin_name}}));return n=await(async e=>{const t=new Date,a=[];for(const s of e)s.is_banned&&s.ban_end_at&&new Date(s.ban_end_at)<t&&(a.push(vs.from("profiles").update({is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_id:null,ban_admin_name:null}).eq("id",s.id)),a.push(vs.from("user_bans").update({is_active:!1}).eq("user_id",s.id).eq("is_active",!0)),s.is_banned=!1,s.ban_reason=null,s.ban_end_at=null,s.ban_admin_id=null,s.ban_admin_name=null);return a.length>0&&await Promise.all(a),e})(n),r(n),c(null),n}catch(t){return c(t.message),[]}finally{o(!1)}};W.useEffect((()=>{O();const e=()=>{"visible"===document.visibilityState&&O()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[]),W.useEffect((()=>{var e;if(null===t)return;t&&("igoraor79@gmail.com"===t.email||(null==(e=t.perks)?void 0:e.includes("admin"))||"admin"===t.activePerk)||s("/")}),[t,s]),W.useEffect((()=>{(async()=>{try{B(!0);try{const{data:e,error:t}=await vs.from("site_settings").select("*").single();if(t){const{error:e}=await vs.rpc("create_site_settings_if_not_exists");if(e)return void E({earlyUserPromotion:!1});const{data:t,error:a}=await vs.from("site_settings").insert({early_user_promotion:!1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).select("*").single();E(a?{earlyUserPromotion:!1}:{earlyUserPromotion:t.early_user_promotion||!1})}else E({earlyUserPromotion:e.early_user_promotion||!1})}catch(e){E({earlyUserPromotion:!1})}}finally{B(!1)}})()}),[]);const D=e=>{m(e),h({displayName:e.displayName||"",email:e.email||"",password:"",perks:e.perks||["user"]}),p(!0)},T=e=>{const{name:t,value:a}=e.target;h({..._,[t]:a})},q=e=>{if("user"===e)return;const t=_.perks.includes(e)?_.perks.filter((t=>t!==e)):[..._.perks,e];t.includes("user")||t.push("user"),h({..._,perks:t})},L=t&&("igoraor79@gmail.com"===t.email||(null==(e=t.perks)?void 0:e.includes("admin"))||"admin"===t.activePerk);W.useEffect((()=>()=>{v.current&&clearTimeout(v.current)}),[]);const F=(e,t=3e3)=>{v.current&&clearTimeout(v.current),g(e),v.current=setTimeout((()=>{g(null)}),t)},z=async e=>{if(e&&e.preventDefault(),b&&k.trim()&&N)try{P(!0);let e=null;if("permanent"!==N)switch(e=new Date,N){case"30m":e.setMinutes(e.getMinutes()+30);break;case"2h":e.setHours(e.getHours()+2);break;case"6h":e.setHours(e.getHours()+6);break;case"12h":e.setHours(e.getHours()+12);break;case"1d":e.setDate(e.getDate()+1);break;case"3d":e.setDate(e.getDate()+3);break;case"1w":case"7d":e.setDate(e.getDate()+7);break;case"24h":e.setHours(e.getHours()+24);break;default:e=null}const a={user_id:b.id,admin_id:t.id,admin_name:t.displayName,reason:k.trim(),created_at:(new Date).toISOString(),end_at:e?e.toISOString():null,is_active:!0,ban_type:N},{error:s}=await vs.from("user_bans").insert(a);if(s)throw new Error("Ошибка при сохранении бана: ".concat(s.message));const{data:n,error:r}=await vs.from("user_bans").select("*").eq("user_id",b.id).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1);r||n&&n.length;const i={is_banned:!0,ban_reason:k.trim(),ban_end_at:e?e.toISOString():null,ban_admin_id:t.id,ban_admin_name:t.displayName},{error:o}=await vs.from("profiles").update(i).eq("id",b.id),{data:l,error:c}=await vs.from("profiles").select("*").eq("id",b.id).single();await O(),F({type:"success",text:"Пользователь ".concat(b.displayName," успешно заблокирован")}),y(!1),w(""),S(""),j(null)}catch(a){F({type:"error",text:"Ошибка при блокировке: ".concat(a.message)})}finally{P(!1)}},M=async e=>{if(e)try{P(!0);const t=n.find((t=>t.id===e)),{error:a}=await vs.from("user_bans").update({is_active:!1}).eq("user_id",e).eq("is_active",!0);if(a)throw new Error("Ошибка при обновлении блокировки: ".concat(a.message));const s={is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_id:null,ban_admin_name:null},{error:r}=await vs.from("profiles").update(s).eq("id",e);if(r)throw new Error("Ошибка при обновлении профиля: ".concat(r.message));const{data:i,error:o}=await vs.from("profiles").select("*").eq("id",e).single();await O(),F({type:"success",text:"Пользователь ".concat((null==t?void 0:t.displayName)||"выбранный"," успешно разблокирован")}),f&&(y(!1),j(null))}catch(t){F({type:"error",text:"Ошибка при разблокировке: ".concat(t.message)})}finally{P(!1)}};if(!t||!L)return null;return G.jsxs("div",{className:Cr.adminPanel,children:[G.jsxs("h1",{className:Cr.title,children:[G.jsx(ce,{size:24})," Панель администратора"]}),l&&G.jsxs("div",{className:Cr.error,children:[G.jsx(he,{size:20,style:{marginRight:"10px"}})," ",l]}),x&&G.jsxs("div",{className:"".concat(Cr.message," ").concat(Cr[x.type]),children:["success"===x.type&&G.jsx(xe,{size:20,style:{marginRight:"10px"}}),"error"===x.type&&G.jsx(he,{size:20,style:{marginRight:"10px"}}),"info"===x.type&&G.jsx(K,{size:20,style:{marginRight:"10px"}}),x.text]}),G.jsxs("div",{className:Cr.eventsSection,children:[G.jsxs("h2",{children:[G.jsx(pe,{size:18})," События сайта"]}),I?G.jsxs("div",{className:Cr.loader,children:[G.jsx(ge,{size:24})," Загрузка настроек событий..."]}):G.jsx("div",{className:Cr.eventsList,children:G.jsxs("div",{className:Cr.eventItem,children:[G.jsxs("div",{className:Cr.eventInfo,children:[G.jsx("h3",{children:'Привилегия "Ранний пользователь"'}),G.jsx("p",{children:'Автоматически выдает привилегию "Ранний пользователь" всем новым пользователям при регистрации.'}),G.jsxs("p",{children:[G.jsx("strong",{children:"Статус:"})," ",A.earlyUserPromotion?"Активно":"Неактивно"]})]}),G.jsxs("button",{className:"".concat(Cr.eventToggle," ").concat(A.earlyUserPromotion?Cr.active:""),onClick:()=>(async e=>{var a;try{if(!t||"igoraor79@gmail.com"!==t.email&&!(null==(a=t.perks)?void 0:a.includes("admin"))&&"admin"!==t.activePerk)return void F({type:"error",text:"Только администраторы могут управлять событиями сайта"});B(!0);const n=!A[e];let r="";"earlyUserPromotion"===e&&(r="early_user_promotion");const{error:i}=await vs.from("site_settings").update({[r]:n,updated_at:(new Date).toISOString()}).eq("id",(await vs.from("site_settings").select("id").single()).data.id);if(i)try{await vs.rpc("create_site_settings_if_not_exists");const{error:e}=await vs.from("site_settings").update({[r]:n,updated_at:(new Date).toISOString()}).eq("id",(await vs.from("site_settings").select("id").single()).data.id);if(e)throw new Error("Не удалось обновить настройку: ".concat(e.message))}catch(s){throw new Error("Не удалось создать или обновить таблицу настроек: ".concat(s.message))}E((t=>({...t,[e]:n}))),F({type:"success",text:'Событие "'.concat("earlyUserPromotion"===e?"Ранний пользователь":e,'" ').concat(n?"включено":"отключено")})}catch(n){F({type:"error",text:n.message})}finally{B(!1)}})("earlyUserPromotion"),disabled:I,children:[A.earlyUserPromotion?G.jsx(Ue,{size:24}):G.jsx(Re,{size:24}),A.earlyUserPromotion?"Выключить":"Включить"]})]})})]}),G.jsxs("div",{className:Cr.content,children:[G.jsxs("div",{className:Cr.usersSection,children:[G.jsxs("h2",{children:[G.jsx(Ge,{size:18})," Список пользователей"]}),i?G.jsxs("div",{className:Cr.loader,children:[G.jsx(ge,{size:24})," Загрузка пользователей..."]}):G.jsx("div",{className:Cr.usersList,children:0===n.length?G.jsx("div",{className:Cr.emptyList,children:"Пользователи не найдены"}):G.jsx("table",{children:G.jsx("tbody",{children:n.map((e=>G.jsxs("tr",{className:d&&d.id===e.id?Cr.selectedUser:"",onClick:()=>{"igoraor79@gmail.com"!==e.email||"igoraor79@gmail.com"===t.email?D(e):F({type:"warning",text:"Этот пользователь защищен от редактирования другими администраторами"})},children:[G.jsx("td",{children:G.jsx("div",{className:Cr.userAvatar,children:G.jsx(pt,{avatar:e.avatar||rt,alt:e.displayName,size:60})})}),G.jsx("td",{children:G.jsxs("div",{className:Cr.userInfo,children:[G.jsx("span",{className:Cr.userName,onClick:t=>{t.stopPropagation(),s("/profile/".concat(e.id))},style:{cursor:"pointer",textDecoration:"underline",color:"var(--accent)"},title:"Перейти к профилю пользователя",children:e.displayName}),G.jsx("span",{className:Cr.userEmail,children:e.email}),"igoraor79@gmail.com"===e.email&&G.jsx("span",{className:Cr.protectedUser,children:"Защищенный аккаунт"}),e.is_banned&&G.jsx("span",{className:Cr.bannedUser,children:"Заблокирован"})]})}),G.jsx("td",{children:e.activePerk&&G.jsxs("span",{className:"".concat(Cr.perk," ").concat(Cr[e.activePerk]),children:["early_user"===e.activePerk&&"Ранний пользователь","sponsor"===e.activePerk&&"Спонсор","admin"===e.activePerk&&"Администратор","user"===e.activePerk&&"Пользователь"]})}),G.jsx("td",{children:G.jsxs("div",{className:Cr.userActions,children:[G.jsx("button",{className:Cr.editUserButton,onClick:a=>{a.stopPropagation(),"igoraor79@gmail.com"!==e.email||"igoraor79@gmail.com"===t.email?D(e):F({type:"warning",text:"Этот пользователь защищен от редактирования другими администраторами"})},disabled:"igoraor79@gmail.com"===e.email&&"igoraor79@gmail.com"!==t.email,children:G.jsx(ue,{size:16})}),G.jsx("button",{className:Cr.banUserButton,onClick:t=>{t.stopPropagation(),"igoraor79@gmail.com"!==e.email?e.is_banned?M(e.id):(j(e),y(!0)):F({type:"warning",text:"Этот пользователь защищен от блокировки"})},disabled:"igoraor79@gmail.com"===e.email,title:e.is_banned?"Разблокировать пользователя":"Заблокировать пользователя",children:G.jsx(fe,{size:16,color:e.is_banned?"#e74c3c":"#666"})})]})})]},e.id)))})})})]}),G.jsxs("div",{className:Cr.editSection,children:[G.jsxs("h2",{children:[G.jsx(ue,{size:18})," Редактирование профиля"]}),d&&u?G.jsxs("form",{className:Cr.editForm,onSubmit:async e=>{e.preventDefault();try{o(!0);let e=!1;if(_.displayName!==d.displayName){const{error:t}=await vs.from("profiles").update({display_name:_.displayName}).eq("id",d.id);if(t)throw new Error("Ошибка при обновлении имени: ".concat(t.message));e=!0}if(JSON.stringify(_.perks)!==JSON.stringify(d.perks)&&(await(async(e,t)=>{try{const{data:s,error:n}=await vs.from("profiles").select("*").eq("id",e).single();if(n)throw new Error("Не удалось получить профиль: ".concat(n.message));let r=["user"];t.includes("early_user")&&r.push("early_user"),t.includes("sponsor")&&r.push("sponsor"),t.includes("admin")&&r.push("admin");let i=s.active_perk;if(r.includes(i)||(i=r[0]),(await vs.from("profiles").update({perks:r,active_perk:i,updated_at:(new Date).toISOString()}).eq("id",e)).error)try{const{error:t}=await vs.rpc("admin_update_privileges",{user_id:e,privileges:r});if(t)throw new Error("Ошибка при обновлении привилегий через RPC: ".concat(t.message));{const{error:t}=await vs.from("profiles").update({active_perk:i}).eq("id",e)}}catch(a){const t=JSON.stringify(r),{error:s}=await vs.from("profiles").update({raw_perks:t,special_update:!0,updated_at:(new Date).toISOString()}).eq("id",e);if(s)throw s}const{data:o,error:l}=await vs.from("profiles").select("*").eq("id",e).single();return l||(JSON.stringify(o.perks.sort()),JSON.stringify(r.sort())),!0}catch(s){throw s}})(d.id,_.perks),e=!0),!e)return F({type:"info",text:"Нет изменений для сохранения"}),void o(!1);await O(),t&&t.id===d.id&&a(),F({type:"success",text:"Профиль пользователя успешно обновлен"}),setTimeout((()=>{p(!1),m(null)}),2e3)}catch(s){F({type:"error",text:s.message})}finally{o(!1)}},children:[G.jsxs("div",{className:Cr.formGroup,children:[G.jsxs("label",{htmlFor:"displayName",children:[G.jsx(ee,{size:18})," Отображаемое имя:"]}),G.jsx("input",{type:"text",id:"displayName",name:"displayName",value:_.displayName,onChange:T,placeholder:"Введите имя пользователя"})]}),G.jsxs("div",{className:Cr.formGroup,children:[G.jsxs("label",{htmlFor:"email",children:[G.jsx(ae,{size:18})," Email:"]}),G.jsx("input",{type:"email",id:"email",name:"email",value:_.email,onChange:T,placeholder:"Введите email"})]}),G.jsxs("div",{className:Cr.formGroup,children:[G.jsxs("label",{htmlFor:"password",children:[G.jsx(He,{size:18})," Пароль (оставьте пустым, чтобы не менять):"]}),G.jsx("input",{type:"password",id:"password",name:"password",value:_.password,onChange:T,placeholder:"Новый пароль"})]}),G.jsxs("div",{className:Cr.formGroup,children:[G.jsxs("label",{children:[G.jsx(_e,{size:18})," Привилегии:"]}),G.jsxs("div",{className:Cr.perksOptions,children:[G.jsxs("div",{className:"".concat(Cr.perkOption," ").concat(Cr.basePerk),children:[G.jsx("input",{type:"checkbox",id:"perk-user",checked:!0,disabled:!0,readOnly:!0}),G.jsxs("label",{htmlFor:"perk-user",className:Cr.baseLabel,children:["Пользователь ",G.jsx("span",{className:Cr.baseNote,children:"(базовая привилегия)"})]})]}),G.jsxs("div",{className:Cr.perkOption,children:[G.jsx("input",{type:"checkbox",id:"perk-early_user",checked:_.perks.includes("early_user"),onChange:()=>q("early_user")}),G.jsx("label",{htmlFor:"perk-early_user",children:"Ранний пользователь"})]}),G.jsxs("div",{className:Cr.perkOption,children:[G.jsx("input",{type:"checkbox",id:"perk-sponsor",checked:_.perks.includes("sponsor"),onChange:()=>q("sponsor")}),G.jsx("label",{htmlFor:"perk-sponsor",children:"Спонсор"})]}),G.jsxs("div",{className:Cr.perkOption,children:[G.jsx("input",{type:"checkbox",id:"perk-admin",checked:_.perks.includes("admin"),onChange:()=>q("admin")}),G.jsx("label",{htmlFor:"perk-admin",children:"Администратор"})]})]})]}),G.jsxs("div",{className:Cr.formActions,children:[G.jsxs("button",{type:"button",className:Cr.cancelButton,onClick:()=>p(!1),children:[G.jsx(X,{size:18})," Отмена"]}),G.jsxs("button",{type:"submit",className:Cr.saveButton,disabled:i,children:[i?G.jsx(ge,{size:18}):G.jsx(ye,{size:18})," Сохранить"]})]})]}):G.jsx("div",{className:Cr.noUserSelected,children:i?G.jsxs("div",{className:Cr.loader,children:[G.jsx(ge,{size:24})," Загрузка данных..."]}):G.jsxs("p",{children:[G.jsx(ee,{size:64}),G.jsx("br",{}),"Выберите пользователя из списка слева, чтобы редактировать"]})})]})]}),f?$.createPortal(G.jsx("div",{className:Cr.modalOverlay,children:G.jsxs("div",{className:Cr.banDialog,children:[G.jsxs("div",{className:Cr.banDialogHeader,children:[G.jsx("h3",{children:b.is_banned?"Управление блокировкой":"Блокировка пользователя"}),G.jsx("button",{className:Cr.closeButton,onClick:()=>y(!1),children:G.jsx(X,{})})]}),G.jsx("div",{className:Cr.banDialogContent,children:b.is_banned?G.jsxs("div",{className:Cr.currentBanInfo,children:[G.jsxs("p",{children:["Пользователь ",G.jsx("strong",{children:b.displayName})," в настоящее время заблокирован."]}),G.jsxs("button",{className:Cr.unbanButton,onClick:()=>M(b.id),disabled:C,children:[C?G.jsx(ge,{size:16}):G.jsx(ve,{size:16})," Разблокировать пользователя"]})]}):G.jsxs("form",{onSubmit:z,children:[G.jsxs("div",{className:Cr.formGroup,children:[G.jsx("label",{htmlFor:"banReason",children:"Причина блокировки:"}),G.jsx("textarea",{id:"banReason",value:k,onChange:e=>w(e.target.value),placeholder:"Укажите причину блокировки пользователя",rows:4,required:!0})]}),G.jsxs("div",{className:Cr.formGroup,children:[G.jsx("label",{htmlFor:"banDuration",children:"Длительность блокировки:"}),G.jsxs("select",{id:"banDuration",value:N,onChange:e=>S(e.target.value),required:!0,children:[G.jsx("option",{value:"",children:"Выберите длительность"}),G.jsx("option",{value:"30m",children:"30 минут"}),G.jsx("option",{value:"2h",children:"2 часа"}),G.jsx("option",{value:"6h",children:"6 часов"}),G.jsx("option",{value:"24h",children:"24 часа"}),G.jsx("option",{value:"7d",children:"7 дней"})]})]}),G.jsxs("div",{className:Cr.banDialogActions,children:[G.jsxs("button",{type:"button",className:Cr.cancelButton,onClick:()=>y(!1),disabled:C,children:[G.jsx(X,{size:16})," Отмена"]}),G.jsxs("button",{type:"submit",className:Cr.banButton,disabled:!k.trim()||!N||C,children:[C?G.jsx(ge,{size:16}):G.jsx(fe,{size:16})," Заблокировать"]})]})]})})]})}),document.getElementById("modal-root")||document.body):null]})},Ar={resetContainer:"_resetContainer_1iy2b_1",resetCard:"_resetCard_1iy2b_10",resetForm:"_resetForm_1iy2b_24",formGroup:"_formGroup_1iy2b_29",resetButton:"_resetButton_1iy2b_59",message:"_message_1iy2b_80",success:"_success_1iy2b_86",info:"_info_1iy2b_91",error:"_error_1iy2b_96"},Er=()=>{const[e,t]=W.useState(""),[a,s]=W.useState(""),[n,r]=W.useState(!1),[i,o]=W.useState(null),[l,c]=W.useState(""),d=ie();W.useEffect((()=>{const e=window.location.hash.substring(1).split("&").reduce(((e,t)=>{const[a,s]=t.split("=");return e[a]=s,e}),{});if(e.access_token){c(e.access_token);(async()=>{try{const{data:t,error:a}=await vs.auth.setSession({access_token:e.access_token,refresh_token:e.refresh_token||""});o(a?{type:"error",text:"Ошибка при аутентификации: "+a.message}:{type:"info",text:"Введите новый пароль"})}catch(t){}})()}else o({type:"error",text:"Ссылка недействительна. Запросите новую ссылку для сброса пароля."})}),[]);return G.jsx("div",{className:Ar.resetContainer,children:G.jsxs("div",{className:Ar.resetCard,children:[G.jsx("h2",{children:"Сброс пароля"}),i&&G.jsx("div",{className:"".concat(Ar.message," ").concat(Ar[i.type]),children:i.text}),G.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e===a)if(e.length<6)o({type:"error",text:"Пароль должен содержать не менее 6 символов"});else try{r(!0),o({type:"info",text:"Обновление пароля..."});const{data:t,error:a}=await vs.auth.updateUser({password:e});if(a)throw a;await vs.auth.signOut(),o({type:"success",text:"Пароль успешно обновлен! Переход на страницу входа..."}),setTimeout((()=>{d("/")}),3e3)}catch(s){o({type:"error",text:s.message||"Произошла ошибка при обновлении пароля"})}finally{r(!1)}else o({type:"error",text:"Пароли не совпадают"})},className:Ar.resetForm,children:[G.jsxs("div",{className:Ar.formGroup,children:[G.jsx("label",{htmlFor:"password",children:"Новый пароль"}),G.jsx("input",{type:"password",id:"password",value:e,onChange:e=>t(e.target.value),required:!0,disabled:n||!l})]}),G.jsxs("div",{className:Ar.formGroup,children:[G.jsx("label",{htmlFor:"confirmPassword",children:"Подтвердите пароль"}),G.jsx("input",{type:"password",id:"confirmPassword",value:a,onChange:e=>s(e.target.value),required:!0,disabled:n||!l})]}),G.jsx("button",{type:"submit",className:Ar.resetButton,disabled:n||!l,children:n?"Обновление...":"Обновить пароль"})]})]})})},Ir="_pageContainer_1uaky_1",Br="_formContainer_1uaky_9",Or="_title_1uaky_30",Dr="_errorMessage_1uaky_57",Tr="_successMessage_1uaky_72",qr="_formGroup_1uaky_87",Lr="_inputIcon_1uaky_98",Fr="_inputWrapper_1uaky_103",zr="_inputIconInside_1uaky_107",Mr="_disabledInput_1uaky_150",Ur="_textarea_1uaky_158",Rr="_dropArea_1uaky_191",Gr="_highlight_1uaky_200",Hr="_dropHint_1uaky_208",Vr="_browseButton_1uaky_227",Wr="_imagePreviewContainer_1uaky_241",Jr="_imagePreview_1uaky_241",$r="_removeImageButton_1uaky_261",Yr="_submitButton_1uaky_283",Zr="_buttonIcon_1uaky_301",Qr=()=>{const{user:e}=Bs(),[t,a]=W.useState(""),[s,n]=W.useState([]),[r,i]=W.useState(!1),[o,l]=W.useState(!1),[c,d]=W.useState(""),m=W.useRef(null),u=W.useRef(null),p=W.useRef(null);W.useEffect((()=>{const e=e=>{if(e.clipboardData&&e.clipboardData.items){const t=e.clipboardData.items;for(let a=0;a<t.length;a++)if(-1!==t[a].type.indexOf("image")){const s=t[a].getAsFile();_(s),e.preventDefault()}}},t=p.current,a=()=>t.classList.add(Gr),s=()=>t.classList.remove(Gr),n=e=>{if(e.preventDefault(),e.stopPropagation(),s(),e.dataTransfer.files&&e.dataTransfer.files.length>0){Array.from(e.dataTransfer.files).filter((e=>e.type.startsWith("image/"))).forEach((e=>{_(e)}))}};return document.addEventListener("paste",e),t.addEventListener("dragenter",a),t.addEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation(),a()})),t.addEventListener("dragleave",s),t.addEventListener("drop",n),()=>{document.removeEventListener("paste",e),t.removeEventListener("dragenter",a),t.removeEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation()})),t.removeEventListener("dragleave",s),t.removeEventListener("drop",n)}}),[]);const _=e=>{if(s.length>=5)return void d("Максимальное количество изображений: 5");const t=URL.createObjectURL(e);n((a=>[...a,{file:e,url:t}])),d("")},h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}};return G.jsx("div",{className:Ir,children:G.jsxs(V.div,{className:Br,variants:{hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.1,duration:.3}}},initial:"hidden",animate:"visible",children:[G.jsx(V.h1,{className:Or,variants:h,children:"Обратная связь"}),c&&G.jsx(V.div,{className:Dr,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:c}),o&&G.jsx(V.div,{className:Tr,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:"Ваше сообщение успешно отправлено! Спасибо за обратную связь."}),G.jsxs("form",{ref:u,onSubmit:async r=>{if(r.preventDefault(),e&&e.email)if(t.trim())try{i(!0),d("");const r=new FormData;r.append("message",t),r.append("email",e.email),r.append("displayName",e.displayName||"Пользователь"),s.forEach((e=>{r.append("images",e.file)}));const o=await fetch("https://scform.onrender.com/api/feedback",{method:"POST",body:r}),c=await o.json().catch((()=>({})));if(!o.ok)throw new Error(c.error||"Произошла ошибка при отправке");a(""),n([]),l(!0),setTimeout((()=>{l(!1)}),5e3)}catch(o){d("Не удалось отправить сообщение: ".concat(o.message,". Пожалуйста, попробуйте позже или свяжитесь напрямую: igoraor79@gmail.com."))}finally{i(!1)}else d("Пожалуйста, введите текст сообщения");else d("Необходимо войти в аккаунт для отправки обратной связи")},children:[G.jsxs(V.div,{className:qr,variants:h,children:[G.jsxs("label",{children:[G.jsx(ae,{className:Lr})," Email:"]}),G.jsxs("div",{className:Fr,children:[G.jsx(ae,{className:zr}),G.jsx("input",{type:"email",value:(null==e?void 0:e.email)||"Пожалуйста, войдите в аккаунт",disabled:!0,readOnly:!0,className:Mr})]})]}),G.jsxs(V.div,{className:qr,variants:h,children:[G.jsx("label",{children:"Суть запроса:"}),G.jsx("textarea",{value:t,onChange:e=>a(e.target.value),disabled:r,placeholder:"Опишите ваш запрос или предложение детально...",rows:6,className:Ur,required:!0})]}),G.jsxs(V.div,{className:qr,variants:h,children:[G.jsxs("label",{children:[G.jsx(Ve,{className:Lr})," Вложения:"]}),G.jsxs("div",{ref:p,className:Rr,children:[G.jsxs("p",{children:["Перетащите изображения сюда или ",G.jsx("button",{type:"button",className:Vr,onClick:()=>m.current.click(),children:"выберите файлы"})]}),G.jsx("p",{className:Hr,children:"Вы также можете вставить изображения из буфера обмена (Ctrl+V)"}),G.jsx("input",{type:"file",ref:m,onChange:e=>{if(e.target.files&&e.target.files.length>0){Array.from(e.target.files).filter((e=>e.type.startsWith("image/"))).forEach((e=>{_(e)}))}},style:{display:"none"},accept:"image/*",multiple:!0})]}),s.length>0&&G.jsx(V.div,{className:Wr,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:s.map(((e,t)=>G.jsxs("div",{className:Jr,children:[G.jsx("img",{src:e.url,alt:"Прикрепленное изображение ".concat(t+1)}),G.jsx("button",{type:"button",className:$r,onClick:()=>(e=>{n((t=>{const a=[...t];return URL.revokeObjectURL(a[e].url),a.splice(e,1),a}))})(t),children:G.jsx(X,{})})]},t)))})]}),G.jsx(V.button,{type:"submit",className:Yr,disabled:r||!(null==e?void 0:e.email),variants:{hover:{scale:1.03,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.2)"},tap:{scale:.98}},whileHover:"hover",whileTap:"tap",children:r?"Отправка...":G.jsxs(G.Fragment,{children:[G.jsx(Ce,{className:Zr}),G.jsx("span",{children:"Отправить"})]})})]})]})})};function Xr(){var e;const{user:t}=Bs(),[a,s]=W.useState(!1);t&&("igoraor79@gmail.com"===t.email||(null==(e=t.perks)?void 0:e.includes("admin"))||t.activePerk),W.useEffect((()=>{const e=e=>{const t=document.querySelector(".".concat(Va)),n=document.querySelector(".".concat(Ra));a&&t&&n&&!t.contains(e.target)&&!n.contains(e.target)&&s(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[a]);const n=We();W.useEffect((()=>{a&&s(!1)}),[n.pathname]);const r=()=>{s(!1)};return G.jsxs("div",{className:Oa,children:[G.jsxs("header",{className:Da,children:[G.jsx(Y,{to:"/",children:G.jsx(Ya,{src:"sclogo",alt:"Логотип"})}),G.jsx("h1",{className:La,children:"soul cycle"})]}),G.jsxs("nav",{className:Fa,children:[G.jsxs("ul",{className:za,children:[G.jsx("li",{className:Ma,children:G.jsx(Y,{to:"/",children:"Главная"})}),G.jsx("li",{className:Ma,children:G.jsx(Y,{to:"/characters",children:"Персонажи"})}),G.jsx("li",{className:Ma,children:G.jsx(Y,{to:"/about",children:"О нас"})})]}),G.jsxs("div",{className:"".concat(Ra," ").concat(a?Ha:""),onClick:e=>{e.stopPropagation(),s(!a)},children:[G.jsx("div",{className:Ga}),G.jsx("div",{className:Ga}),G.jsx("div",{className:Ga})]}),G.jsx("div",{className:"".concat(Va," ").concat(a?Ha:""),children:G.jsxs("ul",{className:Wa,children:[G.jsx("li",{className:Ja,children:G.jsx(Y,{to:"/",onClick:r,children:"Главная"})}),G.jsx("li",{className:Ja,children:G.jsx(Y,{to:"/characters",onClick:r,children:"Персонажи"})}),G.jsx("li",{className:Ja,children:G.jsx(Y,{to:"/about",onClick:r,children:"О нас"})})]})}),G.jsx("div",{className:Ua,children:G.jsx(Xs,{})})]}),G.jsx(Kr,{})]})}function Kr(){var e;const t=We(),{user:a}=Bs();return a&&("igoraor79@gmail.com"===a.email||(null==(e=a.perks)?void 0:e.includes("admin"))||a.activePerk),G.jsx(H,{mode:"wait",children:G.jsxs(Je,{location:t,children:[G.jsx($e,{path:"/",element:G.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:G.jsx("div",{className:$a,children:G.jsx(Sr,{})})})}),G.jsx($e,{path:"/characters",element:G.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:G.jsx(sa,{})})}),G.jsx($e,{path:"/about",element:G.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:G.jsx(Ba,{})})}),G.jsx($e,{path:"/profile",element:G.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:G.jsx(cn,{})})}),G.jsx($e,{path:"/profile/:userId",element:G.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:G.jsx(cn,{})})}),G.jsx($e,{path:"/reset-password",element:G.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:G.jsx(Er,{})})}),G.jsx($e,{path:"/admin",element:G.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:G.jsx(Pr,{})})}),G.jsx($e,{path:"/feedback",element:G.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:G.jsx(Qr,{})})})]},t.pathname)})}const ei={v:"4.8.0",meta:{g:"LottieFiles AE 1.0.0",a:"Bas Milius",k:"Meteocons, Weather icons, Icon set",d:"Clear day - Meteocons.com",tc:""},fr:60,ip:0,op:360,w:512,h:512,nm:"clear-day",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"rays",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:359,s:[45]}],ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[180,0],[130.345,0]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-130.345,0],[-180,0]],c:!1},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ind:2,ty:"sh",ix:3,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[127.279,127.279],[92.168,92.168]],c:!1},ix:2},nm:"Path 3",mn:"ADBE Vector Shape - Group",hd:!1},{ind:3,ty:"sh",ix:4,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-92.168,-92.168],[-127.279,-127.279]],c:!1},ix:2},nm:"Path 4",mn:"ADBE Vector Shape - Group",hd:!1},{ind:4,ty:"sh",ix:5,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-127.279,127.279],[-92.168,92.168]],c:!1},ix:2},nm:"Path 5",mn:"ADBE Vector Shape - Group",hd:!1},{ind:5,ty:"sh",ix:6,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[92.168,-92.168],[127.279,-127.279]],c:!1},ix:2},nm:"Path 6",mn:"ADBE Vector Shape - Group",hd:!1},{ind:6,ty:"sh",ix:7,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,180],[0,130.345]],c:!1},ix:2},nm:"Path 7",mn:"ADBE Vector Shape - Group",hd:!1},{ind:7,ty:"sh",ix:8,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-130.345],[0,-180]],c:!1},ix:2},nm:"Path 8",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.984313726425,.749019622803,.141176477075,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:24,ix:5},lc:2,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1}],ip:0,op:360,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"core",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-46.392],[46.392,0],[0,46.392],[-46.392,0]],o:[[0,46.392],[-46.392,0],[0,-46.392],[46.392,0]],v:[[84,0],[0,84],[-84,0],[0,-84]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.972549021244,.686274528503,.0941176489,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:6,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"gf",o:{a:0,k:100,ix:10},r:1,bm:0,g:{p:5,k:{a:0,k:[0,.984,.749,.141,.225,.984,.749,.141,.45,.984,.749,.141,.725,.973,.684,.092,1,.961,.62,.043],ix:9}},s:{a:0,k:[-41.517,-71.871],ix:5},e:{a:0,k:[42.497,73.645],ix:6},t:1,nm:"Gradient Fill 1",mn:"ADBE Vector Graphic - G-Fill",hd:!1}],ip:0,op:360,st:0,bm:0}],markers:[]},ti={v:"5.5.8",fr:29.9700012207031,ip:0,op:160.000006516934,w:150,h:150,nm:"icon_moon",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"moon Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[77.728,68.567,0],ix:2},a:{a:0,k:[583,600,0],ix:1},s:{a:0,k:[45,45,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,13.612],[-13.612,0],[0,0],[0,4.127],[-13.613,0],[0,0],[0,-13.612],[13.613,0],[0,0],[0,-4.127],[13.613,0]],o:[[-13.612,0],[0,-13.613],[0,0],[-1.971,-3.611],[0,-13.612],[0,0],[13.613,0],[0,13.614],[0,0],[1.971,3.611],[0,13.612],[0,0]],v:[[-57.605,42.935],[-82.292,18.248],[-57.605,-6.44],[-27.961,-6.44],[-30.971,-18.248],[-6.283,-42.935],[57.604,-42.935],[82.292,-18.248],[57.604,6.441],[27.961,6.441],[30.97,18.248],[6.282,42.935]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.733333349228,.96862745285,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[504.292,658.677],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Group 5",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[504.291,658.677],to:[-3.333,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:40,s:[484.291,658.677],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:80,s:[504.291,658.677],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:120,s:[484.291,658.677],to:[0,0],ti:[-3.333,0]},{t:160.000006516934,s:[504.291,658.677]}],ix:2},a:{a:0,k:[480.291,623.677],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"c1",np:1,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,7.3],[-7.3,0],[0,0],[0,-7.3],[7.299,0]],o:[[-7.3,0],[0,-7.3],[0,0],[7.299,0],[0,7.3],[0,0]],v:[[-49.017,13.239],[-62.255,.001],[-49.017,-13.238],[49.017,-13.238],[62.255,.001],[49.017,13.239]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.733333349228,.96862745285,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[608.408,572.45],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Group 9",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[608.408,572.45],to:[2.361,0],ti:[-5.079,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:33,s:[624.897,572.45],to:[2.092,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:40,s:[628.408,572.45],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:80,s:[608.408,572.45],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:120,s:[628.408,572.45],to:[0,0],ti:[3.333,0]},{t:160.000006516934,s:[608.408,572.45]}],ix:2},a:{a:0,k:[608.408,548.45],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"c2",np:1,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[23.394,0],[0,61.75],[-15.662,19.738],[-24.17,5.763],[2.294,-4.352],[0,-15.361],[-51.493,0],[-11.283,4.614],[1.603,-4.652],[19.108,-13.726]],o:[[-61.75,0],[0,-25.147],[15.552,-19.598],[4.785,-1.142],[-7.101,13.467],[0,51.492],[12.2,0],[4.556,-1.863],[-7.555,21.932],[-19.251,13.829]],v:[[2.221,111.03],[-109.767,-.958],[-85.479,-70.561],[-23.882,-109.888],[-17.49,-101.649],[-28.191,-58.205],[65.193,35.178],[100.583,28.225],[108.163,35.387],[67.407,89.892]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[1,.831372559071,.352941185236,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[599.388,602.031],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"banana",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,6.708],[-6.708,0],[0,0],[0,0],[1.729,-4.168],[0,0]],o:[[-6.708,0],[0,-6.708],[0,0],[0,0],[-2.247,3.961],[0,0],[0,0]],v:[[-13.228,12.165],[-25.393,0],[-13.228,-12.165],[25.393,-12.165],[20.546,-3.616],[14.555,8.634],[13.089,12.165]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.733333349228,.96862745285,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[474.245,549.909],to:[3.333,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:40,s:[494.245,549.909],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:80,s:[474.245,549.909],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:120,s:[494.245,549.909],to:[0,0],ti:[3.333,0]},{t:160.000006516934,s:[474.245,549.909]}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Group 14",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tr",p:{a:0,k:[484.245,549.909],ix:2},a:{a:0,k:[475.245,549.909],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"c3",np:1,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1798.00007323404,st:0,bm:0}],markers:[]},ai={themeButton:"_themeButton_x78qx_1"},si=J.memo((()=>{const{theme:e,toggleTheme:t}=W.useContext(zt),[a,s]=W.useState(!1),n=W.useMemo((()=>({animationData:"dark"===e?ei:ti,loop:!0,autoplay:!0})),[e]),r=W.useCallback((()=>{a||(t(),s(!0),setTimeout((()=>{s(!1)}),3e3))}),[a,t]);return G.jsx("button",{className:"".concat(ai.themeButton," ").concat(a?ai.disabled:""),onClick:r,disabled:a,"aria-label":"dark"===e?"Switch to Light Mode":"Switch to Dark Mode",children:G.jsx(Ye,{config:n,speed:1,style:{width:"35px",height:"35px",display:"block"}})})}));si.displayName="ThemeToggleButton";const ni="app_version",ri=()=>(W.useEffect((()=>{(async()=>{try{const e=(()=>{const e=window.location.hostname.includes("github.io")?"/soulcycle":"";return"".concat(window.location.protocol,"//").concat(window.location.host).concat(e)})(),t=await fetch("".concat(e,"/version.json?_=").concat(Date.now()));if(!t.ok)return;const a=await t.json(),s=a.version,n=a.buildTimestamp,r=localStorage.getItem(ni);if(r){const e=JSON.parse(r);e.version===s&&e.timestamp===n||((()=>{const e=[];for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);e.includes(a)||localStorage.removeItem(a)}"caches"in window&&caches.keys().then((e=>{e.forEach((e=>{caches.delete(e)}))})),window.location.reload(!0)})(),localStorage.setItem(ni,JSON.stringify({version:s,timestamp:n})))}else localStorage.setItem(ni,JSON.stringify({version:s,timestamp:n}))}catch(e){}})()}),[]),null);function ii(){const{theme:e}=W.useContext(zt);return W.useEffect((()=>{let t=null;(async()=>{const a=ut("dark"===e?"backgroundblack":"background",{format:await(async()=>{if(t)return t;const e=await(async()=>{try{return!!self.createImageBitmap&&await fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",{method:"HEAD"}).then((e=>e.ok))}catch(e){return!1}})(),a=(()=>{const e=document.createElement("canvas");return!!(e&&e.getContext&&e.getContext("2d"))&&0===e.toDataURL("image/webp").indexOf("data:image/webp")})();let s="jpg";return e?s="avif":a&&(s="webp"),t=s,s})(),quality:90});document.documentElement.style.setProperty("--page-bg","url('".concat(a,"')"))})()}),[e]),G.jsxs(Ze,{children:[G.jsx(ri,{}),G.jsxs("div",{className:Xe,children:[G.jsx(si,{}),G.jsx(Xr,{})]})]})}Qe.createRoot(document.getElementById("root")).render(G.jsxs(Ut,{children:[" ",G.jsxs(Is,{children:[" ",G.jsx(ii,{})]})]}));export{R as __vite_legacy_guard};
