!function(){"use strict";try{if("undefined"!=typeof document){var r=document.createElement("style");r.appendChild(document.createTextNode('@charset "UTF-8";:root{--font-base: "graphr", sans-serif;--font-bold: "graphb", sans-serif;--text-color: #000;--text-primary: #222222;--text-secondary: #555555;--text-tertiary: #888888;--background-color: #fff;--background-color2: #f2f2f2;--bg-highlight: #f5f8fa;--bg-secondary: #f8f9fa;--bg-input: #ffffff;--border-color: #ddd;--border-color2: white;--border: #e1e8ed;--accent-color: #555555;--accent: #555555;--accent-rgb: 32, 178, 170;--accent-light: rgba(32, 178, 170, .1);--accent-hover: #555555;--success: #34d399;--success-rgb: 52, 211, 153;--warning: #fbbf24;--warning-rgb: 251, 191, 36;--error: #f87171;--error-rgb: 248, 113, 113;--error-light: rgba(248, 113, 113, .1);--info: #60a5fa;--info-rgb: 96, 165, 250;--overlay-color: rgba(0, 0, 0, .5);--shadow: 0 2px 8px rgba(0, 0, 0, .1);--shadow-hover: 0 5px 15px rgba(0, 0, 0, .15);--modal-bg: #ffffff;--modal-bg-rgb: 255, 255, 255;--modal-bg-end-rgb: 240, 240, 240;--modal-border: rgba(0, 0, 0, .15);--input-bg: #f8f8f8;--svg-color: %23000000;--gradient-start: #333333;--gradient-end: #666666;--transition-fast: .2s ease;--transition-normal: .3s ease;--transition-slow: .5s ease;--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--radius-xl: 16px;--radius-full: 9999px;--scrollbar-width: 8px;--scrollbar-track: #f1f1f1;--scrollbar-thumb: #c1c1c1;--scrollbar-thumb-hover: #a1a1a1}[data-theme=dark]{--text-color: #e0e0e0;--text-primary: #e0e0e0;--text-secondary: #b0b0b0;--text-tertiary: #808080;--background-color: #1e1e1e;--background-color2: #333333;--bg-highlight: #2a2a2a;--bg-secondary: #292929;--bg-input: #252525;--border-color: #555;--border-color2: black;--border: rgba(255, 255, 255, .1);--accent-color: #333333;--accent: #333333;--accent-rgb: 187, 134, 252;--accent-light: rgba(187, 134, 252, .1);--accent-hover: #333333;--overlay-color: rgba(255, 255, 255, .5);--shadow: 0 2px 8px rgba(0, 0, 0, .3);--shadow-hover: 0 5px 15px rgba(0, 0, 0, .4);--modal-bg: #2a2a2a;--modal-bg-rgb: 42, 42, 42;--modal-bg-end-rgb: 60, 60, 65;--modal-border: rgba(255, 255, 255, .2);--input-bg: #222222;--svg-color: %23ffffff;--gradient-start: #ffffff;--gradient-end: #a0a0a0;--scrollbar-track: #2a2a2a;--scrollbar-thumb: #444444;--scrollbar-thumb-hover: #555555}::-webkit-scrollbar{width:var(--scrollbar-width);height:var(--scrollbar-width)}::-webkit-scrollbar-track{background:var(--scrollbar-track);border-radius:var(--radius-full)}::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb);border-radius:var(--radius-full)}::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover)}*{scrollbar-width:thin;scrollbar-color:var(--scrollbar-thumb) var(--scrollbar-track)}*,*:after,*:before{padding:0;margin:0;box-sizing:border-box}html,body{font-size:10px;color:var(--text-color);background-color:var(--background-color);font-family:var(--font-base)}h1,h2,h3,h4,h5,h6{font-family:var(--font-bold);color:var(--text-primary)}._page_efhok_172{max-width:2000px;min-height:100vh;display:flex;align-items:center;justify-content:center;margin:0 auto;background-color:var(--background-color);background-image:var(--page-bg);background-size:cover;background-position:center;background-repeat:no-repeat;position:relative;transition:all var(--transition-slow);overflow:hidden;background-attachment:fixed}img{vertical-align:top}button{border:none;cursor:pointer;transition:all var(--transition-fast)}a{text-decoration:none;color:var(--accent);transition:color var(--transition-fast)}._card_efhok_208{background-color:var(--bg-secondary);border-radius:var(--radius-md);box-shadow:var(--shadow);padding:20px;border:1px solid var(--border);transition:all var(--transition-fast)}._btn_efhok_217{display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;border-radius:var(--radius-md);font-size:14px;font-weight:500;transition:all var(--transition-fast)}._btn-primary_efhok_228{background-color:var(--accent);color:#fff}._btn-primary_efhok_228:hover{background-color:var(--accent-hover)}._btn-secondary_efhok_237{background-color:var(--bg-highlight);color:var(--text-primary);border:1px solid var(--border)}._btn-secondary_efhok_237:hover{background-color:var(--background-color2)}@font-face{font-family:graphb;src:url(/soulcycle/assets/fonts/GraphikLCG-Bold.oGnNkPcM.woff2) format("woff2");font-weight:700;font-style:normal;font-display:swap}@font-face{font-family:graphr;src:url(/soulcycle/assets/fonts/GraphikLCG-Regular.BteGvBxa.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}._text-animation_efhok_267{display:inline-block}._text-animation_efhok_267 span{display:inline-block;opacity:0;transform:translateY(20px);animation:_fadeIn_efhok_1 .5s ease forwards}._text-animation-slow_efhok_278 span{animation:_fadeIn_efhok_1 1.2s ease forwards}@keyframes _fadeIn_efhok_1{to{opacity:1;transform:translateY(0)}}._window_52q69_2{height:75vh;position:relative;background-color:var(--background-color);border-radius:5px;display:flex;align-items:center;overflow:hidden;transition:width .3s,height .3s;z-index:1!important}._window__message_52q69_13{position:absolute;left:35%;top:50%;text-transform:uppercase;color:var(--text-color)}._window__message_52q69_13 h2{font-size:clamp(3rem,3vw,3rem)}._window__panel_52q69_23{position:absolute;min-height:80vh;max-width:200px!important;display:flex;flex-direction:column;align-items:center;justify-content:center;border-right:2px solid var(--border-color);z-index:5!important;background-color:var(--background-color)}._window__panel__iconWrapper_52q69_35{display:flex;flex-direction:column;gap:50px;z-index:5!important}._window__panel__navButtons_52q69_41{display:flex;flex-direction:column;gap:20px;z-index:5!important}._window__panel__navButtons__navButton_52q69_47{background:none;border:none;color:var(--text-color);z-index:5!important}._window__panel__navButtons__navButton__arrow_52q69_53{background:none;border:none;fill:var(--text-color);z-index:5!important}._window__message_52q69_13{display:flex;align-items:center;justify-content:center}._disabled_52q69_65{fill:#a9a9a9;opacity:.5;pointer-events:none}@media only screen and (max-width: 760px){._window_52q69_2{top:-20px;flex-direction:column;margin:0 20px!important;height:85vh}._window__panel_52q69_23{position:absolute;rotate:90deg;gap:20px;top:-42.5%}._window__panel__iconWrapper_52q69_35,._window__panel__navButtons_52q69_41{gap:10px}._window__message_52q69_13{left:5%;font-size:2.5rem}}._menu_1mm9j_2{width:100%;height:100%;display:flex;align-items:center;justify-content:center;gap:7%;background-color:#fffefe;position:relative;z-index:1;overflow:hidden}._menu__left_1mm9j_14{max-width:500px;min-height:100px;display:flex;flex-direction:column;gap:100px;align-items:center;justify-content:center;aspect-ratio:1/1}._menu__left__pic_1mm9j_24{max-width:500px;min-height:70px;aspect-ratio:1/1}._menu__left__pic_1mm9j_24 img{width:100%;height:100%;object-fit:contain;display:block}._menu__right_1mm9j_35{max-width:500px;min-height:100px;display:flex;flex-direction:column;gap:60px;padding:20px 80px;align-items:center;justify-content:center;background-color:#fff;border-radius:10px;border:2px solid black}[data-theme=dark] ._menu__right_1mm9j_35{background-color:#000;border:2px solid white}._menu__right__titleblock_1mm9j_52{width:100%;display:flex;flex-direction:column;gap:50px;align-items:center;justify-content:center}._menu__right__titleblock__fullname_1mm9j_60{font-size:2rem}._menu__right__titleblock__maininfo_1mm9j_63{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.8rem;gap:10px}._menu__right__lore_1mm9j_71{font-size:1.6rem;max-width:120px;min-height:30px;padding:20px 10px}._menu_1mm9j_2[id=faust]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/faustb.svg);z-index:-1;filter:blur(2.5px)}[data-theme=dark] ._menu_1mm9j_2[id=faust]:before{background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/faustb-black.svg)}._menu_1mm9j_2[id=lonarius]:before{content:"";position:absolute;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/lonariusb.svg);background-repeat:no-repeat;background-position:center;background-size:cover;z-index:-1;filter:blur(1.5px)}[data-theme=dark] ._menu_1mm9j_2[id=lonarius]:before{background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/lonariusb-black.svg);background-size:cover}._menu_1mm9j_2[id=vivian]:before{content:"";position:absolute;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/vivianb.svg);z-index:-1;filter:blur(1.5px)}[data-theme=dark] ._menu_1mm9j_2[id=vivian]:before{content:"";background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/vivianb-black.svg);position:absolute;width:100%;height:100%;z-index:-1;filter:blur(1.5px)}._menu_1mm9j_2[id=akito]:before{content:"";position:absolute;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/akitob2.svg);background-color:#fff;background-repeat:no-repeat;background-position:center;background-size:cover;z-index:-1;filter:blur(1.5px)}[data-theme=dark] ._menu_1mm9j_2[id=akito]:before{content:"";background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/akitob2.svg);position:absolute;width:100%;height:100%;z-index:-1;filter:blur(1.5px)}@media only screen and (max-width: 760px){._menu_1mm9j_2{flex-direction:column;gap:50px}._menu__left_1mm9j_14{max-width:320px!important;padding-top:40px}._menu__right_1mm9j_35{max-width:300px!important;padding:20px;gap:20px}._menu__right__titleblock_1mm9j_52{gap:20px}}@media (min-width: 761px) and (max-width: 1024px) and (orientation: portrait){._menu_1mm9j_2{flex-direction:column}._menu__left_1mm9j_14{max-width:500px!important;padding-top:40px;padding-left:3%}._menu__right_1mm9j_35{max-width:350px!important;padding:20px 40px;gap:20px}._menu__right__titleblock_1mm9j_52{gap:20px}}._button_1jwbf_1{position:relative;transition:all .3s ease-in-out;box-shadow:0 10px 20px rgba(0,0,0,.2);padding-block:.5rem;padding-inline:1.25rem;background-color:#000;border-radius:9999px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff!important;gap:10px;font-weight:700;border:3px solid rgba(255,255,255,.3019607843);outline:none;overflow:hidden;font-size:15px}._button_1jwbf_1:hover{transform:scale(1.05);border-color:rgba(255,255,255,.6)}._button_1jwbf_1:before{content:"";position:absolute;width:100px;height:100%;background-image:linear-gradient(120deg,rgba(255,255,255,0) 30%,rgba(255,255,255,.8),rgba(255,255,255,0) 70%);top:0;left:-100px;opacity:.6}._button_1jwbf_1:hover:before{animation:_shine_1jwbf_1 1.5s ease-out infinite}._icon_1jwbf_39{width:24px;height:24px;transition:all .3s ease-in-out}._button_1jwbf_1:hover ._icon_1jwbf_39{transform:translate(4px)}@keyframes _shine_1jwbf_1{0%{left:-100px}60%{left:100%}to{left:100%}}._modalOverlay_1214q_2{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;z-index:1000;padding:5px}._modalOverlay__content_1214q_15{background-color:var(--background-color);color:var(--text-color);padding:0 20px 40px;border-radius:8px;max-width:1000px;width:100%;position:relative;z-index:1001;display:flex;flex-direction:column;align-items:center;border:2px solid var(--border-color)}._modalOverlay__closeButton_1214q_29{position:absolute;top:10px;right:10px;background:none;border:none;cursor:pointer;transition:.4s ease;fill:var(--text-color)}._modalOverlay__closeButton_1214q_29:hover{fill:red}._modalOverlay__textContent_1214q_42{display:flex;flex-direction:column;align-items:center;gap:30px}._modalOverlay__navigation_1214q_48{display:flex;justify-content:space-between;align-items:center;width:100%}._modalOverlay__arrowRight_1214q_54,._modalOverlay__arrowLeft_1214q_54{position:absolute;bottom:1%;font-size:3rem;background:none;fill:var(--text-color)}._modalOverlay__arrowRight_1214q_54{right:2%}._modalOverlay__arrowLeft_1214q_54{left:2%}._modalOverlay__title_1214q_67{text-transform:uppercase;font-size:2rem;color:var(--text-color);position:relative}._modalOverlay__title_1214q_67:after{content:"";display:block;width:100%;height:4px;background:var(--border-color);position:absolute;bottom:-5px;left:0;transform:scaleX(0);animation:_appear_1214q_1 .5s forwards;animation-delay:.2s}._modalOverlay__textBlock_1214q_86{min-height:500px;width:100%}._modalOverlay__textBlock__textCont_1214q_90{display:flex;flex-direction:column;gap:20px;font-size:1.65rem;line-height:1.6;color:var(--text-color);transition:opacity .3s ease-in-out}._modalOverlay__textBlock__textCont_1214q_90 span{filter:blur(4px)}._modalOverlay__textBlock__textCont_1214q_90 blockquote{color:var(--accent-color)}._modalOverlay__pageIndicator_1214q_105{font-size:1.5rem;color:var(--text-color);position:absolute;bottom:2%}@keyframes _appear_1214q_1{to{transform:scaleX(1)}}._fadeIn_1214q_117{opacity:1}._fadeOut_1214q_121{opacity:0}._disabled_1214q_125{fill:#a9a9a9;opacity:.5;pointer-events:none}@media only screen and (max-width: 760px){._modalOverlay__textContent_1214q_42{min-height:700px}}._btn_2wi9v_2{max-width:78px;min-height:78px;display:flex;align-items:center;justify-content:center;background-color:var(--background-color);aspect-ratio:1;background:none;border:none;cursor:pointer;padding:0;transition:transform .2s ease}._btn_2wi9v_2:hover{transform:scale(1.1)}._btn__pic_2wi9v_19{width:100%;height:100%;display:block;transition:filter .3s ease}._btn__pic_2wi9v_19 img{width:100%;height:100%;object-fit:contain}._btn__pic_2wi9v_19._darkTheme_2wi9v_30{filter:invert(1) brightness(1.5)}hr{height:3px;background-color:var(--border-color)}._icon_2wi9v_39 img{content:attr(data-light)}[data-theme=dark] ._icon_2wi9v_39 img{content:attr(data-dark)}@media only screen and (max-width: 760px){._btn_2wi9v_2{rotate:270deg;max-width:60px;min-height:60px}}._aboutblock_kg2nj_3{max-width:1200px;margin:0 auto;padding:3rem 2rem;background-color:var(--bg-primary);color:var(--text-primary);display:flex;align-items:center;justify-content:center;flex-direction:column;gap:2.5rem;border-radius:15px;transition:all .3s ease}._aboutblock__header_kg2nj_17{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2rem}._aboutblock__header__htitle_kg2nj_25{font-family:graphb,sans-serif;font-size:clamp(2.2rem,4vw,3rem);color:var(--text-primary);position:relative;margin-bottom:1.5rem;padding-bottom:1rem;text-align:center}._aboutblock__header__htitle_kg2nj_25:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:60px;height:4px;background:var(--accent);border-radius:2px}._aboutblock__header__textblock_kg2nj_45{width:100%;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;align-items:stretch;justify-content:center;position:relative}._aboutblock__header__textblock__card_kg2nj_54{display:flex;flex-direction:column;background:var(--bg-secondary);border-radius:15px;padding:1.5rem;transition:all .3s ease;height:100%;position:relative;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.05);border:1px solid var(--border-color)}._aboutblock__header__textblock__card_kg2nj_54:hover{transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,0,0,.08)}._aboutblock__header__textblock__card_kg2nj_54:hover ._aboutblock__header__textblock__card__icon_kg2nj_71{transform:scale(1.05)}._aboutblock__header__textblock__card__icon_kg2nj_71{display:flex;justify-content:center;margin-bottom:1rem;transition:transform .4s ease}._aboutblock__header__textblock__card__icon__main_kg2nj_80{fill:var(--accent);animation:_wiggle_kg2nj_1 3s infinite ease-in-out}[data-theme=dark] ._aboutblock__header__textblock__card__icon__main_kg2nj_80{fill:var(--text-primary)}._aboutblock__header__textblock__card__icon__small_kg2nj_87{fill:var(--accent);opacity:.9;animation:_float_kg2nj_1 4s infinite ease-in-out}[data-theme=dark] ._aboutblock__header__textblock__card__icon__small_kg2nj_87{fill:var(--text-primary);opacity:.8}._aboutblock__header__textblock__card__content_kg2nj_96{flex:1;display:flex;flex-direction:column;justify-content:center}._aboutblock__header__textblock__card__content_kg2nj_96 p{font-size:clamp(.95rem,1vw + .5rem,1.2rem);line-height:1.6;margin:0}._aboutblock__header__textblock__card__link_kg2nj_107{color:gray;text-decoration:none;position:relative;transition:all .2s ease}._aboutblock__header__textblock__card__link_kg2nj_107:hover{text-decoration:none;opacity:.9}._aboutblock__header__textblock__card__link_kg2nj_107:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:1px;background-color:gray;transform:scaleX(0);transform-origin:right;transition:transform .3s ease}._aboutblock__header__textblock__card__link_kg2nj_107:hover:after{transform:scaleX(1);transform-origin:left}._aboutblock__header__textblock__telegram_kg2nj_133{display:flex;justify-content:center;align-items:center;grid-column:1/-1;margin-top:1rem}._aboutblock__divider_kg2nj_140{width:100%;display:flex;align-items:center;justify-content:center;gap:1rem;padding:.5rem 0}._aboutblock__divider__line_kg2nj_148{height:1px;flex:1;background:linear-gradient(to right,transparent,var(--border-color),transparent)}._aboutblock__divider__icon_kg2nj_153{font-size:1.8rem;color:var(--accent);animation:_pulse_kg2nj_1 3s infinite ease-in-out}._aboutblock__main_kg2nj_158{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2rem}._aboutblock__main__btitle_kg2nj_166,._aboutblock__main__dtitle_kg2nj_166{font-family:graphb,sans-serif;font-size:clamp(1.8rem,3vw,2.5rem);color:var(--text-primary);position:relative;margin-bottom:.5rem}._aboutblock__main__btitle_kg2nj_166:before,._aboutblock__main__dtitle_kg2nj_166:before{content:"✧";margin-right:.5rem;color:var(--accent);font-size:.8em;animation:_spin_kg2nj_1 4s linear infinite;display:inline-block}._aboutblock__main__authors_kg2nj_181,._aboutblock__main__developers_kg2nj_181{width:100%;display:flex;flex-wrap:wrap;gap:2rem;justify-content:center;padding:1.5rem;border-radius:15px;background-color:var(--bg-secondary);box-shadow:0 5px 20px rgba(0,0,0,.04);border:1px solid var(--border-color)}[data-theme=dark] ._aboutblock__main__authors_kg2nj_181,[data-theme=dark] ._aboutblock__main__developers_kg2nj_181{box-shadow:0 5px 20px rgba(0,0,0,.15)}._aboutblock__social_kg2nj_196{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem;margin-top:1rem}._aboutblock__social__title_kg2nj_205{font-family:graphb,sans-serif;font-size:clamp(1.8rem,3vw,2.5rem);color:var(--text-primary);position:relative;margin-bottom:.5rem;text-align:center}._aboutblock__social__title_kg2nj_205:before{content:"♥";margin-right:.5rem;color:var(--accent);font-size:.8em;animation:_pulse_kg2nj_1 2s infinite ease-in-out;display:inline-block}._aboutblock__social__links_kg2nj_221{display:flex;justify-content:center;gap:1.5rem;margin:1rem 0;padding:1.5rem;border-radius:15px;background-color:var(--bg-secondary);box-shadow:0 5px 15px rgba(0,0,0,.05);border:1px solid var(--border-color)}[data-theme=dark] ._aboutblock__social__links_kg2nj_221{box-shadow:0 5px 15px rgba(0,0,0,.2)}._aboutblock__social__links_kg2nj_221 a{transition:transform .3s ease}._aboutblock__social__links_kg2nj_221 a:hover{transform:translateY(-5px)}@keyframes _float_kg2nj_1{0%,to{transform:translateY(0)}50%{transform:translateY(-7px)}}@keyframes _wiggle_kg2nj_1{0%,to{transform:rotate(0)}25%{transform:rotate(3deg)}75%{transform:rotate(-3deg)}}@keyframes _pulse_kg2nj_1{0%,to{transform:scale(1);opacity:.8}50%{transform:scale(1.1);opacity:1}}@keyframes _spin_kg2nj_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){._aboutblock_kg2nj_3{padding:2rem 1rem;gap:2rem}._aboutblock__header__htitle_kg2nj_25{margin-bottom:1rem}._aboutblock__header__textblock_kg2nj_45{grid-template-columns:1fr}._aboutblock__header__textblock__card__content_kg2nj_96 p{font-size:1.05rem}._aboutblock__social__links_kg2nj_221{width:100%;max-width:100%}}@media (max-width: 480px){._aboutblock_kg2nj_3{padding:1.5rem 1rem}._aboutblock__header__htitle_kg2nj_25{font-size:1.8rem}._aboutblock__header__htitle_kg2nj_25:after{width:40px}._aboutblock__header__textblock__card__content_kg2nj_96 p{font-size:1.1rem;line-height:1.5}._aboutblock__divider__icon_kg2nj_153{font-size:1.4rem}}._member_17rw5_2{position:relative;display:flex;align-items:center;padding:20px;border-radius:16px;width:100%;max-width:340px;min-height:120px;overflow:hidden;background-color:var(--bg-primary);border:1px solid var(--border-color);transition:all .3s ease;box-shadow:0 5px 15px rgba(0,0,0,.05)}._member_17rw5_2:hover{transform:translateY(-5px);box-shadow:0 12px 30px rgba(0,0,0,.1)}._member_17rw5_2:hover ._member__info__details__name_17rw5_21:after{transform:scaleX(1);transform-origin:left}._member_17rw5_2:hover ._member__imageContainer_17rw5_25{transform:scale(1.05)}._member__imageWrapper_17rw5_28{position:relative;min-width:80px;width:80px;height:80px;overflow:hidden;border-radius:50%;z-index:1}._member__imageWrapper_17rw5_28:after{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:linear-gradient(45deg,var(--accent),transparent);border-radius:50%;z-index:-1;animation:_borderRotate_17rw5_1 4s linear infinite}._member__imageContainer_17rw5_25{width:100%;height:100%;overflow:hidden;border-radius:50%;background:var(--bg-primary);display:flex;align-items:center;justify-content:center;transition:transform .35s ease;border:3px solid var(--bg-primary)}._member__imageContainer_17rw5_25 a{width:100%;height:100%;display:block}._member__image_17rw5_25{width:100%;height:100%;object-fit:cover;border-radius:50%;transition:filter .3s ease}._member__info_17rw5_21{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:8px;flex:1;padding-left:20px}._member__info__details_17rw5_21{display:flex;flex-direction:column;gap:4px}._member__info__details__name_17rw5_21{font-size:1.4rem;margin:0;color:var(--text-primary);position:relative;display:inline-block;font-weight:600;letter-spacing:.5px;width:fit-content}._member__info__details__name_17rw5_21:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:2px;background:var(--accent);transform:scaleX(0);transform-origin:right;transition:transform .4s ease}._member__info__details__link_17rw5_109{color:var(--text-primary);text-decoration:none;transition:color .3s ease;position:relative}._member__info__details__link_17rw5_109:hover{color:var(--accent)}._member__info__details__link_17rw5_109:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:2px;background:var(--accent);transform:scaleX(0);transform-origin:right;transition:transform .4s ease}._member__info__details__link_17rw5_109:hover:after{transform:scaleX(1);transform-origin:left}._member__info__details__role_17rw5_134{font-size:1.1rem;color:var(--text-secondary);font-style:italic;margin-top:2px}._member__info__bio_17rw5_140{font-size:1rem;line-height:1.5;color:var(--text-secondary);margin-top:5px;margin-bottom:0}._member--igor_17rw5_147{position:relative;overflow:hidden}._member--igor_17rw5_147:before{content:"✧";position:absolute;top:15px;right:15px;font-size:1.5rem;color:var(--accent);opacity:.8;animation:_rotate_17rw5_1 8s linear infinite}._member--igor_17rw5_147:after{content:"";position:absolute;top:-30px;right:-30px;width:60px;height:60px;background:radial-gradient(circle,var(--accent) 0%,transparent 70%);opacity:.15;z-index:0}._member--lesya_17rw5_172{position:relative;overflow:hidden}._member--lesya_17rw5_172:before{content:"♥";position:absolute;top:15px;right:15px;font-size:1.5rem;color:var(--accent);opacity:.8;animation:_heartbeat_17rw5_1 2s infinite ease-in-out}._member--lesya_17rw5_172:after{content:"";position:absolute;bottom:-20px;left:-20px;width:60px;height:60px;background:radial-gradient(circle,var(--accent) 0%,transparent 70%);opacity:.15;z-index:0}[data-theme=dark] ._member_17rw5_2{background-color:var(--bg-secondary);border-color:var(--border-color);box-shadow:0 5px 15px rgba(0,0,0,.2)}[data-theme=dark] ._member_17rw5_2:hover{box-shadow:0 12px 30px rgba(0,0,0,.3)}[data-theme=dark] ._member_17rw5_2 ._member__imageContainer_17rw5_25{border-color:var(--bg-secondary)}[data-theme=dark] ._member_17rw5_2:after{opacity:.25}@keyframes _borderRotate_17rw5_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _heartbeat_17rw5_1{0%,to{transform:scale(1)}50%{transform:scale(1.2);opacity:1}}@keyframes _rotate_17rw5_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _float_17rw5_1{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}@media (max-width: 768px){._member_17rw5_2{padding:15px;min-height:100px;max-width:100%;flex-direction:row}._member__imageWrapper_17rw5_28{min-width:70px;width:70px;height:70px}._member__info_17rw5_21{padding-left:15px}._member__info__details__name_17rw5_21{font-size:1.2rem}._member__info__details__role_17rw5_134{font-size:.95rem}._member__info__bio_17rw5_140{font-size:1.1rem;line-height:1.4}._member--igor_17rw5_147:before,._member--lesya_17rw5_172:before{font-size:1.3rem;top:10px;right:10px}}@media (max-width: 480px){._member_17rw5_2{padding:12px;min-height:90px}._member__imageWrapper_17rw5_28{min-width:60px;width:60px;height:60px}._member__info_17rw5_21{padding-left:15px}._member__info__details__name_17rw5_21{font-size:1.1rem}._member__info__details__role_17rw5_134{font-size:.9rem}._member__info__bio_17rw5_140{font-size:1rem;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}._member--igor_17rw5_147:before,._member--lesya_17rw5_172:before{font-size:1.2rem;top:8px;right:8px}}._button_n0lbf_1{font-family:graphb;background:var(--text-color);color:var(--background-color);font-size:20px;border:none;border-radius:.7em;letter-spacing:.08em;position:relative;display:flex;align-content:center;align-items:center;overflow:hidden;height:2.5em;padding:.35em .92em .35em 2.8em;z-index:1}._button_n0lbf_1 ._icon_n0lbf_21{background:var(--background-color);height:2em;width:2em;border-radius:2em;position:absolute;display:flex;align-items:center;justify-content:center;left:.4em;transition:all .5s}._icon_n0lbf_21 svg{margin-left:.1em;transition:all .5s;color:var(--text-color);width:2.5rem;height:2.5rem;position:absolute;right:18%}._button_n0lbf_1:hover ._icon_n0lbf_21 svg{transform:rotate(360deg);right:40%}._button_n0lbf_1:hover ._icon_n0lbf_21{width:calc(100% - 1.5rem);border-radius:.5em}._main_1lmof_1{max-width:1500px;width:100%;min-height:100vh;position:relative;display:flex;flex-direction:column;gap:20px;padding:1% 6%;background:rgba(255,255,255,.85);backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,.1);border:1px solid rgba(255,255,255,.2)}._main_1lmof_1:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(135deg,rgba(255,255,255,.2),rgba(255,255,255,0));border-radius:12px;pointer-events:none}[data-theme=dark] ._main_1lmof_1{background:rgba(20,18,18,.85);box-shadow:0 8px 32px rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.1)}[data-theme=dark] ._main_1lmof_1:before{background:linear-gradient(135deg,rgba(50,50,70,.3),rgba(10,10,20,0))}._main__header_1lmof_35{max-width:200px;display:flex;gap:10px;align-items:end}._main__header__pic_1lmof_41{max-width:80px;min-height:80px;aspect-ratio:1;display:flex;align-items:center;justify-content:center;transition:filter .3s ease}._main__header__pic_1lmof_41 img{width:100%;height:100%;object-fit:contain}._main__header__pic_1lmof_41._darkTheme_1lmof_55{filter:invert(.8) brightness(1.5) hue-rotate(180deg)}._main__header__title_1lmof_58{font-size:2rem;color:var(--text-color)}._main__header__logo_1lmof_62{max-width:160px;height:auto;object-fit:contain;margin-right:1rem}._main__nav_1lmof_68{display:flex;justify-content:space-between;align-items:center;position:relative}._main__nav__perexod_1lmof_74{display:flex;gap:20px;list-style:none;font-size:clamp(2rem,2vw,3rem);font-family:var(--font-bold)}._main__nav__perexod__link_1lmof_81 a{color:var(--text-color)}._main__nav__auth_1lmof_84{display:flex;align-items:center}._main__nav__burger_1lmof_88{display:none;flex-direction:column;justify-content:space-between;width:30px;height:25px;cursor:pointer;z-index:1001;padding:0;background:none;border:none;transition:all .3s ease}._main__nav__burger__line_1lmof_101{width:100%;height:2px;background:var(--text-color, #333);transition:all .3s cubic-bezier(.4,0,.2,1);transform-origin:left center}[data-theme=light] ._main__nav__burger__line_1lmof_101{background:#333}[data-theme=dark] ._main__nav__burger__line_1lmof_101{background:#fff}._main__nav__burger_1lmof_88._open_1lmof_114 ._main__nav__burger__line_1lmof_101:first-child{transform:rotate(45deg)}._main__nav__burger_1lmof_88._open_1lmof_114 ._main__nav__burger__line_1lmof_101:nth-child(2){opacity:0}._main__nav__burger_1lmof_88._open_1lmof_114 ._main__nav__burger__line_1lmof_101:last-child{transform:rotate(-45deg)}._main__nav__mobile_1lmof_123{position:fixed;top:0;right:-100%;width:80%;max-width:300px;height:100vh;background:var(--bg-primary);z-index:1000;padding:80px 20px 20px;transition:right .3s cubic-bezier(.4,0,.2,1);box-shadow:-5px 0 15px rgba(0,0,0,.1);border-left:1px solid var(--border)}[data-theme=dark] ._main__nav__mobile_1lmof_123{background:#1e1e23;border-left:1px solid rgba(255,255,255,.1);box-shadow:-5px 0 15px rgba(0,0,0,.3)}._main__nav__mobile_1lmof_123._open_1lmof_114{right:0}._main__nav__mobile__list_1lmof_145{list-style:none;padding:0;margin:0}._main__nav__mobile__list__item_1lmof_150{margin-bottom:15px}._main__nav__mobile__list__item_1lmof_150 a{display:block;padding:12px 15px;color:var(--text-primary);text-decoration:none;font-size:16px;border-radius:8px;transition:all .2s ease}._main__nav__mobile__list__item_1lmof_150 a:hover{background:var(--bg-highlight);color:var(--accent)}@media (max-width: 768px){._main_1lmof_1{padding:1% 3%}._main__nav__perexod_1lmof_74{display:none}._main__nav__burger_1lmof_88{display:flex;margin-right:10px}._main__nav__auth_1lmof_84{margin-left:auto}}._characters_1lmof_182{display:flex;justify-content:center;align-items:center;width:100%}._homepage_1lmof_189{max-width:800px;margin:0 auto;padding:20px}._loading_1lmof_195,._error_1lmof_195{display:flex;justify-content:center;align-items:center;height:200px;font-size:18px;color:var(--text-primary)}._error_1lmof_195{color:#e74c3c}._postsList_1lmof_208{display:flex;flex-direction:column;gap:20px}._postCard_1lmof_214{background-color:var(--bg-secondary);border-radius:8px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,.1)}._postTitle_1lmof_221{font-size:22px;margin-bottom:10px;color:var(--text-primary)}._postMeta_1lmof_227{display:flex;justify-content:space-between;margin-bottom:15px;font-size:14px;color:var(--text-secondary)}._postImage_1lmof_235{margin-bottom:15px}._postImage_1lmof_235 img{width:100%;max-height:400px;object-fit:cover;border-radius:4px}._postContent_1lmof_245{color:var(--text-primary);line-height:1.5;white-space:pre-wrap}._noPostsMessage_1lmof_251{text-align:center;color:var(--text-secondary);padding:40px 0}._perkBase_1qxaq_18{font-weight:600!important;font-size:inherit!important;line-height:inherit!important;font-family:inherit!important;letter-spacing:inherit!important;display:inline-block!important}._sponsorPerk_1qxaq_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)!important}._earlyUserPerk_1qxaq_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)!important}._adminPerk_1qxaq_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)!important}._userPerk_1qxaq_45{color:var(--user-color)!important;text-shadow:none!important}._authContainer_1qxaq_51{position:relative;z-index:10}._loginButton_1qxaq_56{background:linear-gradient(90deg,#666,#444);color:#fff;border:none;padding:10px 20px;border-radius:30px;font-size:1.2rem;font-weight:600;cursor:pointer;transition:all .3s;box-shadow:0 4px 10px rgba(0,0,0,.2);position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;gap:8px;letter-spacing:.5px}._loginButton_1qxaq_56:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(0,0,0,.3);background:linear-gradient(90deg,#777,#555)}._loginButton_1qxaq_56:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.2),transparent);transform:rotate(45deg);transition:all .5s;opacity:0}._loginButton_1qxaq_56:hover:before{animation:_shine_1qxaq_1 1.5s infinite}[data-theme=light] ._loginButton_1qxaq_56{background:linear-gradient(90deg,#888,#666);box-shadow:0 4px 10px rgba(100,100,100,.2)}[data-theme=light] ._loginButton_1qxaq_56:hover{background:linear-gradient(90deg,#999,#777);box-shadow:0 6px 15px rgba(100,100,100,.3)}._userProfile_1qxaq_104{position:relative;display:flex;justify-content:center}._profileButton_1qxaq_110{display:flex;align-items:center;background:rgba(50,50,55,.7);border:1px solid rgba(100,100,100,.2);padding:6px 14px 6px 6px;cursor:pointer;border-radius:30px;transition:all .3s;backdrop-filter:blur(4px);box-shadow:0 4px 10px rgba(0,0,0,.1)}._profileButton_1qxaq_110:hover{background:rgba(60,60,65,.8);transform:translateY(-2px);box-shadow:0 6px 15px rgba(0,0,0,.15)}[data-theme=light] ._profileButton_1qxaq_110{background:rgba(240,240,245,.7);border:1px solid rgba(180,180,180,.3);box-shadow:0 4px 10px rgba(100,100,100,.1)}[data-theme=light] ._profileButton_1qxaq_110:hover{background:rgba(245,245,250,.9);box-shadow:0 6px 15px rgba(100,100,100,.15)}[data-theme=light] ._profileButton_1qxaq_110 svg{color:#333;stroke:#333}._profileButton_1qxaq_110 svg{color:#e0e0e0;stroke:#e0e0e0;transition:all .3s}._avatar_1qxaq_146{width:42px;height:42px;border-radius:50%;object-fit:cover;margin-right:10px;border:2px solid rgba(150,150,150,.5);box-shadow:0 2px 5px rgba(0,0,0,.1)}[data-theme=light] ._avatar_1qxaq_146{border:2px solid rgba(100,100,100,.3)}._username_1qxaq_159{font-size:1.2rem;font-weight:600;color:#e0e0e0;max-width:150px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}@media (max-width: 600px){._username_1qxaq_159{max-width:100px;font-size:1rem}}[data-theme=light] ._username_1qxaq_159{color:#333}._username_1qxaq_159._sponsorPerk_1qxaq_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)}._username_1qxaq_159._earlyUserPerk_1qxaq_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)}._username_1qxaq_159._adminPerk_1qxaq_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)}._userMenu_1qxaq_190{position:absolute;top:115%;right:0;background:rgba(36,36,40,.95);backdrop-filter:blur(10px);border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.3),0 0 15px rgba(255,255,255,.05) inset;min-width:200px;overflow:hidden;border:1px solid rgba(100,100,100,.2);z-index:1000;padding:5px}._userMenu_1qxaq_190:before{content:"";position:absolute;top:-7px;right:20px;transform:rotate(45deg);width:20px;height:20px;background:rgba(36,36,40,.95);border-left:1px solid rgba(100,100,100,.2);border-top:1px solid rgba(100,100,100,.2);z-index:-1}._userMenu_1qxaq_190 ul{list-style:none;margin:0;padding:5px}._userMenu_1qxaq_190 li{margin:5px 0}._userMenu_1qxaq_190 li:last-child{margin-top:5px}[data-theme=light] ._userMenu_1qxaq_190{background:rgba(250,250,255,.95);box-shadow:0 10px 25px rgba(0,0,0,.15),0 0 15px rgba(255,255,255,.1) inset;border:1px solid rgba(200,200,200,.3)}[data-theme=light] ._userMenu_1qxaq_190:before{background:rgba(250,250,255,.95);border-left:1px solid rgba(200,200,200,.3);border-top:1px solid rgba(200,200,200,.3)}._menuItem_1qxaq_239{display:block;width:100%;text-align:left;padding:10px 14px;background:rgba(32,32,37,.7);border:none;border-radius:8px;font-size:1.2rem;color:#e0e0e0;cursor:pointer;font-weight:500;transition:all .25s;display:flex;align-items:center;gap:10px;position:relative;overflow:hidden}._menuItem_1qxaq_239:before{content:"";position:absolute;left:0;top:0;height:100%;width:3px;background:transparent;transition:all .25s}._menuItem_1qxaq_239 svg{color:#8e8e9a;stroke-width:2px;transition:all .3s}[data-theme=light] ._menuItem_1qxaq_239 svg{color:#666;stroke:#666}[data-theme=dark] ._menuItem_1qxaq_239 svg{color:#8e8e9a;stroke:#8e8e9a}._menuItem_1qxaq_239:hover{background:rgba(45,45,50,.9);transform:translateY(-2px)}._menuItem_1qxaq_239:hover svg{color:#a0a0b0}[data-theme=light] ._menuItem_1qxaq_239{background:rgba(240,240,245,.7);color:#333}[data-theme=light] ._menuItem_1qxaq_239 svg{color:#6a6a75}[data-theme=light] ._menuItem_1qxaq_239:hover{background:rgba(230,230,235,.9)}[data-theme=light] ._menuItem_1qxaq_239:hover svg{color:#555565}._logoutButton_1qxaq_302{color:#f0f0f0;background:rgba(210,40,60,.25)}._logoutButton_1qxaq_302:before{background:rgba(210,40,60,.6)}._logoutButton_1qxaq_302 svg{color:rgba(210,60,80,.9);filter:drop-shadow(0 0 2px rgba(210,40,60,.3))}._logoutButton_1qxaq_302:hover{background:rgba(220,50,70,.35)}._logoutButton_1qxaq_302:hover:before{background:rgba(220,50,70,.8)}._logoutButton_1qxaq_302:hover svg{color:#e1465a}[data-theme=light] ._logoutButton_1qxaq_302{color:#333;background:rgba(220,53,69,.1)}[data-theme=light] ._logoutButton_1qxaq_302:before{background:rgba(220,53,69,.4)}[data-theme=light] ._logoutButton_1qxaq_302 svg{color:rgba(200,50,60,.8);filter:drop-shadow(0 0 1px rgba(200,50,60,.2))}[data-theme=light] ._logoutButton_1qxaq_302:hover{background:rgba(220,53,69,.2)}[data-theme=light] ._logoutButton_1qxaq_302:hover:before{background:rgba(220,53,69,.6)}[data-theme=light] ._logoutButton_1qxaq_302:hover svg{color:#c82832}._adminButton_1qxaq_343{color:#f0f0f0;background:linear-gradient(90deg,rgba(100,100,110,.3),rgba(80,80,90,.3));position:relative;overflow:hidden}._adminButton_1qxaq_343:before{background:rgba(80,140,200,.6)}._adminButton_1qxaq_343 svg{color:rgba(70,150,210,.9);filter:drop-shadow(0 0 2px rgba(70,150,210,.3))}._adminButton_1qxaq_343:after{content:"";position:absolute;top:0;right:0;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(70,150,210,.1),transparent);opacity:0;transition:opacity .3s ease}._adminButton_1qxaq_343:hover{background:linear-gradient(90deg,rgba(110,110,120,.35),rgba(90,90,100,.35))}._adminButton_1qxaq_343:hover:before{background:rgba(80,160,220,.8)}._adminButton_1qxaq_343:hover:after{opacity:1}._adminButton_1qxaq_343:hover svg{color:#50a0e6}[data-theme=light] ._adminButton_1qxaq_343{color:#333;background:linear-gradient(90deg,rgba(230,230,240,.5),rgba(210,210,220,.5))}[data-theme=light] ._adminButton_1qxaq_343:before{background:rgba(60,120,190,.5)}[data-theme=light] ._adminButton_1qxaq_343 svg{color:rgba(50,120,180,.9);filter:drop-shadow(0 0 1px rgba(50,120,180,.2))}[data-theme=light] ._adminButton_1qxaq_343:hover{background:linear-gradient(90deg,rgba(220,220,230,.6),rgba(200,200,210,.6))}[data-theme=light] ._adminButton_1qxaq_343:hover:before{background:rgba(60,130,200,.7)}[data-theme=light] ._adminButton_1qxaq_343:hover svg{color:#2878c8}@keyframes _shine_1qxaq_1{0%{left:-150%;opacity:0}50%{opacity:.4}to{left:150%;opacity:0}}._profileMenuItem_1qxaq_413:before{background:rgba(120,180,120,.6)}._profileMenuItem_1qxaq_413 svg{color:rgba(120,180,120,.9);filter:drop-shadow(0 0 2px rgba(120,180,120,.3))}._profileMenuItem_1qxaq_413:hover:before{background:rgba(130,200,130,.8)}._profileMenuItem_1qxaq_413:hover svg{color:#8cd28c}[data-theme=light] ._profileMenuItem_1qxaq_413:before{background:rgba(100,160,100,.5)}[data-theme=light] ._profileMenuItem_1qxaq_413 svg{color:rgba(100,160,100,.9);filter:drop-shadow(0 0 1px rgba(100,160,100,.2))}[data-theme=light] ._profileMenuItem_1qxaq_413:hover:before{background:rgba(110,180,110,.7)}[data-theme=light] ._profileMenuItem_1qxaq_413:hover svg{color:#5a965a}._feedbackButton_1qxaq_440:before{background:rgba(180,130,200,.6)}._feedbackButton_1qxaq_440 svg{color:rgba(180,130,200,.9);filter:drop-shadow(0 0 2px rgba(180,130,200,.3))}._feedbackButton_1qxaq_440:hover:before{background:rgba(200,140,220,.8)}._feedbackButton_1qxaq_440:hover svg{color:#d296e6}[data-theme=light] ._feedbackButton_1qxaq_440:before{background:rgba(160,110,180,.5)}[data-theme=light] ._feedbackButton_1qxaq_440 svg{color:rgba(160,110,180,.9);filter:drop-shadow(0 0 1px rgba(160,110,180,.2))}[data-theme=light] ._feedbackButton_1qxaq_440:hover:before{background:rgba(170,120,190,.7)}[data-theme=light] ._feedbackButton_1qxaq_440:hover svg{color:#9664aa}@media (max-width: 768px){._avatar_1qxaq_146{width:36px;height:36px}._username_1qxaq_159{font-size:1rem}._profileButton_1qxaq_110{padding:4px 10px 4px 4px}._userMenu_1qxaq_190{right:0;min-width:180px}._userMenu_1qxaq_190:before{right:20px}}._backdrop_1kje4_1{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,rgba(var(--modal-bg-rgb, 33, 33, 38),.85),rgba(var(--modal-bg-end-rgb, 68, 68, 77),.85));display:flex;justify-content:center;align-items:center;z-index:10000;backdrop-filter:blur(8px);perspective:1000px;box-sizing:border-box;overscroll-behavior:contain;transform:translateZ(0);isolation:isolate}._modal_1kje4_20{position:relative;max-width:450px;width:90%;border-radius:var(--radius-xl);background:var(--modal-bg);backdrop-filter:blur(10px);border:1px solid var(--modal-border);box-shadow:var(--modal-shadow);overflow:hidden;z-index:10001!important;padding:0;transform-style:preserve-3d;margin:auto;max-height:90vh;display:flex;flex-direction:column}._modalContent_1kje4_39{padding:30px;position:relative;z-index:5;overflow-y:auto;flex:1}._closeButton_1kje4_47{position:absolute;top:15px;right:15px;background:rgba(var(--accent-rgb),.1);border:none;font-size:20px;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--text-primary);cursor:pointer;z-index:10;box-shadow:var(--shadow);transition:all var(--transition-fast)}._closeButton_1kje4_47:hover{background:rgba(var(--accent-rgb),.2);transform:scale(1.05)}._formWrapper_1kje4_71{width:100%;position:relative;z-index:10}._formWrapper_1kje4_71 h2{font-size:2rem;margin-bottom:30px;color:var(--text-primary);text-align:center;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.1);background:linear-gradient(135deg,var(--gradient-start, #ffffff),var(--gradient-end, #a0a0a0));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}._formWrapper_1kje4_71 input{background:var(--bg-input);border:1px solid var(--border);color:var(--text-primary);position:relative;z-index:15;width:100%;padding:12px;border-radius:6px}._formWrapper_1kje4_71 input::placeholder{color:var(--text-tertiary)}._formWrapper_1kje4_71 input:focus{box-shadow:0 0 0 2px var(--accent-light);border-color:var(--accent);background:var(--bg-highlight);outline:none}._formWrapper_1kje4_71 .form-group{position:relative;z-index:20;margin-bottom:20px}._formWrapper_1kje4_71 label{color:var(--text-secondary);font-weight:500;display:block;margin-bottom:8px;position:relative;z-index:15}._formWrapper_1kje4_71 .submitButton{background:linear-gradient(90deg,var(--accent),var(--accent-hover));border-radius:var(--radius-full);font-weight:600;letter-spacing:.5px;padding:12px;box-shadow:var(--shadow);transform:translateY(0);transition:all var(--transition-normal);position:relative;overflow:hidden}._formWrapper_1kje4_71 .submitButton:hover:not(:disabled){background:linear-gradient(90deg,var(--accent-hover),var(--accent));transform:translateY(-2px);box-shadow:var(--shadow-hover)}._formWrapper_1kje4_71 .submitButton:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.2),transparent);transform:rotate(45deg);transition:all .5s;opacity:0}._formWrapper_1kje4_71 .submitButton:hover:not(:disabled):before{animation:shine 1.5s infinite}._formWrapper_1kje4_71 .switchButton{color:var(--text-tertiary);font-weight:600;transition:all var(--transition-fast)}._formWrapper_1kje4_71 .switchButton:hover:not(:disabled){color:var(--text-primary);transform:translateY(-1px)}._formWrapper_1kje4_71 p{color:var(--text-secondary)}._formWrapper_1kje4_71 .errorMessage{background-color:rgba(var(--error-rgb, 220, 53, 69),.15);border-left:3px solid var(--error);color:var(--text-primary)}._patternOverlay_1kje4_170{position:absolute;top:0;left:0;right:0;bottom:0;opacity:.05;background-image:linear-gradient(30deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(150deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(30deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(150deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(60deg,rgba(var(--accent-rgb),.2) 25%,transparent 25.5%,transparent 75%,rgba(var(--accent-rgb),.2) 75%,rgba(var(--accent-rgb),.2));background-size:40px 70px;mix-blend-mode:overlay;z-index:1;pointer-events:none}@keyframes _shine_1kje4_1{0%{left:-200%;opacity:0}20%{opacity:1}to{left:100%;opacity:0}}@media (max-width: 600px){._backdrop_1kje4_1{align-items:center;padding:0}._modal_1kje4_20{width:100%;max-height:min(100vh - 40px,600px);border-radius:12px;margin:0 10px}._modalContent_1kje4_39{padding:24px 20px;overflow:hidden}}.ban-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:1200;backdrop-filter:blur(4px)}[data-theme=dark] .ban-modal-overlay{background-color:rgba(0,0,0,.75)}.ban-modal{background-color:var(--background-color, white);border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,.25);width:90%;max-width:480px;overflow:hidden}[data-theme=dark] .ban-modal{box-shadow:0 8px 30px rgba(0,0,0,.4)}.ban-modal-header{background-color:#e74c3c;color:#fff;padding:20px;position:relative;display:flex;flex-direction:column;align-items:center;text-align:center}.ban-modal-header h2{margin:15px 0 0;font-size:22px;font-weight:600}.ban-modal-header .ban-close-button{position:absolute;top:15px;right:15px;background:none;border:none;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:50%;padding:6px;transition:background-color .2s}.ban-modal-header .ban-close-button:hover{background-color:rgba(255,255,255,.2)}.ban-modal-header .ban-icon-wrapper{display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:50%;width:60px;height:60px}.ban-modal-header .ban-icon-wrapper .ban-icon{color:#e74c3c;font-size:30px}[data-theme=dark] .ban-modal-header{background-color:#c0392b}.ban-modal-content{padding:25px}[data-theme=dark] .ban-modal-content{color:var(--text-primary, #e0e0e0)}.ban-details{display:flex;flex-direction:column;gap:20px;margin-bottom:25px}.ban-details .ban-reason,.ban-details .ban-admin,.ban-details .ban-time{display:flex;align-items:flex-start;gap:15px}.ban-details .ban-reason .ban-detail-icon,.ban-details .ban-admin .ban-detail-icon,.ban-details .ban-time .ban-detail-icon{font-size:22px;color:#e74c3c;flex-shrink:0;margin-top:3px}[data-theme=dark] .ban-details .ban-reason .ban-detail-icon,[data-theme=dark] .ban-details .ban-admin .ban-detail-icon,[data-theme=dark] .ban-details .ban-time .ban-detail-icon{color:#e67e22}.ban-details .ban-reason h3,.ban-details .ban-admin h3,.ban-details .ban-time h3{margin:0 0 8px;font-size:15px;font-weight:600;color:var(--text-secondary, #666)}[data-theme=dark] .ban-details .ban-reason h3,[data-theme=dark] .ban-details .ban-admin h3,[data-theme=dark] .ban-details .ban-time h3{color:#aaa}.ban-details .ban-reason p,.ban-details .ban-admin p,.ban-details .ban-time p{margin:0;padding:10px 15px;background-color:rgba(0,0,0,.05);border-radius:6px;font-size:14px;line-height:1.5;color:var(--text-primary, #333)}[data-theme=dark] .ban-details .ban-reason p,[data-theme=dark] .ban-details .ban-admin p,[data-theme=dark] .ban-details .ban-time p{background-color:rgba(255,255,255,.08)}.ban-details .ban-reason p.ban-permanent,.ban-details .ban-admin p.ban-permanent,.ban-details .ban-time p.ban-permanent{color:#c0392b;font-weight:600}[data-theme=dark] .ban-details .ban-reason p.ban-permanent,[data-theme=dark] .ban-details .ban-admin p.ban-permanent,[data-theme=dark] .ban-details .ban-time p.ban-permanent{color:#e74c3c}.ban-details .ban-reason p.ban-short,.ban-details .ban-admin p.ban-short,.ban-details .ban-time p.ban-short{color:#27ae60}[data-theme=dark] .ban-details .ban-reason p.ban-short,[data-theme=dark] .ban-details .ban-admin p.ban-short,[data-theme=dark] .ban-details .ban-time p.ban-short{color:#2ecc71}.ban-details .ban-reason p.ban-medium,.ban-details .ban-admin p.ban-medium,.ban-details .ban-time p.ban-medium{color:#f39c12}[data-theme=dark] .ban-details .ban-reason p.ban-medium,[data-theme=dark] .ban-details .ban-admin p.ban-medium,[data-theme=dark] .ban-details .ban-time p.ban-medium{color:#f1c40f}.ban-details .ban-reason p.ban-long,.ban-details .ban-admin p.ban-long,.ban-details .ban-time p.ban-long{color:#e67e22}[data-theme=dark] .ban-details .ban-reason p.ban-long,[data-theme=dark] .ban-details .ban-admin p.ban-long,[data-theme=dark] .ban-details .ban-time p.ban-long{color:#e74c3c}.ban-message{padding:15px;background-color:rgba(231,76,60,.07);border-radius:6px;border-left:3px solid #e74c3c;margin-bottom:25px}.ban-message p{margin:0;font-size:14px;line-height:1.5;color:var(--text-secondary, #666)}[data-theme=dark] .ban-message p{color:#bbb}[data-theme=dark] .ban-message{background-color:rgba(231,76,60,.15);border-color:#c0392b}.ban-ok-button{display:block;width:100%;padding:12px;background-color:#e74c3c;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s}.ban-ok-button:hover,[data-theme=dark] .ban-ok-button{background-color:#c0392b}[data-theme=dark] .ban-ok-button:hover{background-color:#a93226}@media (max-width: 480px){.ban-modal{width:95%;max-height:90vh;overflow-y:auto}.ban-modal-header h2{font-size:20px}.ban-details{gap:15px}}._form_16czx_1{display:flex;flex-direction:column;width:100%}._title_16czx_7{font-size:1.5rem;font-weight:600;margin-bottom:1.5rem;text-align:center;color:var(--text-primary)}._error_16czx_15{background-color:var(--error-light, rgba(239, 68, 68, .1));color:var(--error);padding:10px;border-radius:var(--radius-md);margin-bottom:16px;font-size:.875rem}._field_16czx_24{margin-bottom:16px}._label_16czx_28{display:block;margin-bottom:6px;font-size:.875rem;font-weight:500;color:var(--text-secondary)}._input_16czx_36{width:100%;padding:10px 12px;font-size:1rem;border:1px solid var(--border);border-radius:var(--radius-md);background-color:var(--bg-input);color:var(--text-primary);transition:border-color var(--transition-fast)}._input_16czx_36:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light)}._input_16czx_36::placeholder{color:var(--text-tertiary)}._input_16czx_36:disabled{background-color:var(--bg-highlight);cursor:not-allowed}._forgotPassword_16czx_59{text-align:right;margin-bottom:16px}._textButton_16czx_64{background:none;border:none;color:var(--accent);font-size:.875rem;cursor:pointer;padding:0}._textButton_16czx_64:hover{text-decoration:underline;color:var(--accent-hover)}._submitButton_16czx_77{padding:10px 16px;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:1rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}._submitButton_16czx_77:hover:not(:disabled){background-color:var(--accent-hover)}._terms_16czx_96{margin-bottom:16px;font-size:.75rem;color:var(--text-tertiary);text-align:center}._link_16czx_103{color:var(--accent);text-decoration:none}._link_16czx_103:hover{text-decoration:underline;color:var(--accent-hover)}._formContainer_16czx_112{display:flex;flex-direction:column;width:100%;color:var(--text-primary)}._formContainer_16czx_112 h2{text-align:center;margin-bottom:30px;color:var(--text-primary);font-size:28px;font-weight:700;letter-spacing:.5px;text-shadow:0 2px 4px rgba(0,0,0,.1);background:linear-gradient(135deg,var(--gradient-start, #ffffff),var(--gradient-end, #a0a0a0));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}._errorMessage_16czx_133{background-color:rgba(var(--error-rgb, 220, 53, 69),.15);border-left:3px solid var(--error);color:var(--text-primary);padding:12px 15px;border-radius:var(--radius-md);margin-bottom:20px;font-size:14px;box-shadow:var(--shadow)}._formGroup_16czx_144{margin-bottom:24px}._formGroup_16czx_144 label{display:flex;align-items:center;margin-bottom:10px;color:var(--text-secondary);font-weight:500;font-size:16px}._formGroup_16czx_144 ._inputIcon_16czx_155{margin-right:8px;font-size:18px;color:var(--text-tertiary)}._formGroup_16czx_144 ._inputWrapper_16czx_160{position:relative;width:100%}._formGroup_16czx_144 ._inputIconInside_16czx_164{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-tertiary);font-size:16px;pointer-events:none;opacity:.9;z-index:30}._formGroup_16czx_144 ._inputIconInside_16czx_164 svg{stroke-width:2px}._formGroup_16czx_144 input{width:100%;padding:14px 14px 14px 40px;border:1px solid var(--border);border-radius:var(--radius-md);background-color:var(--bg-input);color:var(--text-primary);font-size:16px;transition:all var(--transition-normal);position:relative;z-index:25}._formGroup_16czx_144 input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light);background-color:var(--bg-highlight)}._formGroup_16czx_144 input:disabled{opacity:.7;cursor:not-allowed}._formGroup_16czx_144 input::placeholder{color:var(--text-tertiary)}._charCounter_16czx_204{display:block;text-align:right;margin-top:4px;font-size:12px;color:var(--text-tertiary);transition:color var(--transition-fast)}._submitButton_16czx_77{width:100%;padding:14px;background:linear-gradient(90deg,var(--accent),var(--accent-hover));color:#fff;border:none;border-radius:var(--radius-full);font-size:16px;font-weight:600;cursor:pointer;margin-bottom:20px;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden;box-shadow:var(--shadow)}._submitButton_16czx_77 ._buttonIcon_16czx_231{margin-right:8px;font-size:18px}._submitButton_16czx_77:hover:not(:disabled){background:linear-gradient(90deg,var(--accent-hover),var(--accent));box-shadow:var(--shadow-hover);transform:translateY(-2px)}._submitButton_16czx_77:disabled{opacity:.7;cursor:not-allowed}._submitButton_16czx_77:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(to right,rgba(255,255,255,0),rgba(255,255,255,.2),rgba(255,255,255,0));transform:rotate(45deg);opacity:0;transition:all .5s}._submitButton_16czx_77:hover:not(:disabled):before{animation:_shimmer_16czx_1 1.5s infinite}._switchForm_16czx_260{display:flex;flex-direction:column;align-items:center;margin-top:10px}._switchForm_16czx_260 p{color:var(--text-secondary);margin-bottom:8px;font-size:15px}._switchButton_16czx_272{background:none;border:none;color:var(--text-tertiary);font-weight:600;font-size:15px;cursor:pointer;padding:0;position:relative;z-index:1;transition:all var(--transition-fast)}._switchButton_16czx_272:after{content:"";position:absolute;width:100%;height:2px;bottom:-2px;left:0;background:linear-gradient(90deg,var(--accent),var(--accent-hover));transform:scaleX(0);transform-origin:bottom right;transition:transform .3s ease-out}._switchButton_16czx_272:hover:not(:disabled){color:var(--text-primary)}._switchButton_16czx_272:hover:not(:disabled):after{transform:scaleX(1);transform-origin:bottom left}._switchButton_16czx_272:disabled{opacity:.7;cursor:not-allowed}@keyframes _shimmer_16czx_1{0%{left:-150%;opacity:0}50%{opacity:.4}to{left:150%;opacity:0}}@media (max-width: 600px){._formContainer_16czx_112 h2{font-size:24px;margin-bottom:20px}._formGroup_16czx_144{margin-bottom:18px}._formGroup_16czx_144 input{padding:12px 12px 12px 36px}}._notification_pnfun_1{display:flex;align-items:center;padding:12px 16px;border-radius:8px;margin-bottom:16px;box-shadow:0 4px 12px rgba(0,0,0,.1);max-width:100%;font-size:14px;line-height:1.5;position:relative}[data-theme=dark] ._notification_pnfun_1{box-shadow:0 4px 16px rgba(0,0,0,.2)}._iconContainer_pnfun_17{display:flex;align-items:center;justify-content:center;margin-right:12px;flex-shrink:0}._messageContainer_pnfun_25{flex-grow:1;margin-right:8px;word-break:break-word}._closeButton_pnfun_31{background:none;border:none;cursor:pointer;font-size:20px;line-height:1;padding:0;display:flex;align-items:center;justify-content:center;opacity:.7;transition:opacity .2s;width:24px;height:24px;flex-shrink:0}._closeButton_pnfun_31:hover{opacity:1}._closeButton_pnfun_31:focus{outline:none}._success_pnfun_54{background-color:rgba(46,204,113,.1);border-left:4px solid #2ecc71;color:#27ae60}._success_pnfun_54 ._iconContainer_pnfun_17{color:#2ecc71}._success_pnfun_54 ._closeButton_pnfun_31{color:#27ae60}[data-theme=dark] ._success_pnfun_54{background-color:rgba(46,204,113,.15);color:#2ecc71}._error_pnfun_70{background-color:rgba(231,76,60,.1);border-left:4px solid #e74c3c;color:#c0392b}._error_pnfun_70 ._iconContainer_pnfun_17{color:#e74c3c}._error_pnfun_70 ._closeButton_pnfun_31{color:#c0392b}[data-theme=dark] ._error_pnfun_70{background-color:rgba(231,76,60,.15);color:#e74c3c}._info_pnfun_86{background-color:rgba(52,152,219,.1);border-left:4px solid #3498db;color:#2980b9}._info_pnfun_86 ._iconContainer_pnfun_17{color:#3498db}._info_pnfun_86 ._closeButton_pnfun_31{color:#2980b9}[data-theme=dark] ._info_pnfun_86{background-color:rgba(52,152,219,.15);color:#3498db}@media (max-width: 576px){._notification_pnfun_1{padding:12px 14px;font-size:13px}}._perkBase_14u1w_18{font-weight:600!important;font-size:inherit!important;line-height:inherit!important;font-family:inherit!important;letter-spacing:inherit!important;display:inline-block!important}._sponsorPerk_14u1w_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)!important}._earlyUserPerk_14u1w_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)!important}._adminPerk_14u1w_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)!important}._userPerk_14u1w_45{color:var(--user-color)!important;text-shadow:none!important}:root{--sponsor-color: #ffcf4a;--sponsor-color-rgb: 255, 207, 74;--sponsor-shadow-color: rgba(255, 207, 74, .5);--early-user-color: #8bc9e3;--early-user-color-rgb: 139, 201, 227;--early-user-shadow-color: rgba(139, 201, 227, .5);--admin-color: #ff6b6b;--admin-color-rgb: 255, 107, 107;--admin-shadow-color: rgba(255, 107, 107, .5);--user-color: #888888;--user-color-rgb: 136, 136, 136;--user-shadow-color: rgba(136, 136, 136, .5)}._perkBase_1bbdr_18{font-weight:600!important;font-size:inherit!important;line-height:inherit!important;font-family:inherit!important;letter-spacing:inherit!important;display:inline-block!important}._sponsorPerk_1bbdr_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)!important}._earlyUserPerk_1bbdr_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)!important}._adminPerk_1bbdr_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)!important}._userPerk_1bbdr_45{color:var(--user-color)!important;text-shadow:none!important}._profileContainer_1bbdr_51{max-width:900px;margin:30px auto;padding:30px;background-color:var(--bg-secondary);border-radius:var(--radius-lg);box-shadow:var(--shadow)}@media (max-width: 600px){._profileContainer_1bbdr_51{padding:20px 15px}}._loading_1bbdr_65,._error_1bbdr_65{display:flex;justify-content:center;align-items:center;height:200px;font-size:18px;color:var(--text-primary)}._error_1bbdr_65{color:var(--error)}._profileHeader_1bbdr_78{display:flex;margin-bottom:40px}@media (max-width: 600px){._profileHeader_1bbdr_78{flex-direction:column;align-items:center}}._avatarSection_1bbdr_89{position:relative;margin-right:40px}@media (max-width: 600px){._avatarSection_1bbdr_89{margin-right:0;margin-bottom:20px}}._avatarContainer_1bbdr_100{position:relative;width:180px;height:180px;border-radius:50%;overflow:hidden}._profileAvatar_1bbdr_108{width:100%;height:100%;object-fit:cover;border:5px solid var(--accent);border-radius:50%;box-shadow:0 4px 10px rgba(0,0,0,.1)}._changeAvatarButton_1bbdr_117{display:flex;align-items:center;justify-content:center;gap:8px;background-color:var(--accent);color:#fff;border:none;border-radius:8px;padding:8px 16px;font-size:16px;font-weight:600;cursor:pointer;margin-top:16px;box-shadow:0 2px 6px rgba(0,0,0,.2);transition:all .2s ease}._changeAvatarButton_1bbdr_117:hover{background-color:var(--accent-dark);transform:translateY(-2px)}@media (max-width: 600px){._changeAvatarButton_1bbdr_117{position:absolute;bottom:0;right:0;width:auto;height:auto;padding:8px;border-radius:50%;background-color:var(--accent);color:#fff;font-size:0;margin:0;transform:translate(5px,-5px)}._changeAvatarButton_1bbdr_117 svg{font-size:18px}._changeAvatarButton_1bbdr_117:hover{transform:translate(5px,-5px) scale(1.1)}}._profileInfo_1bbdr_161{flex:1}._displayName_1bbdr_165{font-size:2rem!important;font-weight:700;margin-bottom:20px;text-shadow:0 1px 3px rgba(0,0,0,.3);line-height:1.2;word-wrap:break-word;word-break:break-word;overflow-wrap:break-word;max-width:100%}@media (max-width: 600px){._displayName_1bbdr_165{font-size:1.75rem!important;text-align:center}}._userMeta_1bbdr_183{display:grid;gap:15px}@media (max-width: 600px){._userMeta_1bbdr_183{width:100%}}._userRole_1bbdr_193,._userJoined_1bbdr_193,._userEmail_1bbdr_193,._userPrivileges_1bbdr_193{display:flex;align-items:flex-start;font-size:16px;flex-wrap:wrap}@media (max-width: 600px){._userRole_1bbdr_193,._userJoined_1bbdr_193,._userEmail_1bbdr_193,._userPrivileges_1bbdr_193{flex-direction:column;gap:5px}}._label_1bbdr_206{min-width:170px;font-weight:600;color:var(--text-secondary)}@media (max-width: 600px){._label_1bbdr_206{min-width:unset;width:100%}}._value_1bbdr_218{color:var(--text-primary);font-weight:500;word-wrap:break-word;word-break:break-word;overflow-wrap:break-word;max-width:100%}._privilegeContainer_1bbdr_227{display:flex;align-items:center;gap:15px;flex-wrap:wrap}@media (max-width: 600px){._privilegeContainer_1bbdr_227{width:100%}}._changePerkButton_1bbdr_239{background-color:var(--accent);color:#fff;border:none;border-radius:4px;padding:5px 10px;font-size:12px;cursor:pointer}._changePerkButton_1bbdr_239:hover{background-color:var(--accent-dark)}._adminActions_1bbdr_252,._personalSettings_1bbdr_252{margin-top:30px;padding-top:20px;border-top:1px solid var(--border)}._adminActions_1bbdr_252 h2,._personalSettings_1bbdr_252 h2{font-size:20px;margin-bottom:15px;color:var(--text-primary)}._adminActions_1bbdr_252 h2{display:flex;align-items:center;gap:10px}._adminActions_1bbdr_252 h2 svg{color:var(--accent)}._actionButtons_1bbdr_273{display:flex;gap:10px}._editButton_1bbdr_278,._banButton_1bbdr_278,._saveButton_1bbdr_278,._cancelButton_1bbdr_278{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-weight:500;display:flex;align-items:center;gap:6px}._editButton_1bbdr_278:hover,._banButton_1bbdr_278:hover,._saveButton_1bbdr_278:hover,._cancelButton_1bbdr_278:hover{opacity:.9}._editButton_1bbdr_278{background-color:var(--accent);color:#fff}._banButton_1bbdr_278{background-color:#e74c3c!important;color:#fff;position:relative;overflow:hidden}._banButton_1bbdr_278:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:.5s}._banButton_1bbdr_278:hover:before{left:100%}._banButton_1bbdr_278:hover:not(:disabled){background-color:#c0392b!important;transform:translateY(-3px);box-shadow:0 8px 15px rgba(231,76,60,.4)!important}._saveButton_1bbdr_278{background-color:#2ecc71;color:#fff}._cancelButton_1bbdr_278{background-color:#f1f1f1;color:#333}[data-theme=dark] ._cancelButton_1bbdr_278{background-color:#333;color:#f1f1f1}._settingGroup_1bbdr_336{margin-bottom:15px}._settingGroup_1bbdr_336 label{display:block;margin-bottom:5px;color:var(--text-secondary)}._settingControl_1bbdr_345{display:flex;gap:10px}._settingControl_1bbdr_345 input{flex:1;padding:8px;border:1px solid var(--border);border-radius:4px;background-color:var(--bg-primary);color:var(--text-primary)}._backdrop_1bbdr_359{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,rgba(var(--modal-bg-rgb, 33, 33, 38),.85),rgba(var(--modal-bg-end-rgb, 68, 68, 77),.85));display:flex;justify-content:center;align-items:center;z-index:10000;backdrop-filter:blur(8px);perspective:1000px;box-sizing:border-box;overscroll-behavior:contain;transform:translateZ(0);isolation:isolate;padding:20px}@media (max-width: 600px){._backdrop_1bbdr_359{padding:0}}._modal_1bbdr_386{position:relative;max-width:450px;width:90%;border-radius:var(--radius-xl);background:var(--modal-bg, var(--bg-secondary));backdrop-filter:blur(10px);border:1px solid var(--modal-border, var(--border));box-shadow:var(--modal-shadow, var(--shadow));overflow:hidden;z-index:10001!important;padding:0;transform-style:preserve-3d;margin:auto;max-height:90vh;display:flex;flex-direction:column}@media (max-width: 600px){._modal_1bbdr_386{width:100%;height:100vh;max-height:100vh;border-radius:0;margin:0}}._modalContent_1bbdr_415{padding:30px;position:relative;z-index:5;overflow-y:auto;flex:1}@media (max-width: 600px){._modalContent_1bbdr_415{padding:24px 20px}}._modalContent_1bbdr_415 h3{font-size:22px;margin-bottom:20px;color:var(--text-primary);text-align:center;font-weight:600}._closeButton_1bbdr_435{position:absolute;top:15px;right:15px;background:rgba(var(--accent-rgb),.1);border:none;font-size:20px;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--text-primary);cursor:pointer;z-index:10;box-shadow:var(--shadow);transition:all var(--transition-fast);margin:0}._closeButton_1bbdr_435:hover{background:rgba(var(--accent-rgb),.2);transform:scale(1.05)}._avatarsGrid_1bbdr_461{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:20px;margin-top:20px}._avatarCard_1bbdr_468{cursor:pointer;padding:15px;border-radius:12px;display:flex;flex-direction:column;align-items:center;border:1px solid var(--border);background:var(--bg-secondary);transition:all .2s ease;position:relative}._avatarCard_1bbdr_468._selectedAvatar_1bbdr_480{border:2px solid var(--accent);background:var(--bg-highlight)}._avatarCard_1bbdr_468:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.1)}._avatarImageContainer_1bbdr_489{position:relative;width:90px;height:90px;margin-bottom:10px}._avatarImage_1bbdr_489{width:90px;height:90px;border-radius:50%;object-fit:cover;border:1px solid var(--border)}._selectedAvatar_1bbdr_480 ._avatarImage_1bbdr_489{border:3px solid var(--accent)}._selectedIndicator_1bbdr_507{position:absolute;top:-8px;right:-8px;background:var(--accent);border-radius:50%;padding:3px;display:flex;justify-content:center;align-items:center}._avatarName_1bbdr_519{font-size:14px;font-weight:500;color:var(--text-primary)}._selectedAvatar_1bbdr_480 ._avatarName_1bbdr_519{font-weight:600}._perksList_1bbdr_529{display:flex;flex-direction:column;gap:12px}._perkOption_1bbdr_535{display:flex;justify-content:space-between;align-items:center;padding:15px;background-color:var(--bg-highlight);border-radius:8px;cursor:pointer;border:1px solid var(--border);transition:all .2s ease}._perkOption_1bbdr_535:hover{transform:translate(5px);background-color:var(--bg-hover);border-color:var(--accent)}._activePerkOption_1bbdr_552{border:2px solid var(--accent);background-color:rgba(var(--accent-rgb),.1)}._perkName_1bbdr_557{font-weight:600;font-size:16px;padding:6px 12px;border-radius:20px;display:inline-block}._activePerkIndicator_1bbdr_565{display:flex;align-items:center;justify-content:center;background-color:var(--accent);color:#fff;width:24px;height:24px;border-radius:50%}._modalMotion_1bbdr_576{width:90%;max-width:500px;overflow:visible}@media (max-width: 600px){._modalMotion_1bbdr_576{width:100%;height:100%;max-width:100%}}._modalFooter_1bbdr_589{text-align:center;margin-top:10px}._modalForm_1bbdr_594{display:flex;flex-direction:column;gap:20px;width:100%}._formGroup_1bbdr_601{display:flex;flex-direction:column;gap:8px}._formGroup_1bbdr_601 label{font-weight:500;font-size:15px;color:var(--text-primary)}._formGroup_1bbdr_601 ._formControl_1bbdr_611{padding:14px 16px;border-radius:10px;border:1px solid var(--border);background-color:var(--bg-input);color:var(--text-primary);font-size:16px;transition:all .3s;width:100%}._formGroup_1bbdr_601 ._formControl_1bbdr_611:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(var(--accent-rgb),.2);background-color:var(--bg-secondary)}._formGroup_1bbdr_601 ._formControl_1bbdr_611:disabled{opacity:.7;cursor:not-allowed}._formActions_1bbdr_632{display:flex;justify-content:flex-end;gap:14px;margin-top:20px}._formActions_1bbdr_632 button{padding:12px 22px;border-radius:10px;font-weight:500;font-size:16px;transition:all .3s;cursor:pointer;display:flex;align-items:center;gap:8px}._formActions_1bbdr_632 button:disabled{opacity:.7;cursor:not-allowed}._formActions_1bbdr_632 ._cancelButton_1bbdr_278{background-color:var(--bg-primary);border:1px solid var(--border);color:var(--text-secondary)}._formActions_1bbdr_632 ._cancelButton_1bbdr_278:hover:not(:disabled){background-color:var(--bg-hover);transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.1)}._formActions_1bbdr_632 ._cancelButton_1bbdr_278:active:not(:disabled){transform:translateY(0);box-shadow:none}._formActions_1bbdr_632 ._submitButton_1bbdr_667{background-color:var(--accent);border:none;color:#fff;box-shadow:0 4px 10px rgba(var(--accent-rgb),.3)}._formActions_1bbdr_632 ._submitButton_1bbdr_667:hover:not(:disabled){background-color:var(--accent-dark);transform:translateY(-3px);box-shadow:0 8px 15px rgba(var(--accent-rgb),.4)}._formActions_1bbdr_632 ._submitButton_1bbdr_667:active:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px rgba(var(--accent-rgb),.3)}._formActions_1bbdr_632 ._banButton_1bbdr_278{background-color:var(--error)}._formActions_1bbdr_632 ._banButton_1bbdr_278:hover:not(:disabled){background-color:var(--error-dark, #c0392b)}._modalHeader_1bbdr_689{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:18px;border-bottom:2px solid rgba(var(--accent-rgb),.1)}@media (max-width: 600px){._modalHeader_1bbdr_689{margin-bottom:16px;margin-top:8px}}._modalHeader_1bbdr_689 h3{font-size:22px;font-weight:600;margin:0;color:var(--text-primary);text-align:left}._modalHeader_1bbdr_689 ._closeButton_1bbdr_435{background:rgba(0,0,0,.05);border:none;color:var(--text-secondary);cursor:pointer;padding:10px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease;margin:0;width:auto;box-shadow:none}._modalHeader_1bbdr_689 ._closeButton_1bbdr_435:hover{background-color:rgba(var(--accent-rgb),.1);color:var(--accent);transform:none;box-shadow:none}._errorMessage_1bbdr_732,._successMessage_1bbdr_732{padding:14px;border-radius:8px;display:flex;align-items:center;gap:12px;font-size:14px;line-height:1.4;animation:_fadeIn_1bbdr_1 .3s ease-in-out}._errorMessage_1bbdr_732{background-color:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);color:#dc2626}._successMessage_1bbdr_732{background-color:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.2);color:#16a34a}@keyframes _fadeIn_1bbdr_1{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}._passwordStrength_1bbdr_765{margin-top:8px;width:100%}._passwordStrengthInfo_1bbdr_770{display:flex;justify-content:space-between;margin-bottom:4px}._passwordStrengthText_1bbdr_776{font-size:14px;font-weight:500}._passwordStrengthPercentage_1bbdr_781{font-size:14px;color:var(--text-secondary)}._passwordStrengthBar_1bbdr_786{height:6px;width:100%;background-color:#e5e7eb;border-radius:3px;overflow:hidden;position:relative}._passwordStrengthFill_1bbdr_795{height:100%;position:absolute;left:0;top:0;border-radius:3px;transition:width .3s ease-out}._formActions_1bbdr_632 ._submitButton_1bbdr_667{min-width:130px;display:flex;justify-content:center;align-items:center}._formActions_1bbdr_632 ._submitButton_1bbdr_667 span{display:inline-flex;align-items:center}._successMessage_1bbdr_732{padding:40px 20px;display:flex;flex-direction:column;align-items:center;gap:20px;text-align:center}._successMessage_1bbdr_732 svg{font-size:45px;color:#16a34a;background:rgba(34,197,94,.2);padding:18px;border-radius:50%;box-shadow:0 5px 15px rgba(34,197,94,.3)}[data-theme=dark] ._successMessage_1bbdr_732 svg{color:#22c55e;background:rgba(22,163,74,.25);box-shadow:0 0 0 3px rgba(34,197,94,.4),0 5px 15px rgba(34,197,94,.4)}._successMessage_1bbdr_732 span{font-weight:600;font-size:20px;color:var(--text-primary)}._avatarWrapper_1bbdr_843{position:relative;border-radius:50%;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.1);transition:all .3s ease}._avatarWrapper_1bbdr_843:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(0,0,0,.2)}._loadingOverlay_1bbdr_855{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(var(--accent-rgb),.7);display:flex;align-items:center;justify-content:center;border-radius:50%;z-index:2}._avatarHint_1bbdr_869{text-align:center;color:var(--text-secondary);margin-top:20px;font-size:15px;line-height:1.5;padding:0 15px}._avatarHint_1bbdr_869:before{content:"";display:block;width:40px;height:2px;background-color:rgba(var(--accent-rgb),.3);margin:0 auto 15px}._adminEditForm_1bbdr_886{background-color:var(--bg-secondary);padding:20px;border-radius:8px;margin-top:20px;border:1px solid var(--border)}[data-theme=dark] ._adminEditForm_1bbdr_886{background-color:rgba(255,255,255,.05)}._formGroup_1bbdr_601{margin-bottom:20px}._formGroup_1bbdr_601 label{display:block;margin-bottom:8px;font-weight:500;color:var(--text-primary)}._blockLabel_1bbdr_907{display:block;margin-bottom:10px;font-weight:500;color:var(--text-primary)}._formInput_1bbdr_914,._formSelect_1bbdr_914{width:100%;padding:10px;border:1px solid var(--border);border-radius:4px;background-color:var(--bg-input);color:var(--text-primary);font-size:16px}._formInput_1bbdr_914:focus,._formSelect_1bbdr_914:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.1)}[data-theme=dark] ._formInput_1bbdr_914,[data-theme=dark] ._formSelect_1bbdr_914{background-color:rgba(255,255,255,.1);border-color:rgba(255,255,255,.2)}._checkboxGroup_1bbdr_933{display:flex;flex-direction:column;gap:12px}._checkboxLabel_1bbdr_939{display:flex;align-items:flex-start;gap:10px;cursor:pointer}._checkboxLabel_1bbdr_939 input[type=checkbox]{margin-top:3px;cursor:pointer}._checkboxLabel_1bbdr_939 input[type=checkbox]:disabled{cursor:not-allowed;opacity:.7}._checkboxText_1bbdr_954{display:flex;flex-direction:column}._statusMessage_1bbdr_959{padding:12px;border-radius:4px;margin-bottom:20px;display:flex;align-items:center;gap:10px}._statusMessage_1bbdr_959._error_1bbdr_65{background-color:rgba(231,76,60,.1);color:#e74c3c;border-left:3px solid #e74c3c}._statusMessage_1bbdr_959._success_1bbdr_732{background-color:rgba(46,204,113,.1);color:#2ecc71;border-left:3px solid #2ecc71}._statusMessage_1bbdr_959._info_1bbdr_977{background-color:rgba(52,152,219,.1);color:#3498db;border-left:3px solid #3498db}._statusMessage_1bbdr_959 svg{font-size:18px}._loadingIcon_1bbdr_986{animation:_spin_1bbdr_1 1s linear infinite}@keyframes _spin_1bbdr_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._adminActions_1bbdr_252{margin-top:2rem;padding:1.5rem;background-color:#f8f9fa;border-radius:10px;border:1px solid #eee;box-shadow:0 2px 10px rgba(0,0,0,.05)}[data-theme=dark] ._adminActions_1bbdr_252{background-color:#292929;border-color:#333;box-shadow:0 2px 10px rgba(0,0,0,.2)}._adminActions_1bbdr_252 h2{font-size:1.25rem;margin-bottom:1rem;color:#333;display:flex;align-items:center;gap:8px}[data-theme=dark] ._adminActions_1bbdr_252 h2{color:#e0e0e0}._adminActions_1bbdr_252 h2 svg{color:#666}[data-theme=dark] ._adminActions_1bbdr_252 h2 svg{color:#999}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273{display:flex;gap:10px}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button{padding:10px 15px;border:none;border-radius:5px;font-size:.9rem;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .2s ease}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button svg{font-size:1rem}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278{background-color:#3498db;color:#fff}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278:hover{background-color:#2980b9;transform:translateY(-2px);box-shadow:0 2px 5px rgba(0,0,0,.2)}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278{background-color:#2980b9}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278:hover{background-color:#3498db;box-shadow:0 2px 5px rgba(0,0,0,.4)}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278{background-color:#e74c3c;color:#fff}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278:hover{background-color:#c0392b;transform:translateY(-2px);box-shadow:0 2px 5px rgba(0,0,0,.2)}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278{background-color:#c0392b}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278:hover{background-color:#e74c3c;box-shadow:0 2px 5px rgba(0,0,0,.4)}._adminEditForm_1bbdr_886{background-color:#fff;padding:1.5rem;border-radius:8px;border:1px solid #eee;margin-top:1rem}[data-theme=dark] ._adminEditForm_1bbdr_886{background-color:#252530;border-color:#333}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601{margin-bottom:1.25rem}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label{display:block;margin-bottom:.75rem;font-size:.95rem;font-weight:500;color:#444;display:flex;align-items:center;gap:6px}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label{color:#ccc}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label svg{color:#666}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label svg{color:#999}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]{width:100%;padding:.75rem 1rem;border:1px solid #ddd;border-radius:6px;font-size:1rem}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.2)}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]{background-color:#1e1e24;border-color:#444;color:#e0e0e0}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]:focus{border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.3)}._adminEditForm_1bbdr_886 ._perksOptions_1bbdr_1133{display:flex;flex-direction:column;gap:.75rem;padding:1rem;background-color:#f8f9fa;border-radius:6px;border:1px solid #eee}[data-theme=dark] ._adminEditForm_1bbdr_886 ._perksOptions_1bbdr_1133{background-color:#1e1e24;border-color:#333}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535{display:flex;align-items:center}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 label{margin:0 0 0 .75rem;font-weight:400;cursor:pointer;font-size:.95rem}[data-theme=dark] ._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 label{color:#ccc}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 input[type=checkbox]{cursor:pointer;width:18px;height:18px}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 input[type=checkbox]:checked{accent-color:#3498db}._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167{background-color:rgba(52,152,219,.05);padding:10px;border-radius:6px;border-left:3px solid #3498db}[data-theme=dark] ._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167{background-color:rgba(52,152,219,.1)}._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167 ._baseLabel_1bbdr_1176{font-weight:500}._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167 ._baseLabel_1bbdr_1176 ._baseNote_1bbdr_1179{font-size:.8rem;opacity:.7;font-style:italic;margin-left:5px}._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185{width:100%;padding:.75rem 1rem;border:1px solid #ddd;border-radius:6px;font-size:1rem;background-color:#fff}._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.2)}[data-theme=dark] ._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185{background-color:#1e1e24;border-color:#444;color:#e0e0e0}[data-theme=dark] ._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185:focus{border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.3)}[data-theme=dark] ._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185 option{background-color:#1e1e24}._adminEditForm_1bbdr_886 ._formActions_1bbdr_632{display:flex;justify-content:flex-end;gap:.75rem;margin-top:1.5rem}._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278,._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278{padding:.75rem 1.5rem;border-radius:6px;font-size:.95rem;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .2s ease}._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278{background-color:#f0f0f0;border:none;color:#333}._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278:hover{background-color:#e0e0e0}[data-theme=dark] ._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278{background-color:#3a3a3a;color:#ddd}[data-theme=dark] ._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278:hover{background-color:#444}._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278{background-color:#3498db;border:none;color:#fff}._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278:hover:not(:disabled){background-color:#2980b9}._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278:disabled{opacity:.7;cursor:not-allowed}[data-theme=dark] ._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278{background-color:#2980b9}[data-theme=dark] ._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278:hover:not(:disabled){background-color:#3498db}._statusMessage_1bbdr_959{padding:.75rem 1rem;border-radius:6px;margin-bottom:1rem;font-size:.9rem;display:flex;align-items:center;gap:8px}._statusMessage_1bbdr_959 svg{font-size:1.1rem;flex-shrink:0}._statusMessage_1bbdr_959._success_1bbdr_732{background-color:rgba(46,204,113,.1);border-left:3px solid #2ecc71;color:#2ecc71}[data-theme=dark] ._statusMessage_1bbdr_959._success_1bbdr_732{background-color:rgba(46,204,113,.15)}._statusMessage_1bbdr_959._error_1bbdr_65{background-color:rgba(231,76,60,.1);border-left:3px solid #e74c3c;color:#e74c3c}[data-theme=dark] ._statusMessage_1bbdr_959._error_1bbdr_65{background-color:rgba(231,76,60,.15)}._statusMessage_1bbdr_959._info_1bbdr_977{background-color:rgba(52,152,219,.1);border-left:3px solid #3498db;color:#3498db}[data-theme=dark] ._statusMessage_1bbdr_959._info_1bbdr_977{background-color:rgba(52,152,219,.15)}._banInfoBox_1bbdr_1299{background-color:rgba(231,76,60,.1);border-left:4px solid #e74c3c;border-radius:4px;padding:15px;margin-bottom:20px}._banInfoBox_1bbdr_1299 h3{color:#e74c3c;margin-top:0;margin-bottom:15px;font-size:16px;display:flex;align-items:center}._banInfoBox_1bbdr_1299 h3:before{content:"⚠️";margin-right:8px}[data-theme=dark] ._banInfoBox_1bbdr_1299{background-color:rgba(231,76,60,.2);border-color:#c0392b}[data-theme=dark] ._banInfoBox_1bbdr_1299 h3{color:#e67e22}._banDetails_1bbdr_1326{margin-bottom:15px}._banDetails_1bbdr_1326 p{margin:8px 0;color:var(--text-primary);font-size:14px}._banDetails_1bbdr_1326 ._bannedStatus_1bbdr_1334{display:inline-block;background-color:#e74c3c;color:#fff;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500}[data-theme=dark] ._banDetails_1bbdr_1326 ._bannedStatus_1bbdr_1334{background-color:#c0392b}._banDetails_1bbdr_1326 ._banDuration_1bbdr_1346{display:inline-flex;align-items:center;gap:5px;color:var(--text-primary)}._banDetails_1bbdr_1326 ._banDuration_1bbdr_1346 svg{color:#e74c3c}._unbanButton_1bbdr_1356{background-color:#27ae60;color:#fff;border:none;border-radius:4px;padding:8px 16px;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:8px;transition:background-color .2s}._unbanButton_1bbdr_1356:hover{background-color:#2ecc71}._unbanButton_1bbdr_1356:disabled{opacity:.7;cursor:not-allowed}[data-theme=dark] ._unbanButton_1bbdr_1356{background-color:#219653}[data-theme=dark] ._unbanButton_1bbdr_1356:hover{background-color:#27ae60}._activePerk_1bbdr_552{font-size:1.8rem!important;border-radius:6px;display:inline-flex;align-items:center;cursor:pointer;background-color:var(--bg-secondary);box-shadow:0 2px 4px rgba(0,0,0,.05);margin-bottom:10px}._activePerk_1bbdr_552 ._editPerkIcon_1bbdr_1393{margin-left:8px}._profileDetail_1bbdr_1397{font-size:16px;margin-bottom:12px;display:flex;align-items:center;gap:10px}._profileDetail_1bbdr_1397:last-child{margin-bottom:0}._profileDetail_1bbdr_1397 ._detailIcon_1bbdr_1407{color:var(--text-secondary);flex-shrink:0}@media (max-width: 600px){._buttonText_1bbdr_1413{display:none}}textarea._formControl_1bbdr_611{min-height:120px;resize:vertical;line-height:1.5}textarea._formControl_1bbdr_611::placeholder{color:var(--text-tertiary, #999)}select._formControl_1bbdr_611{-webkit-appearance:none;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'currentColor\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'%3e%3cpolyline points=\'6 9 12 15 18 9\'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 16px center;background-size:16px;padding-right:40px}select._formControl_1bbdr_611 option{padding:10px}._banModalHeader_1bbdr_1441{background-color:rgba(231,76,60,.1);border-left:4px solid #e74c3c;padding:12px 15px;margin-bottom:24px;border-radius:6px}._banModalHeader_1bbdr_1441 h3{display:flex;align-items:center;gap:10px;color:#e74c3c;font-weight:600;margin:0}._banModalHeader_1bbdr_1441 h3 svg{flex-shrink:0}._banModalHeader_1bbdr_1441 p{margin:10px 0 0;font-size:14px;color:var(--text-secondary);line-height:1.5}._modalDivider_1bbdr_1467{height:1px;background:linear-gradient(to right,transparent,var(--border),transparent);margin:20px 0;opacity:.5}._errorMessage_1bbdr_732{display:flex;align-items:flex-start;gap:10px;padding:12px 15px;margin-bottom:20px;border-radius:6px;background-color:rgba(231,76,60,.1);border-left:4px solid #e74c3c;color:var(--text-primary);font-size:14px;line-height:1.5}._errorMessage_1bbdr_732 svg{color:#e74c3c;margin-top:2px;flex-shrink:0}._adminAvatar_1bbdr_1494{position:relative;border:2px solid #5c6bc0;box-shadow:0 0 10px rgba(92,107,192,.5)}._adminAvatar_1bbdr_1494:hover{box-shadow:0 0 15px rgba(92,107,192,.7)}[data-theme=dark] ._adminAvatar_1bbdr_1494{border-color:#3f51b5;box-shadow:0 0 10px rgba(63,81,181,.6)}[data-theme=dark] ._adminAvatar_1bbdr_1494:hover{box-shadow:0 0 15px rgba(63,81,181,.8)}._adminAvatarBadge_1bbdr_1510{position:absolute;top:-8px;right:-8px;background-color:#5c6bc0;color:#fff;font-size:11px;font-weight:600;padding:2px 6px;border-radius:10px;z-index:2}[data-theme=dark] ._adminAvatarBadge_1bbdr_1510{background-color:#3f51b5;box-shadow:0 0 5px rgba(0,0,0,.3)}._postsContainer_w8o2b_2{width:100%;max-width:800px;margin:0 auto;padding:20px}._postsHeader_w8o2b_9{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}._postsHeader_w8o2b_9 h2{font-size:22px;display:flex;align-items:center;gap:8px;color:var(--text-primary);margin:0}._postsHeader_w8o2b_9 h2 svg{color:var(--accent)}@media (max-width: 480px){._postsHeader_w8o2b_9 h2{font-size:18px;width:100%}}._postsHeader_w8o2b_9 ._headerButtons_w8o2b_34{display:flex;gap:10px;align-items:center;flex-wrap:wrap}@media (max-width: 480px){._postsHeader_w8o2b_9 ._headerButtons_w8o2b_34{width:100%;justify-content:space-between}}._postsHeader_w8o2b_9 ._refreshButton_w8o2b_46,._postsHeader_w8o2b_9 ._rulesButton_w8o2b_46{display:flex;align-items:center;gap:6px;padding:8px 14px;border-radius:8px;font-size:14px;font-weight:500;transition:all .2s ease;background:var(--bg-secondary);color:var(--text-secondary);border:1px solid var(--border);white-space:nowrap;will-change:transform,box-shadow}._postsHeader_w8o2b_9 ._refreshButton_w8o2b_46 svg,._postsHeader_w8o2b_9 ._rulesButton_w8o2b_46 svg{font-size:16px}._postsHeader_w8o2b_9 ._refreshButton_w8o2b_46:hover,._postsHeader_w8o2b_9 ._rulesButton_w8o2b_46:hover{background:var(--bg-highlight);transform:translateY(-2px);box-shadow:0 3px 8px rgba(0,0,0,.1)}._postsHeader_w8o2b_9 ._refreshButton_w8o2b_46:disabled,._postsHeader_w8o2b_9 ._rulesButton_w8o2b_46:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 480px){._postsHeader_w8o2b_9 ._refreshButton_w8o2b_46,._postsHeader_w8o2b_9 ._rulesButton_w8o2b_46{flex:1;justify-content:center;padding:10px 8px;font-size:13px}}._postsHeader_w8o2b_9 ._rulesButton_w8o2b_46{background:var(--accent-light);color:var(--accent);border:1px solid transparent}._postsHeader_w8o2b_9 ._rulesButton_w8o2b_46 svg{color:var(--accent)}._postsHeader_w8o2b_9 ._rulesButton_w8o2b_46:hover{background:var(--accent-light);opacity:.9}[data-theme=dark] ._postsHeader_w8o2b_9 ._rulesButton_w8o2b_46{background-color:#d3d3d3;color:var(--accent);border:1px solid var(--accent)}[data-theme=dark] ._postsHeader_w8o2b_9 ._rulesButton_w8o2b_46:hover{background-color:rgba(52,152,219,.3)}._refreshButton_w8o2b_46{padding:8px 16px;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:14px;font-weight:500;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:8px;will-change:transform,background-color}._refreshButton_w8o2b_46:hover:not(:disabled){background-color:var(--bg-color);transform:translateY(-2px)}._refreshButton_w8o2b_46:disabled{opacity:.7;cursor:not-allowed}._refreshButton_w8o2b_46 svg{font-size:16px}._postsList_w8o2b_131{display:flex;flex-direction:column;gap:24px;margin-top:20px;will-change:contents}._loading_w8o2b_139{text-align:center;padding:40px 0;color:var(--text-secondary);font-size:18px;display:flex;align-items:center;justify-content:center;gap:10px}._loading_w8o2b_139 svg{animation:_spin_w8o2b_1 1s linear infinite;will-change:transform}._errorMessage_w8o2b_162{background-color:rgba(231,76,60,.1);color:var(--error);padding:12px 16px;border-radius:var(--radius-md);margin-bottom:20px;font-size:14px;display:flex;align-items:center;gap:8px;border-left:3px solid var(--error)}._errorMessage_w8o2b_162 svg{font-size:18px}._noPosts_w8o2b_178{text-align:center;padding:40px 0;color:var(--text-secondary);font-size:16px;display:flex;flex-direction:column;align-items:center;gap:16px}._noPosts_w8o2b_178 svg{font-size:48px;opacity:.5}._notAuthenticatedMessage_w8o2b_193{text-align:center;padding:16px;background-color:var(--bg-secondary);border-radius:var(--radius-md);color:var(--text-secondary);margin-bottom:20px;font-size:15px;display:flex;align-items:center;justify-content:center;gap:8px}._notAuthenticatedMessage_w8o2b_193 svg{color:var(--accent)}._createPostContainer_w8o2b_210{background:var(--bg-secondary);border-radius:var(--radius-lg);border:1px solid var(--border);padding:20px;margin-bottom:24px;transition:all var(--transition-fast)}._createPostTitle_w8o2b_219{font-size:1.25rem;font-weight:600;margin:0 0 16px;color:var(--text-primary);display:flex;align-items:center;gap:8px}._createPostTitle_w8o2b_219 svg{color:var(--accent)}._createPostForm_w8o2b_232{display:flex;flex-direction:column;gap:16px}._contentInput_w8o2b_238{width:100%;padding:16px;border:1px solid var(--border);border-radius:var(--radius-md);resize:none;min-height:100px;background-color:var(--bg-input);color:var(--text-primary);font-size:1.5rem!important}._contentInput_w8o2b_238:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light)}._contentInput_w8o2b_238::placeholder{color:var(--text-tertiary)}._imageUrlInput_w8o2b_258{width:100%;padding:12px 16px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary)}._imageUrlInput_w8o2b_258:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._imageUrlInput_w8o2b_258::placeholder{color:var(--text-tertiary)}._pollContainer_w8o2b_275{display:flex;flex-direction:column;gap:15px;padding:20px;margin-top:15px;margin-bottom:15px;background-color:var(--bg-highlight);border-radius:12px;border:1px solid var(--border-color);position:relative}[data-theme=dark] ._pollContainer_w8o2b_275{background-color:rgba(255,255,255,.03);border-color:rgba(255,255,255,.1)}._pollContainer_w8o2b_275:before{content:"📊 Опрос";position:absolute;top:-10px;left:15px;background-color:var(--accent);color:#fff;font-size:12px;font-weight:600;padding:3px 10px;border-radius:12px;box-shadow:0 2px 8px rgba(29,161,242,.2);display:none}._pollQuestionInput_w8o2b_306{width:100%;padding:12px 16px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);font-size:15px}._pollQuestionInput_w8o2b_306:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._pollQuestionInput_w8o2b_306::placeholder{color:var(--text-tertiary)}[data-theme=dark] ._pollQuestionInput_w8o2b_306{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(255,255,255,.9)}[data-theme=dark] ._pollQuestionInput_w8o2b_306::placeholder{color:rgba(255,255,255,.5)}._pollOptions_w8o2b_332{display:flex;flex-direction:column;gap:10px}._sectionLabel_w8o2b_338{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-weight:500;color:var(--text-secondary);font-size:14px}._sectionLabel_w8o2b_338 svg{color:var(--text-tertiary)}[data-theme=dark] ._sectionLabel_w8o2b_338{color:rgba(255,255,255,.7)}._inputWithIcon_w8o2b_354{position:relative;display:flex;align-items:center}._inputWithIcon_w8o2b_354 svg{position:absolute;left:12px;color:var(--text-tertiary);font-size:16px}._inputWithIcon_w8o2b_354 input{padding-left:40px}._pollOptionInputWrapper_w8o2b_369{display:flex;gap:10px;align-items:center}._pollOptionInput_w8o2b_369{flex:1;padding:12px 16px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);font-size:14px}._pollOptionInput_w8o2b_369:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._pollOptionInput_w8o2b_369::placeholder{color:var(--text-tertiary)}[data-theme=dark] ._pollOptionInput_w8o2b_369{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(255,255,255,.9)}[data-theme=dark] ._pollOptionInput_w8o2b_369::placeholder{color:rgba(255,255,255,.5)}._removeOptionButton_w8o2b_401{width:32px;height:32px;border:none;background-color:rgba(231,76,60,.1);color:#e74c3c;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}._removeOptionButton_w8o2b_401:hover{background-color:rgba(231,76,60,.2);transform:scale(1.1)}._removeOptionButton_w8o2b_401 svg{font-size:16px}[data-theme=dark] ._removeOptionButton_w8o2b_401{background-color:rgba(231,76,60,.2);color:#ff6b6b}[data-theme=dark] ._removeOptionButton_w8o2b_401:hover{background-color:rgba(231,76,60,.3)}._addOptionButton_w8o2b_429{margin-top:5px;padding:8px 16px;background:none;border:1px dashed var(--border);border-radius:8px;color:var(--accent);font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}._addOptionButton_w8o2b_429:hover{background-color:rgba(29,161,242,.05);border-color:var(--accent)}[data-theme=dark] ._addOptionButton_w8o2b_429:hover{background-color:rgba(29,161,242,.1);border-color:var(--accent)}._formOptions_w8o2b_457{display:flex;justify-content:space-between;align-items:center;margin-top:16px}._formToggles_w8o2b_464{display:flex;gap:12px;flex-wrap:wrap}._optionToggle_w8o2b_470{display:flex;align-items:center;gap:5px;font-size:14px;color:var(--text-secondary);cursor:pointer;padding:6px 12px;border-radius:var(--radius-md);background-color:var(--bg-tertiary);transition:all var(--transition-fast)}._optionToggle_w8o2b_470:hover{background-color:var(--bg-hover)}._optionToggle_w8o2b_470 input[type=checkbox]{margin-right:5px;cursor:pointer}._optionToggle_w8o2b_470 svg{font-size:16px;color:var(--text-secondary);pointer-events:none}._optionToggle_w8o2b_470 *{cursor:pointer}._submitButton_w8o2b_498{padding:10px 18px;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:14px;font-weight:500;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:8px}._submitButton_w8o2b_498:hover:not(:disabled){background-color:var(--accent-hover)}._submitButton_w8o2b_498:disabled{opacity:.7;cursor:not-allowed}._submitButton_w8o2b_498 svg{font-size:16px}._postItem_w8o2b_523{background-color:var(--bg-secondary);border-radius:var(--radius-lg);border:1px solid var(--border);padding:20px;position:relative;overflow:hidden;transition:transform .2s ease,box-shadow .2s ease;will-change:transform,box-shadow,opacity;transform:translateZ(0);backface-visibility:hidden}._postItem_w8o2b_523:hover{box-shadow:0 4px 12px rgba(0,0,0,.05)}[data-theme=dark] ._postItem_w8o2b_523:hover{box-shadow:0 4px 12px rgba(0,0,0,.2)}[data-theme=dark] ._postItem_w8o2b_523{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);box-shadow:0 4px 20px rgba(0,0,0,.2)}._postItem_w8o2b_523._pinnedPost_w8o2b_546{position:relative}._postItem_w8o2b_523._pinnedPost_w8o2b_546:before{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;border-radius:16px;z-index:-1;opacity:.1;transition:opacity .3s ease}._postItem_w8o2b_523._pinnedPost_w8o2b_546:hover:before{opacity:.2}[data-theme=dark] ._postItem_w8o2b_523._pinnedPost_w8o2b_546{border:2px solid var(--accent)}[data-theme=dark] ._postItem_w8o2b_523._pinnedPost_w8o2b_546:before{background:linear-gradient(45deg,var(--accent),transparent 80%);opacity:.15}[data-theme=dark] ._postItem_w8o2b_523._pinnedPost_w8o2b_546:hover:before{opacity:.25}._postHeader_w8o2b_575{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;flex-wrap:wrap;gap:10px}._authorInfo_w8o2b_584{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--text-primary);font-weight:600;font-size:16px;will-change:opacity,transform;transform:translateZ(0)}._authorInfo_w8o2b_584:hover{color:var(--accent)}._authorInfo_w8o2b_584:hover ._avatar_w8o2b_598{transform:scale(1.05)}._authorName_w8o2b_602{font-weight:500}._avatar_w8o2b_598{width:40px;height:40px;border-radius:50%;object-fit:cover;transition:transform .2s ease;will-change:transform;transform:translateZ(0)}[data-theme=dark] ._avatar_w8o2b_598{box-shadow:0 2px 6px rgba(0,0,0,.25)}._postDate_w8o2b_619{display:flex;align-items:center;gap:5px}._postContent_w8o2b_625{margin:15px 0;font-size:1.8rem!important;line-height:1.5;white-space:pre-wrap;word-break:break-word;color:var(--text-primary)}[data-theme=dark] ._postContent_w8o2b_625 ._darkTextConversion_w8o2b_633{color:var(--text-primary)!important}@media (max-width: 768px){._postContent_w8o2b_625{line-height:1.6}._postContent_w8o2b_625 p,._postContent_w8o2b_625 span,._postContent_w8o2b_625 div{font-size:inherit}}@media (max-width: 480px){._postContent_w8o2b_625{font-size:18px;line-height:1.7}}._postImage_w8o2b_651{width:100%;margin:10px 0;border-radius:8px;overflow:hidden;position:relative;transition:all .2s ease;aspect-ratio:16/9;cursor:pointer}@media (min-width: 1024px){._postImage_w8o2b_651:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,0,0,.1)}._postImage_w8o2b_651:hover img{transform:scale(1.02)}}@media (max-width: 768px){._postImage_w8o2b_651:active{opacity:.8}}._postImage_w8o2b_651 img{width:100%;height:100%;object-fit:cover;border-radius:8px;display:block;transform:translateZ(0);transition:transform .3s ease}._postPoll_w8o2b_685{background-color:var(--bg-highlight);border-radius:8px;padding:16px;margin-bottom:16px}[data-theme=dark] ._postPoll_w8o2b_685{background-color:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.1)}._pollTitle_w8o2b_696{font-weight:500;margin-bottom:12px;color:var(--text-primary);font-size:16px}@media (max-width: 768px){._pollTitle_w8o2b_696{font-size:17px}}._pollOption_w8o2b_332{display:flex;flex-direction:column}._pollOption_w8o2b_332 label{display:flex;align-items:center;gap:10px;cursor:pointer;padding:10px;border-radius:8px;transition:background-color .2s ease}._pollOption_w8o2b_332 label:hover{background-color:var(--bg-hover)}._pollOption_w8o2b_332 label input{cursor:pointer}[data-theme=dark] ._pollOption_w8o2b_332 label:hover{background-color:rgba(255,255,255,.08)}@media (max-width: 768px){._pollOption_w8o2b_332 label{font-size:16px;padding:12px 10px}}._pollResults_w8o2b_737{margin-top:16px}._pollResults_w8o2b_737 ._pollResultOption_w8o2b_740{margin-bottom:10px}._pollResults_w8o2b_737 ._pollResultOption_w8o2b_740 ._pollOptionText_w8o2b_743{display:flex;justify-content:space-between;font-size:14px;margin-bottom:4px}._pollResults_w8o2b_737 ._pollResultOption_w8o2b_740 ._pollOptionText_w8o2b_743 ._pollOptionVotes_w8o2b_749{color:var(--text-secondary)}._pollResults_w8o2b_737 ._pollResultOption_w8o2b_740 ._pollProgressBar_w8o2b_752{height:8px;background-color:var(--bg-input);border-radius:4px;overflow:hidden}._pollResults_w8o2b_737 ._pollResultOption_w8o2b_740 ._pollProgressBar_w8o2b_752 ._pollProgress_w8o2b_752{height:100%;background-color:var(--accent);border-radius:4px;transition:width .5s ease}._pollVotersCount_w8o2b_765{font-size:12px;margin-top:16px;color:var(--text-tertiary);text-align:right}._postActions_w8o2b_772{display:flex;align-items:center;justify-content:space-between;border-top:1px solid var(--border);padding-top:16px;margin-top:16px}._actionButtons_w8o2b_781{display:flex;gap:16px}._actionButtons_w8o2b_781 button{background:none;border:none;padding:8px;border-radius:50%;cursor:pointer;display:flex;align-items:center;color:var(--text-secondary);transition:all .2s}._actionButtons_w8o2b_781 button:hover{background-color:rgba(29,161,242,.1);color:var(--accent)}[data-theme=dark] ._actionButtons_w8o2b_781 button:hover{background-color:rgba(29,161,242,.2)}._actionButtons_w8o2b_781 button svg{font-size:20px}._likeButton_w8o2b_807{color:var(--text-secondary);display:flex;align-items:center;gap:8px}._likeButton_w8o2b_807._liked_w8o2b_813{color:#e0245e}._likeButton_w8o2b_807._liked_w8o2b_813:hover{color:#e0245e;background-color:rgba(224,36,94,.1)}[data-theme=dark] ._likeButton_w8o2b_807._liked_w8o2b_813:hover{background-color:rgba(224,36,94,.2)}._likeCount_w8o2b_824{font-size:14px}._commentButton_w8o2b_828{display:flex;align-items:center;gap:8px;background:none;border:none;color:var(--text-secondary);padding:8px 12px;border-radius:8px;cursor:pointer;transition:all .2s ease}._commentButton_w8o2b_828:hover{background-color:var(--bg-hover)}._commentButton_w8o2b_828 svg{font-size:20px}._deleteButton_w8o2b_847{background-color:rgba(231,76,60,.1);color:#e74c3c;border:none;border-radius:6px;padding:6px 10px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:4px;cursor:pointer;transition:all .2s}._deleteButton_w8o2b_847 svg{font-size:16px}._deleteButton_w8o2b_847:hover{background-color:rgba(231,76,60,.2);transform:translateY(-1px)}._deleteButton_w8o2b_847:disabled{opacity:.6;cursor:not-allowed;transform:none}[data-theme=dark] ._deleteButton_w8o2b_847{background-color:rgba(231,76,60,.2);color:#ff6b6b}[data-theme=dark] ._deleteButton_w8o2b_847:hover{background-color:rgba(231,76,60,.3)}._commentsSection_w8o2b_881{margin-top:20px;padding-top:15px;border-top:1px solid var(--border)}._commentsHeading_w8o2b_887{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600;margin-bottom:15px;color:var(--text-primary)}._loadingComments_w8o2b_897{display:flex;align-items:center;justify-content:center;padding:20px;color:var(--text-secondary);gap:8px}._loadingComments_w8o2b_897 svg{animation:_spin_w8o2b_1 1s linear infinite}._noComments_w8o2b_909{padding:20px;text-align:center;color:var(--text-secondary);background-color:var(--bg-highlight);border-radius:8px;font-style:italic}._commentForm_w8o2b_918{margin-top:20px;padding:15px;border-radius:10px;background-color:var(--bg-highlight);box-shadow:0 2px 8px rgba(0,0,0,.1)}[data-theme=dark] ._commentForm_w8o2b_918{background-color:rgba(255,255,255,.05);box-shadow:0 2px 8px rgba(0,0,0,.2)}._commentForm_w8o2b_918 textarea{width:100%;min-height:80px;padding:12px;border-radius:8px;border:1px solid var(--border);background-color:var(--bg-input);color:var(--text-primary);font-size:15px;margin-bottom:12px;transition:border-color .2s,box-shadow .2s}._commentForm_w8o2b_918 textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}[data-theme=dark] ._commentForm_w8o2b_918 textarea{background-color:rgba(255,255,255,.08);border-color:rgba(255,255,255,.15)}[data-theme=dark] ._commentForm_w8o2b_918 textarea:focus{box-shadow:0 0 0 2px rgba(29,161,242,.3)}._commentForm_w8o2b_918 button{background-color:var(--accent);color:#fff;border:none;border-radius:24px;padding:10px 20px;font-size:15px;font-weight:600;display:flex;align-items:center;gap:8px;cursor:pointer;margin-left:auto;transition:background-color .2s}._commentForm_w8o2b_918 button:hover:not(:disabled){background-color:var(--accent-dark)}._commentForm_w8o2b_918 button:disabled{opacity:.6;cursor:not-allowed}._commentForm_w8o2b_918 button svg{font-size:18px}._errorMessage_w8o2b_162{display:flex;align-items:center;gap:8px;padding:10px;margin-bottom:12px;background-color:rgba(231,76,60,.1);border-left:3px solid #e74c3c;color:#e74c3c;border-radius:4px}[data-theme=dark] ._errorMessage_w8o2b_162{background-color:rgba(231,76,60,.2)}._errorMessage_w8o2b_162 svg{flex-shrink:0}._commentItem_w8o2b_997{margin-bottom:20px;padding-left:10px;border-left:3px solid var(--accent)}[data-theme=dark] ._commentItem_w8o2b_997{border-left-color:rgba(29,161,242,.6)}._commentItem_w8o2b_997._commentReply_w8o2b_1005{margin-left:25px;padding-left:15px;border-left:2px solid var(--border);margin-top:10px}[data-theme=dark] ._commentItem_w8o2b_997._commentReply_w8o2b_1005{border-left:2px solid var(--border)}._commentHeader_w8o2b_1015{display:flex;align-items:center;margin-bottom:8px}._commentAuthorAvatar_w8o2b_1021{width:32px;height:32px;border-radius:50%;overflow:hidden;margin-right:10px}._commentAuthorAvatar_w8o2b_1021 img{width:100%;height:100%;object-fit:cover}._commentAuthorInfo_w8o2b_1034{display:flex;flex-direction:column}._commentAuthor_w8o2b_1021{text-decoration:none;font-weight:600;font-size:14px}._commentAuthor_w8o2b_1021:hover{text-decoration:underline}._commentContent_w8o2b_1048{margin-bottom:8px;font-size:14px;line-height:1.5;color:var(--text-primary);white-space:pre-wrap;word-break:break-word}._commentDate_w8o2b_1057{font-size:12px;color:var(--text-tertiary);display:flex;align-items:center;gap:5px;margin-bottom:8px}._commentDate_w8o2b_1057 svg{font-size:12px}._commentActions_w8o2b_1069{display:flex;gap:12px;margin-top:8px;flex-wrap:wrap;width:100%}._replyButton_w8o2b_1077,._deleteCommentButton_w8o2b_1078{background:none;border:none;font-size:13px;color:var(--text-secondary);display:flex;align-items:center;gap:5px;cursor:pointer;padding:6px 10px;border-radius:var(--radius-sm);transition:all var(--transition-fast)}._replyButton_w8o2b_1077:hover,._deleteCommentButton_w8o2b_1078:hover{background-color:var(--bg-hover)}._replyButton_w8o2b_1077 svg,._deleteCommentButton_w8o2b_1078 svg{font-size:16px}@media (max-width: 576px){._replyButton_w8o2b_1077,._deleteCommentButton_w8o2b_1078{font-size:12px;padding:8px 12px;flex:1;justify-content:center}}._deleteCommentButton_w8o2b_1078{color:var(--error)}._deleteCommentButton_w8o2b_1078:hover{background-color:rgba(231,76,60,.1)}._repliesContainer_w8o2b_1116{margin-top:12px}._replyForm_w8o2b_1120{margin:10px 0 10px 30px;background:var(--bg-comment-form);border-radius:var(--radius-md);padding:12px;border-left:3px solid var(--accent)}._replyForm_w8o2b_1120 textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:var(--radius-sm);background-color:var(--bg-input);color:var(--text-primary);resize:vertical;font-size:14px;min-height:60px;margin-bottom:8px}._replyForm_w8o2b_1120 textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}._replyForm_w8o2b_1120 ._replyFormActions_w8o2b_1144{display:flex;justify-content:flex-end;gap:10px}._replyForm_w8o2b_1120 ._replyFormActions_w8o2b_1144 button{padding:6px 12px;border-radius:var(--radius-sm);font-size:14px;display:flex;align-items:center;gap:6px;cursor:pointer;transition:all var(--transition-fast)}._replyForm_w8o2b_1120 ._replyFormActions_w8o2b_1144 button:disabled{opacity:.7;cursor:not-allowed}._replyForm_w8o2b_1120 ._replyFormActions_w8o2b_1144 button svg{font-size:16px}._replyForm_w8o2b_1120 ._replyFormActions_w8o2b_1144 ._cancelReplyButton_w8o2b_1166{background:none;border:1px solid var(--border);color:var(--text-secondary)}._replyForm_w8o2b_1120 ._replyFormActions_w8o2b_1144 ._cancelReplyButton_w8o2b_1166:hover:not(:disabled){background:var(--bg-hover)}._replyForm_w8o2b_1120 ._replyFormActions_w8o2b_1144 ._submitReplyButton_w8o2b_1174{background:var(--accent);color:#fff;border:none}._replyForm_w8o2b_1120 ._replyFormActions_w8o2b_1144 ._submitReplyButton_w8o2b_1174:hover:not(:disabled){background:var(--accent-hover)}@media screen and (max-width: 768px){._postsContainer_w8o2b_2{padding:15px}._formOptions_w8o2b_457{flex-direction:column;align-items:flex-start;gap:15px}._formToggles_w8o2b_464,._submitButton_w8o2b_498{width:100%}._postHeader_w8o2b_575{flex-wrap:wrap}._postActions_w8o2b_772{flex-direction:column;gap:10px}._actionButtons_w8o2b_781{width:100%;justify-content:space-between}._commentActions_w8o2b_1069{width:100%;justify-content:flex-start}._commentHeader_w8o2b_1015{flex-wrap:wrap}}@media screen and (max-width: 576px){._optionToggle_w8o2b_470{padding:5px 10px;font-size:13px}._replyButton_w8o2b_1077,._deleteCommentButton_w8o2b_1078{font-size:12px;padding:3px 6px}._postTitle_w8o2b_1227{font-size:1.3rem}._postContent_w8o2b_625{font-size:1.1rem}}textarea{resize:none!important;font-family:inherit}[data-theme=dark] textarea{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(255,255,255,.9)}[data-theme=dark] textarea::placeholder{color:rgba(255,255,255,.5)}._stylingOptions_w8o2b_1247{margin-top:15px;padding:20px;background-color:var(--bg-highlight);border-radius:12px;border:1px solid var(--border);position:relative}[data-theme=dark] ._stylingOptions_w8o2b_1247{background-color:rgba(255,255,255,.03);border-color:rgba(255,255,255,.1)}._stylingOptions_w8o2b_1247:before{content:"🎨 Стиль";position:absolute;top:-10px;left:15px;background-color:var(--accent);color:#fff;font-size:12px;font-weight:600;padding:3px 10px;border-radius:12px;box-shadow:0 2px 8px rgba(29,161,242,.2)}._stylingTitle_w8o2b_1273{font-size:16px;font-weight:600;margin-bottom:15px;color:var(--text-primary);display:flex;align-items:center;gap:8px}._stylingTitle_w8o2b_1273 svg{color:var(--accent)}._stylingGroup_w8o2b_1286{margin-bottom:15px}._stylingGroup_w8o2b_1286 label{display:block;margin-bottom:8px;color:var(--text-secondary);font-size:14px;font-weight:500}._colorSelector_w8o2b_1297{display:flex;flex-wrap:wrap;gap:10px;margin-top:5px}._colorOption_w8o2b_1304{width:24px;height:24px;border-radius:50%;cursor:pointer;border:2px solid transparent;transition:all .2s ease}._colorOption_w8o2b_1304:hover{transform:scale(1.2)}._colorOption_w8o2b_1304._active_w8o2b_1315{border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.3)}._fontSelector_w8o2b_1320{width:100%;padding:10px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);cursor:pointer}._fontSelector_w8o2b_1320:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}._fontSelector_w8o2b_1320 option{padding:8px}[data-theme=dark] ._fontSelector_w8o2b_1320{background-color:rgba(255,255,255,.15);border-color:rgba(255,255,255,.3);color:#fff;font-weight:500;text-shadow:0 0 1px rgba(0,0,0,.5)}[data-theme=dark] ._fontSelector_w8o2b_1320 option{background-color:#2a2a2a;color:#fff;font-weight:400;padding:12px 8px}._addOptionButton_w8o2b_429{display:flex;align-items:center;justify-content:center;gap:8px;background:none;border:1px dashed var(--border);width:100%;padding:10px;border-radius:8px;margin-top:10px;cursor:pointer;color:var(--accent);font-size:14px;transition:all .2s ease}._addOptionButton_w8o2b_429:hover:not(:disabled){background-color:rgba(29,161,242,.05);border-color:var(--accent)}._addOptionButton_w8o2b_429:disabled{opacity:.5;cursor:not-allowed}[data-theme=dark] ._addOptionButton_w8o2b_429{border-color:rgba(255,255,255,.2)}[data-theme=dark] ._addOptionButton_w8o2b_429:hover:not(:disabled){background-color:rgba(29,161,242,.1)}._addOptionButton_w8o2b_429 svg{font-size:16px}._colorPickerContainer_w8o2b_1385{position:relative;display:inline-block}._colorPreview_w8o2b_1390{width:42px;height:42px;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;border:2px solid var(--border);transition:all .2s ease}._colorPreview_w8o2b_1390:hover{transform:scale(1.1);box-shadow:0 2px 8px rgba(0,0,0,.1)}[data-theme=dark] ._colorPreview_w8o2b_1390{border-color:rgba(255,255,255,.2)}[data-theme=dark] ._colorPreview_w8o2b_1390:hover{box-shadow:0 2px 8px rgba(0,0,0,.2)}._dropletIcon_w8o2b_1412{color:rgba(255,255,255,.8);font-size:20px;filter:drop-shadow(0 0 1px rgba(0,0,0,.8))}._colorPickerPopup_w8o2b_1418{position:absolute;z-index:100;top:calc(100% + 5px);left:0}._colorPickerPopup_w8o2b_1418 ._react-colorful_w8o2b_1424{border-radius:8px;box-shadow:0 2px 15px rgba(0,0,0,.15)}[data-theme=dark] ._colorPickerPopup_w8o2b_1418 ._react-colorful_w8o2b_1424{box-shadow:0 2px 15px rgba(0,0,0,.3)}._colorPickerCover_w8o2b_1432{position:fixed;top:0;right:0;bottom:0;left:0;z-index:-1}._colorNote_w8o2b_1441{font-size:12px;margin-top:8px;color:var(--accent);font-style:italic;line-height:1.4;padding:5px 8px;background-color:rgba(var(--accent-rgb),.1);border-radius:4px}[data-theme=dark] ._colorNote_w8o2b_1441{background-color:rgba(var(--accent-rgb),.15)}._likeAnimation_w8o2b_1455{animation:_likePulse_w8o2b_1 .5s cubic-bezier(.4,0,.2,1)}@keyframes _likePulse_w8o2b_1{0%{transform:scale(1)}50%{transform:scale(1.3)}to{transform:scale(1)}}._authPrompt_w8o2b_1470{text-align:center;padding:20px;background:var(--bg-secondary);border-radius:12px;margin-bottom:20px;border:1px solid var(--border)}._authPrompt_w8o2b_1470 p{margin:0 0 10px;color:var(--text-secondary)}._authPrompt_w8o2b_1470 ._loginButton_w8o2b_1482{display:inline-block;padding:8px 16px;background:var(--accent);color:#fff;text-decoration:none;border-radius:6px;transition:all .2s ease}._authPrompt_w8o2b_1470 ._loginButton_w8o2b_1482:hover{background:var(--accent-hover);transform:translateY(-1px)}._titleInput_w8o2b_1496{width:100%;padding:12px 16px;border:1px solid var(--border);border-radius:8px;margin-bottom:12px;background-color:var(--bg-input);color:var(--text-primary);font-size:18px;font-weight:600}._titleInput_w8o2b_1496:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._titleInput_w8o2b_1496::placeholder{color:var(--text-tertiary);font-weight:400}[data-theme=dark] ._titleInput_w8o2b_1496{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1)}[data-theme=dark] ._titleInput_w8o2b_1496:focus{box-shadow:0 0 0 2px rgba(76,155,254,.2)}._postTitle_w8o2b_1227{font-size:22px;font-weight:700;margin:0 0 16px;line-height:1.3;color:var(--text-primary);word-break:break-word}[data-theme=dark] ._postTitle_w8o2b_1227 ._darkTextConversion_w8o2b_633{color:var(--text-primary)!important}._editButton_w8o2b_1536{background-color:rgba(46,204,113,.1);color:#2ecc71;border:none;border-radius:6px;padding:6px 10px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:4px;cursor:pointer;transition:all .2s;margin-right:8px}._editButton_w8o2b_1536 svg{font-size:16px}._editButton_w8o2b_1536:hover{background-color:rgba(46,204,113,.2);transform:translateY(-1px)}[data-theme=dark] ._editButton_w8o2b_1536{background-color:rgba(46,204,113,.2);color:#2eec81}[data-theme=dark] ._editButton_w8o2b_1536:hover{background-color:rgba(46,204,113,.3)}._adminActions_w8o2b_1566{display:flex;align-items:center}@media (max-width: 576px){._postActions_w8o2b_772{flex-direction:column;align-items:flex-start;gap:10px}._adminActions_w8o2b_1566{width:100%;justify-content:space-between}._editButton_w8o2b_1536,._deleteButton_w8o2b_847{flex:1;justify-content:center}}._imageContainer_w8o2b_1588{position:relative;min-height:100px;width:100%;margin-bottom:12px}._imageLoading_w8o2b_1595{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:var(--bg-secondary);border-radius:8px;color:var(--text-secondary);font-size:14px;z-index:1}._imageError_w8o2b_1611{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:var(--bg-error);border-radius:8px;color:var(--error);font-size:14px;z-index:1}._editPostForm_w8o2b_1627{background-color:var(--bg-highlight);border-radius:12px;padding:20px;margin-bottom:15px;border:1px solid var(--border)}[data-theme=dark] ._editPostForm_w8o2b_1627{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1)}._editPostForm_w8o2b_1627 ._errorMessage_w8o2b_162{margin-bottom:15px}._editPostForm_w8o2b_1627 form{display:flex;flex-direction:column;gap:15px}._cancelEditButton_w8o2b_1647{padding:10px 18px;background-color:var(--bg-tertiary);color:var(--text-secondary);border:1px solid var(--border);border-radius:var(--radius-md);font-size:14px;font-weight:500;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:8px}._cancelEditButton_w8o2b_1647:hover:not(:disabled){background-color:var(--bg-hover)}._cancelEditButton_w8o2b_1647:disabled{opacity:.7;cursor:not-allowed}._cancelEditButton_w8o2b_1647 svg{font-size:16px}._adminActions_w8o2b_1566{display:flex;gap:8px}@media (max-width: 576px){._adminActions_w8o2b_1566{width:100%;margin-top:10px}._adminActions_w8o2b_1566 button{flex:1;justify-content:center}}._imagePreview_w8o2b_1687{max-width:100%;margin-top:10px;border-radius:8px;overflow:hidden;position:relative;transition:all .2s ease;aspect-ratio:16/9;display:flex;align-items:center;justify-content:center}._imagePreview_w8o2b_1687 img{max-width:100%;height:100%;width:100%;object-fit:cover;display:block;border-radius:8px;border:none;box-shadow:none;transition:transform .2s ease}@media (min-width: 1024px){._imagePreview_w8o2b_1687:hover img{transform:scale(1.02)}}._imageLoading_w8o2b_1595{display:flex;align-items:center;justify-content:center;min-height:60px;background-color:var(--bg-highlight);border-radius:8px;color:var(--text-secondary);font-size:14px;padding:10px;animation:_pulse_w8o2b_1 1.5s infinite}[data-theme=dark] ._imageLoading_w8o2b_1595{background-color:rgba(255,255,255,.05)}._loadMoreContainer_w8o2b_1732{text-align:center;padding:25px 0;margin:10px 0;display:flex;flex-direction:column;align-items:center;justify-content:center}._loadMoreSpinner_w8o2b_1742{display:flex;align-items:center;justify-content:center;gap:12px;font-size:18px;color:var(--text-secondary);padding:15px 20px;border-radius:10px;background-color:var(--bg-highlight);box-shadow:0 2px 8px rgba(0,0,0,.08);width:auto;min-width:250px}._loadMoreSpinner_w8o2b_1742 svg{font-size:24px;animation:_spin_w8o2b_1 1.5s linear infinite}[data-theme=dark] ._loadMoreSpinner_w8o2b_1742{background-color:rgba(255,255,255,.05);box-shadow:0 2px 8px rgba(0,0,0,.15)}._noMorePosts_w8o2b_1765{font-size:18px;color:var(--text-secondary);margin:15px 0;padding:15px 20px;background-color:var(--bg-highlight);border-radius:10px;text-align:center;width:auto;min-width:250px}[data-theme=dark] ._noMorePosts_w8o2b_1765{background-color:rgba(255,255,255,.05)}@keyframes _spin_w8o2b_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._imageUrlInputContainer_w8o2b_1788{display:flex;gap:10px;margin-bottom:10px}._addImageButton_w8o2b_1794{background-color:#f0f2f5;border:none;border-radius:4px;padding:8px 12px;cursor:pointer;display:flex;align-items:center;gap:5px;font-size:14px;transition:background-color .2s}._addImageButton_w8o2b_1794:hover{background-color:#e4e6eb}._addImageButton_w8o2b_1794:disabled{opacity:.5;cursor:not-allowed}._imageGalleryContainer_w8o2b_1814{display:grid;gap:15px;margin:15px 0;grid-template-columns:repeat(1,1fr)}@media (min-width: 769px){._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(1):nth-last-child(1)){grid-template-columns:minmax(300px,65%);justify-content:center}._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(1):nth-last-child(2)),._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(2):nth-last-child(1)){grid-template-columns:repeat(2,1fr)}._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(1):nth-last-child(3)),._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(2):nth-last-child(2)),._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(3):nth-last-child(1)){grid-template-columns:repeat(3,1fr)}._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-last-child(n+4)){grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}}._imagePreviewItem_w8o2b_1826{position:relative;cursor:pointer;overflow:hidden;border-radius:8px;transition:transform .2s ease-in-out;min-height:150px}._imagePreviewItem_w8o2b_1826:hover{transform:none;box-shadow:none}._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(1):nth-last-child(1)) ._imagePreviewItem_w8o2b_1826{min-height:300px}._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(1):nth-last-child(2)),._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(2):nth-last-child(1)) ._imagePreviewItem_w8o2b_1826{min-height:250px}._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(1):nth-last-child(3)),._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(2):nth-last-child(2)),._imageGalleryContainer_w8o2b_1814:has(._imagePreviewItem_w8o2b_1826:nth-child(3):nth-last-child(1)) ._imagePreviewItem_w8o2b_1826{min-height:200px}@media (max-width: 768px){._imagePreviewItem_w8o2b_1826{min-height:200px}._imagePreviewItem_w8o2b_1826:active{opacity:.9}}._removeImageButton_w8o2b_1871{position:absolute;top:5px;right:5px;background:rgba(0,0,0,.5);color:#fff;border:none;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;transition:background-color .2s;z-index:5}._removeImageButton_w8o2b_1871:hover{background:rgba(0,0,0,.7)}._zoomHint_w8o2b_1893{display:none}._errorNote_w8o2b_1897{font-size:12px;color:#e74c3c;margin-top:5px}@media (max-width: 768px){._imageGalleryContainer_w8o2b_1814{grid-template-columns:1fr}}._lightboxOverlay_w8o2b_1908,._lightboxContainer_w8o2b_1912,._lightboxImage_w8o2b_1916,._lightboxCloseButton_w8o2b_1920{display:none}._adminPanel_1idaq_2{max-width:1200px;margin:2rem auto;padding:1.5rem;background-color:var(--bg-primary);border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,.08);position:relative;overflow:hidden;border:1px solid var(--border-color)}._adminPanel_1idaq_2:before{content:"";position:absolute;top:0;left:0;width:100%;height:4px;background:linear-gradient(90deg,#666,#444)}._title_1idaq_23{font-size:2rem;margin-bottom:1.75rem;padding-bottom:1rem;border-bottom:2px solid #666;color:var(--text-primary);font-weight:600;display:flex;align-items:center;gap:12px}._title_1idaq_23 svg{color:var(--text-secondary)}._error_1idaq_38{padding:1rem 1.25rem;margin-bottom:1.5rem;background-color:rgba(220,53,69,.08);color:#dc3545;border-radius:10px;border-left:4px solid #dc3545;font-size:1rem;display:flex;align-items:center;animation:_fadeIn_1idaq_1 .3s ease-in-out}._message_1idaq_51{padding:1rem 1.25rem;margin-bottom:1.5rem;border-radius:10px;font-size:1rem;display:flex;align-items:center;animation:_fadeIn_1idaq_1 .3s ease-in-out}._message_1idaq_51._success_1idaq_60{background-color:rgba(40,167,69,.08);border-left:4px solid #28a745;color:#28a745}._message_1idaq_51._info_1idaq_65{background-color:rgba(13,110,253,.08);border-left:4px solid #0d6efd;color:#0d6efd}._message_1idaq_51._error_1idaq_38{background-color:rgba(220,53,69,.08);border-left:4px solid #dc3545;color:#dc3545}@keyframes _fadeIn_1idaq_1{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}._content_1idaq_86{display:grid;grid-template-columns:1fr;gap:2rem}@media (min-width: 768px){._content_1idaq_86{grid-template-columns:minmax(300px,1fr) minmax(350px,1.5fr);gap:2.5rem}}@media (max-width: 767px){._content_1idaq_86 ._usersSection_1idaq_98,._content_1idaq_86 ._editSection_1idaq_98{min-width:100%}}._usersSection_1idaq_98 h2,._editSection_1idaq_98 h2{font-size:1.4rem;margin-bottom:1.25rem;color:var(--text-primary);font-weight:600;padding-bottom:.75rem;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:10px}._usersSection_1idaq_98 h2 svg,._editSection_1idaq_98 h2 svg{color:var(--text-secondary)}._loader_1idaq_118{display:flex;align-items:center;justify-content:center;height:160px;color:var(--text-secondary);font-size:1.05rem}._loader_1idaq_118 svg{margin-right:12px;animation:_spin_1idaq_1005 1.2s linear infinite;font-size:1.5rem}._userList_1idaq_140{max-height:680px;overflow-y:auto;border:1px solid var(--border-color);border-radius:10px;background-color:var(--bg-primary);box-shadow:0 4px 16px rgba(0,0,0,.04)}._userList_1idaq_140::-webkit-scrollbar{width:10px}._userList_1idaq_140::-webkit-scrollbar-track{background:var(--bg-secondary);border-radius:10px}._userList_1idaq_140::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:10px}._userList_1idaq_140::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}._userGrid_1idaq_163{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;padding:1rem}._userCard_1idaq_170{background-color:var(--bg-secondary);border-radius:10px;padding:1.25rem;cursor:pointer;transition:all .25s ease;border:1px solid var(--border-color);position:relative;overflow:hidden}._userCard_1idaq_170:hover{transform:translateY(-3px);box-shadow:0 6px 16px rgba(0,0,0,.1);border-color:var(--text-secondary)}._userCard_1idaq_170._selected_1idaq_185{border-color:var(--accent);box-shadow:0 0 0 2px rgba(var(--accent-rgb),.2)}._userCard_1idaq_170._banned_1idaq_189{border-left:4px solid #e74c3c}._userCard_1idaq_170._banned_1idaq_189:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:repeating-linear-gradient(45deg,rgba(231,76,60,.05),rgba(231,76,60,.05) 10px,rgba(231,76,60,.1) 10px,rgba(231,76,60,.1) 20px);pointer-events:none;z-index:1}._userAvatar_1idaq_204{width:64px;height:64px;border-radius:50%;overflow:hidden;background-color:var(--bg-hover);display:flex;align-items:center;justify-content:center;margin-bottom:1rem;border:2px solid var(--border-color);box-shadow:0 4px 10px rgba(0,0,0,.1);position:relative}._userAvatar_1idaq_204 img{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0}._userAvatar_1idaq_204 svg{color:var(--text-secondary)}._userAvatar_1idaq_204 picture{position:absolute;top:0;left:0;width:100%;height:100%}._userInfo_1idaq_237{position:relative;z-index:2}._userInfo_1idaq_237 h3{font-size:1.1rem;font-weight:600;margin-bottom:.5rem;color:var(--text-primary)}._userInfo_1idaq_237 p{font-size:.9rem;color:var(--text-secondary);margin-bottom:.75rem;word-break:break-all}._userPerks_1idaq_254{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.75rem}._userActions_1idaq_261{display:flex;justify-content:flex-end;gap:.5rem;margin-top:1rem}._userActions_1idaq_261 button{background:none;border:none;width:34px;height:34px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--text-secondary);cursor:pointer;transition:all .2s}._userActions_1idaq_261 button:hover{background-color:var(--bg-hover)}._userActions_1idaq_261 button:disabled{opacity:.5;cursor:not-allowed}._userActions_1idaq_261 ._editButton_1idaq_287:hover{color:var(--accent);background-color:rgba(var(--accent-rgb),.1)}._userActions_1idaq_261 ._banButton_1idaq_291:hover{color:#e74c3c;background-color:rgba(231,76,60,.1)}._userActions_1idaq_261 ._unbanButton_1idaq_295:hover{color:#2ecc71;background-color:rgba(46,204,113,.1)}._banInfo_1idaq_300{margin-top:1rem;padding:.75rem;background-color:rgba(231,76,60,.08);border-radius:6px;font-size:.8rem;color:#e74c3c}._banInfo_1idaq_300 p{margin:.25rem 0;color:inherit}._editSection_1idaq_98 h2{font-size:1.25rem;margin-bottom:1rem;color:var(--text-primary);font-weight:600;padding-bottom:.5rem;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:8px}._editSection_1idaq_98 h2 svg{color:var(--text-secondary)}._editForm_1idaq_328{background-color:var(--bg-primary);padding:2rem;border-radius:12px;border:1px solid var(--border-color);box-shadow:0 4px 20px rgba(0,0,0,.05);max-width:100%}._formGroup_1idaq_337{margin-bottom:1.75rem}._formGroup_1idaq_337 label{display:block;margin-bottom:.75rem;font-size:1rem;font-weight:500;color:var(--text-primary);display:flex;align-items:center;gap:8px}._formGroup_1idaq_337 label svg{color:var(--text-secondary);font-size:1.2rem}._formGroup_1idaq_337 input[type=text],._formGroup_1idaq_337 input[type=email],._formGroup_1idaq_337 input[type=password]{width:100%;padding:.85rem 1rem;border:1px solid var(--border-color);border-radius:8px;font-size:1.05rem;background-color:var(--bg-input);color:var(--text-primary);transition:all .2s ease;height:50px}._formGroup_1idaq_337 input[type=text]:focus,._formGroup_1idaq_337 input[type=email]:focus,._formGroup_1idaq_337 input[type=password]:focus{outline:none;border-color:var(--text-secondary);box-shadow:0 0 0 4px rgba(var(--accent-rgb),.15)}._formGroup_1idaq_337 input[type=text]::placeholder,._formGroup_1idaq_337 input[type=email]::placeholder,._formGroup_1idaq_337 input[type=password]::placeholder{color:var(--text-secondary);opacity:.6}._perksOptions_1idaq_381{display:flex;flex-direction:column;gap:1rem;margin-top:.75rem;padding:1.25rem;background-color:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color)}._perkOption_1idaq_392{display:flex;align-items:center}._perkOption_1idaq_392 label{margin:0 0 0 .75rem;font-weight:400;cursor:pointer;font-size:1rem;color:var(--text-primary)}._perkOption_1idaq_392 input[type=checkbox]{cursor:pointer;width:20px;height:20px}._perkOption_1idaq_392 input[type=checkbox]:checked{accent-color:var(--accent)}._basePerk_1idaq_412{background-color:var(--bg-hover);padding:10px;border-radius:6px;margin-bottom:10px;border-left:3px solid var(--accent)}._basePerk_1idaq_412 input[type=checkbox]{opacity:.7}._basePerk_1idaq_412 ._baseLabel_1idaq_422{font-weight:500}._basePerk_1idaq_412 ._baseLabel_1idaq_422 ._baseNote_1idaq_425{font-size:.8rem;opacity:.7;font-style:italic;margin-left:5px}._protectedUser_1idaq_432{display:inline-block;font-size:.7rem;background-color:rgba(var(--admin-color),.1);color:var(--admin-color);padding:2px 6px;border-radius:4px;margin-top:5px;font-weight:600}table{width:100%;border-collapse:collapse}table th,table td{padding:12px 15px;text-align:left;border-bottom:1px solid var(--border-color)}table th{font-weight:600;color:var(--text-secondary)}table tr:hover{background-color:var(--bg-hover)}._selectedUser_1idaq_460{background-color:rgba(var(--accent-rgb),.08)!important}._editUserButton_1idaq_464{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:5px;border-radius:4px;transition:all .2s}._editUserButton_1idaq_464:hover{background-color:var(--bg-hover);color:var(--text-primary)}._editUserButton_1idaq_464:disabled{opacity:.4;cursor:not-allowed}._editUserButton_1idaq_464:disabled:hover{background:none;color:var(--text-secondary)}._formActions_1idaq_486{display:flex;justify-content:flex-end;gap:1.25rem;margin-top:2.5rem}._cancelButton_1idaq_493,._saveButton_1idaq_494{padding:.85rem 2rem;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;border:none;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;min-width:140px}._cancelButton_1idaq_493{background-color:var(--bg-secondary);color:var(--text-primary)}._cancelButton_1idaq_493:hover{background-color:var(--bg-hover);transform:translateY(-2px)}._cancelButton_1idaq_493 svg{font-size:1.1rem}._saveButton_1idaq_494{background:var(--accent);color:#fff}._saveButton_1idaq_494:hover{background:var(--accent-dark);transform:translateY(-2px);box-shadow:0 4px 12px rgba(var(--accent-rgb),.3)}._saveButton_1idaq_494:disabled{opacity:.7;cursor:not-allowed;transform:none;box-shadow:none}._saveButton_1idaq_494 svg{font-size:1.1rem}._noUserSelected_1idaq_540{background-color:var(--bg-primary);padding:3rem 2rem;border-radius:12px;border:1px solid var(--border-color);box-shadow:0 4px 20px rgba(0,0,0,.05);display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:350px;text-align:center;color:var(--text-secondary)}._noUserSelected_1idaq_540 p{margin:1.5rem 0;font-size:1.1rem}._noUserSelected_1idaq_540 svg{font-size:4rem;color:var(--border-color);margin-bottom:1.5rem}._emptyList_1idaq_564{padding:2rem;text-align:center;color:var(--text-secondary)}._userActions_1idaq_261{display:flex;gap:8px;justify-content:flex-end}._banUserButton_1idaq_576{background:none;border:none;color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;padding:6px;border-radius:4px;transition:all .2s}._banUserButton_1idaq_576:hover{background-color:rgba(231,76,60,.1);color:#e74c3c}._banUserButton_1idaq_576:disabled{opacity:.5;cursor:not-allowed}._bannedUser_1idaq_597{display:inline-block;font-size:12px;background-color:#e74c3c;color:#fff;padding:2px 8px;border-radius:12px;margin-left:8px;font-weight:500}._modalOverlay_1idaq_608{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;background:linear-gradient(135deg,rgba(0,0,0,.75),rgba(0,0,0,.85));display:flex;align-items:center;justify-content:center;z-index:10000;backdrop-filter:blur(8px);perspective:1000px;box-sizing:border-box;overscroll-behavior:contain;transform:translateZ(0);isolation:isolate}@media (max-width: 576px){._modalOverlay_1idaq_608{padding:0}}._banDialog_1idaq_634{position:relative;background-color:var(--bg-primary);border-radius:16px;box-shadow:var(--modal-shadow);width:90%;max-width:500px;overflow:hidden;animation:_fadeIn_1idaq_1 .3s ease-out;border:1px solid var(--modal-border);display:flex;flex-direction:column;transform-style:preserve-3d;max-height:90vh}@media (max-width: 576px){._banDialog_1idaq_634{width:100%;height:100vh;max-width:100%;border-radius:0;animation:_slideUp_1idaq_1 .4s ease-out;border:none}}@keyframes _fadeIn_1idaq_1{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _slideUp_1idaq_1{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}._banDialogHeader_1idaq_680{background-color:#e74c3c;color:#fff;padding:20px;display:flex;justify-content:space-between;align-items:center;position:relative}._banDialogHeader_1idaq_680 h3{margin:0;font-size:20px;font-weight:600;text-align:center;width:100%}._banDialogHeader_1idaq_680 ._closeButton_1idaq_696{background:rgba(255,255,255,.2);border:none;color:#fff;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s;position:absolute;right:15px}._banDialogHeader_1idaq_680 ._closeButton_1idaq_696:hover{background-color:rgba(255,255,255,.3);transform:rotate(90deg)}@media (max-width: 576px){._banDialogHeader_1idaq_680{padding:24px 20px}._banDialogHeader_1idaq_680 h3{font-size:22px}}._banDialogContent_1idaq_724{padding:24px;flex:1}._banDialogContent_1idaq_724 ._currentBanInfo_1idaq_728{text-align:center;padding:15px;background-color:rgba(231,76,60,.1);border-radius:8px;margin-bottom:20px}._banDialogContent_1idaq_724 ._currentBanInfo_1idaq_728 p{margin-bottom:20px;color:var(--text-primary);font-size:16px}[data-theme=dark] ._banDialogContent_1idaq_724 ._currentBanInfo_1idaq_728{background-color:rgba(231,76,60,.15)}._banDialogContent_1idaq_724 ._formGroup_1idaq_337{margin-bottom:20px}._banDialogContent_1idaq_724 ._formGroup_1idaq_337 label{display:block;margin-bottom:10px;font-weight:500;color:var(--text-primary)}._banDialogContent_1idaq_724 ._formGroup_1idaq_337 textarea,._banDialogContent_1idaq_724 ._formGroup_1idaq_337 select{width:100%;padding:12px 15px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);font-size:15px}._banDialogContent_1idaq_724 ._formGroup_1idaq_337 textarea:focus,._banDialogContent_1idaq_724 ._formGroup_1idaq_337 select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}[data-theme=dark] ._banDialogContent_1idaq_724 ._formGroup_1idaq_337 textarea,[data-theme=dark] ._banDialogContent_1idaq_724 ._formGroup_1idaq_337 select{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1)}[data-theme=dark] ._banDialogContent_1idaq_724 ._formGroup_1idaq_337 textarea:focus,[data-theme=dark] ._banDialogContent_1idaq_724 ._formGroup_1idaq_337 select:focus{box-shadow:0 0 0 2px rgba(29,161,242,.3)}._banDialogContent_1idaq_724 ._formGroup_1idaq_337 textarea{resize:none;min-height:120px}@media (max-width: 576px){._banDialogContent_1idaq_724{padding:24px;flex:1;overflow-y:auto}._banDialogContent_1idaq_724 ._formGroup_1idaq_337 label{font-size:16px}._banDialogContent_1idaq_724 textarea,._banDialogContent_1idaq_724 select{padding:15px;font-size:16px}}._banDialogActions_1idaq_792{display:flex;justify-content:flex-end;gap:12px;margin-top:25px}._banDialogActions_1idaq_792 button{padding:12px 20px;border-radius:30px;font-size:15px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}._banDialogActions_1idaq_792 button:disabled{opacity:.7;cursor:not-allowed}._banDialogActions_1idaq_792 ._cancelButton_1idaq_493{background:none;border:1px solid var(--border);color:var(--text-secondary)}._banDialogActions_1idaq_792 ._cancelButton_1idaq_493:hover:not(:disabled){background:var(--bg-hover);border-color:var(--text-secondary)}[data-theme=dark] ._banDialogActions_1idaq_792 ._cancelButton_1idaq_493{border-color:rgba(255,255,255,.2)}[data-theme=dark] ._banDialogActions_1idaq_792 ._cancelButton_1idaq_493:hover:not(:disabled){background:rgba(255,255,255,.1);border-color:rgba(255,255,255,.3)}._banDialogActions_1idaq_792 ._banButton_1idaq_291{background:#e74c3c;color:#fff;border:none}._banDialogActions_1idaq_792 ._banButton_1idaq_291:hover:not(:disabled){background:#c0392b;transform:translateY(-2px);box-shadow:0 4px 12px rgba(231,76,60,.3)}[data-theme=dark] ._banDialogActions_1idaq_792 ._banButton_1idaq_291{background:#c0392b}[data-theme=dark] ._banDialogActions_1idaq_792 ._banButton_1idaq_291:hover:not(:disabled){background:#a93226}._banDialogActions_1idaq_792 ._unbanButton_1idaq_295{background:#2ecc71;color:#fff;border:none;padding:12px 20px;border-radius:30px;font-size:15px;font-weight:500;display:flex;align-items:center;gap:8px;transition:all .2s;margin:0 auto}._banDialogActions_1idaq_792 ._unbanButton_1idaq_295:hover:not(:disabled){background:#27ae60;transform:translateY(-2px);box-shadow:0 4px 12px rgba(46,204,113,.3)}._banDialogActions_1idaq_792 ._unbanButton_1idaq_295:disabled{opacity:.7;cursor:not-allowed}[data-theme=dark] ._banDialogActions_1idaq_792 ._unbanButton_1idaq_295{background:#27ae60}[data-theme=dark] ._banDialogActions_1idaq_792 ._unbanButton_1idaq_295:hover:not(:disabled){background:#219653}@media (max-width: 576px){._banDialogActions_1idaq_792{margin-top:30px;padding-bottom:15px}._banDialogActions_1idaq_792 button{padding:15px 20px;font-size:16px}}._eventsSection_1idaq_886{margin-bottom:2rem;padding:1.5rem;background-color:var(--bg-primary);border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,.06);border:1px solid var(--border-color)}._eventsSection_1idaq_886 h2{font-size:1.4rem;margin-bottom:1.25rem;color:var(--text-primary);font-weight:600;padding-bottom:.75rem;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:10px}._eventsSection_1idaq_886 h2 svg{color:var(--text-secondary)}._eventsList_1idaq_909{display:flex;flex-direction:column;gap:1rem}._eventItem_1idaq_915{display:flex;align-items:center;justify-content:space-between;padding:1.25rem;background-color:var(--bg-secondary);border-radius:10px}@media (max-width: 768px){._eventItem_1idaq_915{flex-direction:column;align-items:flex-start;gap:1rem}}._eventInfo_1idaq_931{flex:1}._eventInfo_1idaq_931 h3{font-size:1.2rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:600}._eventInfo_1idaq_931 p{color:var(--text-secondary);margin-bottom:.5rem;font-size:.95rem;max-width:90%}._eventInfo_1idaq_931 p:last-child{margin-bottom:0}._eventInfo_1idaq_931 p strong{color:var(--text-primary)}._eventToggle_1idaq_953{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;border-radius:8px;font-weight:600;font-size:.95rem;background-color:var(--bg-hover);color:var(--text-primary);border:none;cursor:pointer;transition:all .2s ease}._eventToggle_1idaq_953:hover:not(:disabled){background-color:var(--bg-secondary)}._eventToggle_1idaq_953:disabled{opacity:.6;cursor:not-allowed}._eventToggle_1idaq_953._active_1idaq_974{background-color:#28a745;color:#fff}._eventToggle_1idaq_953._active_1idaq_974:hover:not(:disabled){background-color:#218838}._eventToggle_1idaq_953 svg{font-size:1.5rem}._loadingContainer_1idaq_985{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background:rgba(30,30,35,.2);border-radius:12px;margin:20px 0;text-align:center}._loadingContainer_1idaq_985 p{margin-top:16px;font-size:1.1rem;color:var(--text-color)}[data-theme=light] ._loadingContainer_1idaq_985{background:rgba(240,240,245,.3)}._spinningLoader_1idaq_1005{animation:_spin_1idaq_1005 1.5s linear infinite;color:var(--accent-color)}@keyframes _spin_1idaq_1005{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._resetContainer_1iy2b_1{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:2rem;background-color:var(--background-color)}._resetCard_1iy2b_10{width:100%;max-width:400px;padding:2rem;background-color:var(--bg-secondary);border-radius:var(--radius-lg);box-shadow:var(--shadow)}._resetCard_1iy2b_10 h2{text-align:center;margin-bottom:1.5rem;color:var(--text-primary)}._resetForm_1iy2b_24{display:flex;flex-direction:column}._formGroup_1iy2b_29{margin-bottom:1rem}._formGroup_1iy2b_29 label{display:block;margin-bottom:.5rem;font-size:.875rem;font-weight:500;color:var(--text-secondary)}._formGroup_1iy2b_29 input{width:100%;padding:.75rem;border:1px solid var(--border);border-radius:var(--radius-md);font-size:1rem;background-color:var(--bg-input);color:var(--text-primary);transition:all var(--transition-fast)}._formGroup_1iy2b_29 input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light)}._formGroup_1iy2b_29 input:disabled{background-color:var(--bg-highlight);cursor:not-allowed}._resetButton_1iy2b_59{margin-top:1rem;padding:.75rem 1.5rem;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:1rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}._resetButton_1iy2b_59:hover{background-color:var(--accent-hover);transform:translateY(-2px)}._resetButton_1iy2b_59:disabled{opacity:.7;cursor:not-allowed}._message_1iy2b_80{padding:.75rem;margin-bottom:1rem;border-radius:var(--radius-md);font-size:.875rem}._message_1iy2b_80._success_1iy2b_86{background-color:rgba(var(--success-rgb, 40, 167, 69),.1);border-left:4px solid var(--success);color:var(--success)}._message_1iy2b_80._info_1iy2b_91{background-color:rgba(var(--info-rgb, 13, 110, 253),.1);border-left:4px solid var(--info);color:var(--info)}._message_1iy2b_80._error_1iy2b_96{background-color:rgba(var(--error-rgb, 220, 53, 69),.1);border-left:4px solid var(--error);color:var(--error)}._pageContainer_1uaky_1{display:flex;justify-content:center;align-items:flex-start;padding:40px 20px;color:var(--text-primary, #e0e0e0)}._formContainer_1uaky_9{width:100%;max-width:800px;background-color:var(--bg-card, rgba(32, 33, 36, .8));border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.3),0 1px 2px rgba(255,255,255,.05);padding:40px;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.05)}[data-theme=light] ._formContainer_1uaky_9{background-color:var(--bg-card-light, rgba(255, 255, 255, .8));box-shadow:0 10px 30px rgba(0,0,0,.1),0 1px 5px rgba(0,0,0,.05);border:1px solid rgba(0,0,0,.05)}@media (max-width: 768px){._formContainer_1uaky_9{padding:30px 20px}}._title_1uaky_30{text-align:center;margin-bottom:30px;color:var(--text-primary, #ffffff);font-size:36px;font-weight:700;letter-spacing:.5px;text-shadow:0 2px 4px rgba(0,0,0,.2);background:linear-gradient(135deg,var(--gradient-start, #ffffff),var(--accent, #9333ea));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}[data-theme=light] ._title_1uaky_30{color:var(--text-primary-light, #333);text-shadow:0 2px 4px rgba(0,0,0,.1);background:linear-gradient(135deg,var(--gradient-start-light, #333),var(--accent, #9333ea));-webkit-background-clip:text;background-clip:text}@media (max-width: 768px){._title_1uaky_30{font-size:28px;margin-bottom:24px}}._errorMessage_1uaky_57{background-color:rgba(220,53,69,.15);border-left:3px solid #dc3545;color:var(--text-primary, #e0e0e0);padding:12px 15px;border-radius:8px;margin-bottom:20px;font-size:14px;box-shadow:0 4px 6px rgba(0,0,0,.1)}[data-theme=light] ._errorMessage_1uaky_57{color:var(--text-primary-light, #333);background-color:rgba(220,53,69,.1)}._successMessage_1uaky_72{background-color:rgba(40,167,69,.15);border-left:3px solid #28a745;color:var(--text-primary, #e0e0e0);padding:12px 15px;border-radius:8px;margin-bottom:20px;font-size:14px;box-shadow:0 4px 6px rgba(0,0,0,.1)}[data-theme=light] ._successMessage_1uaky_72{color:var(--text-primary-light, #333);background-color:rgba(40,167,69,.1)}._formGroup_1uaky_87{margin-bottom:24px}._formGroup_1uaky_87 label{display:flex;align-items:center;margin-bottom:10px;color:var(--text-secondary, #c0c0c0);font-weight:500;font-size:16px}._formGroup_1uaky_87 ._inputIcon_1uaky_98{margin-right:8px;font-size:18px;color:var(--text-tertiary, #a0a0a0)}._formGroup_1uaky_87 ._inputWrapper_1uaky_103{position:relative;width:100%}._formGroup_1uaky_87 ._inputIconInside_1uaky_107{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-tertiary, #a0a0a0);font-size:16px;pointer-events:none;opacity:.9;z-index:30}._formGroup_1uaky_87 input{width:100%;padding:14px 14px 14px 40px;border:1px solid var(--border, rgba(255, 255, 255, .1));border-radius:8px;background-color:var(--bg-input, rgba(24, 25, 28, .7));color:var(--text-primary, #e0e0e0);font-size:16px;transition:all .3s;position:relative;z-index:25}._formGroup_1uaky_87 input:focus{outline:none;border-color:var(--accent, #9333ea);box-shadow:0 0 0 2px rgba(147,51,234,.2)}._formGroup_1uaky_87 input:disabled{opacity:.8;cursor:not-allowed}._formGroup_1uaky_87 input::placeholder{color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._formGroup_1uaky_87 input{background-color:var(--bg-input-light, rgba(245, 245, 247, .7));color:var(--text-primary-light, #333);border:1px solid var(--border-light, rgba(0, 0, 0, .1))}[data-theme=light] ._formGroup_1uaky_87 input::placeholder{color:var(--text-tertiary-light, #888)}._formGroup_1uaky_87 ._disabledInput_1uaky_150{background-color:var(--bg-disabled, rgba(40, 40, 45, .7));color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._formGroup_1uaky_87 ._disabledInput_1uaky_150{background-color:var(--bg-disabled-light, rgba(235, 235, 240, .7));color:var(--text-tertiary-light, #888)}._formGroup_1uaky_87 ._textarea_1uaky_158{width:100%;padding:14px;border:1px solid var(--border, rgba(255, 255, 255, .1));border-radius:8px;background-color:var(--bg-input, rgba(24, 25, 28, .7));color:var(--text-primary, #e0e0e0);font-size:16px;resize:vertical;min-height:120px;transition:all .3s}._formGroup_1uaky_87 ._textarea_1uaky_158:focus{outline:none;border-color:var(--accent, #9333ea);box-shadow:0 0 0 2px rgba(147,51,234,.2)}._formGroup_1uaky_87 ._textarea_1uaky_158:disabled{opacity:.7;cursor:not-allowed}._formGroup_1uaky_87 ._textarea_1uaky_158::placeholder{color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._formGroup_1uaky_87 ._textarea_1uaky_158{background-color:var(--bg-input-light, rgba(245, 245, 247, .7));color:var(--text-primary-light, #333);border:1px solid var(--border-light, rgba(0, 0, 0, .1))}[data-theme=light] ._formGroup_1uaky_87 ._textarea_1uaky_158::placeholder{color:var(--text-tertiary-light, #888)}._dropArea_1uaky_191{padding:25px;border:2px dashed var(--border, rgba(255, 255, 255, .2));border-radius:8px;background-color:var(--bg-input, rgba(24, 25, 28, .5));text-align:center;transition:all .3s;cursor:pointer}._dropArea_1uaky_191:hover,._dropArea_1uaky_191._highlight_1uaky_200{border-color:var(--accent, #9333ea);background-color:var(--bg-input-hover, rgba(30, 32, 35, .7))}._dropArea_1uaky_191 p{margin:8px 0;color:var(--text-secondary, #c0c0c0)}._dropArea_1uaky_191 ._dropHint_1uaky_208{font-size:14px;color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._dropArea_1uaky_191{background-color:var(--bg-input-light, rgba(245, 245, 247, .5));border:2px dashed var(--border-light, rgba(0, 0, 0, .2))}[data-theme=light] ._dropArea_1uaky_191:hover,[data-theme=light] ._dropArea_1uaky_191._highlight_1uaky_200{border-color:var(--accent, #9333ea);background-color:var(--bg-input-hover-light, rgba(235, 235, 240, .7))}[data-theme=light] ._dropArea_1uaky_191 p{color:var(--text-secondary-light, #555)}[data-theme=light] ._dropArea_1uaky_191 ._dropHint_1uaky_208{color:var(--text-tertiary-light, #888)}._browseButton_1uaky_227{background:none;border:none;color:var(--accent, #9333ea);font-weight:600;cursor:pointer;padding:0;text-decoration:underline;transition:all .2s}._browseButton_1uaky_227:hover{color:var(--accent-hover, #a855f7)}._imagePreviewContainer_1uaky_241{display:flex;flex-wrap:wrap;gap:10px;margin-top:15px}._imagePreview_1uaky_241{position:relative;width:100px;height:100px;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px rgba(0,0,0,.2)}._imagePreview_1uaky_241 img{width:100%;height:100%;object-fit:cover}._imagePreview_1uaky_241 ._removeImageButton_1uaky_261{position:absolute;top:5px;right:5px;width:24px;height:24px;border-radius:50%;background-color:rgba(0,0,0,.6);color:#fff;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:.8;transition:all .2s}._imagePreview_1uaky_241 ._removeImageButton_1uaky_261:hover{opacity:1;background-color:rgba(220,53,69,.8)}._submitButton_1uaky_283{width:100%;padding:14px;background:linear-gradient(90deg,var(--accent, #9333ea),var(--accent-hover, #a855f7));color:#fff;border:none;border-radius:30px;font-size:16px;font-weight:600;cursor:pointer;margin-top:10px;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden;box-shadow:0 4px 10px rgba(0,0,0,.2)}._submitButton_1uaky_283 ._buttonIcon_1uaky_301{margin-right:8px;font-size:18px}._submitButton_1uaky_283:hover:not(:disabled){background:linear-gradient(90deg,var(--accent-hover, #a855f7),var(--accent, #9333ea));box-shadow:0 6px 15px rgba(0,0,0,.3);transform:translateY(-2px)}._submitButton_1uaky_283:disabled{opacity:.7;cursor:not-allowed}._submitButton_1uaky_283:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(to right,rgba(255,255,255,0),rgba(255,255,255,.2),rgba(255,255,255,0));transform:rotate(45deg);opacity:0;transition:all .5s}._submitButton_1uaky_283:hover:not(:disabled):before{animation:_shimmer_1uaky_1 1.5s infinite}@keyframes _shimmer_1uaky_1{0%{left:-150%;opacity:0}50%{opacity:.4}to{left:150%;opacity:0}}@media (max-width: 600px){._formContainer_1uaky_9{padding:25px 15px}._title_1uaky_30{font-size:24px;margin-bottom:20px}._formGroup_1uaky_87{margin-bottom:18px}._formGroup_1uaky_87 input,._formGroup_1uaky_87 ._textarea_1uaky_158{padding:12px 12px 12px 36px;font-size:14px}._formGroup_1uaky_87 label{font-size:14px}._formGroup_1uaky_87 ._inputIconInside_1uaky_107{left:10px;font-size:14px}._dropArea_1uaky_191{padding:15px}._imagePreview_1uaky_241{width:80px;height:80px}}._themeButton_1p4eo_1{position:absolute;top:10px;right:10px;z-index:10;padding:10px;background:#000;border-radius:35px;cursor:pointer;transition:transform .3s ease,background .3s ease;width:55px;height:55px;display:flex;align-items:center;justify-content:center;border:none;box-sizing:border-box}[data-theme=dark] ._themeButton_1p4eo_1{background:#fff}._themeButton_1p4eo_1:hover{transform:scale(1.1)}._themeButton_1p4eo_1:focus{outline:none}._disabled_1p4eo_33{opacity:.7;cursor:not-allowed}')),document.head.appendChild(r)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}}();
var e,t,a,n,s,r,i,o,l,c,d,m,u,p,_,h,g,f,x,b,y,v,w,j,k,N,S,C,E,P,A,I,B,O,q,D,U,T,L,M,z,F,R,G,H,V,W,J,$,Y,X,Z,Q,K,ee=Object.freeze,te=Object.defineProperty,ae=(e,t)=>ee(te(e,"raw",{value:ee(t||e.slice())}));function ne(){import.meta.url,import("_").catch((()=>1)),async function*(){}().next()}import{c as se,j as re,m as ie,A as oe,r as le,R as ce,a as de,L as me,b as ue,F as pe,d as _e,e as he,f as ge,g as fe,h as xe,i as be,k as ye,l as ve,n as we,o as je,u as ke,p as Ne,q as Se,s as Ce,t as Ee,v as Pe,w as Ae,x as Ie,y as Be,z as Oe,B as qe,C as De,D as Ue,E as Te,G as Le,H as Me,I as ze,J as Fe,K as Re,M as Ge,N as He,O as Ve,P as We,Q as Je,S as $e,T as Ye,U as Xe,V as Ze,W as Qe,X as Ke,Y as et,Z as tt,_ as at,$ as nt,a0 as st,a1 as rt,a2 as it,a3 as ot,a4 as lt,a5 as ct,a6 as dt,a7 as mt,a8 as ut,a9 as pt,aa as _t,ab as ht,ac as gt}from"../chunks/vendor-react.Dr4adDNN.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ft="_page_efhok_172",xt="_text-animation_efhok_267",bt="_text-animation-slow_efhok_278",yt={window:"_window_52q69_2",window__message:"_window__message_52q69_13",window__panel:"_window__panel_52q69_23",window__panel__iconWrapper:"_window__panel__iconWrapper_52q69_35",window__panel__navButtons:"_window__panel__navButtons_52q69_41",window__panel__navButtons__navButton:"_window__panel__navButtons__navButton_52q69_47",window__panel__navButtons__navButton__arrow:"_window__panel__navButtons__navButton__arrow_52q69_53",disabled:"_disabled_52q69_65"},vt=e=>{const t=se.c(8),{children:a,direction:n,selectedIcon:s,showMessage:r}=e,i=void 0===r||r;let o,l;return t[0]!==a||t[1]!==n||t[2]!==s||t[3]!==i?(o=s?re.jsx(ie.div,{custom:n,initial:{opacity:0,x:n>0?100:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:n>0?-100:100},transition:{duration:.3},layout:!0,style:{width:"100%",height:"100%"},children:a},s):i&&re.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:re.jsx("div",{className:yt.window__message,children:re.jsx("h2",{children:"Выберите персонажа"})})},"message"),t[0]=a,t[1]=n,t[2]=s,t[3]=i,t[4]=o):o=t[4],t[5]!==n||t[6]!==o?(l=re.jsx(oe,{mode:"wait",custom:n,children:o}),t[5]=n,t[6]=o,t[7]=l):l=t[7],l},wt={menu:"_menu_1mm9j_2",menu__left:"_menu__left_1mm9j_14",menu__left__pic:"_menu__left__pic_1mm9j_24",menu__right:"_menu__right_1mm9j_35",menu__right__titleblock:"_menu__right__titleblock_1mm9j_52",menu__right__titleblock__fullname:"_menu__right__titleblock__fullname_1mm9j_60",menu__right__titleblock__maininfo:"_menu__right__titleblock__maininfo_1mm9j_63"};const jt="guest",kt="vivian",Nt="akito",St="lonarius",Ct="faust",Et="igorpic",Pt="lesyapic";function At(e,t={}){const{format:a="auto",quality:n=90,width:s,height:r,version:i="v1746536649",dpr:o,flags:l,fetch_format:c}=t;let d=[];d.push("q_".concat(n)),o&&d.push("dpr_".concat(o)),l&&d.push("fl_".concat(l)),c&&d.push("f_".concat(c));const m=e=>e?"string"==typeof e&&e.includes("px")?parseInt(e.replace("px",""),10):e:null,u=m(s),p=m(r);u&&d.push("w_".concat(u)),p&&d.push("h_".concat(p)),"auto"===a||c||d.push("f_".concat(a));const _=d.length>0?d.join(",")+"/":"";let h=e;e.match(/\.(avif|webp|png|jpg|jpeg|svg)$/i)&&(h=e.substring(0,e.lastIndexOf(".")));const g=h.includes("/")?h.substring(h.lastIndexOf("/")+1):h;return"https://res.cloudinary.com/".concat("do9t8preg","/image/upload/").concat(_).concat(i,"/").concat(g)}const It=e=>{const t=se.c(7),{avatar:a,alt:n,className:s,style:r,size:i,onClick:o}=e,l=void 0===a?jt:a,c=void 0===n?"Аватар пользователя":n,d=void 0===i?40:i;let m;return t[0]!==c||t[1]!==l||t[2]!==s||t[3]!==o||t[4]!==d||t[5]!==r?(m=re.jsx(Bt,{path:l,alt:c,className:s,style:r,width:d,height:d,loading:"eager",onClick:o}),t[0]=c,t[1]=l,t[2]=s,t[3]=o,t[4]=d,t[5]=r,t[6]=m):m=t[6],m},Bt=e=>{const t=se.c(31),{path:a,alt:n,className:s,style:r,width:i,height:o,loading:l,onLoad:c,onError:d,onClick:m}=e,u=void 0===l?"lazy":l;let p,_,h,g;if(t[0]!==o||t[1]!==a||t[2]!==i){const e={width:i,height:o};_="img_".concat(a,"_").concat(i||"auto","_").concat(o||"auto"),p=At(a,{...e,format:"avif"}),g=At(a,{...e,format:"webp"}),h=At(a,{...e,format:"png"}),t[0]=o,t[1]=a,t[2]=i,t[3]=p,t[4]=_,t[5]=h,t[6]=g}else p=t[3],_=t[4],h=t[5],g=t[6];const f=h,x="avif_".concat(_);let b;t[7]!==p||t[8]!==x?(b=re.jsx("source",{srcSet:p,type:"image/avif"},x),t[7]=p,t[8]=x,t[9]=b):b=t[9];const y="webp_".concat(_);let v;t[10]!==y||t[11]!==g?(v=re.jsx("source",{srcSet:g,type:"image/webp"},y),t[10]=y,t[11]=g,t[12]=v):v=t[12];const w=n||"Изображение",j="png_".concat(_);let k,N,S;return t[13]!==d?(k=e=>{d&&d(e)},t[13]=d,t[14]=k):k=t[14],t[15]!==s||t[16]!==o||t[17]!==u||t[18]!==m||t[19]!==c||t[20]!==f||t[21]!==r||t[22]!==w||t[23]!==j||t[24]!==k||t[25]!==i?(N=re.jsx("img",{src:f,alt:w,className:s,style:r,width:i,height:o,loading:u,crossOrigin:"anonymous",onLoad:c,onClick:m,onError:k},j),t[15]=s,t[16]=o,t[17]=u,t[18]=m,t[19]=c,t[20]=f,t[21]=r,t[22]=w,t[23]=j,t[24]=k,t[25]=i,t[26]=N):N=t[26],t[27]!==N||t[28]!==b||t[29]!==v?(S=re.jsxs("picture",{children:[b,v,N]}),t[27]=N,t[28]=b,t[29]=v,t[30]=S):S=t[30],S},Ot={button:"_button_1jwbf_1",icon:"_icon_1jwbf_39"},qt=e=>{const t=se.c(4),{text:a}=e;let n,s;return t[0]!==a?(n=a.split("").map(Dt),t[0]=a,t[1]=n):n=t[1],t[2]!==n?(s=re.jsx(re.Fragment,{children:n}),t[2]=n,t[3]=s):s=t[3],s};function Dt(e,t){const a=" "===e?" ":e;return re.jsx("span",{style:{animationDelay:"".concat(.05*t,"s")},children:a},t)}const Ut="_modalOverlay_1214q_2",Tt="_modalOverlay__content_1214q_15",Lt="_modalOverlay__closeButton_1214q_29",Mt="_modalOverlay__textContent_1214q_42",zt="_modalOverlay__navigation_1214q_48",Ft="_modalOverlay__arrowRight_1214q_54",Rt="_modalOverlay__arrowLeft_1214q_54",Gt="_modalOverlay__title_1214q_67",Ht="_modalOverlay__textBlock_1214q_86",Vt="_modalOverlay__textBlock__textCont_1214q_90",Wt="_modalOverlay__pageIndicator_1214q_105",Jt="_fadeIn_1214q_117",$t="_fadeOut_1214q_121",Yt="_disabled_1214q_125",Xt=e=>e&&"string"==typeof e?e.replace(/class=/g,"className="):"",Zt={container:{fontFamily:"Graphr, sans-serif",lineHeight:"1.5"},paragraph:{marginBottom:"10px",lineHeight:"1.5",position:"relative"},bulletPoint:{marginBottom:"10px",textIndent:"0",position:"relative"},blockquote:{margin:"2rem 0rem",borderLeft:"4px solid var(--accent-color)",fontStyle:"italic",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"0 8px 8px 0"},blurredText:{filter:"blur(4px)",display:"inline-block"}},Qt=({html:e,onHeightChange:t})=>{const a=le.useRef(null);if(le.useEffect((()=>{if(a.current&&t){const e=a.current.scrollHeight;t(e)}}),[e,t]),!e||"string"!=typeof e)return null;const n=document.createElement("div");n.innerHTML=e;const s=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){const t=Array.from(e.childNodes).map(s),a={key:Math.random().toString(36).substr(2,9),className:e.className||void 0};let n={};if("p"===e.tagName.toLowerCase()){n=e.textContent.trim().startsWith("•")?{...Zt.bulletPoint}:{...Zt.paragraph}}else"blockquote"===e.tagName.toLowerCase()?n={...Zt.blockquote}:"span"===e.tagName.toLowerCase()&&e.className&&e.className.includes("blur")&&(n={...Zt.blurredText});return a.style=n,Array.from(e.attributes).forEach((e=>{"class"!==e.name&&"style"!==e.name&&(a[e.name]=e.value)})),ce.createElement(e.tagName.toLowerCase(),a,...t)}return null};return re.jsx("div",{ref:a,style:Zt.container,children:s(n)})},Kt=e=>{const t=se.c(62),{isOpen:a,onClose:n,id:s,characters:r}=e,[i,o]=le.useState(!1),[l,c]=le.useState(!1),[d,m]=le.useState(null),[,u]=le.useState(0),p=le.useRef(null),{currentPage:_,nextPage:h,prevPage:g}=(()=>{const e=se.c(8),[t,a]=le.useState(0);let n;e[0]!==t?(n=e=>{t<e-1&&a(t+1)},e[0]=t,e[1]=n):n=e[1];const s=n;let r;e[2]!==t?(r=()=>{t>0&&a(t-1)},e[2]=t,e[3]=r):r=e[3];const i=r;let o;return e[4]!==t||e[5]!==s||e[6]!==i?(o={currentPage:t,nextPage:s,prevPage:i,setCurrentPage:a},e[4]=t,e[5]=s,e[6]=i,e[7]=o):o=e[7],o})();let f,x,b;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>(c(!0),m(document.body),()=>{c(!1),m(null)}),x=[],t[0]=f,t[1]=x):(f=t[0],x=t[1]),le.useEffect(f,x);e:{if(!r||!s){let e;t[2]===Symbol.for("react.memo_cache_sentinel")?(e={character:null,pages:[]},t[2]=e):e=t[2],b=e;break e}let e,a,n;if(t[3]!==r||t[4]!==s){const n=((e,t)=>{const a=e[t];if(a&&a.lore&&"string"==typeof a.lore)return a})(r,s);if(!n||!n.lore||""===n.lore.trim()){b={character:n,pages:[]};break e}e=n,a=(e=>{if(!e||"string"!=typeof e)return[];if(!/<p>.*?<\/p>/g.test(e))return["<p>".concat(e,"</p>")];if("undefined"==typeof window)return[e];const t=e.split("<p>").filter(Boolean).map((e=>e.split("</p>")[0].trim())),a=t.pop()||null,n=[];let s="",r=0;const i=window.innerWidth<=768,o=window.innerHeight,l=document.createElement("div");l.style.position="absolute",l.style.visibility="hidden",l.style.maxWidth="600px",l.style.fontFamily="graphr, sans-serif",l.style.fontSize="1.6rem",l.style.lineHeight="1.5",l.style.padding="10px",l.style.wordWrap="break-word";const c=document.createElement("style");c.textContent="\n    .blur {\n      filter: blur(4px);\n      display: inline-block;\n    }\n  ",document.head.appendChild(c),document.body.appendChild(l);try{const e=i&&o>400?600:800,c=i?500:1/0;if(t.length>0){const e=t.shift().trim();s="<p>".concat(e,"</p>"),r=e.length}if(t.forEach((t=>{const a=t.trim(),i="<p>".concat(a,"</p>"),o=a.length;l.innerHTML=Xt(s+i),l.scrollHeight>e||r+o>c?(n.push(s),s=i,r=o):(s+=i,r+=o)})),s&&n.push(s),a&&a.trim()){const t="<blockquote>".concat(a.trim(),"</blockquote>");l.innerHTML=Xt(s+t),l.scrollHeight>e?(n.push(s),n.push(t)):n[n.length-1]+=t}}finally{document.body.removeChild(l),document.head.removeChild(c)}return n})(n.lore),t[3]=r,t[4]=s,t[5]=e,t[6]=a,t[7]=b}else e=t[5],a=t[6],b=t[7];t[8]!==e||t[9]!==a?(n={character:e,pages:a},t[8]=e,t[9]=a,t[10]=n):n=t[10],b=n}const{character:y,pages:v}=b;if(!(a&&y&&0!==v.length&&l&&d))return null;let w;t[11]!==h||t[12]!==v.length?(w=()=>{o(!0),setTimeout((()=>{h(v.length),o(!1)}),300)},t[11]=h,t[12]=v.length,t[13]=w):w=t[13];const j=w;let k;t[14]!==g?(k=()=>{o(!0),setTimeout((()=>{g(),o(!1)}),300)},t[14]=g,t[15]=k):k=t[15];const N=k;let S;t[16]===Symbol.for("react.memo_cache_sentinel")?(S=e=>{u(e)},t[16]=S):S=t[16];const C=S;let E;if(t[17]!==y||t[18]!==_||t[19]!==i||t[20]!==j||t[21]!==N||t[22]!==n||t[23]!==v||t[24]!==d){let e,a;t[26]===Symbol.for("react.memo_cache_sentinel")?(e=re.jsx("svg",{width:"20",height:"20",viewBox:"0 0 30 30",children:re.jsx("path",{d:"M7 4H6L4 6v2l8 7-8 7v2l2 2h2l7-8 7 8h2l2-2v-2l-8-7 8-7V6l-2-2h-2l-7 8-7-8H7z"})}),t[26]=e):e=t[26],t[27]!==n?(a=re.jsx("button",{onClick:n,className:Lt,children:e}),t[27]=n,t[28]=a):a=t[28];const s=0===_,r="".concat(Rt," ").concat(0===_?Yt:"");let o,l;t[29]===Symbol.for("react.memo_cache_sentinel")?(o=re.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:re.jsx("path",{d:"m12.718 4.707-1.413-1.415L2.585 12l8.72 8.707 1.413-1.415L6.417 13H20v-2H6.416l6.302-6.293z"})}),t[29]=o):o=t[29],t[30]!==N||t[31]!==s||t[32]!==r?(l=re.jsx("button",{onClick:N,disabled:s,className:r,children:o}),t[30]=N,t[31]=s,t[32]=r,t[33]=l):l=t[33];const c=_===v.length-1,m="".concat(Ft," ").concat(_===v.length-1?Yt:"");let u,h,g,f,x;t[34]===Symbol.for("react.memo_cache_sentinel")?(u=re.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:re.jsx("path",{d:"M11.293 4.707 17.586 11H4v2h13.586l-6.293 6.293 1.414 1.414L21.414 12l-8.707-8.707-1.414 1.414z"})}),t[34]=u):u=t[34],t[35]!==j||t[36]!==c||t[37]!==m?(h=re.jsx("button",{onClick:j,disabled:c,className:m,children:u}),t[35]=j,t[36]=c,t[37]=m,t[38]=h):h=t[38],t[39]!==l||t[40]!==h?(g=re.jsxs("div",{className:zt,children:[l,h]}),t[39]=l,t[40]=h,t[41]=g):g=t[41],t[42]!==y?(f=(e=>{if(!e)return"Не найден";const{name:t}=e;return["Фауст","Лонариус"].includes(t)?"".concat(t,"а"):t})(y),t[42]=y,t[43]=f):f=t[43],t[44]!==f?(x=re.jsxs("h2",{className:Gt,children:["Лор ",f]}),t[44]=f,t[45]=x):x=t[45];const b="".concat(Vt," ").concat(i?$t:Jt),w=v[_];let k,S;t[46]!==w?(k=re.jsx(Qt,{html:w,onHeightChange:C}),t[46]=w,t[47]=k):k=t[47],t[48]!==b||t[49]!==k?(S=re.jsx("div",{className:Ht,ref:p,children:re.jsx("div",{className:b,children:k})}),t[48]=b,t[49]=k,t[50]=S):S=t[50];const P=_+1;let A,I,B;t[51]!==v.length||t[52]!==P?(A=re.jsxs("div",{className:Wt,children:["Страница ",P," из ",v.length]}),t[51]=v.length,t[52]=P,t[53]=A):A=t[53],t[54]!==g||t[55]!==x||t[56]!==S||t[57]!==A?(I=re.jsxs("div",{className:Mt,children:[g,x,S,A]}),t[54]=g,t[55]=x,t[56]=S,t[57]=A,t[58]=I):I=t[58],t[59]!==I||t[60]!==a?(B=re.jsx("div",{className:Ut,children:re.jsxs("div",{className:Tt,onClick:ea,children:[a,I]})}),t[59]=I,t[60]=a,t[61]=B):B=t[61],E=de.createPortal(B,d),t[17]=y,t[18]=_,t[19]=i,t[20]=j,t[21]=N,t[22]=n,t[23]=v,t[24]=d,t[25]=E}else E=t[25];return E};function ea(e){return e.stopPropagation()}const ta=e=>{const t=se.c(16),{id:a,characters:n}=e,[s,r]=le.useState(!1),[i,o]=le.useState(!1);let l,c,d;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>(o(!0),()=>o(!1)),c=[],t[0]=l,t[1]=c):(l=t[0],c=t[1]),le.useEffect(l,c),t[2]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{r(!0)},t[2]=d):d=t[2];const m=d;let u;t[3]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{r(!1)},t[3]=u):u=t[3];const p=u;let _;t[4]===Symbol.for("react.memo_cache_sentinel")?(_=e=>{"Escape"===e.key&&p()},t[4]=_):_=t[4];const h=_;let g,f,x,b,y,v;return t[5]===Symbol.for("react.memo_cache_sentinel")?(g=()=>(window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}),f=[],t[5]=g,t[6]=f):(g=t[5],f=t[6]),le.useEffect(g,f),i?(t[7]===Symbol.for("react.memo_cache_sentinel")?(x=re.jsx("span",{className:"".concat(xt," ").concat(bt),children:re.jsx(qt,{text:"Читать лор"})}),t[7]=x):x=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(b=re.jsx("div",{className:Ot.wrapper,children:re.jsxs("button",{className:Ot.button,onClick:m,children:[x,re.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:Ot.icon,children:re.jsx("path",{clipRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm4.28 10.28a.75.75 0 000-1.06l-3-3a.75.75 0 10-1.06 1.06l1.72 1.72H8.25a.75.75 0 000 1.5h5.69l-1.72 1.72a.75.75 0 101.06 1.06l3-3z",fillRule:"evenodd"})})]})}),t[8]=b):b=t[8],t[9]!==n||t[10]!==a||t[11]!==s||t[12]!==i?(y=i&&s&&re.jsx(Kt,{isOpen:s,onClose:p,id:a,characters:n}),t[9]=n,t[10]=a,t[11]=s,t[12]=i,t[13]=y):y=t[13],t[14]!==y?(v=re.jsxs(re.Fragment,{children:[b,y]}),t[14]=y,t[15]=v):v=t[15],v):null};function aa(e){const t=se.c(48),{id:a,src:n,name:s,surname:r,age:i,height:o,bd:l,characters:c}=e,d=void 0===r?"":r,m=void 0===i?"?":i,u=void 0===l?"?":l;let p;t[0]!==n?(p=n&&(n.startsWith("./")||n.startsWith("http")),t[0]=n,t[1]=p):p=t[1];const _=p;let h;t[2]!==a||t[3]!==_||t[4]!==n?(h=e=>_?"./pics/char/picsfull/".concat(n,".").concat(e):At("".concat(a,"full"),{quality:90,format:e}),t[2]=a,t[3]=_,t[4]=n,t[5]=h):h=t[5];const g=h;let f,x,b,y,v;t[6]!==g?(f=g("avif"),t[6]=g,t[7]=f):f=t[7],t[8]!==f?(x=re.jsx("source",{srcSet:f,type:"image/avif"}),t[8]=f,t[9]=x):x=t[9],t[10]!==g?(b=g("webp"),t[10]=g,t[11]=b):b=t[11],t[12]!==b?(y=re.jsx("source",{srcSet:b,type:"image/webp"}),t[12]=b,t[13]=y):y=t[13],t[14]!==g?(v=g("png"),t[14]=g,t[15]=v):v=t[15];const w="icon-".concat(s);let j,k;t[16]!==v||t[17]!==w?(j=re.jsx("img",{src:v,alt:w,loading:"lazy",onError:na}),t[16]=v,t[17]=w,t[18]=j):j=t[18],t[19]!==j||t[20]!==x||t[21]!==y?(k=re.jsx("div",{className:wt.menu__left,children:re.jsxs("picture",{className:wt.menu__left__pic,children:[x,y,j]})}),t[19]=j,t[20]=x,t[21]=y,t[22]=k):k=t[22];const N="".concat(s," ").concat(d);let S;t[23]!==N?(S=re.jsx("h2",{className:"".concat(wt.menu__right__titleblock__fullname," ").concat(xt),children:re.jsx(qt,{text:N})}),t[23]=N,t[24]=S):S=t[24];const C="Возраст: ".concat(m," ").concat("?"!==m&&function(e){if(!Number.isInteger(e)||e<0)throw new Error("Возраст должен быть неотрицательным целым числом");const t=e%10,a=e%100;return a>=11&&a<=19?"лет":1===t?"год":t>=2&&t<=4?"года":"лет"}(m));let E;t[25]!==C?(E=re.jsx("span",{className:"".concat(wt.menu__right__titleblock__maininfo__age," ").concat(xt),children:re.jsx(qt,{text:C})}),t[25]=C,t[26]=E):E=t[26];const P="Рост: ".concat(o," см");let A;t[27]!==P?(A=re.jsx("span",{className:"".concat(wt.menu__right__titleblock__maininfo__height," ").concat(xt),children:re.jsx(qt,{text:P})}),t[27]=P,t[28]=A):A=t[28];const I="День рождения: ".concat(u);let B,O,q,D,U,T;return t[29]!==I?(B=re.jsx("span",{className:"".concat(wt.menu__right__titleblock__maininfo__bd," ").concat(xt),children:re.jsx(qt,{text:I})}),t[29]=I,t[30]=B):B=t[30],t[31]!==E||t[32]!==A||t[33]!==B?(O=re.jsxs("div",{className:wt.menu__right__titleblock__maininfo,children:[E,A,B]}),t[31]=E,t[32]=A,t[33]=B,t[34]=O):O=t[34],t[35]!==S||t[36]!==O?(q=re.jsxs("div",{className:wt.menu__right__titleblock,children:[S,O]}),t[35]=S,t[36]=O,t[37]=q):q=t[37],t[38]!==c||t[39]!==a?(D=re.jsx(ta,{id:a,characters:c}),t[38]=c,t[39]=a,t[40]=D):D=t[40],t[41]!==q||t[42]!==D?(U=re.jsxs("div",{className:wt.menu__right,children:[q,D]}),t[41]=q,t[42]=D,t[43]=U):U=t[43],t[44]!==a||t[45]!==k||t[46]!==U?(T=re.jsxs("div",{id:a,className:wt.menu,children:[k,U]}),t[44]=a,t[45]=k,t[46]=U,t[47]=T):T=t[47],T}function na(e){}const sa=le.createContext(),ra={light:{"--primary-color":"#000000","--background-color":"#ffffff","--text-color":"#000000","--secondary-color":"#666666","--accent-color":"#3498db"},dark:{"--primary-color":"#ffffff","--background-color":"#1a1a1a","--text-color":"#ffffff","--secondary-color":"#999999","--accent-color":"#3498db"}},ia=e=>{const t=se.c(12),{children:a}=e;let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=localStorage.getItem("theme")||"light",document.documentElement.setAttribute("data-theme",n),t[0]=n):n=t[0];const[s,r]=le.useState(n);let i;t[1]!==s?(i=()=>{const e="light"===s?"dark":"light";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e);const t=getComputedStyle(document.documentElement);for(let n=0;n<t.length;n++){const e=t[n];e.startsWith("--")&&document.documentElement.style.removeProperty(e)}const a=ra[e];a&&Object.entries(a).forEach(oa),"dark"===e?(document.documentElement.style.setProperty("--background-color","#1e1e1e"),document.documentElement.style.setProperty("--text-color","#e0e0e0"),document.documentElement.style.setProperty("--text-primary","#e0e0e0"),document.documentElement.style.setProperty("--bg-secondary","#292929"),document.documentElement.style.setProperty("--bg-highlight","#2a2a2a"),document.documentElement.style.setProperty("--modal-bg","#2a2a2a")):(document.documentElement.style.setProperty("--background-color","#fff"),document.documentElement.style.setProperty("--text-color","#000"),document.documentElement.style.setProperty("--text-primary","#222222"),document.documentElement.style.setProperty("--bg-secondary","#f8f9fa"),document.documentElement.style.setProperty("--bg-highlight","#f5f8fa"),document.documentElement.style.setProperty("--modal-bg","#ffffff")),r(e),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:e}}))},t[1]=s,t[2]=i):i=t[2];const o=i;let l,c,d;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{document.documentElement.setAttribute("data-theme",n);const e=getComputedStyle(document.documentElement);for(let a=0;a<e.length;a++){const t=e[a];t.startsWith("--")&&document.documentElement.style.removeProperty(t)}const t=ra[n];t&&Object.entries(t).forEach(la),"dark"===n&&(document.documentElement.style.setProperty("--background-color","#1e1e1e"),document.documentElement.style.setProperty("--text-color","#e0e0e0"),document.documentElement.style.setProperty("--text-primary","#e0e0e0"),document.documentElement.style.setProperty("--bg-secondary","#292929"),document.documentElement.style.setProperty("--bg-highlight","#2a2a2a"),document.documentElement.style.setProperty("--modal-bg","#2a2a2a"),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:n}}))),window.addEventListener("DOMContentLoaded",(()=>{document.documentElement.setAttribute("data-theme",n),"dark"===n?(document.documentElement.style.setProperty("--background-color","#1e1e1e"),document.documentElement.style.setProperty("--text-color","#e0e0e0")):(document.documentElement.style.setProperty("--background-color","#fff"),document.documentElement.style.setProperty("--text-color","#000"))}))},c=[],t[3]=l,t[4]=c):(l=t[3],c=t[4]),le.useEffect(l,c);const m="dark"===s;let u;t[5]!==m||t[6]!==s||t[7]!==o?(u={theme:s,toggleTheme:o,isDarkMode:m},t[5]=m,t[6]=s,t[7]=o,t[8]=u):u=t[8],d=u;const p=d;let _;return t[9]!==a||t[10]!==p?(_=re.jsx(sa.Provider,{value:p,children:a}),t[9]=a,t[10]=p,t[11]=_):_=t[11],_};function oa(e){const[t,a]=e;document.documentElement.style.setProperty(t,a)}function la(e){const[t,a]=e;document.documentElement.style.setProperty(t,a)}const ca="_btn_2wi9v_2",da="_btn__pic_2wi9v_19",ma="_darkTheme_2wi9v_30",ua=ce.memo((e=>{const t=se.c(33),{src:a,index:n,onClick:s}=e,{theme:r}=le.useContext(sa);let i;e:{if(a.startsWith("./")||a.startsWith("http")){const e="./pics/icons/".concat(a,".avif"),n="./pics/icons/".concat(a,".webp"),s="./pics/icons/".concat(a,".png");let r;t[0]!==e||t[1]!==n||t[2]!==s?(r={avif:e,webp:n,png:s},t[0]=e,t[1]=n,t[2]=s,t[3]=r):r=t[3],i=r;break e}let e,n,s,r;t[4]!==a?(e=At(a,{quality:90,format:"avif"}),t[4]=a,t[5]=e):e=t[5],t[6]!==a?(n=At(a,{quality:90,format:"webp"}),t[6]=a,t[7]=n):n=t[7],t[8]!==a?(s=At(a,{quality:90,format:"png"}),t[8]=a,t[9]=s):s=t[9],t[10]!==e||t[11]!==n||t[12]!==s?(r={avif:e,webp:n,png:s},t[10]=e,t[11]=n,t[12]=s,t[13]=r):r=t[13],i=r}const o=i;let l;t[14]===Symbol.for("react.memo_cache_sentinel")?(l=re.jsx("hr",{}),t[14]=l):l=t[14];const c="".concat(da," ").concat("dark"===r?ma:"");let d,m;t[15]!==o.avif?(d=re.jsx("source",{srcSet:o.avif,type:"image/avif"}),t[15]=o.avif,t[16]=d):d=t[16],t[17]!==o.webp?(m=re.jsx("source",{srcSet:o.webp,type:"image/webp"}),t[17]=o.webp,t[18]=m):m=t[18];const u="icon-".concat(n);let p,_,h,g,f;return t[19]!==o.png||t[20]!==u?(p=re.jsx("img",{src:o.png,alt:u,loading:"eager",decoding:"async",crossOrigin:"anonymous",onError:pa}),t[19]=o.png,t[20]=u,t[21]=p):p=t[21],t[22]!==c||t[23]!==d||t[24]!==m||t[25]!==p?(_=re.jsxs("picture",{className:c,children:[d,m,p]}),t[22]=c,t[23]=d,t[24]=m,t[25]=p,t[26]=_):_=t[26],t[27]!==s||t[28]!==_?(h=re.jsx("button",{className:ca,onClick:s,children:_}),t[27]=s,t[28]=_,t[29]=h):h=t[29],t[30]===Symbol.for("react.memo_cache_sentinel")?(g=re.jsx("hr",{}),t[30]=g):g=t[30],t[31]!==h?(f=re.jsxs("div",{children:[l,h,g]}),t[31]=h,t[32]=f):f=t[32],f}));function pa(e){}ua.displayName="Icon";const _a=e=>{const t=se.c(40),{icons:a,onIconClick:n}=e,[s,r]=le.useState(0);let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{r(ha)},t[0]=i):i=t[0];const o=i;let l;t[1]!==a.length?(l=()=>{r((e=>e<a.length-3?e+1:e))},t[1]=a.length,t[2]=l):l=t[2];const c=l;let d,m,u,p,_,h,g,f,x;if(t[3]!==a||t[4]!==n||t[5]!==s){const e=a.slice(s,s+3);g=yt.window__panel,_=yt.window__panel__navButtons;const r="".concat(yt.window__panel__navButtons__navButton," ").concat(0===s?yt.disabled:""),i=0===s;let l,c;t[13]===Symbol.for("react.memo_cache_sentinel")?(l=re.jsx("span",{className:yt.window__panel__navButtons__navButton__arrow,children:re.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:re.jsx("path",{d:"m3.293 11.293 1.414 1.414L11 6.414V20h2V6.414l6.293 6.293 1.414-1.414L12 2.586l-8.707 8.707z"})})}),t[13]=l):l=t[13],t[14]!==i||t[15]!==r?(h=re.jsx("button",{className:r,onClick:o,disabled:i,"aria-label":"Назад",children:l}),t[14]=i,t[15]=r,t[16]=h):h=t[16],p=yt.window__panel__iconWrapper,d=oe,m="popLayout",t[17]!==n||t[18]!==s?(c=(e,t)=>re.jsx(ie.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{duration:.3,ease:"easeOut"},className:yt.window__panel__iconWrapper__icons,children:re.jsx(ua,{src:e,index:s+t,onClick:()=>n(e)})},s+t),t[17]=n,t[18]=s,t[19]=c):c=t[19],u=e.map(c),t[3]=a,t[4]=n,t[5]=s,t[6]=d,t[7]=m,t[8]=u,t[9]=p,t[10]=_,t[11]=h,t[12]=g}else d=t[6],m=t[7],u=t[8],p=t[9],_=t[10],h=t[11],g=t[12];t[20]!==d||t[21]!==m||t[22]!==u?(f=re.jsx(d,{mode:m,children:u}),t[20]=d,t[21]=m,t[22]=u,t[23]=f):f=t[23],t[24]!==p||t[25]!==f?(x=re.jsx("div",{className:p,children:f}),t[24]=p,t[25]=f,t[26]=x):x=t[26];const b="".concat(yt.window__panel__navButtons__navButton," ").concat(s>=a.length-3?yt.disabled:""),y=s>=a.length-3;let v,w,j,k;return t[27]===Symbol.for("react.memo_cache_sentinel")?(v=re.jsx("span",{className:yt.window__panel__navButtons__navButton__arrow,children:re.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:re.jsx("path",{d:"M13 17.586V4h-2v13.586l-6.293-6.293-1.414 1.414L12 21.414l8.707-8.707-1.414-1.414L13 17.586z"})})}),t[27]=v):v=t[27],t[28]!==c||t[29]!==b||t[30]!==y?(w=re.jsx("button",{className:b,onClick:c,disabled:y,"aria-label":"Вперёд",children:v}),t[28]=c,t[29]=b,t[30]=y,t[31]=w):w=t[31],t[32]!==x||t[33]!==w||t[34]!==_||t[35]!==h?(j=re.jsxs("div",{className:_,children:[h,x,w]}),t[32]=x,t[33]=w,t[34]=_,t[35]=h,t[36]=j):j=t[36],t[37]!==j||t[38]!==g?(k=re.jsx("div",{className:g,children:j}),t[37]=j,t[38]=g,t[39]=k):k=t[39],k};function ha(e){return e>0?e-1:e}const ga={},fa=6e5,xa={},ba=window.location.hostname.includes("github.io"),ya=e=>{if(e.startsWith("/gist/")){const t=e.split("/");return{username:t[2],gistId:t[3],filename:t[t.length-1]}}return null},va=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return null}},wa=(e,t)=>{try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(a){return!1}},ja=e=>{try{return localStorage.removeItem(e),!0}catch(t){return!1}},ka=async(e,t=!1)=>{const a="data_".concat(e.split("?v=")[0]),n=e.startsWith("/gist/");if(!t){if(ga[a])return ga[a].data;const e=va(a);if(e&&e.timestamp){if(Date.now()-e.timestamp<fa)return ga[a]=e,e.data}}const s=Date.now();if(xa[e]&&s-xa[e]<2e3){if(ga[a])return ga[a].data;const e=va(a);return e?e.data:null}xa[e]=s;try{const s=(e=>{if(e.startsWith("/gist/")&&ba){const t=ya(e);return"https://api.github.com/gists/".concat(t.gistId)}return e})(e),r=e,i=await fetch(s,{cache:t?"no-cache":"default"});if(429===i.status){if(ga[a])return ga[a].data;const e=va(a);return e?e.data:null}if(!i.ok)throw new Error("HTTP error! status: ".concat(i.status));const o=await i.json();let l=o;n&&ba&&(l=((e,t)=>{try{const a=ya(t);if(!a||!e.files)return null;const n=a.filename;for(const t in e.files)if(t===n||t.endsWith("/".concat(n))){const a=e.files[t].content;if(a)return JSON.parse(a)}for(const t in e.files)if(t.endsWith(".json")){const a=e.files[t].content;if(a)return JSON.parse(a)}return e}catch(a){return null}})(o,r));const c={data:l,timestamp:Date.now()};return ga[a]=c,wa(a,c),l}catch(r){if(ga[a])return ga[a].data;const e=va(a);return e?e.data:null}};const Na=["faust","lonarius","vivian","akito"];function Sa(){var e,t,a,n,s,r,i;const o=se.c(18),[l,c]=le.useState(null),[d,m]=le.useState(1),[u,p]=le.useState(!1),[_,h]=le.useState(Ca);let g,f,x;o[0]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{Object.keys(window.localStorage).filter((e=>e.includes("gist.github")||e.includes("githubusercontent"))).forEach((e=>window.localStorage.removeItem(e))),window.caches&&caches.keys().then((e=>{e.forEach((e=>{caches.delete(e)}))})),h(Date.now())},f=[],o[0]=g,o[1]=f):(g=o[0],f=o[1]),le.useEffect(g,f),o[2]===Symbol.for("react.memo_cache_sentinel")?(x={retryInterval:3e4},o[2]=x):x=o[2];const{data:b,loading:y,error:v,refresh:w}=function(e,t={}){const{skipCache:a=!1,retryInterval:n=1e4}=t,[s,r]=le.useState(null),[i,o]=le.useState(!0),[l,c]=le.useState(null),d=le.useRef(!0),m=le.useRef(null),u=e.split("?v=")[0],p="data_".concat(u),_=le.useCallback((async(t=!1)=>{t&&o(!0);try{if(!t&&!s){const e=va(p);e&&e.data&&Date.now()-e.timestamp<fa&&(r(e.data),c(null),o(!1))}const n=await ka(e,t||a);if(!d.current)return;if(n)r(n),c(null),m.current&&(clearTimeout(m.current),m.current=null);else{const e=va(p);if(!e||!e.data)throw new Error("Failed to load data")}}catch(i){d.current&&(c(i.message),d.current&&!m.current&&(m.current=setTimeout((()=>{d.current&&(m.current=null,_(!0))}),n)))}finally{d.current&&o(!1)}}),[e,u,p,a,n,s]);le.useEffect((()=>(d.current=!0,_(),()=>{d.current=!1,m.current&&clearTimeout(m.current)})),[_]);const h=le.useCallback((()=>{const e="data_".concat(u);delete ga[e],ja(e),_(!0)}),[u,_]);return{data:s,loading:i,error:l,refresh:()=>_(!0),clearCache:h}}("/gist/igorao79/17a1e2924e5dbee9371956c24be2a31b/raw/chlore.json?v=".concat(_),x);let j;o[3]!==u||o[4]!==l?(j=e=>{u||(p(!0),m(l?Na.indexOf(e)>Na.indexOf(l)?1:-1:1),c(e),setTimeout((()=>p(!1)),300))},o[3]=u,o[4]=l,o[5]=j):j=o[5];const k=j;let N,S;var C;let E;return o[6]!==k?(N=re.jsx(_a,{icons:Na,onIconClick:k}),o[6]=k,o[7]=N):N=o[7],o[8]!==b||o[9]!==d||o[10]!==v||o[11]!==y||o[12]!==w||o[13]!==l?(S=y?re.jsx("div",{className:yt.loading,children:"Загрузка..."}):v?re.jsxs("div",{className:yt.error,children:["Ошибка загрузки данных. ",!y&&re.jsx("button",{onClick:w,children:"Повторить"})]}):re.jsx(vt,{selectedIcon:l,direction:d,children:l&&b&&b[l]&&re.jsx(aa,{id:l,src:null==(e=b[l])?void 0:e.src,name:null==(t=b[l])?void 0:t.name,surname:null==(a=b[l])?void 0:a.surname,age:null==(n=b[l])?void 0:n.age,height:null==(s=b[l])?void 0:s.height,bd:null==(r=b[l])?void 0:r.bd,lore:(C=null==(i=b[l])?void 0:i.lore,C?C.includes("<p>")?C:"<p>".concat(C,"</p>"):""),characters:b})}),o[8]=b,o[9]=d,o[10]=v,o[11]=y,o[12]=w,o[13]=l,o[14]=S):S=o[14],o[15]!==N||o[16]!==S?(E=re.jsxs("div",{className:yt.window,children:[N,S]}),o[15]=N,o[16]=S,o[17]=E):E=o[17],E}function Ca(){return Date.now()}const Ea="_aboutblock_kg2nj_3",Pa="_aboutblock__header_kg2nj_17",Aa="_aboutblock__header__htitle_kg2nj_25",Ia="_aboutblock__header__textblock_kg2nj_45",Ba="_aboutblock__header__textblock__card_kg2nj_54",Oa="_aboutblock__header__textblock__card__icon_kg2nj_71",qa="_aboutblock__header__textblock__card__icon__main_kg2nj_80",Da="_aboutblock__header__textblock__card__icon__small_kg2nj_87",Ua="_aboutblock__header__textblock__card__content_kg2nj_96",Ta="_aboutblock__header__textblock__card__link_kg2nj_107",La="_aboutblock__divider_kg2nj_140",Ma="_aboutblock__divider__line_kg2nj_148",za="_aboutblock__divider__icon_kg2nj_153",Fa="_aboutblock__main_kg2nj_158",Ra="_aboutblock__main__btitle_kg2nj_166",Ga="_aboutblock__main__dtitle_kg2nj_166",Ha="_aboutblock__main__authors_kg2nj_181",Va="_aboutblock__main__developers_kg2nj_181",Wa="_aboutblock__social_kg2nj_196",Ja="_aboutblock__social__title_kg2nj_205",$a="_aboutblock__social__links_kg2nj_221",Ya={member:"_member_17rw5_2",member__info__details__name:"_member__info__details__name_17rw5_21",member__imageContainer:"_member__imageContainer_17rw5_25",member__imageWrapper:"_member__imageWrapper_17rw5_28",borderRotate:"_borderRotate_17rw5_1",member__image:"_member__image_17rw5_25",member__info:"_member__info_17rw5_21",member__info__details:"_member__info__details_17rw5_21",member__info__details__link:"_member__info__details__link_17rw5_109",member__info__details__role:"_member__info__details__role_17rw5_134",member__info__bio:"_member__info__bio_17rw5_140","member--igor":"_member--igor_17rw5_147",rotate:"_rotate_17rw5_1","member--lesya":"_member--lesya_17rw5_172",heartbeat:"_heartbeat_17rw5_1",float:"_float_17rw5_1"},Xa={lesya:{id:"lesya",name:"Леся",src:"lesyapic",bookteam:"Художник, Соавтор",bio:"Соавтор и основной художник проекта."},igor:{id:"igor",name:"Игорь",src:"igorpic",developerteam:"Ведущий разработчик сайта. Отвечает за техническую реализацию проекта и внедрение новых функций.",bookteam:"Автор",bio:"Создатель и автор проекта."}},Za=ce.memo((e=>{const t=se.c(32),{memberId:a,profileUrl:n}=e,{theme:s}=le.useContext(sa);let r;r=Xa[a];const i=r;if(!i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=re.jsx("div",{className:Ya.member__notfound,children:"Участник не найден."}),t[0]=e):e=t[0],e}let o;o="member--".concat(i.id.replace(/\s+/g,"-").toLowerCase());const l=o;let c;t[1]!==n?(c=n?new URL(n).hash.replace("#",""):null,t[1]=n,t[2]=c):c=t[2];const d=c,m="".concat(Ya.member," ").concat(Ya["member--".concat(i.id)]),u="".concat(Ya.member__imageContainer," ").concat("dark"===s?Ya.darkTheme:"");let p,_,h,g,f,x,b,y,v;return t[3]!==i.name||t[4]!==i.src||t[5]!==d||t[6]!==n?(p=n?re.jsx(me,{to:d,children:re.jsx(Bt,{path:i.src,alt:i.name,className:Ya.member__image,loading:"lazy"})}):re.jsx(Bt,{path:i.src,alt:i.name,className:Ya.member__image,loading:"lazy"}),t[3]=i.name,t[4]=i.src,t[5]=d,t[6]=n,t[7]=p):p=t[7],t[8]!==u||t[9]!==p?(_=re.jsx("div",{className:Ya.member__imageWrapper,children:re.jsx("div",{className:u,children:p})}),t[8]=u,t[9]=p,t[10]=_):_=t[10],t[11]!==i.name||t[12]!==d||t[13]!==n?(h=n?re.jsx(me,{to:d,className:Ya.member__info__details__link,children:i.name}):i.name,t[11]=i.name,t[12]=d,t[13]=n,t[14]=h):h=t[14],t[15]!==h?(g=re.jsx("h3",{className:Ya.member__info__details__name,children:h}),t[15]=h,t[16]=g):g=t[16],t[17]!==i.bookteam?(f=re.jsx("p",{className:Ya.member__info__details__role,children:i.bookteam}),t[17]=i.bookteam,t[18]=f):f=t[18],t[19]!==f||t[20]!==g?(x=re.jsxs("div",{className:Ya.member__info__details,children:[g,f]}),t[19]=f,t[20]=g,t[21]=x):x=t[21],t[22]!==i.bio?(b=re.jsx("p",{className:Ya.member__info__bio,children:i.bio}),t[22]=i.bio,t[23]=b):b=t[23],t[24]!==x||t[25]!==b?(y=re.jsxs("div",{className:Ya.member__info,children:[x,b]}),t[24]=x,t[25]=b,t[26]=y):y=t[26],t[27]!==l||t[28]!==y||t[29]!==m||t[30]!==_?(v=re.jsxs("div",{className:m,id:l,children:[_,y]}),t[27]=l,t[28]=y,t[29]=m,t[30]=_,t[31]=v):v=t[31],v}));Za.displayName="BookMember";const Qa="_button_n0lbf_1",Ka="_icon_n0lbf_21",en=()=>{const e=se.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=re.jsxs("a",{href:"https://t.me/+yFsUa_nD88piNjg6",target:"_blank",rel:"noopener noreferrer",className:Qa,children:[re.jsx("div",{className:Ka,children:re.jsx("svg",{width:16,height:16,className:"bi bi-telegram",viewBox:"0 0 16 16",fill:"currentColor",children:re.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.3 6A388.8 388.8 0 0 0 3 8.3c0 .2.3.3.7.4H4l1.2.4.9-.3a82.9 82.9 0 0 1 3.6-2.1l-2 1.9-.3.3a8.2 8.2 0 0 1-.2.2c-.4.4-.7.7 0 1.1A66.2 66.2 0 0 1 9 11.4l.3.2c.3.2.6.4 1 .4.2 0 .4-.2.5-.8l1-5.8a1.4 1.4 0 0 0-.1-.3.3.3 0 0 0-.1-.2.5.5 0 0 0-.3 0c-.3 0-.8 0-3 1z"})})}),"Telegram"]}),e[0]=t):t=e[0],t},tn=ce.memo((e=>{const t=se.c(27),{memberId:a,profileUrl:n}=e,{theme:s}=le.useContext(sa);let r;r=Xa[a];const i=r;if(!i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=re.jsx("div",{className:Ya.member__notfound,children:"Участник не найден."}),t[0]=e):e=t[0],e}let o;o="member--".concat(i.id.replace(/\s+/g,"-").toLowerCase());const l=o;let c;t[1]!==n?(c=n?new URL(n).hash.replace("#",""):null,t[1]=n,t[2]=c):c=t[2];const d=c,m="".concat(Ya.member," ").concat(Ya["member--".concat(i.id)]),u="".concat(Ya.member__imageContainer," ").concat("dark"===s?Ya.darkTheme:"");let p,_,h,g,f,x,b;return t[3]!==i.name||t[4]!==i.src||t[5]!==d||t[6]!==n?(p=n?re.jsx(me,{to:d,children:re.jsx(Bt,{path:i.src,alt:i.name,className:Ya.member__image,loading:"lazy"})}):re.jsx(Bt,{path:i.src,alt:i.name,className:Ya.member__image,loading:"lazy"}),t[3]=i.name,t[4]=i.src,t[5]=d,t[6]=n,t[7]=p):p=t[7],t[8]!==u||t[9]!==p?(_=re.jsx("div",{className:Ya.member__imageWrapper,children:re.jsx("div",{className:u,children:p})}),t[8]=u,t[9]=p,t[10]=_):_=t[10],t[11]!==i.name||t[12]!==d||t[13]!==n?(h=n?re.jsx(me,{to:d,className:Ya.member__info__details__link,children:i.name}):i.name,t[11]=i.name,t[12]=d,t[13]=n,t[14]=h):h=t[14],t[15]!==h?(g=re.jsx("h3",{className:Ya.member__info__details__name,children:h}),t[15]=h,t[16]=g):g=t[16],t[17]!==i.developerteam?(f=re.jsx("p",{className:Ya.member__info__details__role,children:i.developerteam}),t[17]=i.developerteam,t[18]=f):f=t[18],t[19]!==f||t[20]!==g?(x=re.jsx("div",{className:Ya.member__info,children:re.jsxs("div",{className:Ya.member__info__details,children:[g,f]})}),t[19]=f,t[20]=g,t[21]=x):x=t[21],t[22]!==l||t[23]!==x||t[24]!==m||t[25]!==_?(b=re.jsxs("div",{className:m,id:l,children:[_,x]}),t[22]=l,t[23]=x,t[24]=m,t[25]=_,t[26]=b):b=t[26],b}));function an(){const e=se.c(19);let t,a;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:0,y:20},e[0]=t):t=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(a={hidden:t,visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},e[1]=a):a=e[1];const n=a;let s,r;e[2]===Symbol.for("react.memo_cache_sentinel")?(s={opacity:0},e[2]=s):s=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(r={hidden:s,visible:{opacity:1,transition:{staggerChildren:.2}}},e[3]=r):r=e[3];const i=r;let o,l,c,d,m,u,p,_,h,g,f,x,b,y,v;return e[4]===Symbol.for("react.memo_cache_sentinel")?(o=re.jsx(ie.h2,{className:Aa,variants:n,children:"О нашей книге"}),e[4]=o):o=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(l=re.jsx("div",{className:Oa,children:re.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.9 108.7",width:"50",height:"50",children:[re.jsx("path",{className:qa,d:"M95.2 91.4h-.8a1.6 1.6 0 0 1-1.6-1.7 23 23 0 0 0-1.9-9 27 27 0 0 0-13.4-13.5 23 23 0 0 0-9.1-1.8a1.6 1.6 0 0 1-1.6-1.7V63a1.6 1.6 0 0 1 1.6-1.7 22.9 22.9 0 0 0 9.1-1.8 25.4 25.4 0 0 0 8-5.5 25.6 25.6 0 0 0 5.4-7.9 22.9 22.9 0 0 0 1.8-9.1 1.6 1.6 0 0 1 1.7-1.6h.8a1.6 1.6 0 0 1 1.7 1.6 22.9 22.9 0 0 0 1.8 9.1 25.2 25.2 0 0 0 5.5 8 25.2 25.2 0 0 0 8 5.4 22.9 22.9 0 0 0 9 1.8A1.6 1.6 0 0 1 123 63v.8a1.6 1.6 0 0 1-1.7 1.7 23 23 0 0 0-9 1.8 27 27 0 0 0-13.5 13.4 23 23 0 0 0-1.8 9.1 1.6 1.6 0 0 1-1.7 1.7Z"}),re.jsx("path",{className:Da,d:"M65,55h-0.7a1,1,0,0,1-1-1,15,15,0,0,0-1.2-6,18,18,0,0,0-4.3-5.6,18,18,0,0,0-5.6-4.3,15,15,0,0,0-6-1.2,1,1,0,0,1-1-1V35a1,1,0,0,1,1-1,15,15,0,0,0,6-1.2,18,18,0,0,0,5.6-4.3,18,18,0,0,0,4.3-5.6,15,15,0,0,0,1.2-6,1,1,0,0,1,1-1H65a1,1,0,0,1,1,1,15,15,0,0,0,1.2,6,18,18,0,0,0,4.3,5.6,18,18,0,0,0,5.6,4.3,15,15,0,0,0,6,1.2,1,1,0,0,1,1,1v0.7a1,1,0,0,1-1,1,15,15,0,0,0-6,1.2,18,18,0,0,0-5.6,4.3,18,18,0,0,0-4.3,5.6,15,15,0,0,0-1.2,6,1,1,0,0,1-1,1Z",transform:"scale(0.5) translate(90,70)"})]})}),e[5]=l):l=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(c=re.jsxs(ie.div,{className:Ba,variants:n,children:[l,re.jsx("div",{className:Ua,children:re.jsx("p",{children:"Основной жанр нашей книги - фэнтэзи с элементами дарк фэнтэзи, романтики и приключений"})})]}),e[6]=c):c=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(d=re.jsx("div",{className:Oa,children:re.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.88 108.69",width:"50",height:"50",children:[re.jsx("path",{className:qa,d:"M95.24,91.38H94.4a1.65,1.65,0,0,1-1.65-1.65,22.91,22.91,0,0,0-1.81-9.12A27.06,27.06,0,0,0,77.52,67.19a23.05,23.05,0,0,0-9.12-1.81,1.65,1.65,0,0,1-1.64-1.64v-.85a1.64,1.64,0,0,1,1.64-1.64,22.88,22.88,0,0,0,9.12-1.82,25.35,25.35,0,0,0,7.93-5.49A25.62,25.62,0,0,0,90.94,46a22.87,22.87,0,0,0,1.81-9.11,1.65,1.65,0,0,1,1.65-1.64h.84a1.65,1.65,0,0,1,1.65,1.64A22.88,22.88,0,0,0,98.7,46a25.24,25.24,0,0,0,5.49,7.93,25.19,25.19,0,0,0,7.93,5.49,22.88,22.88,0,0,0,9.12,1.82,1.64,1.64,0,0,1,1.64,1.64v.85a1.65,1.65,0,0,1-1.64,1.64,23.05,23.05,0,0,0-9.12,1.81A27.06,27.06,0,0,0,98.7,80.61a23,23,0,0,0-1.81,9.12,1.65,1.65,0,0,1-1.65,1.65Z"}),re.jsx("path",{className:Da,d:"M65,55h-0.7a1,1,0,0,1-1-1,15,15,0,0,0-1.2-6,18,18,0,0,0-4.3-5.6,18,18,0,0,0-5.6-4.3,15,15,0,0,0-6-1.2,1,1,0,0,1-1-1V35a1,1,0,0,1,1-1,15,15,0,0,0,6-1.2,18,18,0,0,0,5.6-4.3,18,18,0,0,0,4.3-5.6,15,15,0,0,0,1.2-6,1,1,0,0,1,1-1H65a1,1,0,0,1,1,1,15,15,0,0,0,1.2,6,18,18,0,0,0,4.3,5.6,18,18,0,0,0,5.6,4.3,15,15,0,0,0,6,1.2,1,1,0,0,1,1,1v0.7a1,1,0,0,1-1,1,15,15,0,0,0-6,1.2,18,18,0,0,0-5.6,4.3,18,18,0,0,0-4.3,5.6,15,15,0,0,0-1.2,6,1,1,0,0,1-1,1Z",transform:"scale(0.5) translate(90,70)"})]})}),e[7]=d):d=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(m=re.jsxs(ie.div,{className:Ba,variants:n,children:[d,re.jsx("div",{className:Ua,children:re.jsxs("p",{children:["Книга была создана 27 июня 2024 года — совершенно спонтанно, без чётких целей. За её развитием вы можете следить ",re.jsx("a",{href:"https://t.me/+yFsUa_nD88piNjg6",className:Ta,children:"здесь"})]})})]}),e[8]=m):m=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(u=re.jsx("div",{className:Oa,children:re.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.88 108.69",width:"50",height:"50",children:[re.jsx("path",{className:qa,d:"M95.24,91.38H94.4a1.65,1.65,0,0,1-1.65-1.65,22.91,22.91,0,0,0-1.81-9.12A27.06,27.06,0,0,0,77.52,67.19a23.05,23.05,0,0,0-9.12-1.81,1.65,1.65,0,0,1-1.64-1.64v-.85a1.64,1.64,0,0,1,1.64-1.64,22.88,22.88,0,0,0,9.12-1.82,25.35,25.35,0,0,0,7.93-5.49A25.62,25.62,0,0,0,90.94,46a22.87,22.87,0,0,0,1.81-9.11,1.65,1.65,0,0,1,1.65-1.64h.84a1.65,1.65,0,0,1,1.65,1.64A22.88,22.88,0,0,0,98.7,46a25.24,25.24,0,0,0,5.49,7.93,25.19,25.19,0,0,0,7.93,5.49,22.88,22.88,0,0,0,9.12,1.82,1.64,1.64,0,0,1,1.64,1.64v.85a1.65,1.65,0,0,1-1.64,1.64,23.05,23.05,0,0,0-9.12,1.81A27.06,27.06,0,0,0,98.7,80.61a23,23,0,0,0-1.81,9.12,1.65,1.65,0,0,1-1.65,1.65Z"}),re.jsx("path",{className:Da,d:"M65,55h-0.7a1,1,0,0,1-1-1,15,15,0,0,0-1.2-6,18,18,0,0,0-4.3-5.6,18,18,0,0,0-5.6-4.3,15,15,0,0,0-6-1.2,1,1,0,0,1-1-1V35a1,1,0,0,1,1-1,15,15,0,0,0,6-1.2,18,18,0,0,0,5.6-4.3,18,18,0,0,0,4.3-5.6,15,15,0,0,0,1.2-6,1,1,0,0,1,1-1H65a1,1,0,0,1,1,1,15,15,0,0,0,1.2,6,18,18,0,0,0,4.3,5.6,18,18,0,0,0,5.6,4.3,15,15,0,0,0,6,1.2,1,1,0,0,1,1,1v0.7a1,1,0,0,1-1,1,15,15,0,0,0-6,1.2,18,18,0,0,0-5.6,4.3,18,18,0,0,0-4.3,5.6,15,15,0,0,0-1.2,6,1,1,0,0,1-1,1Z",transform:"scale(0.5) translate(90,70)"})]})}),e[9]=u):u=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(p=re.jsxs("header",{className:Pa,children:[o,re.jsxs(ie.div,{className:Ia,variants:i,children:[c,m,re.jsxs(ie.div,{className:Ba,variants:n,children:[u,re.jsx("div",{className:Ua,children:re.jsx("p",{children:"Наша книга - это погружение в мир магии, загадочных созданий и невероятных приключений. Присоединяйтесь к нашему творческому путешествию!"})})]})]})]}),e[10]=p):p=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(_=re.jsxs("div",{className:La,children:[re.jsx("div",{className:Ma}),re.jsx("div",{className:za,children:"✧"}),re.jsx("div",{className:Ma})]}),e[11]=_):_=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(h=re.jsx(ie.h2,{className:Ra,variants:n,children:"Творческая команда"}),e[12]=h):h=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(g=re.jsx(ie.div,{variants:n,children:re.jsx(Za,{memberId:"igor",profileUrl:"http://localhost:5173/#/profile/ca7fe23e-f263-4372-8aac-a652791e724c"})}),e[13]=g):g=e[13],e[14]===Symbol.for("react.memo_cache_sentinel")?(f=re.jsxs(ie.div,{className:Ha,variants:i,children:[g,re.jsx(ie.div,{variants:n,children:re.jsx(Za,{memberId:"lesya",profileUrl:"http://localhost:5173/#/profile/f1ea0167-4743-4d9e-93fc-42e30a55f34f"})})]}),x=re.jsx(ie.h2,{className:Ga,variants:n,children:"Команда разработки"}),e[14]=f,e[15]=x):(f=e[14],x=e[15]),e[16]===Symbol.for("react.memo_cache_sentinel")?(b=re.jsxs(ie.div,{className:Fa,variants:i,children:[h,f,x,re.jsx(ie.div,{className:Va,variants:i,children:re.jsx(ie.div,{variants:n,children:re.jsx(tn,{memberId:"igor",profileUrl:"http://localhost:5173/#/profile/ca7fe23e-f263-4372-8aac-a652791e724c"})})})]}),e[16]=b):b=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(y=re.jsx(ie.h2,{className:Ja,variants:n,children:"Присоединяйтесь к нам"}),e[17]=y):y=e[17],e[18]===Symbol.for("react.memo_cache_sentinel")?(v=re.jsxs(ie.div,{className:Ea,initial:"hidden",animate:"visible",variants:i,children:[p,_,b,re.jsxs(ie.div,{className:Wa,variants:i,children:[y,re.jsx(ie.div,{className:$a,variants:n,children:re.jsx(en,{})})]})]}),e[18]=v):v=e[18],v}tn.displayName="DeveloperMember";const nn="_main_1lmof_1",sn="_main__header_1lmof_35",rn="_main__header__pic_1lmof_41",on="_darkTheme_1lmof_55",ln="_main__header__title_1lmof_58",cn="_main__nav_1lmof_68",dn="_main__nav__perexod_1lmof_74",mn="_main__nav__perexod__link_1lmof_81",un="_main__nav__auth_1lmof_84",pn="_main__nav__burger_1lmof_88",_n="_main__nav__burger__line_1lmof_101",hn="_open_1lmof_114",gn="_main__nav__mobile_1lmof_123",fn="_main__nav__mobile__list_1lmof_145",xn="_main__nav__mobile__list__item_1lmof_150",bn="_homepage_1lmof_189",yn=e=>{const t=se.c(38),{src:a,alt:n,folder:s,width:r,height:i}=e,{theme:o}=le.useContext(sa);if(a.startsWith("./")||a.startsWith("http")){let e,s;t[0]!==a?(e=a.split("/").pop(),s=e.replace("-black","").replace(/\.(avif|webp|png|jpg|jpeg)$/i,""),t[0]=a,t[1]=e,t[2]=s):(e=t[1],s=t[2]),e=s;const l="dark"===o?"".concat(e,"-black"):e;let c;t[3]!==a||t[4]!==l?(c=e=>"".concat(a.substring(0,a.lastIndexOf("/")+1)).concat(l,".").concat(e),t[3]=a,t[4]=l,t[5]=c):c=t[5];const d=c,m="".concat(rn," ").concat("dark"===o?on:""),u=d("avif");let p;t[6]!==u?(p=re.jsx("source",{srcSet:u,type:"image/avif"}),t[6]=u,t[7]=p):p=t[7];const _=d("webp");let h;t[8]!==_?(h=re.jsx("source",{srcSet:_,type:"image/webp"}),t[8]=_,t[9]=h):h=t[9];const g=d("png");let f,x;return t[10]!==n||t[11]!==i||t[12]!==g||t[13]!==r?(f=re.jsx("img",{src:g,alt:n,loading:"lazy",width:r,height:i,onError:vn}),t[10]=n,t[11]=i,t[12]=g,t[13]=r,t[14]=f):f=t[14],t[15]!==f||t[16]!==m||t[17]!==p||t[18]!==h?(x=re.jsxs("picture",{className:m,children:[p,h,f]}),t[15]=f,t[16]=m,t[17]=p,t[18]=h,t[19]=x):x=t[19],x}let l,c,d,m;if(t[20]!==i||t[21]!==a||t[22]!==o||t[23]!==r){const e=a.replace(/\.(avif|webp|png|jpg|jpeg)$/i,""),n={quality:90,width:r||("sclogo"===a?160:void 0),height:i};c="".concat(rn," ").concat("dark"===o?on:""),d=re.jsx("source",{srcSet:At(e,{...n,format:"avif"}),type:"image/avif"}),m=re.jsx("source",{srcSet:At(e,{...n,format:"webp"}),type:"image/webp"}),l=At(e,{...n,format:"png"}),t[20]=i,t[21]=a,t[22]=o,t[23]=r,t[24]=l,t[25]=c,t[26]=d,t[27]=m}else l=t[24],c=t[25],d=t[26],m=t[27];const u=r||("sclogo"===a?160:void 0);let p,_;return t[28]!==n||t[29]!==i||t[30]!==l||t[31]!==u?(p=re.jsx("img",{src:l,alt:n,loading:"lazy",width:u,height:i,onError:wn}),t[28]=n,t[29]=i,t[30]=l,t[31]=u,t[32]=p):p=t[32],t[33]!==c||t[34]!==d||t[35]!==m||t[36]!==p?(_=re.jsxs("picture",{className:c,children:[d,m,p]}),t[33]=c,t[34]=d,t[35]=m,t[36]=p,t[37]=_):_=t[37],_};function vn(e){}function wn(e){}const jn="_authContainer_1qxaq_51",kn="_loginButton_1qxaq_56",Nn="_userProfile_1qxaq_104",Sn="_profileButton_1qxaq_110",Cn="_avatar_1qxaq_146",En="_username_1qxaq_159",Pn="_userMenu_1qxaq_190",An="_menuItem_1qxaq_239",In="_logoutButton_1qxaq_302",Bn="_adminButton_1qxaq_343",On="_profileMenuItem_1qxaq_413",qn="_feedbackButton_1qxaq_440",Dn="_backdrop_1kje4_1",Un="_modal_1kje4_20",Tn="_modalContent_1kje4_39",Ln="_closeButton_1kje4_47",Mn="_formWrapper_1kje4_71",zn="_patternOverlay_1kje4_170",Fn={BASE_URL:"/soulcycle/",DEV:!1,LEGACY:!1,MODE:"production",PROD:!0,SSR:!1},Rn=(e,t="")=>{const a="VITE_".concat(e);return"undefined"!=typeof window&&window.env&&window.env[a]&&""!==window.env[a]?window.env[a]:Fn[a]||t},Gn=Rn("SUPABASE_URL","https://euafjzczdtitceulztfw.supabase.co"),Hn=Rn("SUPABASE_ANON_KEY","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV1YWZqemN6ZHRpdGNldWx6dGZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYyMDY0MTcsImV4cCI6MjA2MTc4MjQxN30.i5duBK9a2QKWbc2Y_v723APJeg0vsNNwNkgXZLyIMfM");Rn("APP_NAME","SoulCycle");const Vn=ue(Gn,Hn,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1},global:{headers:{"Content-Type":"application/json",Accept:"application/json"}}}),Wn=new Map,Jn=3e5,$n={profileUpdated:[]},Yn=(e,t)=>($n[e]||($n[e]=[]),$n[e].push(t),()=>{$n[e]=$n[e].filter((e=>e!==t))}),Xn=(e,t)=>{$n[e]&&$n[e].forEach((e=>e(t)))},Zn={async getUserProfile(e){var t,a,n,s;try{if("ca7fe23e-f263-4372-8aac-a652791e724c"===e)Wn.delete(e);else if(Wn.has(e))return Wn.get(e);try{const{data:a,error:n}=await Vn.from("profiles").select("*").eq("id",e).single();if(!n&&a){const n={id:a.id,displayName:a.display_name||"Пользователь",email:a.email,avatar:a.avatar||null,role:a.role||"user",createdAt:a.created_at,perks:a.perks||["user"],activePerk:a.active_perk||(null==(t=a.perks)?void 0:t[0])||"user"};return Wn.set(e,n),setTimeout((()=>Wn.delete(e)),Jn),n}}catch(r){}try{const{data:t,error:n}=await Vn.from("public_profiles").select("*").eq("id",e).single();if(!n&&t){const n={id:t.id,displayName:t.display_name||(null==(a=t.email)?void 0:a.split("@")[0])||"Пользователь",email:t.email,avatar:t.avatar||null,role:t.role||"user",createdAt:t.created_at,perks:t.perks||["user"],activePerk:t.active_perk||"user"};return Wn.set(e,n),setTimeout((()=>Wn.delete(e)),Jn),n}}catch(i){}try{const{data:t,error:a}=await Vn.auth.getSession();if(!a&&(null==(n=null==t?void 0:t.session)?void 0:n.user)&&t.session.user.id===e){const a=t.session.user,n=a.user_metadata||{};let r=["user"],i="user";try{const{data:t}=await Vn.from("profiles").select("perks, active_perk").eq("id",e).single();t&&(r=t.perks||["user"],i=t.active_perk||r[0]||"user")}catch(o){}const l={id:e,displayName:n.display_name||(null==(s=a.email)?void 0:s.split("@")[0])||"Пользователь",email:a.email,avatar:n.avatar||null,role:n.role||"user",createdAt:a.created_at,perks:r,activePerk:i};return Wn.set(e,l),setTimeout((()=>Wn.delete(e)),Jn),l}}catch(l){}return{id:e,displayName:"Пользователь",email:null,avatar:null,role:"user",createdAt:(new Date).toISOString(),perks:["user"],activePerk:"user"}}catch(c){return{id:e,displayName:"Пользователь",email:null,avatar:null,role:"user",createdAt:(new Date).toISOString(),perks:["user"],activePerk:"user"}}},updateProfileCache(e,t){if(Wn.has(e)){const a={...Wn.get(e),...t};Wn.set(e,a),setTimeout((()=>Wn.delete(e)),Jn),Xn("profileUpdated",{userId:e,profileData:a})}},async updateUserProfile(e,t){try{const{data:a,error:n}=await Vn.from("profiles").update(t).eq("id",e);if(n)throw n;return this.updateProfileCache(e,t),this.clearCache(),a}catch(a){throw a}},clearCache(){Wn.clear()},getCurrentUserFromStorage(){try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return null}},clearProfileCache(e){e&&Wn.delete(e)},getCachedProfile:e=>e&&Wn.has(e)?Wn.get(e):null},Qn=e=>{if(!e||"string"!=typeof e)return"Произошла ошибка при авторизации";const t={"Invalid login credentials":"Неверный email или пароль","Email not confirmed":"Email не подтвержден","User already registered":"Пользователь с таким email уже зарегистрирован","Invalid email":"Неверный формат email","Password should be at least 6 characters":"Пароль должен содержать не менее 6 символов","Email already in use":"Email уже используется другим пользователем","Email already confirmed":"Email уже подтвержден","Invalid email or password":"Неверный email или пароль","Email is required":"Email обязателен","Password is required":"Пароль обязателен","Server error":"Ошибка сервера","The new password should be different from the previous password":"Новый пароль должен отличаться от текущего","Invalid refresh token":"Сессия истекла. Пожалуйста, войдите снова","Database error detecting account":"Ошибка базы данных при поиске аккаунта","Failed to establish connection":"Не удалось установить соединение с сервером","Password recovery invalid":"Неверная ссылка для восстановления пароля","Confirmation token expired or invalid":"Ссылка для подтверждения истекла или недействительна","Unable to validate email address":"Невозможно проверить email адрес","Access token is missing":"Отсутствует токен доступа","Access token has expired":"Срок действия токена доступа истек","Invalid or expired access token":"Недействительный или просроченный токен доступа","Signup is disabled":"Регистрация временно отключена","Signup email invalid":"Указан некорректный email адрес","duplicate key value violates unique constraint":"Этот адрес email уже зарегистрирован","You must log in to perform this action":"Необходимо войти для выполнения этого действия","Password must be at least 6 characters":"Пароль должен содержать не менее 6 символов","Пользователь с таким именем уже существует":"Пользователь с таким именем уже существует","Your chosen username is already taken by another user":"Выбранное вами имя пользователя уже занято","Duplicate key value":"Указанный email или имя пользователя уже используется"};if(t[e])return t[e];for(const[a,n]of Object.entries(t))if(e.includes(a))return n;return"Ошибка авторизации: "+e},Kn="site_events_cache";let es=null;(()=>{try{const e=localStorage.getItem(Kn);e&&(es=JSON.parse(e)),window.addEventListener("siteEventsChanged",(e=>{e.detail&&e.detail.siteEvents&&(es=e.detail.siteEvents)})),window.addEventListener("storage",(e=>{if(e.key===Kn&&e.newValue)try{es=JSON.parse(e.newValue)}catch(t){}}))}catch(e){}})();const ts=async e=>{try{if(es&&void 0!==es[e])return es[e];try{const t=localStorage.getItem(Kn);if(t){const a=JSON.parse(t);if(a&&void 0!==a[e])return es=a,a[e]}}catch(t){}const n="earlyUserPromotion"===e?"early_user_promotion":e.replace(/([A-Z])/g,"_$1").toLowerCase(),{data:s,error:r}=await Vn.from("site_settings").select(n).single();if(r)return!1;const i=!!s&&Boolean(s[n]);es={...es,[e]:i};try{const t=localStorage.getItem(Kn),a=t?JSON.parse(t):{};a[e]=i,localStorage.setItem(Kn,JSON.stringify(a))}catch(a){}return i}catch(n){return!1}},as=async e=>{try{const t=[];if(await ts("earlyUserPromotion")){const{data:a,error:n}=await Vn.from("profiles").select("perks").eq("id",e).single();if(n)return t;const s=(null==a?void 0:a.perks)||["user"];if(!s.includes("early_user")){const a=[...s,"early_user"],{error:n}=await Vn.from("profiles").update({perks:a}).eq("id",e);n||t.push("early_user")}}return t}catch(t){return[]}},ns="igoraor79@gmail.com",ss=async(e,t=null)=>{try{let a=Vn.from("profiles").select("id").ilike("display_name",e);t&&(a=a.neq("id",t));const{data:n,error:s}=await a;return!s&&0===n.length}catch(a){return!1}},rs=async e=>{if(!e)return{is_banned:!1};try{try{const{data:t,error:a}=await Vn.from("profiles").select("id").eq("id",e).single();if(a)return{is_banned:!1}}catch(t){return{is_banned:!1}}try{const{data:n,error:s}=await Vn.from("profiles").select("is_banned, ban_reason, ban_end_at, ban_admin_name").eq("id",e).single();if(s)return s.message&&s.message.includes("does not exist"),{is_banned:!1};if(!n.is_banned)return{is_banned:!1};if(n.ban_end_at){const a=new Date(n.ban_end_at);if(a<new Date){await Vn.from("profiles").update({is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_id:null,ban_admin_name:null}).eq("id",e);try{await Vn.from("user_bans").update({is_active:!1}).eq("user_id",e).eq("is_active",!0)}catch(t){}return{is_banned:!1}}}try{const{data:t,error:a}=await Vn.from("user_bans").select("*").eq("user_id",e).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1);return a?{is_banned:!0,reason:n.ban_reason,end_at:n.ban_end_at,admin_name:n.ban_admin_name}:t&&0!==t.length?{is_banned:!0,reason:t[0].reason,end_at:t[0].end_at,admin_name:t[0].admin_name,created_at:t[0].created_at,ban_type:t[0].ban_type}:{is_banned:!0,reason:n.ban_reason,end_at:n.ban_end_at,admin_name:n.ban_admin_name}}catch(a){return{is_banned:!0,reason:n.ban_reason,end_at:n.ban_end_at,admin_name:n.ban_admin_name}}}catch(n){return{is_banned:!1}}}catch(t){return{is_banned:!1}}},is={...{async register(e){try{const{email:n,password:s,displayName:r}=e;if(!(await ss(r)))throw new Error("Пользователь с таким именем уже существует");const{data:i,error:o}=await Vn.auth.signUp({email:n,password:s,options:{data:{display_name:r}}});if(o)throw new Error(Qn(o.message)||"Ошибка при регистрации");try{const{data:e,error:t}=await Vn.from("profiles").select("id").eq("id",i.user.id).single();if(t&&t.code,!e){const{error:e}=await Vn.from("profiles").insert({id:i.user.id,display_name:r,avatar:null,created_at:(new Date).toISOString(),perks:["user"],active_perk:"user"})}}catch(t){}const l=(await as(i.user.id)).includes("early_user")?["user","early_user"]:["user"],c={id:i.user.id,email:i.user.email,displayName:r,role:"user",perks:l,activePerk:l.includes("early_user")?"early_user":"user",createdAt:i.user.created_at};Zn.updateProfileCache(c.id,{id:c.id,email:c.email,displayName:c.displayName,avatar:null,perks:l,activePerk:c.activePerk});try{const{error:e}=await Vn.from("profiles").update({perks:l,active_perk:c.activePerk}).eq("id",c.id)}catch(a){}await this.autoLogin(i.user);return{user:c}}catch(n){throw n.message&&(n.message=Qn(n.message)),n}},async autoLogin(e){try{const a=await rs(e.id);if(a.is_banned)throw new Error("Ваш аккаунт заблокирован: ".concat(a.reason,". Окончание блокировки: ").concat(a.end_at?new Date(a.end_at).toLocaleString():"Бессрочно"));const n="igoraor79@gmail.com"===e.email,{data:s,error:r}=await Vn.from("profiles").select("*").eq("id",e.id).single();if(r&&r.code,!(null==s?void 0:s.perks)||Array.isArray(null==s?void 0:s.perks)&&0===s.perks.length){const{error:t}=await Vn.from("profiles").update({perks:["user"],active_perk:"user"}).eq("id",e.id)}let i=["user"];if(null==s?void 0:s.perks)if("string"==typeof s.perks)try{i=JSON.parse(s.perks)}catch(t){}else Array.isArray(s.perks)&&(i=s.perks);n&&!i.includes("admin")&&i.push("admin");const o={id:e.id,email:e.email,displayName:(null==s?void 0:s.display_name)||e.user_metadata.display_name||"Пользователь",role:n?"admin":(null==s?void 0:s.role)||e.user_metadata.role||"user",createdAt:e.created_at,avatar:(null==s?void 0:s.avatar)||e.user_metadata.avatar||null,perks:i,activePerk:(null==s?void 0:s.active_perk)||i[0]||"user"};return localStorage.setItem("user",JSON.stringify(o)),Zn.updateProfileCache(o.id,{id:o.id,email:o.email,displayName:o.displayName,avatar:o.avatar,perks:o.perks,activePerk:o.activePerk}),ds(o),o}catch(a){throw a}},async login(e){try{const{email:a,password:n}=e,{data:s,error:r}=await Vn.auth.signInWithPassword({email:a,password:n});if(r)throw new Error(Qn(r.message)||"Ошибка при входе");const i=await rs(s.user.id);if(i.is_banned)throw new Error("Ваш аккаунт заблокирован: ".concat(i.reason,". Окончание блокировки: ").concat(i.end_at?new Date(i.end_at).toLocaleString():"Бессрочно"));const o="igoraor79@gmail.com"===a,{data:l,error:c}=await Vn.from("profiles").select("*").eq("id",s.user.id).single();if(c&&c.code,!(null==l?void 0:l.perks)||Array.isArray(null==l?void 0:l.perks)&&0===l.perks.length){const{error:e}=await Vn.from("profiles").update({perks:["user"],active_perk:"user"}).eq("id",s.user.id)}let d=["user"];if(null==l?void 0:l.perks)if("string"==typeof l.perks)try{d=JSON.parse(l.perks)}catch(t){}else Array.isArray(l.perks)&&(d=l.perks);o&&!d.includes("admin")&&d.push("admin");const m={id:s.user.id,email:s.user.email,displayName:(null==l?void 0:l.display_name)||s.user.user_metadata.display_name||"Пользователь",role:o?"admin":(null==l?void 0:l.role)||s.user.user_metadata.role||"user",createdAt:s.user.created_at,avatar:(null==l?void 0:l.avatar)||s.user.user_metadata.avatar||null,perks:d,activePerk:(null==l?void 0:l.active_perk)||d[0]||"user"};return localStorage.setItem("user",JSON.stringify(m)),Zn.updateProfileCache(m.id,{id:m.id,email:m.email,displayName:m.displayName,avatar:m.avatar,perks:m.perks,activePerk:m.activePerk}),{user:m,token:s.session.access_token}}catch(a){throw a.message&&(a.message=Qn(a.message)),a}},async logout(){try{const{error:e}=await Vn.auth.signOut();if(e)throw new Error(Qn(e.message)||"Ошибка при выходе");localStorage.removeItem("user"),Zn.clearCache()}catch(e){throw e.message&&(e.message=Qn(e.message)),e}},isAuthenticated:()=>!!localStorage.getItem("user"),getToken(){var e;const{data:t}=Vn.auth.getSession();return(null==(e=null==t?void 0:t.session)?void 0:e.access_token)||null},async resetPassword(e){try{const t=window.location.origin,a="".concat(t,"/reset-password"),{error:n}=await Vn.auth.resetPasswordForEmail(e,{redirectTo:a});if(n)throw new Error(Qn(n.message)||"Ошибка при сбросе пароля");return!0}catch(t){throw t.message&&(t.message=Qn(t.message)),t}},async changePassword(e,t){try{const{data:a,error:n}=await Vn.auth.getSession();if(n||!a.session)throw new Error(Qn("You must log in to perform this action"));const s=a.session.user.email,{error:r}=await Vn.auth.signInWithPassword({email:s,password:e});if(r)throw new Error("Неверный текущий пароль");const{error:i}=await Vn.auth.updateUser({password:t});if(i)throw new Error(Qn(i.message)||"Ошибка при изменении пароля");return!0}catch(a){throw a.message&&(a.message=Qn(a.message)),a}},checkUserBan:rs},...{async getCurrentUser(){try{const{data:a,error:n}=await Vn.auth.getSession();if(n)throw new Error("Ошибка при получении сессии");const s=a.session;if(!s)return null;const{data:r,error:i}=await Vn.from("profiles").select("*").eq("id",s.user.id).single();i&&i.code;const o="igoraor79@gmail.com"===s.user.email;let l=["user"];if(null==r?void 0:r.perks)if("string"==typeof r.perks)try{l=JSON.parse(r.perks)}catch(e){}else Array.isArray(r.perks)&&(l=r.perks);o&&!l.includes("admin")&&l.push("admin");const c={id:s.user.id,email:s.user.email,displayName:(null==r?void 0:r.display_name)||s.user.user_metadata.display_name||"Пользователь",role:o?"admin":(null==r?void 0:r.role)||s.user.user_metadata.role||"user",avatar:(null==r?void 0:r.avatar)||s.user.user_metadata.avatar,perks:l,activePerk:(null==r?void 0:r.active_perk)||l[0]||"user",createdAt:s.user.created_at};if((null==r?void 0:r.display_name)&&s.user.user_metadata.display_name!==r.display_name)try{const{error:e}=await Vn.rpc("admin_update_user_metadata",{user_id:s.user.id,metadata_key:"display_name",metadata_value:r.display_name})}catch(t){}return Zn.updateProfileCache(c.id,{id:c.id,email:c.email,displayName:c.displayName,avatar:c.avatar,perks:c.perks,activePerk:c.activePerk}),c}catch(a){return null}},async getUserById(e){try{const{data:a,error:n}=await Vn.from("profiles").select("*").eq("id",e).single();if(n)throw new Error("Не удалось получить профиль пользователя");const s="igoraor79@gmail.com"===a.email;let r=["user"];if(null==a?void 0:a.perks)if("string"==typeof a.perks)try{r=JSON.parse(a.perks)}catch(t){}else Array.isArray(a.perks)&&(r=a.perks);return s&&!r.includes("admin")&&r.push("admin"),{id:a.id,displayName:a.display_name,email:a.email,role:s?"admin":a.role||"user",avatar:a.avatar,perks:r,activePerk:a.active_perk||r[0]||"user",createdAt:a.created_at,is_banned:a.is_banned||!1,ban_reason:a.ban_reason,ban_end_at:a.ban_end_at,ban_admin_name:a.ban_admin_name}}catch(a){throw a}},async updateAvatar(e,t=null){var a,n,s;try{const{data:{user:r},error:i}=await Vn.auth.getUser();if(i)throw new Error(Qn(i.message)||"Ошибка при получении пользователя");if(!r)throw new Error("Пользователь не найден");const o=t||r.id;if(o!==r.id){if(!("igoraor79@gmail.com"===r.email||(null==(n=null==(a=r.user_metadata)?void 0:a.perks)?void 0:n.includes("admin"))||"admin"===(null==(s=r.user_metadata)?void 0:s.active_perk)))throw new Error("Недостаточно прав для изменения аватара другого пользователя")}if(!t||t===r.id){const t=JSON.parse(localStorage.getItem("user"))||{};if(t.avatar=e,localStorage.setItem("user",JSON.stringify(t)),"undefined"!=typeof window){const a=new CustomEvent("app:user:updated",{detail:{...t,avatar:e}});window.dispatchEvent(a);const n=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(t),url:window.location.href});window.dispatchEvent(n),Xn("profileUpdated",{userId:o,profileData:{...t,avatar:e}})}}if(!t||t===r.id){const{data:t,error:a}=await Vn.auth.updateUser({data:{avatar:e}});if(a)throw new Error(Qn(a.message)||"Ошибка при обновлении аватара")}const{error:l}=await Vn.from("profiles").update({avatar:e}).eq("id",o);return Zn.updateProfileCache(o,{avatar:e}),Xn("profile-updated",{userId:o,field:"avatar",value:e}),{success:!0,avatar:e}}catch(r){throw r.message&&(r.message=Qn(r.message)),r}},async updateActivePerk(e,t=null,a=null){try{const{data:{user:n}}=await Vn.auth.getUser(),s=a||t||(null==n?void 0:n.id);if(!s)throw new Error("ID пользователя не указан");const{error:r}=await Vn.from("profiles").update({active_perk:e}).eq("id",s);if(r)throw r;if(!a&&!t||(null==n?void 0:n.id)===s){const t=JSON.parse(localStorage.getItem("user"))||{};t.activePerk=e,localStorage.setItem("user",JSON.stringify(t)),ds(t)}return Zn.updateProfileCache(s,{activePerk:e}),{success:!0}}catch(n){throw n}},async updateDisplayName(e,t,a=null){try{const{data:n,error:s}=await Vn.auth.getSession();if(s||!n.session)throw new Error("Пользователь не авторизован");const r=n.session.user.id,i=n.session.user.email,{error:o}=await Vn.auth.signInWithPassword({email:i,password:t});if(o)throw new Error("Неверный пароль");if(!(await ss(e,r)))throw new Error("Пользователь с таким именем уже существует");(e=>{try{document.querySelectorAll(".username, [data-user-displayname]").forEach((t=>{(t.classList.contains("username")||t.hasAttribute("data-user-displayname"))&&(t.textContent=e)}))}catch(t){}})(e);const{error:l}=await Vn.from("profiles").update({display_name:e}).eq("id",r);if(l)throw new Error("Ошибка при обновлении имени пользователя: ".concat(l.message));const{data:c,error:d}=await Vn.auth.updateUser({data:{display_name:e}});if(d)throw new Error("Ошибка при обновлении имени: ".concat(d.message));const{data:m,error:u}=await Vn.rpc("sync_user_display_name",{admin_id:r,target_user_id:r,new_display_name:e}),p=localStorage.getItem("user");if(p){const t=JSON.parse(p);t.displayName=e,localStorage.setItem("user",JSON.stringify(t)),Zn.updateProfileCache(r,{displayName:e}),Xn("profileUpdated",{userId:r,profileData:{...t,displayName:e}});const n={...t,displayName:e};setTimeout((()=>{if(ds(n),"undefined"!=typeof window){const t=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(n),url:window.location.href});window.dispatchEvent(t);const a=new CustomEvent("userDisplayNameChanged",{detail:{newDisplayName:e,userId:r}});window.dispatchEvent(a)}a&&"function"==typeof a&&a()}),200)}else a&&"function"==typeof a&&a();return!0}catch(n){throw n}},async refreshCurrentUser(){try{const{data:t,error:a}=await Vn.auth.getSession();if(a||!t.session)return localStorage.removeItem("user"),null;const{data:n,error:s}=await Vn.from("profiles").select("*").eq("id",t.session.user.id).single();if(s)return null;const{data:r,error:i}=await Vn.auth.getUser();if(i)return null;const o="igoraor79@gmail.com"===t.session.user.email;if(n.display_name!==r.user.user_metadata.display_name)try{const{error:e}=await Vn.rpc("admin_update_user_metadata",{user_id:t.session.user.id,metadata_key:"display_name",metadata_value:n.display_name})}catch(e){}const l={id:t.session.user.id,email:t.session.user.email,displayName:n.display_name||"Пользователь",role:o?"admin":n.role||"user",createdAt:t.session.user.created_at,avatar:n.avatar||null,perks:n.perks||["user"],activePerk:n.active_perk||"user"};if(localStorage.setItem("user",JSON.stringify(l)),Zn.updateProfileCache(l.id,{id:l.id,email:l.email,displayName:l.displayName,avatar:l.avatar,perks:l.perks,activePerk:l.activePerk}),"undefined"!=typeof window){const e=new CustomEvent("app:user:updated",{detail:l});window.dispatchEvent(e)}return l}catch(t){return null}}},...{async createSyncDisplayNameFunction(){try{const{error:e}=await Vn.rpc("create_sync_display_name_function",{sql_function:"\n          CREATE OR REPLACE FUNCTION sync_user_display_name(\n            admin_id UUID,            -- ID администратора, выполняющего операцию\n            target_user_id UUID,      -- ID целевого пользователя\n            new_display_name TEXT     -- Новое отображаемое имя\n          )\n          RETURNS JSONB\n          LANGUAGE plpgsql\n          SECURITY DEFINER\n          AS $$\n          DECLARE\n            admin_email TEXT;\n            admin_perks JSONB;\n            admin_active_perk TEXT;\n            is_admin BOOLEAN;\n            current_metadata JSONB;\n            updated_metadata JSONB;\n            old_display_name TEXT;\n          BEGIN\n            -- 1. Проверяем права администратора\n            SELECT email, perks, active_perk INTO admin_email, admin_perks, admin_active_perk\n            FROM profiles\n            WHERE id = admin_id;\n            \n            is_admin := (admin_email = 'igoraor79@gmail.com' OR \n                        admin_perks ? 'admin' OR \n                        admin_active_perk = 'admin');\n            \n            IF NOT is_admin THEN\n              RETURN jsonb_build_object(\n                'success', false,\n                'message', 'Недостаточно прав для изменения имени другого пользователя'\n              );\n            END IF;\n            \n            -- 2. Получаем текущее отображаемое имя\n            SELECT display_name INTO old_display_name \n            FROM profiles \n            WHERE id = target_user_id;\n            \n            -- 3. Обновляем имя в таблице profiles\n            UPDATE profiles \n            SET display_name = new_display_name,\n                updated_at = NOW()\n            WHERE id = target_user_id;\n            \n            -- 4. Получаем текущие метаданные из auth.users\n            SELECT raw_user_meta_data INTO current_metadata \n            FROM auth.users \n            WHERE id = target_user_id;\n            \n            -- 5. Обновляем метаданные пользователя в auth.users\n            updated_metadata := current_metadata || jsonb_build_object('display_name', new_display_name);\n            \n            UPDATE auth.users\n            SET raw_user_meta_data = updated_metadata\n            WHERE id = target_user_id;\n            \n            -- 6. Возвращаем результат операции\n            RETURN jsonb_build_object(\n              'success', true,\n              'message', 'Имя пользователя успешно обновлено в профиле и метаданных',\n              'old_display_name', old_display_name,\n              'new_display_name', new_display_name,\n              'updated_metadata', updated_metadata\n            );\n          EXCEPTION\n            WHEN OTHERS THEN\n              RETURN jsonb_build_object(\n                'success', false,\n                'message', 'Ошибка при обновлении имени: ' || SQLERRM\n              );\n          END;\n          $$ ;\n          \n          -- Предоставляем права на выполнение функции аутентифицированным пользователям\n          GRANT EXECUTE ON FUNCTION sync_user_display_name(UUID, UUID, TEXT) TO authenticated;\n        "});return!e}catch(e){return!1}},async adminUpdateDisplayName(e,t,a=null){var n,s,r;try{const{data:c,error:d}=await Vn.auth.getSession();if(d||!c.session)throw new Error("Администратор не авторизован");const m=c.session.user.id,u=c.session.user.email;if(!("igoraor79@gmail.com"===u||(null==(s=null==(n=c.session.user.user_metadata)?void 0:n.perks)?void 0:s.includes("admin"))||"admin"===(null==(r=c.session.user.user_metadata)?void 0:r.active_perk)))throw new Error("Недостаточно прав для изменения имени другого пользователя");if(!(await ss(t,e)))throw new Error("Пользователь с таким именем уже существует");const p=localStorage.getItem("user");if(p){if(JSON.parse(p).id===e)try{document.querySelectorAll(".username, [data-user-displayname]").forEach((e=>{(e.classList.contains("username")||e.hasAttribute("data-user-displayname"))&&(e.textContent=t)}))}catch(i){}}const{error:_}=await Vn.from("profiles").update({display_name:t,updated_at:(new Date).toISOString()}).eq("id",e);if(_)throw new Error("Ошибка при обновлении имени пользователя: ".concat(_.message));try{const{data:a,error:n}=await Vn.from("profiles").select("email").eq("id",e).single();if(n)throw new Error("Не удалось получить данные пользователя");if(!a||!a.email)throw new Error("Email пользователя не найден");const{data:s,error:r}=await Vn.auth.admin.updateUserById(e,{user_metadata:{display_name:t}});if(r){const{error:e}=await Vn.auth.updateUser({data:{display_name:t}})}}catch(o){}const{data:h,error:g}=await Vn.rpc("sync_user_display_name",{admin_id:m,target_user_id:e,new_display_name:t});if("igoraor79@gmail.com"===u)try{const{error:a}=await Vn.rpc("direct_update_user_metadata",{target_id:e,display_name_value:t})}catch(l){}Zn.updateProfileCache(e,{displayName:t}),Xn("profileUpdated",{userId:e,profileData:{displayName:t}});let f={id:e,displayName:t};try{const a=localStorage.getItem("user");if(a){const n=JSON.parse(a);if(n.id===e&&(n.displayName=t,localStorage.setItem("user",JSON.stringify(n)),f=n,"undefined"!=typeof window)){const a=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(n),url:window.location.href});window.dispatchEvent(a);const s=new CustomEvent("userDisplayNameChanged",{detail:{newDisplayName:t,userId:e}});window.dispatchEvent(s)}}}catch(i){}return ds(f),a&&"function"==typeof a&&await a(),!0}catch(i){throw i}},async fixProfileIssues(){try{const{data:e}=await Vn.auth.getSession();if(!e||!e.session||"igoraor79@gmail.com"!==e.session.user.email)throw new Error("Только администратор может выполнять эту операцию");const t=await fetch("/src/sql/profile_navigation_fix.sql");if(!t.ok)throw new Error("Не удалось загрузить скрипт для исправления профилей");const a=await t.text(),{data:n,error:s}=await Vn.rpc("execute_sql_admin",{sql_query:a});if(s)throw new Error("Ошибка при исправлении профилей: ".concat(s.message));return{success:!0,message:"Проблемы с профилями успешно исправлены",details:n}}catch(e){throw e}},async addUserPerk(e,t){var a,n,s;try{const{data:r,error:i}=await Vn.auth.getSession();if(i||!r.session)throw new Error("Пользователь не авторизован");const o=r.session.user.id;if(!("igoraor79@gmail.com"===r.session.user.email||(null==(n=null==(a=r.session.user.user_metadata)?void 0:a.perks)?void 0:n.includes("admin"))||"admin"===(null==(s=r.session.user.user_metadata)?void 0:s.active_perk)))throw new Error("Недостаточно прав для изменения привилегий пользователей");const{data:l,error:c}=await Vn.from("profiles").select("perks").eq("id",e).single();if(c)throw new Error("Не удалось получить информацию о пользователе: ".concat(c.message));const d=Array.isArray(l.perks)?l.perks:[];if(d.includes(t))return{success:!0,message:"Пользователь уже имеет данную привилегию"};const m=[...d,t],{error:u}=await Vn.from("profiles").update({perks:m}).eq("id",e);if(u)throw new Error(u.message||"Ошибка при добавлении привилегии");const{error:p}=await Vn.from("user_perks").insert({user_id:e,perk_name:t,granted_at:(new Date).toISOString(),granted_by:o,is_active:!0,metadata:{action:"add_perk",previous_perks:d}});return{success:!0,perks:m}}catch(r){throw r}},async getUserPerksHistory(e){var t,a,n;try{const{data:s,error:r}=await Vn.auth.getSession();if(r||!s.session)throw new Error("Пользователь не авторизован");const i=s.session.user.id,o="igoraor79@gmail.com"===s.session.user.email||(null==(a=null==(t=s.session.user.user_metadata)?void 0:t.perks)?void 0:a.includes("admin"))||"admin"===(null==(n=s.session.user.user_metadata)?void 0:n.active_perk);if(i!==e&&!o)throw new Error("Недостаточно прав для просмотра истории привилегий");const{data:l,error:c}=await Vn.from("user_perks").select("*").eq("user_id",e).order("granted_at",{ascending:!1});if(c)throw new Error("Не удалось получить историю привилегий: ".concat(c.message));return l||[]}catch(s){throw s}}},checkUserBan:rs,checkDisplayNameUnique:ss},os=e=>{const t=se.c(38),{banInfo:a,onClose:n}=e;if(!a)return null;const s=ls;let r,i,o;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={opacity:0,y:20,scale:.95},t[0]=r):r=t[0],t[1]===Symbol.for("react.memo_cache_sentinel")?(i={opacity:1,y:0,scale:1,transition:{duration:.3}},t[1]=i):i=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(o={hidden:r,visible:i,exit:{opacity:0,y:20,scale:.95,transition:{duration:.2}}},t[2]=o):o=t[2];const l=o;let c,d;t[3]===Symbol.for("react.memo_cache_sentinel")?(c={scale:0,rotate:-180},t[3]=c):c=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(d={hidden:c,visible:{scale:1,rotate:0,transition:{type:"spring",damping:10,stiffness:100,delay:.2}}},t[4]=d):d=t[4];const m=d;let u;t[5]!==a.end_at?(u=()=>{if(!a.end_at)return"ban-permanent";const e=(new Date(a.end_at)-new Date)/36e5;return e<=2?"ban-short":e<=24?"ban-medium":"ban-long"},t[5]=a.end_at,t[6]=u):u=t[6];const p=u;let _,h,g,f,x,b,y,v,w,j,k,N;t[7]===Symbol.for("react.memo_cache_sentinel")?(_=re.jsx(ie.div,{className:"ban-icon-wrapper",initial:"hidden",animate:"visible",variants:m,children:re.jsx(pe,{className:"ban-icon"})}),h=re.jsx("h2",{children:"Ваш аккаунт заблокирован"}),t[7]=_,t[8]=h):(_=t[7],h=t[8]),t[9]===Symbol.for("react.memo_cache_sentinel")?(g=re.jsx(_e,{}),t[9]=g):g=t[9],t[10]!==n?(f=re.jsxs("div",{className:"ban-modal-header",children:[_,h,re.jsx("button",{className:"ban-close-button",onClick:n,children:g})]}),t[10]=n,t[11]=f):f=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(x=re.jsx(he,{className:"ban-detail-icon"}),b=re.jsx("h3",{children:"Причина блокировки:"}),t[12]=x,t[13]=b):(x=t[12],b=t[13]),t[14]!==a.reason?(y=re.jsxs("div",{className:"ban-reason",children:[x,re.jsxs("div",{children:[b,re.jsx("p",{children:a.reason})]})]}),t[14]=a.reason,t[15]=y):y=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(v=re.jsx(ge,{className:"ban-detail-icon"}),w=re.jsx("h3",{children:"Заблокировал:"}),t[16]=v,t[17]=w):(v=t[16],w=t[17]),t[18]!==a.admin_name?(j=re.jsxs("div",{className:"ban-admin",children:[v,re.jsxs("div",{children:[w,re.jsx("p",{children:a.admin_name})]})]}),t[18]=a.admin_name,t[19]=j):j=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(k=re.jsx(fe,{className:"ban-detail-icon"}),N=re.jsx("h3",{children:"Срок блокировки:"}),t[20]=k,t[21]=N):(k=t[20],N=t[21]);const S=p(),C=s(a.end_at);let E,P,A,I,B,O;return t[22]!==S||t[23]!==C?(E=re.jsxs("div",{className:"ban-time",children:[k,re.jsxs("div",{children:[N,re.jsx("p",{className:S,children:C})]})]}),t[22]=S,t[23]=C,t[24]=E):E=t[24],t[25]!==y||t[26]!==j||t[27]!==E?(P=re.jsxs("div",{className:"ban-details",children:[y,j,E]}),t[25]=y,t[26]=j,t[27]=E,t[28]=P):P=t[28],t[29]===Symbol.for("react.memo_cache_sentinel")?(A=re.jsx("div",{className:"ban-message",children:re.jsx("p",{children:"Если вы считаете, что блокировка была наложена по ошибке, пожалуйста, свяжитесь с администрацией сайта для разрешения этой ситуации."})}),t[29]=A):A=t[29],t[30]!==n?(I=re.jsx("button",{className:"ban-ok-button",onClick:n,children:"Понятно"}),t[30]=n,t[31]=I):I=t[31],t[32]!==P||t[33]!==I?(B=re.jsxs("div",{className:"ban-modal-content",children:[P,A,I]}),t[32]=P,t[33]=I,t[34]=B):B=t[34],t[35]!==f||t[36]!==B?(O=re.jsx("div",{className:"ban-modal-overlay",children:re.jsxs(ie.div,{className:"ban-modal",initial:"hidden",animate:"visible",exit:"exit",variants:l,children:[f,B]})}),t[35]=f,t[36]=B,t[37]=O):O=t[37],O};function ls(e){if(!e)return"Бессрочно";const t=new Date(e),a=new Date;if(t<a)return"Истекло";const n=t-a,s=Math.floor(n/1e3),r=Math.floor(s/60),i=Math.floor(r/60),o=Math.floor(i/24);return o>0?"".concat(o," ").concat(1===o?"день":o<5?"дня":"дней"):i>0?"".concat(i," ").concat(1===i?"час":i<5?"часа":"часов"):r>0?"".concat(r," ").concat(1===r?"минута":r<5?"минуты":"минут"):"менее минуты"}const cs="app:user:updated",ds=e=>{let t=e;try{const a=localStorage.getItem("user");if(a){t={...JSON.parse(a),...e}}}catch(n){}const a=new CustomEvent(cs,{detail:t});window.dispatchEvent(a)},ms=le.createContext(null),us=le.createContext({displayName:"",setDisplayName:()=>{}});let ps=0,_s=null;const hs=({children:e})=>{const[t,a]=le.useState(null),[n,s]=le.useState(!0),[r,i]=le.useState(null),[o,l]=le.useState(!1),[c,d]=le.useState(""),m=le.useRef("");le.useEffect((()=>{(async()=>{try{s(!0);const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);a(t),l(!0),t.displayName&&(d(t.displayName),m.current=t.displayName);const n=await is.refreshCurrentUser();n&&(a(n),n.displayName!==m.current&&(d(n.displayName),m.current=n.displayName))}const t=await is.getCurrentUser();t?(a(t),l(!0),t.displayName!==m.current&&(d(t.displayName),m.current=t.displayName)):(a(null),l(!1),localStorage.removeItem("user"),d(""),m.current="")}catch(e){a(null),l(!1)}finally{s(!1)}})()}),[]),le.useEffect((()=>{t&&t.displayName&&t.displayName!==m.current&&(d(t.displayName),m.current=t.displayName)}),[t]);const u=async()=>{if(t)try{s(!0);_s||t.displayName;const e=Date.now(),n=await is.checkUserBan(t.id);if(n.is_banned)return i(n),await is.logout(),a(null),s(!1),d(""),m.current="",void(_s=null);const{data:r,error:o}=await Vn.from("profiles").select("*").eq("id",t.id).single();if(o)return;let l;r.perks&&0!==r.perks.length||(r.perks=["user"],r.active_perk="user"),r.perks.includes(r.active_perk)||(r.active_perk=r.perks[0]||"user");const c=r.display_name;_s&&e-ps<1e4?l=_s:(l=c,_s=null),l!==m.current&&(d(l),m.current=l);const u={...t,displayName:l,avatar:r.avatar||t.avatar,perks:r.perks,activePerk:r.active_perk};if(localStorage.setItem("user",JSON.stringify(u)),ds(u),a(u),"undefined"!=typeof window){const e=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(u),url:window.location.href});window.dispatchEvent(e)}}catch(e){}finally{s(!1)}};le.useEffect((()=>{if(!t)return;const e=Vn.channel("profile-changes-".concat(t.id)).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:"id=eq.".concat(t.id)},(e=>{u()})).subscribe();return()=>{e.unsubscribe()}}),[t]),le.useEffect((()=>{if(!t)return;const e=Yn("profileUpdated",(({userId:e,profileData:n})=>{if(t&&e===t.id){const e={...t,displayName:n.displayName||t.displayName,avatar:n.avatar||t.avatar,perks:n.perks||t.perks,activePerk:n.activePerk||t.activePerk};localStorage.setItem("user",JSON.stringify(e)),ds(e),a(e);const s=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(e),url:window.location.href});window.dispatchEvent(s)}}));return()=>e()}),[t]);const p=()=>{i(null)};return re.jsx(ms.Provider,{value:{user:t,login:async e=>{try{s(!0);const{data:t,error:n}=await Vn.auth.signInWithPassword({email:e.email,password:e.password});if(n)throw new Error(Qn(n.message));const r=await is.checkUserBan(t.user.id);if(r.is_banned)return await is.logout(),i(r),s(!1),null;const o=await is.login(e);return a(o.user),l(!0),o}catch(t){throw t.message&&(t.message=Qn(t.message)),t}finally{s(!1)}},register:async e=>{try{s(!0);const t=await is.register(e),{data:n}=await Vn.auth.getSession();if(t&&t.user){a(t.user),l(!0),localStorage.setItem("user",JSON.stringify(t.user)),ds(t.user),await u();const{data:e}=await Vn.auth.getSession(),{data:n,error:s}=await Vn.from("profiles").select("id, display_name, perks").eq("id",t.user.id).single()}return t}catch(t){throw t.message&&(t.message=Qn(t.message)),t}finally{s(!1)}},logout:async()=>{try{s(!0),await is.logout(),a(null),l(!1),window.location.href="/"}catch(e){}finally{s(!1)}},loginWithProvider:async e=>{try{s(!0);const{data:t,error:a}=await Vn.auth.signInWithOAuth({provider:e,options:{redirectTo:window.location.origin,queryParams:{access_type:"offline",prompt:"consent",hd:"domain.com"}}});if(a)throw a;return t}catch(t){throw t}finally{s(!1)}},loading:n,refreshUser:u,isAuthenticated:o,checkUserBan:is.checkUserBan,banInfo:r,closeBanModal:p,updateUserAvatar:async e=>{if(t)try{const n={...t,avatar:e};localStorage.setItem("user",JSON.stringify(n)),a(n);const s=new CustomEvent(cs,{detail:n});window.dispatchEvent(s);const r=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(n),url:window.location.href});return window.dispatchEvent(r),n}catch(n){return null}},updateUserDisplayName:e=>{if(!t)return!1;d(e),m.current=e,_s=e,ps=Date.now();const n={...t,displayName:e};return localStorage.setItem("user",JSON.stringify(n)),a(n),!0}},children:re.jsxs(us.Provider,{value:{displayName:c,setDisplayName:d},children:[e,r&&re.jsx(os,{banInfo:r,onClose:p})]})})},gs=()=>{const e=le.useContext(ms);if(null===e)throw new Error("useAuth должен использоваться внутри AuthProvider");return e},fs=()=>{const e=le.useContext(us);if(void 0===e)throw new Error("useUserDisplayName должен использоваться внутри AuthProvider");return e},xs="_submitButton_16czx_77",bs="_formContainer_16czx_112",ys="_errorMessage_16czx_133",vs="_formGroup_16czx_144",ws="_inputIcon_16czx_155",js="_inputWrapper_16czx_160",ks="_inputIconInside_16czx_164",Ns="_charCounter_16czx_204",Ss="_buttonIcon_16czx_231",Cs="_switchForm_16czx_260",Es="_switchButton_16czx_272",Ps={notification:"_notification_pnfun_1",iconContainer:"_iconContainer_pnfun_17",messageContainer:"_messageContainer_pnfun_25",closeButton:"_closeButton_pnfun_31",success:"_success_pnfun_54",error:"_error_pnfun_70",info:"_info_pnfun_86"},As=e=>{const t=se.c(18),{type:a,message:n,show:s,onClose:r,autoCloseDelay:i}=e,o=void 0===a?"info":a,l=void 0===s||s,c=void 0===i?3e3:i,d=le.useRef(null);let m,u,p;if(t[0]!==c||t[1]!==r||t[2]!==l?(m=()=>(l&&r&&(d.current&&clearTimeout(d.current),d.current=setTimeout((()=>{r()}),c)),()=>{d.current&&clearTimeout(d.current)}),u=[l,r,c],t[0]=c,t[1]=r,t[2]=l,t[3]=m,t[4]=u):(m=t[3],u=t[4]),le.useEffect(m,u),!n)return null;t[5]!==o?(p=()=>{switch(o){case"error":return re.jsx(be,{size:20});case"success":return re.jsx(xe,{size:20});default:return re.jsx(he,{size:20})}},t[5]=o,t[6]=p):p=t[6];const _=p;let h,g,f;t[7]===Symbol.for("react.memo_cache_sentinel")?(h={opacity:0,y:-20,scale:.95},t[7]=h):h=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(g={opacity:1,y:0,scale:1,transition:{type:"spring",damping:25,stiffness:300,duration:.4}},t[8]=g):g=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(f={hidden:h,visible:g,exit:{opacity:0,y:-10,scale:.95,transition:{duration:.3}}},t[9]=f):f=t[9];const x=f;let b,y;return t[10]!==_||t[11]!==n||t[12]!==r||t[13]!==l||t[14]!==o?(b=l&&re.jsxs(ie.div,{className:"".concat(Ps.notification," ").concat(Ps[o]),variants:x,initial:"hidden",animate:"visible",exit:"exit",children:[re.jsx("div",{className:Ps.iconContainer,children:_()}),re.jsx("div",{className:Ps.messageContainer,children:n}),r&&re.jsx("button",{className:Ps.closeButton,onClick:r,"aria-label":"Закрыть уведомление",children:"×"})]}),t[10]=_,t[11]=n,t[12]=r,t[13]=l,t[14]=o,t[15]=b):b=t[15],t[16]!==b?(y=re.jsx(oe,{children:b}),t[16]=b,t[17]=y):y=t[17],y},Is=e=>{const t=se.c(43),{onSuccess:a,onSwitchToRegister:n}=e,{login:s,loading:r}=gs(),[i,o]=le.useState(""),[l,c]=le.useState(""),[d,m]=le.useState("");let u;t[0]!==i||t[1]!==s||t[2]!==a||t[3]!==l?(u=async e=>{if(e.preventDefault(),i&&l)try{m(""),await s({email:i,password:l}),a&&a()}catch(t){m(t.message||"Ошибка входа. Проверьте ваши учетные данные.")}else m("Пожалуйста, заполните все поля")},t[0]=i,t[1]=s,t[2]=a,t[3]=l,t[4]=u):u=t[4];const p=u;let _;t[5]===Symbol.for("react.memo_cache_sentinel")?(_={focus:{scale:1.02,x:5},blur:{scale:1,x:0}},t[5]=_):_=t[5];const h=_;let g;t[6]===Symbol.for("react.memo_cache_sentinel")?(g={hover:{scale:1.03,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)"},tap:{scale:.98}},t[6]=g):g=t[6];const f=g;let x;t[7]===Symbol.for("react.memo_cache_sentinel")?(x=re.jsx(ie.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:"Вход в аккаунт"}),t[7]=x):x=t[7];const b=!!d;let y,v,w,j,k,N,S,C,E,P,A,I,B,O,q,D,U;return t[8]!==d||t[9]!==b?(y=re.jsx(As,{type:"error",message:d,show:b}),t[8]=d,t[9]=b,t[10]=y):y=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(v=re.jsxs("label",{htmlFor:"email",children:[re.jsx(ye,{className:ws})," Email:"]}),t[11]=v):v=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(w=re.jsx(ye,{className:ks}),t[12]=w):w=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(j=e=>o(e.target.value),t[13]=j):j=t[13],t[14]!==i||t[15]!==r?(k=re.jsxs("div",{className:vs,children:[v,re.jsx(ie.div,{whileFocus:"focus",whileTap:"focus",variants:h,children:re.jsxs("div",{className:js,children:[w,re.jsx("input",{type:"email",id:"email",value:i,onChange:j,disabled:r,placeholder:"Введите ваш email",required:!0})]})})]}),t[14]=i,t[15]=r,t[16]=k):k=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(N=re.jsxs("label",{htmlFor:"password",children:[re.jsx(ve,{className:ws})," Пароль:"]}),t[17]=N):N=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(S=re.jsx(ve,{className:ks}),t[18]=S):S=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(C=e=>c(e.target.value),t[19]=C):C=t[19],t[20]!==r||t[21]!==l?(E=re.jsxs("div",{className:vs,children:[N,re.jsx(ie.div,{whileFocus:"focus",whileTap:"focus",variants:h,children:re.jsxs("div",{className:js,children:[S,re.jsx("input",{type:"password",id:"password",value:l,onChange:C,disabled:r,placeholder:"Введите ваш пароль",required:!0})]})})]}),t[20]=r,t[21]=l,t[22]=E):E=t[22],t[23]!==r?(P=r?"Вход...":re.jsxs(re.Fragment,{children:[re.jsx(we,{className:Ss}),re.jsx("span",{children:"Войти"})]}),t[23]=r,t[24]=P):P=t[24],t[25]!==r||t[26]!==P?(A=re.jsx(ie.button,{type:"submit",className:xs,disabled:r,variants:f,whileHover:"hover",whileTap:"tap",children:P}),t[25]=r,t[26]=P,t[27]=A):A=t[27],t[28]!==p||t[29]!==k||t[30]!==E||t[31]!==A?(I=re.jsxs("form",{onSubmit:p,children:[k,E,A]}),t[28]=p,t[29]=k,t[30]=E,t[31]=A,t[32]=I):I=t[32],t[33]===Symbol.for("react.memo_cache_sentinel")?(B=re.jsx("p",{children:"Еще нет аккаунта?"}),t[33]=B):B=t[33],t[34]===Symbol.for("react.memo_cache_sentinel")?(O={scale:1.05},q={scale:.98},t[34]=O,t[35]=q):(O=t[34],q=t[35]),t[36]!==r||t[37]!==n?(D=re.jsxs("div",{className:Cs,children:[B,re.jsx(ie.button,{className:Es,onClick:n,disabled:r,whileHover:O,whileTap:q,children:"Зарегистрироваться"})]}),t[36]=r,t[37]=n,t[38]=D):D=t[38],t[39]!==I||t[40]!==D||t[41]!==y?(U=re.jsxs("div",{className:bs,children:[x,y,I,D]}),t[39]=I,t[40]=D,t[41]=y,t[42]=U):U=t[42],U},Bs=e=>{const t=se.c(72),{onSuccess:a,onSwitchToLogin:n}=e,{register:s,loading:r}=gs(),[i,o]=le.useState(""),[l,c]=le.useState(""),[d,m]=le.useState(""),[u,p]=le.useState(""),[_,h]=le.useState("");let g;t[0]!==d||t[1]!==u||t[2]!==i||t[3]!==a||t[4]!==l||t[5]!==s?(g=async e=>{if(e.preventDefault(),i&&l&&d&&u)if(l===d)if(l.length<6)h("Пароль должен содержать не менее 6 символов");else if(l.length>15)h("Пароль не должен превышать 15 символов");else if(u.length>12)h("Имя пользователя не должно превышать 12 символов");else try{h("");await s({email:i,password:l,displayName:u});await new Promise(Os),a&&a()}catch(t){h(t.message||"Ошибка при регистрации. Попробуйте позже.")}else h("Пароли не совпадают");else h("Пожалуйста, заполните все поля")},t[0]=d,t[1]=u,t[2]=i,t[3]=a,t[4]=l,t[5]=s,t[6]=g):g=t[6];const f=g;let x;t[7]===Symbol.for("react.memo_cache_sentinel")?(x={focus:{scale:1.02,x:5},blur:{scale:1,x:0}},t[7]=x):x=t[7];const b=x;let y;t[8]===Symbol.for("react.memo_cache_sentinel")?(y={hover:{scale:1.03,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)"},tap:{scale:.98}},t[8]=y):y=t[8];const v=y;let w,j;t[9]===Symbol.for("react.memo_cache_sentinel")?(w={opacity:0},t[9]=w):w=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(j={hidden:w,visible:{opacity:1,transition:{staggerChildren:.1}}},t[10]=j):j=t[10];const k=j;let N,S;t[11]===Symbol.for("react.memo_cache_sentinel")?(N={opacity:0,y:20},t[11]=N):N=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(S={hidden:N,visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}},t[12]=S):S=t[12];const C=S;let E;t[13]===Symbol.for("react.memo_cache_sentinel")?(E=e=>{const t=e.target.value;t.length<=12&&p(t)},t[13]=E):E=t[13];const P=E;let A;t[14]===Symbol.for("react.memo_cache_sentinel")?(A=e=>{const t=e.target.value;t.length<=15&&c(t)},t[14]=A):A=t[14];const I=A;let B;t[15]===Symbol.for("react.memo_cache_sentinel")?(B=e=>{const t=e.target.value;t.length<=15&&m(t)},t[15]=B):B=t[15];const O=B;let q,D,U,T,L,M,z,F,R,G,H,V,W,J,$,Y,X,Z,Q,K,ee,te,ae,ne,oe,ce,de;return t[16]===Symbol.for("react.memo_cache_sentinel")?(q=re.jsx(ie.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:"Регистрация"}),t[16]=q):q=t[16],t[17]!==_?(D=_&&re.jsx(ie.div,{className:ys,initial:{opacity:0,y:-10,height:0},animate:{opacity:1,y:0,height:"auto"},transition:{duration:.3,ease:"easeOut"},children:_}),t[17]=_,t[18]=D):D=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(U=re.jsxs("label",{htmlFor:"displayName",children:[re.jsx(ge,{className:ws})," Имя пользователя:"]}),t[19]=U):U=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(T=re.jsx(ge,{className:ks}),t[20]=T):T=t[20],t[21]!==u||t[22]!==r?(L=re.jsx(ie.div,{whileFocus:"focus",whileTap:"focus",variants:b,children:re.jsxs("div",{className:js,children:[T,re.jsx("input",{type:"text",id:"displayName",value:u,onChange:P,disabled:r,placeholder:"Введите ваше имя (до 12 символов)",required:!0,maxLength:12})]})}),t[21]=u,t[22]=r,t[23]=L):L=t[23],t[24]!==u.length?(M=re.jsxs("small",{className:Ns,children:[u.length,"/12 символов"]}),t[24]=u.length,t[25]=M):M=t[25],t[26]!==L||t[27]!==M?(z=re.jsxs(ie.div,{className:vs,variants:C,children:[U,L,M]}),t[26]=L,t[27]=M,t[28]=z):z=t[28],t[29]===Symbol.for("react.memo_cache_sentinel")?(F=re.jsxs("label",{htmlFor:"email",children:[re.jsx(ye,{className:ws})," Email:"]}),t[29]=F):F=t[29],t[30]===Symbol.for("react.memo_cache_sentinel")?(R=re.jsx(ye,{className:ks}),t[30]=R):R=t[30],t[31]===Symbol.for("react.memo_cache_sentinel")?(G=e=>o(e.target.value),t[31]=G):G=t[31],t[32]!==i||t[33]!==r?(H=re.jsxs(ie.div,{className:vs,variants:C,children:[F,re.jsx(ie.div,{whileFocus:"focus",whileTap:"focus",variants:b,children:re.jsxs("div",{className:js,children:[R,re.jsx("input",{type:"email",id:"email",value:i,onChange:G,disabled:r,placeholder:"Введите ваш email",required:!0})]})})]}),t[32]=i,t[33]=r,t[34]=H):H=t[34],t[35]===Symbol.for("react.memo_cache_sentinel")?(V=re.jsxs("label",{htmlFor:"password",children:[re.jsx(ve,{className:ws})," Пароль:"]}),t[35]=V):V=t[35],t[36]===Symbol.for("react.memo_cache_sentinel")?(W=re.jsx(ve,{className:ks}),t[36]=W):W=t[36],t[37]!==r||t[38]!==l?(J=re.jsx(ie.div,{whileFocus:"focus",whileTap:"focus",variants:b,children:re.jsxs("div",{className:js,children:[W,re.jsx("input",{type:"password",id:"password",value:l,onChange:I,disabled:r,placeholder:"От 6 до 15 символов",required:!0,maxLength:15})]})}),t[37]=r,t[38]=l,t[39]=J):J=t[39],t[40]!==l.length?($=re.jsxs("small",{className:Ns,children:[l.length,"/15 символов"]}),t[40]=l.length,t[41]=$):$=t[41],t[42]!==J||t[43]!==$?(Y=re.jsxs(ie.div,{className:vs,variants:C,children:[V,J,$]}),t[42]=J,t[43]=$,t[44]=Y):Y=t[44],t[45]===Symbol.for("react.memo_cache_sentinel")?(X=re.jsxs("label",{htmlFor:"confirmPassword",children:[re.jsx(ve,{className:ws})," Подтвердите пароль:"]}),t[45]=X):X=t[45],t[46]===Symbol.for("react.memo_cache_sentinel")?(Z=re.jsx(ve,{className:ks}),t[46]=Z):Z=t[46],t[47]!==d||t[48]!==r?(Q=re.jsxs(ie.div,{className:vs,variants:C,children:[X,re.jsx(ie.div,{whileFocus:"focus",whileTap:"focus",variants:b,children:re.jsxs("div",{className:js,children:[Z,re.jsx("input",{type:"password",id:"confirmPassword",value:d,onChange:O,disabled:r,placeholder:"Повторите пароль",required:!0,maxLength:15})]})})]}),t[47]=d,t[48]=r,t[49]=Q):Q=t[49],t[50]!==r?(K=r?"Регистрация...":re.jsxs(re.Fragment,{children:[re.jsx(je,{className:Ss}),re.jsx("span",{children:"Зарегистрироваться"})]}),t[50]=r,t[51]=K):K=t[51],t[52]!==r||t[53]!==K?(ee=re.jsx(ie.button,{type:"submit",className:xs,disabled:r,variants:v,whileHover:"hover",whileTap:"tap",children:K}),t[52]=r,t[53]=K,t[54]=ee):ee=t[54],t[55]!==f||t[56]!==z||t[57]!==H||t[58]!==Y||t[59]!==Q||t[60]!==ee?(te=re.jsxs(ie.form,{onSubmit:f,variants:k,initial:"hidden",animate:"visible",children:[z,H,Y,Q,ee]}),t[55]=f,t[56]=z,t[57]=H,t[58]=Y,t[59]=Q,t[60]=ee,t[61]=te):te=t[61],t[62]===Symbol.for("react.memo_cache_sentinel")?(ae=re.jsx("p",{children:"Уже есть аккаунт?"}),t[62]=ae):ae=t[62],t[63]===Symbol.for("react.memo_cache_sentinel")?(ne={scale:1.05},oe={scale:.98},t[63]=ne,t[64]=oe):(ne=t[63],oe=t[64]),t[65]!==r||t[66]!==n?(ce=re.jsxs("div",{className:Cs,children:[ae,re.jsx(ie.button,{className:Es,onClick:n,disabled:r,whileHover:ne,whileTap:oe,children:"Войти"})]}),t[65]=r,t[66]=n,t[67]=ce):ce=t[67],t[68]!==D||t[69]!==te||t[70]!==ce?(de=re.jsxs("div",{className:bs,children:[q,D,te,ce]}),t[68]=D,t[69]=te,t[70]=ce,t[71]=de):de=t[71],de};function Os(e){return setTimeout(e,500)}const qs=e=>{const t=se.c(33),{isOpen:a,onClose:n,initialView:s}=e,r=void 0===s?"login":s,[i,o]=ce.useState(r);let l,c,d,m,u;t[0]!==a?(l=()=>(document.body.style.overflow=a?"hidden":"",Ds),c=[a],t[0]=a,t[1]=l,t[2]=c):(l=t[1],c=t[2]),le.useEffect(l,c),t[3]!==a||t[4]!==n?(d=()=>{const e=e=>{"Escape"===e.key&&a&&n()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},m=[a,n],t[3]=a,t[4]=n,t[5]=d,t[6]=m):(d=t[5],m=t[6]),le.useEffect(d,m),t[7]!==n?(u=e=>{e.target===e.currentTarget&&n()},t[7]=n,t[8]=u):u=t[8];const p=u;let _;t[9]!==n?(_=()=>{setTimeout((()=>n()),500)},t[9]=n,t[10]=_):_=t[10];const h=_;let g;t[11]!==n?(g=()=>{setTimeout((()=>{try{window.dispatchEvent(new CustomEvent("auth:refresh")),window.location.reload()}catch(e){n()}}),1500)},t[11]=n,t[12]=g):g=t[12];const f=g;if(!a)return null;let x;if(t[13]!==p||t[14]!==h||t[15]!==f||t[16]!==n||t[17]!==i){let e,a,s,r,l,c;t[19]===Symbol.for("react.memo_cache_sentinel")?(e=re.jsx(_e,{}),t[19]=e):e=t[19],t[20]!==n?(a=re.jsx("button",{className:Ln,onClick:n,children:e}),t[20]=n,t[21]=a):a=t[21],t[22]===Symbol.for("react.memo_cache_sentinel")?(s=re.jsx("div",{className:zn}),t[22]=s):s=t[22],t[23]!==h||t[24]!==f||t[25]!==i?(r=re.jsxs("div",{className:Tn,children:[s,re.jsx("div",{className:Mn,children:"login"===i?re.jsx(Is,{onSwitchToRegister:()=>o("register"),onSuccess:h}):re.jsx(Bs,{onSwitchToLogin:()=>o("login"),onSuccess:f})})]}),t[23]=h,t[24]=f,t[25]=i,t[26]=r):r=t[26],t[27]!==a||t[28]!==r?(l=re.jsxs("div",{className:Un,onClick:Us,children:[a,r]}),t[27]=a,t[28]=r,t[29]=l):l=t[29],t[30]!==p||t[31]!==l?(c=re.jsx("div",{className:Dn,onClick:p,children:l}),t[30]=p,t[31]=l,t[32]=c):c=t[32],x=de.createPortal(c,document.getElementById("modal-root")||document.body),t[13]=p,t[14]=h,t[15]=f,t[16]=n,t[17]=i,t[18]=x}else x=t[18];return x};function Ds(){document.body.style.overflow=""}function Us(e){return e.stopPropagation()}const Ts="_sponsorPerk_14u1w_27 _perkBase_14u1w_18",Ls="_earlyUserPerk_14u1w_33 _perkBase_14u1w_18",Ms="_adminPerk_14u1w_39 _perkBase_14u1w_18",zs="_userPerk_14u1w_45 _perkBase_14u1w_18",Fs=e=>{const t=se.c(19),{src:a,alt:n,className:s,onLoad:r,style:i}=e;let o,l=jt;t[0]!==i?(o=()=>(null==i?void 0:i.width)?2*parseInt(i.width,10):(null==i?void 0:i.height)?2*parseInt(i.height,10):180,t[0]=i,t[1]=o):o=t[1];const c=o;if(a)if(a.includes("pfp1")||a.includes("vivian"))l=kt;else if(a.includes("pfp2")||a.includes("akito"))l=Nt;else if(a.includes("pfp3")||a.includes("lonarius"))l=St;else if(a.includes("pfp4")||a.includes("faust"))l=Ct;else if(a.includes("igorpic")||a===Et)l=Et;else if(a.includes("lesyapic")||a===Pt)l=Pt;else if(a.startsWith("http")||a.startsWith("data:")){const e=n||"Аватар пользователя";let o,l;return t[2]!==i?(o={...i,objectFit:"cover",imageRendering:"auto"},t[2]=i,t[3]=o):o=t[3],t[4]!==s||t[5]!==r||t[6]!==a||t[7]!==e||t[8]!==o?(l=re.jsx("img",{src:a,alt:e,className:s,style:o,onLoad:r,loading:"eager",crossOrigin:"anonymous",onError:Rs}),t[4]=s,t[5]=r,t[6]=a,t[7]=e,t[8]=o,t[9]=l):l=t[9],l}const d=l,m=n||"Аватар пользователя";let u;t[10]!==i?(u={...i,objectFit:"cover",imageRendering:"auto"},t[10]=i,t[11]=u):u=t[11];const p=c();let _;return t[12]!==l||t[13]!==s||t[14]!==r||t[15]!==m||t[16]!==u||t[17]!==p?(_=re.jsx(It,{avatar:d,alt:m,className:s,style:u,size:p,onLoad:r}),t[12]=l,t[13]=s,t[14]=r,t[15]=m,t[16]=u,t[17]=p,t[18]=_):_=t[18],_};function Rs(e){e.target.src="https://res.cloudinary.com/do9t8preg/image/upload/q_100,dpr_auto,fl_progressive/v1746775570/".concat(jt),e.target.onerror=null}let Gs=null,Hs=0;const Vs=()=>{const{user:e,logout:t,isAuthenticated:a}=gs(),{displayName:n}=fs(),{theme:s}=le.useContext(sa),r=ke(),[i,o]=le.useState(!1),[l,c]=le.useState(!1),[d,m]=le.useState(!1),[u,p]=le.useState(""),[_,h]=le.useState(null),[,g]=le.useReducer((e=>e+1),0),[f,x]=le.useState(Date.now()),b=le.useCallback((e=>{if(!e)return"";switch(e){case"sponsor":return Ts;case"early_user":return Ls;case"admin":return Ms;default:return zs}}),[]);le.useEffect((()=>{var t;if(e){const a="igoraor79@gmail.com"===e.email||(null==(t=e.perks)?void 0:t.includes("admin"))||"admin"===e.activePerk;m(a),p(b(e.activePerk)),e.avatar&&e.avatar!==_&&h(e.avatar)}else p(""),h(null)}),[e,b,_]),le.useEffect((()=>{const e=()=>{try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);t.avatar&&t.avatar!==_&&(h(t.avatar),x(Date.now()))}}catch(e){}};e();const t=setInterval(e,1e3);return()=>clearInterval(t)}),[_]),le.useEffect((()=>{const t=t=>{var a;const n=t.detail;if(n){!n.avatar||(null==e?void 0:e.avatar)===n.avatar&&_===n.avatar||(h(n.avatar),x(Date.now()),Gs=n.avatar,Hs=Date.now());const t="igoraor79@gmail.com"===n.email||(null==(a=n.perks)?void 0:a.includes("admin"))||"admin"===n.activePerk;m(t),p(b(n.activePerk)),g()}},a=()=>{var e;g();try{const t=localStorage.getItem("user");if(t){const a=JSON.parse(t),n="igoraor79@gmail.com"===a.email||(null==(e=a.perks)?void 0:e.includes("admin"))||"admin"===a.activePerk;m(n),p(b(a.activePerk)),a.avatar&&_!==a.avatar&&(h(a.avatar),x(Date.now()))}}catch(t){}};return window.addEventListener(cs,t),window.addEventListener("auth:refresh",a),()=>{window.removeEventListener(cs,t),window.removeEventListener("auth:refresh",a)}}),[b,e,_]),le.useEffect((()=>{const e=e=>{if("user"===e.key)try{const t=e.newValue?JSON.parse(e.newValue):null;t&&t.avatar&&_!==t.avatar&&(h(t.avatar),x(Date.now()),Gs=t.avatar,Hs=Date.now()),g()}catch(t){}};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}),[_]),le.useEffect((()=>{const t=Yn("profileUpdated",(t=>{const{userId:a,profileData:n}=t.detail||{};e&&a===e.id&&n&&n.avatar&&_!==n.avatar&&(h(n.avatar),x(Date.now()),Gs=n.avatar,Hs=Date.now())}));return()=>{t()}}),[e,_]);const y={hidden:{opacity:0,x:-5,y:5},visible:{opacity:1,x:0,y:0,transition:{type:"spring",damping:20,stiffness:300}}},v={hover:{scale:1.03,y:-2},tap:{scale:.98}};return re.jsxs("div",{className:jn,children:[a?re.jsxs("div",{className:Nn,children:[re.jsxs(ie.button,{className:Sn,onClick:()=>{c(!l)},"aria-label":"Меню пользователя",variants:v,whileHover:"hover",whileTap:"tap",children:[re.jsx(Fs,{src:_||(null==e?void 0:e.avatar),alt:"Аватар пользователя",className:Cn},f),re.jsx("span",{className:"".concat(En," ").concat(u),children:n}),re.jsx(ie.span,{animate:{rotate:l?180:0},transition:{duration:.3},style:{marginLeft:"3px",display:"flex",alignItems:"center"},children:re.jsx(Ne,{size:14})})]}),re.jsx(oe,{children:l&&re.jsx(ie.div,{className:Pn,variants:{hidden:{opacity:0,y:-10,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",damping:25,stiffness:300,duration:.3,staggerChildren:.06}},exit:{opacity:0,y:-5,scale:.98,transition:{duration:.2}}},initial:"hidden",animate:"visible",exit:"exit",children:re.jsxs("ul",{children:[re.jsx(ie.li,{variants:y,children:re.jsxs(ie.button,{className:"".concat(An," ").concat(On),onClick:()=>{r("/profile"),c(!1)},whileHover:{x:5},children:[re.jsx(ge,{})," Профиль"]})}),re.jsx(ie.li,{variants:y,children:re.jsxs(ie.button,{className:"".concat(An," ").concat(qn),onClick:()=>{r("/feedback"),c(!1)},whileHover:{x:5},children:[re.jsx(Se,{})," Обратная связь"]})}),d&&re.jsx(ie.li,{variants:y,children:re.jsxs(ie.button,{className:"".concat(An," ").concat(Bn),onClick:()=>{r("/admin"),c(!1)},whileHover:{x:5},children:[re.jsx(Ce,{})," Администрирование"]})}),re.jsx(ie.li,{variants:y,children:re.jsxs(ie.button,{className:"".concat(An," ").concat(In),onClick:()=>{t(),c(!1)},whileHover:{x:5},children:[re.jsx(Ee,{})," Выйти"]})})]})})})]}):re.jsxs(ie.button,{className:kn,onClick:()=>{o(!0)},variants:v,whileHover:"hover",whileTap:"tap",children:[re.jsx(we,{size:16})," Войти"]}),re.jsx(qs,{isOpen:i,onClose:()=>{o(!1)}})]})},Ws={perkBase:"_perkBase_1bbdr_18",sponsorPerk:"_sponsorPerk_1bbdr_27 _perkBase_1bbdr_18",earlyUserPerk:"_earlyUserPerk_1bbdr_33 _perkBase_1bbdr_18",adminPerk:"_adminPerk_1bbdr_39 _perkBase_1bbdr_18",userPerk:"_userPerk_1bbdr_45 _perkBase_1bbdr_18",profileContainer:"_profileContainer_1bbdr_51",loading:"_loading_1bbdr_65",error:"_error_1bbdr_65",profileHeader:"_profileHeader_1bbdr_78",avatarSection:"_avatarSection_1bbdr_89",avatarContainer:"_avatarContainer_1bbdr_100",profileAvatar:"_profileAvatar_1bbdr_108",changeAvatarButton:"_changeAvatarButton_1bbdr_117",profileInfo:"_profileInfo_1bbdr_161",displayName:"_displayName_1bbdr_165",userMeta:"_userMeta_1bbdr_183",userRole:"_userRole_1bbdr_193",userJoined:"_userJoined_1bbdr_193",userEmail:"_userEmail_1bbdr_193",userPrivileges:"_userPrivileges_1bbdr_193",label:"_label_1bbdr_206",value:"_value_1bbdr_218",privilegeContainer:"_privilegeContainer_1bbdr_227",changePerkButton:"_changePerkButton_1bbdr_239",adminActions:"_adminActions_1bbdr_252",personalSettings:"_personalSettings_1bbdr_252",actionButtons:"_actionButtons_1bbdr_273",editButton:"_editButton_1bbdr_278",banButton:"_banButton_1bbdr_278",saveButton:"_saveButton_1bbdr_278",cancelButton:"_cancelButton_1bbdr_278",settingGroup:"_settingGroup_1bbdr_336",settingControl:"_settingControl_1bbdr_345",backdrop:"_backdrop_1bbdr_359",modal:"_modal_1bbdr_386",modalContent:"_modalContent_1bbdr_415",closeButton:"_closeButton_1bbdr_435",avatarsGrid:"_avatarsGrid_1bbdr_461",avatarCard:"_avatarCard_1bbdr_468",selectedAvatar:"_selectedAvatar_1bbdr_480",avatarImageContainer:"_avatarImageContainer_1bbdr_489",avatarImage:"_avatarImage_1bbdr_489",selectedIndicator:"_selectedIndicator_1bbdr_507",avatarName:"_avatarName_1bbdr_519",perksList:"_perksList_1bbdr_529",perkOption:"_perkOption_1bbdr_535",activePerkOption:"_activePerkOption_1bbdr_552",perkName:"_perkName_1bbdr_557",activePerkIndicator:"_activePerkIndicator_1bbdr_565",modalMotion:"_modalMotion_1bbdr_576",modalFooter:"_modalFooter_1bbdr_589",modalForm:"_modalForm_1bbdr_594",formGroup:"_formGroup_1bbdr_601",formControl:"_formControl_1bbdr_611",formActions:"_formActions_1bbdr_632",submitButton:"_submitButton_1bbdr_667",modalHeader:"_modalHeader_1bbdr_689",errorMessage:"_errorMessage_1bbdr_732",successMessage:"_successMessage_1bbdr_732",fadeIn:"_fadeIn_1bbdr_1",passwordStrength:"_passwordStrength_1bbdr_765",passwordStrengthInfo:"_passwordStrengthInfo_1bbdr_770",passwordStrengthText:"_passwordStrengthText_1bbdr_776",passwordStrengthPercentage:"_passwordStrengthPercentage_1bbdr_781",passwordStrengthBar:"_passwordStrengthBar_1bbdr_786",passwordStrengthFill:"_passwordStrengthFill_1bbdr_795",avatarWrapper:"_avatarWrapper_1bbdr_843",loadingOverlay:"_loadingOverlay_1bbdr_855",avatarHint:"_avatarHint_1bbdr_869",adminEditForm:"_adminEditForm_1bbdr_886",blockLabel:"_blockLabel_1bbdr_907",formInput:"_formInput_1bbdr_914",formSelect:"_formSelect_1bbdr_914",checkboxGroup:"_checkboxGroup_1bbdr_933",checkboxLabel:"_checkboxLabel_1bbdr_939",checkboxText:"_checkboxText_1bbdr_954",statusMessage:"_statusMessage_1bbdr_959",success:"_success_1bbdr_732",info:"_info_1bbdr_977",loadingIcon:"_loadingIcon_1bbdr_986",spin:"_spin_1bbdr_1",perksOptions:"_perksOptions_1bbdr_1133",basePerk:"_basePerk_1bbdr_1167",baseLabel:"_baseLabel_1bbdr_1176",baseNote:"_baseNote_1bbdr_1179",selectPerk:"_selectPerk_1bbdr_1185",banInfoBox:"_banInfoBox_1bbdr_1299",banDetails:"_banDetails_1bbdr_1326",bannedStatus:"_bannedStatus_1bbdr_1334",banDuration:"_banDuration_1bbdr_1346",unbanButton:"_unbanButton_1bbdr_1356",activePerk:"_activePerk_1bbdr_552",editPerkIcon:"_editPerkIcon_1bbdr_1393",profileDetail:"_profileDetail_1bbdr_1397",detailIcon:"_detailIcon_1bbdr_1407",buttonText:"_buttonText_1bbdr_1413",banModalHeader:"_banModalHeader_1bbdr_1441",modalDivider:"_modalDivider_1bbdr_1467",adminAvatar:"_adminAvatar_1bbdr_1494",adminAvatarBadge:"_adminAvatarBadge_1bbdr_1510"},Js=[{id:1,name:jt,displayName:"Гость"},{id:2,name:kt,displayName:"Вивиан"},{id:3,name:Nt,displayName:"Акито"},{id:4,name:St,displayName:"Лонариус"},{id:5,name:Ct,displayName:"Фауст"}],$s=[{id:101,name:Et,displayName:"Игорь",adminOnly:!0},{id:102,name:Pt,displayName:"Леся",adminOnly:!0}],Ys=e=>{if(!e)return"Навсегда";const t=new Date(e),a=new Date;if(t<a)return"Истек (требуется ручная разблокировка)";const n=t-a,s=Math.floor(n/1e3),r=Math.floor(s/60),i=Math.floor(r/60),o=Math.floor(i/24);return o>0?"".concat(o," ").concat(1===o?"день":o<5?"дня":"дней"):i>0?"".concat(i," ").concat(1===i?"час":i<5?"часа":"часов"):r>0?"".concat(r," ").concat(1===r?"минута":r<5?"минуты":"минут"):"Менее минуты"},Xs=e=>{var t,a,n,s,r;const i=se.c(48),{profileUser:o,isOwnProfile:l,isAdmin:c,avatarManager:d,perkManager:m,getActivePerkClass:u,getActivePerkName:p}=e,_=o.avatar||jt,h=o.displayName||"Пользователь";let g,f,x;i[0]!==_||i[1]!==h?(g=re.jsx("div",{className:Ws.avatarContainer,children:re.jsx(Fs,{src:_,alt:h,className:Ws.profileAvatar})}),i[0]=_,i[1]=h,i[2]=g):g=i[2],i[3]!==d||i[4]!==c||i[5]!==l?(f=(l||c)&&re.jsxs("button",{className:Ws.changeAvatarButton,onClick:d.handleAvatarChange,"aria-label":"Изменить аватар",children:[re.jsx(Pe,{size:18})," ",re.jsx("span",{className:Ws.buttonText,children:"Изменить аватар"})]}),i[3]=d,i[4]=c,i[5]=l,i[6]=f):f=i[6],i[7]!==g||i[8]!==f?(x=re.jsxs("div",{className:Ws.avatarSection,children:[g,f]}),i[7]=g,i[8]=f,i[9]=x):x=i[9];const b="".concat(Ws.displayName," ").concat(u()),y=o.displayName||"Пользователь";let v,w;i[10]!==c||i[11]!==o.id?(v=c&&re.jsxs("span",{className:Ws.adminLabel,children:[" (ID: ",o.id.substring(0,8),"...)"]}),i[10]=c,i[11]=o.id,i[12]=v):v=i[12],i[13]!==b||i[14]!==y||i[15]!==v?(w=re.jsxs("h1",{className:b,children:[y,v]}),i[13]=b,i[14]=y,i[15]=v,i[16]=w):w=i[16];const j="".concat(Ws.activePerk," ").concat(u()),k=(l||c)&&(null==(t=o.perks)?void 0:t.length)>1?m.handleOpenPerkModal:void 0,N=(l||c)&&(null==(a=o.perks)?void 0:a.length)>1?"pointer":"default";let S,C,E,P,A,I,B,O,q,D,U;return i[17]!==N?(S={cursor:N},i[17]=N,i[18]=S):S=i[18],i[19]!==p?(C=p(),i[19]=p,i[20]=C):C=i[20],i[21]!==c||i[22]!==l||i[23]!==(null==(n=o.perks)?void 0:n.length)?(E=(l||c)&&(null==(s=o.perks)?void 0:s.length)>1&&re.jsx(Pe,{size:16,className:Ws.editPerkIcon}),i[21]=c,i[22]=l,i[23]=null==(r=o.perks)?void 0:r.length,i[24]=E):E=i[24],i[25]!==j||i[26]!==k||i[27]!==S||i[28]!==C||i[29]!==E?(P=re.jsx("div",{className:Ws.perksContainer,children:re.jsxs("div",{className:j,onClick:k,style:S,children:[C,E]})}),i[25]=j,i[26]=k,i[27]=S,i[28]=C,i[29]=E,i[30]=P):P=i[30],i[31]!==o.email?(A=o.email&&re.jsxs("div",{className:Ws.profileDetail,children:[re.jsx(ye,{className:Ws.detailIcon,size:20}),re.jsx("span",{children:o.email})]}),i[31]=o.email,i[32]=A):A=i[32],i[33]===Symbol.for("react.memo_cache_sentinel")?(I=re.jsx(Ae,{className:Ws.detailIcon,size:20}),i[33]=I):I=i[33],i[34]!==o.createdAt?(B=(e=>{try{return new Date(e).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}catch(t){return"Неизвестно"}})(o.createdAt),i[34]=o.createdAt,i[35]=B):B=i[35],i[36]!==B?(O=re.jsxs("div",{className:Ws.profileDetail,children:[I,re.jsxs("span",{children:["Регистрация: ",B]})]}),i[36]=B,i[37]=O):O=i[37],i[38]!==A||i[39]!==O?(q=re.jsxs("div",{className:Ws.profileDetails,children:[A,O]}),i[38]=A,i[39]=O,i[40]=q):q=i[40],i[41]!==P||i[42]!==q||i[43]!==w?(D=re.jsxs("div",{className:Ws.profileInfo,children:[w,P,q]}),i[41]=P,i[42]=q,i[43]=w,i[44]=D):D=i[44],i[45]!==D||i[46]!==x?(U=re.jsxs("div",{className:Ws.profileHeader,children:[x,D]}),i[45]=D,i[46]=x,i[47]=U):U=i[47],U},Zs=({user:e,onSave:t,onCancel:a})=>{const[n,s]=le.useState({displayName:e.displayName||"",perks:e.perks||["user"],activePerk:e.activePerk||"user"}),[r,i]=le.useState(!1),[o,l]=le.useState({type:"",message:""}),c=e=>{if("user"===e)return;const t=n.perks.includes(e)?n.perks.filter((t=>t!==e)):[...n.perks,e];t.includes("user")||t.push("user"),s({...n,perks:t})};return re.jsxs("form",{className:Ws.adminEditForm,onSubmit:async a=>{a.preventDefault();try{if(i(!0),l({type:"",message:""}),!n.perks.includes(n.activePerk))return l({type:"error",message:"Активная привилегия должна быть в списке привилегий пользователя"}),void i(!1);const a={display_name:n.displayName,perks:n.perks},{error:s}=await Vn.from("profiles").update(a).eq("id",e.id);if(s)throw new Error("Ошибка при обновлении профиля: ".concat(s.message));await is.updateActivePerk(n.activePerk,null,e.id);const{data:r,error:o}=await Vn.from("profiles").select("*").eq("id",e.id).single();if(o)throw new Error("Ошибка при получении обновленного профиля: ".concat(o.message));const c={...e,displayName:r.display_name,perks:r.perks,activePerk:r.active_perk};l({type:"success",message:"Профиль пользователя успешно обновлен"}),setTimeout((()=>{t(c)}),1500)}catch(s){l({type:"error",message:s.message})}finally{i(!1)}},children:[o.message&&re.jsxs("div",{className:"".concat(Ws.statusMessage," ").concat(Ws[o.type]),children:["error"===o.type&&re.jsx(be,{}),"success"===o.type&&re.jsx(xe,{}),"info"===o.type&&re.jsx(he,{}),o.message]}),re.jsxs("div",{className:Ws.formGroup,children:[re.jsxs("label",{htmlFor:"displayName",children:[re.jsx(ge,{})," Отображаемое имя:"]}),re.jsx("input",{type:"text",id:"displayName",name:"displayName",value:n.displayName,onChange:e=>{const{name:t,value:a}=e.target;s({...n,[t]:a})},placeholder:"Имя пользователя"})]}),re.jsxs("div",{className:Ws.formGroup,children:[re.jsxs("label",{children:[re.jsx(Ie,{})," Привилегии:"]}),re.jsxs("div",{className:Ws.perksOptions,children:[re.jsxs("div",{className:"".concat(Ws.perkOption," ").concat(Ws.basePerk),children:[re.jsx("input",{type:"checkbox",id:"perk-user",checked:!0,disabled:!0,readOnly:!0}),re.jsxs("label",{htmlFor:"perk-user",className:Ws.baseLabel,children:["Пользователь ",re.jsx("span",{className:Ws.baseNote,children:"(базовая привилегия)"})]})]}),re.jsxs("div",{className:Ws.perkOption,children:[re.jsx("input",{type:"checkbox",id:"perk-early_user",checked:n.perks.includes("early_user"),onChange:()=>c("early_user")}),re.jsx("label",{htmlFor:"perk-early_user",children:"Ранний пользователь"})]}),re.jsxs("div",{className:Ws.perkOption,children:[re.jsx("input",{type:"checkbox",id:"perk-sponsor",checked:n.perks.includes("sponsor"),onChange:()=>c("sponsor")}),re.jsx("label",{htmlFor:"perk-sponsor",children:"Спонсор"})]}),re.jsxs("div",{className:Ws.perkOption,children:[re.jsx("input",{type:"checkbox",id:"perk-admin",checked:n.perks.includes("admin"),onChange:()=>c("admin")}),re.jsx("label",{htmlFor:"perk-admin",children:"Администратор"})]})]})]}),re.jsxs("div",{className:Ws.formGroup,children:[re.jsxs("label",{htmlFor:"activePerk",children:[re.jsx(Ie,{})," Активная привилегия:"]}),re.jsx("select",{id:"activePerk",name:"activePerk",value:n.activePerk,onChange:e=>{const t=e.target.value;n.perks.includes(t)?(s({...n,activePerk:t}),l({type:"",message:""})):l({type:"error",message:"Нельзя установить активную привилегию, которой нет у пользователя"})},className:Ws.selectPerk,children:n.perks.map((e=>re.jsxs("option",{value:e,children:["user"===e&&"Пользователь","early_user"===e&&"Ранний пользователь","sponsor"===e&&"Спонсор","admin"===e&&"Администратор"]},e)))})]}),re.jsxs("div",{className:Ws.formActions,children:[re.jsxs("button",{type:"button",className:Ws.cancelButton,onClick:a,children:[re.jsx(_e,{})," Отмена"]}),re.jsxs("button",{type:"submit",className:Ws.saveButton,disabled:r,children:[r?re.jsx(Be,{}):re.jsx(Oe,{})," Сохранить"]})]})]})},Qs=e=>{const t=se.c(21),{profileUser:a,adminEditStatus:n,isAdminEditing:s,banManager:r,setIsAdminEditing:i,setShowBanDialog:o,handleAdminProfileSave:l}=e;let c,d,m,u,p;return t[0]===Symbol.for("react.memo_cache_sentinel")?(c=re.jsxs("h2",{children:[re.jsx(Pe,{})," Администрирование"]}),t[0]=c):c=t[0],t[1]!==n.message||t[2]!==n.type?(d=n.message&&re.jsxs("div",{className:"".concat(Ws.statusMessage," ").concat(Ws[n.type]),children:["error"===n.type?re.jsx(be,{}):"success"===n.type?re.jsx(xe,{}):re.jsx(he,{}),n.message]}),t[1]=n.message,t[2]=n.type,t[3]=d):d=t[3],t[4]!==r||t[5]!==a.ban_admin_name||t[6]!==a.ban_end_at||t[7]!==a.ban_reason||t[8]!==a.is_banned?(m=a.is_banned&&re.jsxs("div",{className:Ws.banInfoBox,children:[re.jsx("h3",{children:"Информация о блокировке"}),re.jsxs("div",{className:Ws.banDetails,children:[re.jsxs("p",{children:[re.jsx("strong",{children:"Статус:"})," ",re.jsx("span",{className:Ws.bannedStatus,children:"Заблокирован"})]}),a.ban_reason&&re.jsxs("p",{children:[re.jsx("strong",{children:"Причина:"})," ",a.ban_reason]}),a.ban_admin_name&&re.jsxs("p",{children:[re.jsx("strong",{children:"Заблокировал:"})," ",a.ban_admin_name]}),a.ban_end_at&&re.jsxs("p",{children:[re.jsx("strong",{children:"Окончание через:"}),re.jsxs("span",{className:Ws.banDuration,children:[re.jsx(fe,{})," ",Ys(a.ban_end_at)]})]})]}),re.jsxs("button",{className:Ws.unbanButton,onClick:r.handleUnbanUser,disabled:r.banLoading,children:[r.banLoading?re.jsx(Be,{}):re.jsx(qe,{})," Снять блокировку"]})]}),t[4]=r,t[5]=a.ban_admin_name,t[6]=a.ban_end_at,t[7]=a.ban_reason,t[8]=a.is_banned,t[9]=m):m=t[9],t[10]!==r||t[11]!==l||t[12]!==s||t[13]!==a||t[14]!==i||t[15]!==o?(u=s?re.jsx(Zs,{user:a,onSave:l,onCancel:()=>i(!1)}):re.jsxs("div",{className:Ws.actionButtons,children:[re.jsxs("button",{className:Ws.editButton,onClick:()=>i(!0),children:[re.jsx(Pe,{})," Редактировать профиль"]}),!a.is_banned&&"igoraor79@gmail.com"!==a.email&&re.jsxs("button",{className:Ws.banButton,onClick:()=>o(!0),disabled:r.banLoading,children:[re.jsx(De,{})," Заблокировать"]})]}),t[10]=r,t[11]=l,t[12]=s,t[13]=a,t[14]=i,t[15]=o,t[16]=u):u=t[16],t[17]!==d||t[18]!==m||t[19]!==u?(p=re.jsxs("div",{className:Ws.adminActions,children:[c,d,m,u]}),t[17]=d,t[18]=m,t[19]=u,t[20]=p):p=t[20],p},Ks=e=>{const t=se.c(19),{profileUser:a,successMessage:n,accountManager:s}=e;let r,i,o;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=re.jsx("h2",{children:"Личные настройки"}),t[0]=r):r=t[0],t[1]!==n?(i=n&&re.jsxs("div",{className:Ws.successMessage,children:[re.jsx(qe,{size:16}),re.jsx("span",{children:n})]}),t[1]=n,t[2]=i):i=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(o=re.jsx("label",{htmlFor:"displayName",children:"Имя пользователя:"}),t[3]=o):o=t[3];const l=a.displayName||"Пользователь";let c,d,m,u,p,_,h;return t[4]!==l?(c=re.jsx("input",{type:"text",id:"displayName",value:l,readOnly:!0}),t[4]=l,t[5]=c):c=t[5],t[6]!==s?(d=re.jsx("button",{className:Ws.editButton,onClick:()=>s.setIsNameModalOpen(!0),children:"Изменить"}),t[6]=s,t[7]=d):d=t[7],t[8]!==c||t[9]!==d?(m=re.jsxs("div",{className:Ws.settingGroup,children:[o,re.jsxs("div",{className:Ws.settingControl,children:[c,d]})]}),t[8]=c,t[9]=d,t[10]=m):m=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(u=re.jsx("label",{htmlFor:"password",children:"Пароль:"}),t[11]=u):u=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(p=re.jsx("input",{type:"password",id:"password",value:"••••••",readOnly:!0}),t[12]=p):p=t[12],t[13]!==s?(_=re.jsxs("div",{className:Ws.settingGroup,children:[u,re.jsxs("div",{className:Ws.settingControl,children:[p,re.jsx("button",{className:Ws.editButton,onClick:()=>s.setIsPasswordModalOpen(!0),children:"Изменить"})]})]}),t[13]=s,t[14]=_):_=t[14],t[15]!==_||t[16]!==i||t[17]!==m?(h=re.jsxs("div",{className:Ws.personalSettings,children:[r,i,m,_]}),t[15]=_,t[16]=i,t[17]=m,t[18]=h):h=t[18],h},er=e=>{const t=se.c(53),{avatars:a,adminAvatars:n,isAdmin:s,onSelectAvatar:r,onClose:i}=e;let o;t[0]!==n?(o=void 0===n?[]:n,t[0]=n,t[1]=o):o=t[1];const l=o,[c,d]=le.useState(null),[m,u]=le.useState(!1),[p,_]=le.useState(!1);let h;t[2]!==l||t[3]!==a||t[4]!==s?(h=s?[...a,...l]:a,t[2]=l,t[3]=a,t[4]=s,t[5]=h):h=t[5];const g=h;let f,x,b,y;t[6]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[6]=f):f=t[6],le.useEffect(ar,f),t[7]!==m||t[8]!==i||t[9]!==p?(x=()=>{const e=e=>{"Escape"!==e.key||m||p||i()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},b=[i,m,p],t[7]=m,t[8]=i,t[9]=p,t[10]=x,t[11]=b):(x=t[10],b=t[11]),le.useEffect(x,b),t[12]!==m||t[13]!==i||t[14]!==p?(y=e=>{e.target!==e.currentTarget||m||p||i()},t[12]=m,t[13]=i,t[14]=p,t[15]=y):y=t[15];const v=y;let w;t[16]!==m||t[17]!==r||t[18]!==p?(w=async e=>{m||p||(d(e),u(!0),setTimeout((()=>{_(!0),setTimeout((()=>{r(e.id)}),1e3)}),500))},t[16]=m,t[17]=r,t[18]=p,t[19]=w):w=t[19];const j=w;let k;if(t[20]!==g||t[21]!==v||t[22]!==j||t[23]!==m||t[24]!==i||t[25]!==(null==c?void 0:c.id)||t[26]!==p){const e=m||p;let a,n,s,r,o,l,d,u,_;if(t[28]===Symbol.for("react.memo_cache_sentinel")?(a=re.jsx(_e,{size:20}),t[28]=a):a=t[28],t[29]!==i||t[30]!==e?(n=re.jsx("button",{className:Ws.closeButton,onClick:i,disabled:e,children:a}),t[29]=i,t[30]=e,t[31]=n):n=t[31],t[32]===Symbol.for("react.memo_cache_sentinel")?(s=re.jsx("h3",{children:"Выберите аватар"}),t[32]=s):s=t[32],t[33]!==p?(r=p&&re.jsxs(ie.div,{className:Ws.successMessage,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[re.jsx(xe,{size:40}),re.jsx("span",{children:"Аватар успешно изменен!"})]}),t[33]=p,t[34]=r):r=t[34],t[35]!==g||t[36]!==j||t[37]!==(null==c?void 0:c.id)){let e;t[39]!==j||t[40]!==(null==c?void 0:c.id)?(e=e=>re.jsxs(ie.div,{className:"".concat(Ws.avatarCard," ").concat((null==c?void 0:c.id)===e.id?Ws.selectedAvatar:""," ").concat(e.adminOnly?Ws.adminAvatar:""),whileHover:{scale:1.05},whileTap:{scale:.98},onClick:()=>j(e),children:[re.jsxs("div",{className:Ws.avatarImageContainer,children:[re.jsx(Fs,{src:e.name,alt:e.displayName,className:Ws.avatarImage}),(null==c?void 0:c.id)===e.id&&re.jsx(ie.div,{className:Ws.selectedIndicator,initial:{scale:0},animate:{scale:1},transition:{duration:.3,delay:.1},children:re.jsx(qe,{size:16,color:"#fff"})}),e.adminOnly&&re.jsx("span",{className:Ws.adminAvatarBadge,children:"Admin"})]}),re.jsx("span",{className:Ws.avatarName,children:e.displayName})]},e.id),t[39]=j,t[40]=null==c?void 0:c.id,t[41]=e):e=t[41],o=g.map(e),t[35]=g,t[36]=j,t[37]=null==c?void 0:c.id,t[38]=o}else o=t[38];t[42]!==o?(l=re.jsx("div",{className:Ws.avatarsGrid,children:o}),t[42]=o,t[43]=l):l=t[43],t[44]!==r||t[45]!==l?(d=re.jsxs("div",{className:Ws.modalContent,children:[s,r,l]}),t[44]=r,t[45]=l,t[46]=d):d=t[46],t[47]!==n||t[48]!==d?(u=re.jsxs("div",{className:Ws.modal,onClick:nr,children:[n,d]}),t[47]=n,t[48]=d,t[49]=u):u=t[49],t[50]!==v||t[51]!==u?(_=re.jsx("div",{className:Ws.backdrop,onClick:v,children:u}),t[50]=v,t[51]=u,t[52]=_):_=t[52],k=de.createPortal(_,document.getElementById("modal-root")||document.body),t[20]=g,t[21]=v,t[22]=j,t[23]=m,t[24]=i,t[25]=null==c?void 0:c.id,t[26]=p,t[27]=k}else k=t[27];return k};function tr(){document.body.style.overflow=""}function ar(){return document.body.style.overflow="hidden",tr}function nr(e){return e.stopPropagation()}const sr=e=>{const t=se.c(36),{perks:a,activePerk:n,onSelectPerk:s,onClose:r,userId:i}=e;let o,l,c,d;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],t[0]=o):o=t[0],le.useEffect(ir,o),t[1]!==r?(l=()=>{const e=e=>{"Escape"===e.key&&r()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},c=[r],t[1]=r,t[2]=l,t[3]=c):(l=t[2],c=t[3]),le.useEffect(l,c),t[4]!==r?(d=e=>{e.target===e.currentTarget&&r()},t[4]=r,t[5]=d):d=t[5];const m=d,u=i?"Выбор привилегии для пользователя (".concat(i.substring(0,8),"...)"):"Выберите привилегию";let p;if(t[6]!==n||t[7]!==m||t[8]!==u||t[9]!==r||t[10]!==s||t[11]!==a){let e,i,o,l,c,d,_,h;if(t[13]===Symbol.for("react.memo_cache_sentinel")?(e=re.jsx(_e,{size:20}),t[13]=e):e=t[13],t[14]!==r?(i=re.jsx("button",{className:Ws.closeButton,onClick:r,children:e}),t[14]=r,t[15]=i):i=t[15],t[16]!==u?(o=re.jsx("h3",{children:u}),t[16]=u,t[17]=o):o=t[17],t[18]!==n||t[19]!==s||t[20]!==a){let e;t[22]!==n||t[23]!==s?(e=e=>{const t="sponsor"===e?Ts:"early_user"===e?Ls:"admin"===e?Ms:zs;return re.jsxs(ie.div,{className:"".concat(Ws.perkOption," ").concat(e===n?Ws.activePerkOption:""),whileHover:{scale:1.03},whileTap:{scale:.98},onClick:()=>s(e),children:[re.jsxs("div",{className:"".concat(Ws.perkName," ").concat(t),children:["sponsor"===e&&"Спонсор","early_user"===e&&"Ранний пользователь","admin"===e&&"Администратор","user"===e&&"Пользователь"]}),e===n&&re.jsx("div",{className:Ws.activePerkIndicator,children:re.jsx(qe,{size:16})})]},e)},t[22]=n,t[23]=s,t[24]=e):e=t[24],l=a.map(e),t[18]=n,t[19]=s,t[20]=a,t[21]=l}else l=t[21];t[25]!==l?(c=re.jsx("div",{className:Ws.perksList,children:l}),t[25]=l,t[26]=c):c=t[26],t[27]!==c||t[28]!==o?(d=re.jsxs("div",{className:Ws.modalContent,children:[o,c]}),t[27]=c,t[28]=o,t[29]=d):d=t[29],t[30]!==d||t[31]!==i?(_=re.jsxs("div",{className:Ws.modal,onClick:or,children:[i,d]}),t[30]=d,t[31]=i,t[32]=_):_=t[32],t[33]!==m||t[34]!==_?(h=re.jsx("div",{className:Ws.backdrop,onClick:m,children:_}),t[33]=m,t[34]=_,t[35]=h):h=t[35],p=de.createPortal(h,document.getElementById("modal-root")||document.body),t[6]=n,t[7]=m,t[8]=u,t[9]=r,t[10]=s,t[11]=a,t[12]=p}else p=t[12];return p};function rr(){document.body.style.overflow=""}function ir(){return document.body.style.overflow="hidden",rr}function or(e){return e.stopPropagation()}const lr=({onClose:e,onSubmit:t,initialName:a})=>{const[n,s]=le.useState(a||""),[r,i]=le.useState(""),[o,l]=le.useState(""),[c,d]=le.useState(!1),[m,u]=le.useState(!1);le.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]),le.useEffect((()=>{const t=t=>{"Escape"!==t.key||c||e()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[e,c]);return de.createPortal(re.jsx("div",{className:Ws.backdrop,onClick:t=>{t.target!==t.currentTarget||c||e()},children:re.jsxs("div",{className:Ws.modal,onClick:e=>e.stopPropagation(),children:[re.jsx("button",{className:Ws.closeButton,onClick:e,disabled:c,children:re.jsx(_e,{size:20})}),re.jsxs("div",{className:Ws.modalContent,children:[re.jsx("h3",{children:"Изменить имя пользователя"}),m?re.jsxs(ie.div,{className:Ws.successMessage,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[re.jsx(qe,{size:20}),re.jsx("span",{children:"Имя пользователя успешно изменено!"})]}):re.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),l(""),n.trim())if(r){d(!0);try{await t(n.trim(),r),u(!0),setTimeout((()=>e()),1500)}catch(s){l(s.message||"Не удалось обновить имя пользователя")}finally{d(!1)}}else l("Введите пароль для подтверждения");else l("Имя пользователя не может быть пустым")},className:Ws.modalForm,children:[re.jsxs("div",{className:Ws.formGroup,children:[re.jsx("label",{htmlFor:"newName",children:"Новое имя:"}),re.jsx("input",{type:"text",id:"newName",value:n,onChange:e=>s(e.target.value),placeholder:"Введите новое имя",className:Ws.formControl,disabled:c,autoFocus:!0})]}),re.jsxs("div",{className:Ws.formGroup,children:[re.jsx("label",{htmlFor:"password",children:"Введите пароль для подтверждения:"}),re.jsx("input",{type:"password",id:"password",value:r,onChange:e=>i(e.target.value),placeholder:"Ваш текущий пароль",className:Ws.formControl,disabled:c})]}),o&&re.jsxs(ie.div,{className:Ws.errorMessage,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},children:[re.jsx(be,{size:18}),re.jsx("span",{children:o})]}),re.jsxs("div",{className:Ws.formActions,children:[re.jsx("button",{type:"button",className:Ws.cancelButton,onClick:e,disabled:c,children:"Отмена"}),re.jsx(ie.button,{type:"submit",className:Ws.submitButton,disabled:c,whileHover:{scale:1.03},whileTap:{scale:.97},children:c?re.jsx(ie.span,{animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:"Сохранение..."}):"Сохранить"})]})]})]})]})}),document.getElementById("modal-root")||document.body)},cr=({onClose:e,onSubmit:t})=>{const[a,n]=le.useState(""),[s,r]=le.useState(""),[i,o]=le.useState(""),[l,c]=le.useState(""),[d,m]=le.useState(!1),[u,p]=le.useState(!1);le.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]),le.useEffect((()=>{const t=t=>{"Escape"!==t.key||d||e()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[e,d]);return de.createPortal(re.jsx("div",{className:Ws.backdrop,onClick:t=>{t.target!==t.currentTarget||d||e()},children:re.jsxs("div",{className:Ws.modal,onClick:e=>e.stopPropagation(),children:[re.jsx("button",{className:Ws.closeButton,onClick:e,disabled:d,children:re.jsx(_e,{size:20})}),re.jsxs("div",{className:Ws.modalContent,children:[re.jsx("h3",{children:"Изменить пароль"}),u?re.jsxs(ie.div,{className:Ws.successMessage,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[re.jsx(qe,{size:20}),re.jsx("span",{children:"Пароль успешно изменен!"})]}):re.jsxs("form",{onSubmit:async n=>{if(n.preventDefault(),c(""),a)if(s)if(s.length<6)c("Новый пароль должен содержать не менее 6 символов");else if(s===i){m(!0);try{await t(a,s),p(!0),setTimeout((()=>e()),1500)}catch(r){c(r.message||"Не удалось изменить пароль")}finally{m(!1)}}else c("Пароли не совпадают");else c("Введите новый пароль");else c("Введите текущий пароль")},className:Ws.modalForm,children:[re.jsxs("div",{className:Ws.formGroup,children:[re.jsx("label",{htmlFor:"currentPassword",children:"Текущий пароль:"}),re.jsx("input",{type:"password",id:"currentPassword",value:a,onChange:e=>n(e.target.value),placeholder:"Введите текущий пароль",className:Ws.formControl,disabled:d,autoFocus:!0})]}),re.jsxs("div",{className:Ws.formGroup,children:[re.jsx("label",{htmlFor:"newPassword",children:"Новый пароль:"}),re.jsx("input",{type:"password",id:"newPassword",value:s,onChange:e=>r(e.target.value),placeholder:"Введите новый пароль",className:Ws.formControl,disabled:d})]}),re.jsxs("div",{className:Ws.formGroup,children:[re.jsx("label",{htmlFor:"confirmPassword",children:"Подтвердите пароль:"}),re.jsx("input",{type:"password",id:"confirmPassword",value:i,onChange:e=>o(e.target.value),placeholder:"Повторите новый пароль",className:Ws.formControl,disabled:d})]}),l&&re.jsxs(ie.div,{className:Ws.errorMessage,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},children:[re.jsx(be,{size:18}),re.jsx("span",{children:l})]}),re.jsxs("div",{className:Ws.formActions,children:[re.jsx("button",{type:"button",className:Ws.cancelButton,onClick:e,disabled:d,children:"Отмена"}),re.jsx(ie.button,{type:"submit",className:Ws.submitButton,disabled:d,whileHover:{scale:1.03},whileTap:{scale:.97},children:d?re.jsx(ie.span,{animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:"Сохранение..."}):"Сохранить"})]})]})]})]})}),document.getElementById("modal-root")||document.body)},dr=e=>{const t=se.c(75),{onClose:a,onBanUser:n,loading:s,username:r}=e,[i,o]=le.useState(""),[l,c]=le.useState(""),[d,m]=le.useState("");let u,p,_,h;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],t[0]=u):u=t[0],le.useEffect(ur,u),t[1]!==s||t[2]!==a?(p=()=>{const e=e=>{"Escape"!==e.key||s||a()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},_=[a,s],t[1]=s,t[2]=a,t[3]=p,t[4]=_):(p=t[3],_=t[4]),le.useEffect(p,_),t[5]!==s||t[6]!==a?(h=e=>{e.target!==e.currentTarget||s||a()},t[5]=s,t[6]=a,t[7]=h):h=t[7];const g=h;let f;t[8]!==l||t[9]!==i||t[10]!==n?(f=e=>{e.preventDefault(),i.trim()?l?(m(""),n(i,l)):m("Пожалуйста, выберите длительность блокировки"):m("Пожалуйста, укажите причину блокировки")},t[8]=l,t[9]=i,t[10]=n,t[11]=f):f=t[11];const x=f;let b;if(t[12]!==l||t[13]!==i||t[14]!==d||t[15]!==g||t[16]!==x||t[17]!==s||t[18]!==a||t[19]!==r){let e,n,m,u,p,_,h,f,y,v,w,j,k,N,S,C,E,P,A,I,B,O,q,D,U,T,L,M,z,F;t[21]===Symbol.for("react.memo_cache_sentinel")?(e=re.jsx(_e,{size:20}),t[21]=e):e=t[21],t[22]!==s||t[23]!==a?(n=re.jsx("button",{className:Ws.closeButton,onClick:a,disabled:s,children:e}),t[22]=s,t[23]=a,t[24]=n):n=t[24],t[25]===Symbol.for("react.memo_cache_sentinel")?(m=re.jsxs("h3",{children:[re.jsx(De,{size:22})," Блокировка пользователя"]}),t[25]=m):m=t[25],t[26]!==r?(u=re.jsxs("div",{className:Ws.banModalHeader,children:[m,re.jsxs("p",{children:["Пользователь ",re.jsx("strong",{children:r})," будет заблокирован и не сможет входить в приложение или взаимодействовать с другими пользователями."]})]}),t[26]=r,t[27]=u):u=t[27],t[28]!==d?(p=d&&re.jsxs(ie.div,{className:Ws.errorMessage,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[re.jsx(be,{size:18}),re.jsx("span",{children:d})]}),t[28]=d,t[29]=p):p=t[29],t[30]===Symbol.for("react.memo_cache_sentinel")?(_=re.jsxs("label",{htmlFor:"banReason",children:[re.jsx(he,{size:16,style:{marginRight:"6px"}}),"Причина блокировки:"]}),t[30]=_):_=t[30],t[31]===Symbol.for("react.memo_cache_sentinel")?(h=e=>o(e.target.value),t[31]=h):h=t[31],t[32]!==i?(f=re.jsxs("div",{className:Ws.formGroup,children:[_,re.jsx("textarea",{id:"banReason",value:i,onChange:h,placeholder:"Укажите причину блокировки пользователя",className:Ws.formControl,rows:4})]}),t[32]=i,t[33]=f):f=t[33],t[34]===Symbol.for("react.memo_cache_sentinel")?(y=re.jsx("div",{className:Ws.modalDivider}),t[34]=y):y=t[34],t[35]===Symbol.for("react.memo_cache_sentinel")?(v=re.jsxs("label",{htmlFor:"banDuration",children:[re.jsx(fe,{size:16,style:{marginRight:"6px"}}),"Длительность блокировки:"]}),t[35]=v):v=t[35],t[36]===Symbol.for("react.memo_cache_sentinel")?(w=e=>c(e.target.value),t[36]=w):w=t[36],t[37]===Symbol.for("react.memo_cache_sentinel")?(j=re.jsx("option",{value:"",children:"Выберите длительность"}),k=re.jsx("option",{value:"30m",children:"30 минут"}),N=re.jsx("option",{value:"2h",children:"2 часа"}),S=re.jsx("option",{value:"6h",children:"6 часов"}),C=re.jsx("option",{value:"12h",children:"12 часов"}),E=re.jsx("option",{value:"1d",children:"1 день"}),P=re.jsx("option",{value:"3d",children:"3 дня"}),A=re.jsx("option",{value:"1w",children:"1 неделя"}),I=re.jsx("option",{value:"permanent",children:"Навсегда"}),t[37]=j,t[38]=k,t[39]=N,t[40]=S,t[41]=C,t[42]=E,t[43]=P,t[44]=A,t[45]=I):(j=t[37],k=t[38],N=t[39],S=t[40],C=t[41],E=t[42],P=t[43],A=t[44],I=t[45]),t[46]!==l?(B=re.jsxs("div",{className:Ws.formGroup,children:[v,re.jsxs("select",{id:"banDuration",value:l,onChange:w,className:Ws.formControl,children:[j,k,N,S,C,E,P,A,I]})]}),t[46]=l,t[47]=B):B=t[47],t[48]===Symbol.for("react.memo_cache_sentinel")?(O=re.jsx(_e,{}),t[48]=O):O=t[48],t[49]!==s||t[50]!==a?(q=re.jsxs("button",{type:"button",className:Ws.cancelButton,onClick:a,disabled:s,children:[O," Отмена"]}),t[49]=s,t[50]=a,t[51]=q):q=t[51],t[52]!==s?(D=s?re.jsxs(ie.span,{animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:[re.jsx(Be,{})," Блокировка..."]}):re.jsxs(re.Fragment,{children:[re.jsx(De,{})," Заблокировать"]}),t[52]=s,t[53]=D):D=t[53],t[54]!==s||t[55]!==D?(U=re.jsx("button",{type:"submit",className:"".concat(Ws.submitButton," ").concat(Ws.banButton),disabled:s,children:D}),t[54]=s,t[55]=D,t[56]=U):U=t[56],t[57]!==q||t[58]!==U?(T=re.jsxs("div",{className:Ws.formActions,children:[q,U]}),t[57]=q,t[58]=U,t[59]=T):T=t[59],t[60]!==x||t[61]!==f||t[62]!==B||t[63]!==T?(L=re.jsxs("form",{onSubmit:x,className:Ws.modalForm,children:[f,y,B,T]}),t[60]=x,t[61]=f,t[62]=B,t[63]=T,t[64]=L):L=t[64],t[65]!==u||t[66]!==p||t[67]!==L?(M=re.jsxs("div",{className:Ws.modalContent,children:[u,p,L]}),t[65]=u,t[66]=p,t[67]=L,t[68]=M):M=t[68],t[69]!==M||t[70]!==n?(z=re.jsxs("div",{className:Ws.modal,onClick:pr,children:[n,M]}),t[69]=M,t[70]=n,t[71]=z):z=t[71],t[72]!==g||t[73]!==z?(F=re.jsx("div",{className:Ws.backdrop,onClick:g,children:z}),t[72]=g,t[73]=z,t[74]=F):F=t[74],b=de.createPortal(F,document.getElementById("modal-root")||document.body),t[12]=l,t[13]=i,t[14]=d,t[15]=g,t[16]=x,t[17]=s,t[18]=a,t[19]=r,t[20]=b}else b=t[20];return b};function mr(){document.body.style.overflow=""}function ur(){return document.body.style.overflow="hidden",mr}function pr(e){return e.stopPropagation()}const _r=()=>{var e;const t=ke(),{userId:a}=Ue(),{user:n,isAuthenticated:s,loading:r,refreshUser:i,updateUserDisplayName:o}=gs(),{setDisplayName:l}=fs(),[c,d]=le.useState(null),[m,u]=le.useState(!0),[p,_]=le.useState(null),[h,g]=le.useState(""),[f,x]=le.useState(!1),[b,y]=le.useState({type:"",message:""}),[v,w]=le.useState(!1),j=!a||n&&a===n.id,k=n&&("igoraor79@gmail.com"===n.email||(null==(e=n.perks)?void 0:e.includes("admin"))||"admin"===n.activePerk),N=e=>{d(e)},S=(e=>{const{profileUser:t,currentUser:a,updateProfileUser:n,setAdminEditStatus:s}=e,[r,i]=le.useState(!1),[o,l]=le.useState(null);return{banLoading:r,banInfo:o,loadBanInfo:async e=>{try{const{data:a,error:s}=await Vn.from("user_bans").select("*").eq("user_id",e).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1);if(s)return;a&&a.length>0&&(l(a[0]),n({...t,ban_info:a[0]}))}catch(p){}},handleUnbanUser:async()=>{if(a&&t)try{i(!0);const{error:e}=await Vn.from("profiles").update({is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_name:null,ban_admin_id:null}).eq("id",t.id);if(e)throw new Error("Ошибка при разблокировке профиля: ".concat(e.message));const{error:a}=await Vn.from("user_bans").update({is_active:!1}).eq("user_id",t.id).eq("is_active",!0);n({...t,is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_name:null}),s({type:"success",message:"Пользователь успешно разблокирован"}),setTimeout((()=>{s({type:"",message:""})}),3e3)}catch(p){s({type:"error",message:p.message||"Ошибка при разблокировке пользователя"})}finally{i(!1)}},handleBanUser:async e=>{if(a&&t)try{i(!0);const r=a.displayName||"Администратор",o="permanent"===e.duration?null:new Date(Date.now()+24*parseInt(e.duration)*60*60*1e3).toISOString(),{error:l}=await Vn.from("profiles").update({is_banned:!0,ban_reason:e.reason,ban_end_at:o,ban_admin_name:r,ban_admin_id:a.id}).eq("id",t.id);if(l)throw new Error("Ошибка при блокировке профиля: ".concat(l.message));const{error:c}=await Vn.from("user_bans").insert({user_id:t.id,reason:e.reason,admin_id:a.id,admin_name:r,end_at:o,is_active:!0,ban_type:"permanent"===e.duration?"permanent":"temporary"});n({...t,is_banned:!0,ban_reason:e.reason,ban_end_at:o,ban_admin_name:r}),s({type:"success",message:"Пользователь успешно заблокирован"}),setTimeout((()=>{s({type:"",message:""})}),3e3)}catch(p){s({type:"error",message:p.message||"Ошибка при блокировке пользователя"})}finally{i(!1)}},formatBanEndTime:Ys}})({profileUser:c,currentUser:n,updateProfileUser:N,setAdminEditStatus:y}),C=(e=>{const{profileUser:t,isOwnProfile:a,isAdmin:n,updateProfileUser:s}=e,[r,i]=le.useState(!1);return{isAvatarModalOpen:r,setIsAvatarModalOpen:i,handleAvatarChange:()=>{i(!0)},handleAvatarSelect:async e=>{try{const r=!a&&n?t.id:null;(await is.updateAvatar(e,r)).success&&s({...t,avatar:e}),i(!1)}catch(p){}}}})({profileUser:c,isOwnProfile:j,isAdmin:k,updateProfileUser:N}),E=(e=>{const{profileUser:t,isOwnProfile:a,isAdmin:n,updateProfileUser:s,refreshUser:r}=e,[i,o]=le.useState(!1);return{isPerkModalOpen:i,setIsPerkModalOpen:o,handleOpenPerkModal:()=>{o(!0)},handlePerkSelect:async e=>{try{if(!t||!e)return;if(!t.perks.includes(e))throw new Error("У вас нет выбранной привилегии");const i=!a&&n?t.id:null;await is.updateActivePerk(e,null,i),s({...t,activePerk:e}),a&&r&&r(),o(!1)}catch(p){}}}})({profileUser:c,isOwnProfile:j,isAdmin:k,updateProfileUser:N,refreshUser:i}),P=(({profileUser:e,updateProfileUser:t,setSuccessMessage:a,refreshUser:n,updateUserDisplayName:s,setDisplayName:r})=>{const[i,o]=le.useState(!1),[l,c]=le.useState(!1);return{isNameModalOpen:i,setIsNameModalOpen:o,isPasswordModalOpen:l,setIsPasswordModalOpen:c,handleChangeName:async(i,l)=>{try{s(i),r(i),await is.updateDisplayName(i,l,null);const c={...e,displayName:i};t(c),a("Имя пользователя успешно изменено"),o(!1),setTimeout((()=>{n()}),1e3),setTimeout((()=>{a("")}),3e3)}catch(p){throw p}},handleChangePassword:async(e,t)=>{try{await is.changePassword(e,t),a("Пароль успешно изменен"),c(!1),setTimeout((()=>{a("")}),3e3)}catch(p){throw p}}}})({profileUser:c,updateProfileUser:N,setSuccessMessage:g,refreshUser:i,updateUserDisplayName:o,setDisplayName:l});le.useEffect((()=>{r||s||a||t("/",{replace:!0})}),[s,r,t,a]),le.useEffect((()=>{(null==c?void 0:c.is_banned)&&a&&S.loadBanInfo(a)}),[null==c?void 0:c.is_banned,a]),le.useEffect((()=>{(async()=>{try{if(r)return;if(u(!0),j&&n)d({...n,role:"igoraor79@gmail.com"===n.email?"admin":n.role||"user"}),_(null);else if(a)try{/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a);const e=await is.getUserById(a);d({id:e.id,displayName:e.displayName||"Пользователь",role:e.role||"user",email:e.email,avatar:e.avatar,perks:e.perks||["user"],activePerk:e.activePerk||"user",createdAt:e.createdAt,is_banned:e.is_banned||!1,ban_reason:e.ban_reason,ban_end_at:e.ban_end_at,ban_admin_name:e.ban_admin_name}),_(null)}catch(e){if(e.message&&e.message.includes("Неверный ID"))return void t("/profile",{replace:!0});d({id:a,displayName:"Пользователь",role:"user",email:k?"user@example.com":null,avatar:null,perks:["user"],activePerk:"user",createdAt:(new Date).toISOString()})}else _("Профиль не найден")}catch(s){_("Ошибка при загрузке профиля")}finally{u(!1)}})()}),[a,n,j,k,r,t]);if(m||!c)return re.jsx("div",{className:Ws.loading,children:"Загрузка профиля..."});if(p)return re.jsx("div",{className:Ws.error,children:p});return re.jsxs("div",{className:Ws.profileContainer,children:[re.jsx(Xs,{profileUser:c,isOwnProfile:j,isAdmin:k,avatarManager:C,perkManager:E,getActivePerkClass:()=>(null==c?void 0:c.activePerk)?"early_user"===c.activePerk?Ls:"sponsor"===c.activePerk?Ts:"admin"===c.activePerk?Ms:zs:zs,getActivePerkName:()=>(null==c?void 0:c.activePerk)?"early_user"===c.activePerk?"Ранний пользователь":"sponsor"===c.activePerk?"Спонсор":"admin"===c.activePerk?"Администратор":"Пользователь":"Пользователь"}),k&&!j&&re.jsx(Qs,{profileUser:c,adminEditStatus:b,isAdminEditing:f,banManager:S,setIsAdminEditing:x,setShowBanDialog:w,handleAdminProfileSave:async e=>{d(e),y({type:"success",message:"Профиль пользователя успешно обновлен"}),x(!1),setTimeout((()=>{y({type:"",message:""})}),3e3)}}),j&&re.jsx(Ks,{profileUser:c,successMessage:h,accountManager:P}),C.isAvatarModalOpen&&re.jsx(er,{avatars:Js,adminAvatars:$s,isAdmin:k||"admin"===(null==c?void 0:c.activePerk),onSelectAvatar:C.handleAvatarSelect,onClose:()=>C.setIsAvatarModalOpen(!1)}),E.isPerkModalOpen&&re.jsx(sr,{perks:c.perks||["user"],activePerk:c.activePerk||"user",onSelectPerk:E.handlePerkSelect,onClose:()=>E.setIsPerkModalOpen(!1),userId:j?void 0:c.id}),P.isNameModalOpen&&re.jsx(lr,{onClose:()=>P.setIsNameModalOpen(!1),onSubmit:P.handleChangeName,initialName:null==c?void 0:c.displayName}),P.isPasswordModalOpen&&re.jsx(cr,{onClose:()=>P.setIsPasswordModalOpen(!1),onSubmit:P.handleChangePassword}),v&&re.jsx(dr,{onClose:()=>w(!1),onBanUser:S.handleBanUser,loading:S.banLoading,username:c.displayName})]})},hr={async getPosts(e=1,t=10){try{let s=!1;try{const{data:e,error:t}=await Vn.from("posts").select("styling").limit(1);s=!t}catch(a){}const r=(e-1)*t,{data:i,error:o,count:l}=await Vn.from("posts").select("*",{count:"exact"}).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1}).range(r,r+t-1);if(o)throw o;const c=[];for(const e of i)try{const t=await Zn.getUserProfile(e.user_id),{data:a,error:n}=await Vn.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),r=(null==a?void 0:a.perks)||[],i=(null==a?void 0:a.active_perk)||r[0]||"user",{count:o}=await Vn.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e.id),{count:l}=await Vn.from("post_comments").select("*",{count:"exact",head:!0}).eq("post_id",e.id);let d=null;e.poll_data&&(d=e.poll_data),c.push({id:e.id,title:e.title||null,content:e.content,image_url:e.image_url,image_urls:e.image_urls||null,created_at:e.created_at,user_id:e.user_id,author:{displayName:t.displayName,avatar:t.avatar,perks:r,activePerk:i,id:e.user_id},styling:s&&e.styling||null,likes_count:o||0,comments_count:l||0,poll_data:d,is_pinned:e.is_pinned||!1})}catch(n){c.push({id:e.id,title:e.title||null,content:e.content,image_url:e.image_url,image_urls:e.image_urls||null,created_at:e.created_at,user_id:e.user_id,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id},styling:null,likes_count:0,comments_count:0,poll_data:null,is_pinned:e.is_pinned||!1})}return{posts:c,totalCount:l||0,hasMore:r+i.length<(l||0),nextPage:r+i.length<(l||0)?e+1:null}}catch(n){throw n}},async createPost(e){try{const{title:a,content:n,imageUrl:s,imageUrls:r,userId:i,poll:o,styling:l,isPinned:c}=e,{data:d,error:m}=await Vn.from("profiles").select("perks, active_perk, email").eq("id",i).single();if(m)throw new Error("Не удалось проверить права пользователя");const u=(null==d?void 0:d.perks)||[],p=(null==d?void 0:d.active_perk)||"",_=(null==d?void 0:d.email)||"";if(!("igoraor79@gmail.com"===_||u.includes("admin")||"admin"===p))throw new Error("У вас недостаточно прав для создания постов");let h=!1;try{const{data:e,error:t}=await Vn.from("posts").select("image_urls").limit(1);h=!t}catch(t){}const g={title:a||null,content:n,image_url:r&&r.length>0?r[0]:s||null};h&&r&&r.length>0&&(g.image_urls=r),g.user_id=i,g.created_at=(new Date).toISOString(),g.poll_data=o||null,g.styling=l||null,g.is_pinned=c||!1;const{data:f,error:x}=await Vn.from("posts").insert([g]).select();if(x)throw new Error(x.message);if(!f||0===f.length)throw new Error("Не удалось создать пост");const b=await Zn.getUserProfile(i);return{...f[0],title:f[0].title||null,image_url:f[0].image_url||null,image_urls:f[0].image_urls||null,author:{id:i,displayName:b.displayName,avatar:b.avatar,activePerk:b.activePerk||"user",id:i},likes_count:0,comments_count:0,poll_data:f[0].poll_data,is_pinned:f[0].is_pinned||!1}}catch(a){throw a}},async getPostById(e){try{let n=!1;try{const{data:e,error:t}=await Vn.from("posts").select("styling").limit(1);n=!t}catch(t){}const{data:s,error:r}=await Vn.from("posts").select("*").eq("id",e).single();if(r)throw r;const i=await Zn.getUserProfile(s.user_id),{data:o,error:l}=await Vn.from("profiles").select("perks, active_perk").eq("id",s.user_id).single(),c=(null==o?void 0:o.perks)||[],d=(null==o?void 0:o.active_perk)||c[0]||"user",{count:m}=await Vn.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",s.id),{data:u}=await Vn.from("post_comments").select("*").eq("post_id",s.id).is("parent_id",null).order("created_at",{ascending:!0}),p=[];for(const e of u)try{const t=await Zn.getUserProfile(e.user_id),{data:n}=await Vn.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),r=(null==n?void 0:n.perks)||[],i=(null==n?void 0:n.active_perk)||r[0]||"user",{data:o}=await Vn.from("post_comments").select("*").eq("post_id",s.id).eq("parent_id",e.id).order("created_at",{ascending:!0}),l=[];for(const e of o||[])try{const t=await Zn.getUserProfile(e.user_id),{data:a}=await Vn.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),n=(null==a?void 0:a.perks)||[],s=(null==a?void 0:a.active_perk)||n[0]||"user";l.push({...e,author:{displayName:t.displayName,avatar:t.avatar,perks:n,activePerk:s,id:e.user_id}})}catch(a){l.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id}})}p.push({...e,author:{displayName:t.displayName,avatar:t.avatar,perks:r,activePerk:i,id:e.user_id},replies:l})}catch(a){p.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id},replies:[]})}return{id:s.id,content:s.content,image_url:s.image_url,image_urls:s.image_urls||null,created_at:s.created_at,user_id:s.user_id,author:{displayName:i.displayName,avatar:i.avatar,perks:c,activePerk:d,id:s.user_id},styling:n&&s.styling||null,likes_count:m||0,comments:p,poll:s.poll_data}}catch(n){throw n}},async toggleLike(e,t){try{const{data:a,error:n}=await Vn.from("post_likes").select("*").eq("post_id",e).eq("user_id",t);if(n)throw n;if(a&&a.length>0){const{error:a}=await Vn.from("post_likes").delete().eq("post_id",e).eq("user_id",t);if(a)throw a;const{count:n}=await Vn.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e);return{liked:!1,likesCount:n||0}}{const{error:a}=await Vn.from("post_likes").insert({post_id:e,user_id:t});if(a)throw a;const{count:n}=await Vn.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e);return{liked:!0,likesCount:n||0}}}catch(a){throw a}},async isLikedByUser(e,t){try{const{data:a,error:n}=await Vn.from("post_likes").select("*").eq("post_id",e).eq("user_id",t);if(n)throw n;return{liked:a&&a.length>0}}catch(a){throw a}},async getLikesCount(e){try{const{count:t,error:a}=await Vn.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e);if(a)throw a;return t||0}catch(t){throw t}},async deletePost(e){var t;try{const{data:a}=await Vn.auth.getSession(),n=null==(t=null==a?void 0:a.session)?void 0:t.user;if(!n)throw new Error("Пользователь не авторизован");const{data:s,error:r}=await Vn.from("profiles").select("perks, active_perk, email").eq("id",n.id).single();if(r)throw new Error("Не удалось проверить права пользователя");const i=(null==s?void 0:s.perks)||[],o=(null==s?void 0:s.active_perk)||"",l=(null==s?void 0:s.email)||"";if(!("igoraor79@gmail.com"===l||i.includes("admin")||"admin"===o))throw new Error("Только администраторы могут удалять посты");const{error:c}=await Vn.from("post_comments").delete().eq("post_id",e),{error:d}=await Vn.from("post_likes").delete().eq("post_id",e),{error:m}=await Vn.from("poll_votes").delete().eq("post_id",e),{error:u}=await Vn.from("posts").delete().eq("id",e);if(u)throw u;return{success:!0}}catch(a){throw a}},async getPollVoteStatus(e,t){try{const{data:n,error:s}=await Vn.from("posts").select("poll_data").eq("id",e).single();if(s)throw s;if(!n.poll_data)throw new Error("У этого поста нет опроса");try{const{data:a,error:n}=await Vn.from("poll_votes").select("option_index").eq("post_id",e).eq("user_id",t).throwOnError().maybeSingle(),s=await this.getPollResults(e);return{hasVoted:!!a,option:a?a.option_index:null,results:s.results}}catch(a){return{hasVoted:!1,option:null,results:(await this.getPollResults(e)).results}}}catch(n){throw n}},async votePoll(e,t){var a,n;if(!e||"string"!=typeof e)return{success:!1,message:"Некорректный ID поста"};if("number"!=typeof t||t<0)return{success:!1,message:"Некорректный индекс опции"};try{const{data:i,error:o}=await Vn.auth.getSession();if(o)return{success:!1,message:"Ошибка сессии пользователя"};const l=null==(a=null==i?void 0:i.session)?void 0:a.user;if(!l)return{success:!1,message:"Пользователь не авторизован"};const c=l.id,{data:d,error:m}=await Vn.from("posts").select("poll_data").eq("id",e).single();if(m)return{success:!1,message:"Не удалось получить данные поста"};if(!d.poll_data)return{success:!1,message:"В этом посте нет опроса"};if(!d.poll_data.options||!Array.isArray(d.poll_data.options))return{success:!1,message:"Некорректные данные опроса"};if(t>=d.poll_data.options.length)return{success:!1,message:"Указанный вариант не существует в опросе"};let u=null,p=!0;try{const{data:t,error:a}=await Vn.from("poll_votes").select("id, option_index").eq("post_id",e).eq("user_id",c).maybeSingle();!a&&t&&(u=t,p=!1)}catch(s){}if(u){return{...await this._getPollResults(e,d.poll_data.options,u.option_index),message:"Вы уже проголосовали в этом опросе"}}if(p)try{const{error:a}=await Vn.from("poll_votes").insert({post_id:e,user_id:c,option_index:t,created_at:(new Date).toISOString()});if(a){if("42P01"===a.code||(null==(n=a.message)?void 0:n.includes("does not exist"))){const e=d.poll_data.options.map(((e,a)=>({option:e,votes:a===t?1:0})));return{success:!0,votedOption:t,results:e,message:"Ваш голос учтен"}}return{success:!1,message:"Ошибка при голосовании: ".concat(a.message)}}}catch(r){const e=d.poll_data.options.map(((e,a)=>({option:e,votes:a===t?1:0})));return{success:!0,votedOption:t,results:e,message:"Ваш голос учтен"}}return{...await this._getPollResults(e,d.poll_data.options,t),message:"Ваш голос учтен"}}catch(s){return{success:!1,message:s.message||"Произошла ошибка при голосовании",error:s.toString()}}},async _getPollResults(e,t,a){try{let s=[];try{const{data:t,error:a}=await Vn.from("poll_votes").select("option_index").eq("post_id",e);a||(s=t||[])}catch(n){}const r=Array(t.length).fill(0);for(const e of s)e&&"number"==typeof e.option_index&&e.option_index>=0&&e.option_index<t.length&&r[e.option_index]++;const i=t.map(((e,t)=>({option:e,votes:r[t]||0}))),o=i.reduce(((e,t)=>e+t.votes),0);return o>0&&i.forEach((e=>{Math.round(e.votes/o*100)})),{success:!0,votedOption:a,results:i}}catch(n){return{success:!0,votedOption:a,results:t.map((e=>({option:e,votes:0})))}}},async _ensurePollVotesTable(){try{const{data:e,error:t}=await Vn.from("poll_votes").select("id").limit(1);if(!t)return!0;if(t&&"42P01"===t.code){await Vn.rpc("create_poll_votes_table");const{error:e}=await Vn.from("poll_votes").select("id").limit(1);return e&&e.code,!0}return!0}catch(e){return!0}},async getPollResults(e){try{const{data:a,error:n}=await Vn.from("posts").select("poll_data").eq("id",e).single();if(n)throw new Error("Ошибка при получении поста");if(!a.poll_data)throw new Error("У этого поста нет опроса");try{const{data:t,error:n}=await Vn.from("poll_votes").select("option_index, id").eq("post_id",e);if(n)throw n;const s=a.poll_data.options.map(((e,a)=>({option:e,votes:t.filter((e=>e.option_index===a)).length})));return{question:a.poll_data.question,results:s}}catch(t){const e=a.poll_data.options.map((e=>({option:e,votes:0})));return{question:a.poll_data.question,results:e}}}catch(a){throw a}},async pinPost(e){var t;try{const{data:a}=await Vn.auth.getSession(),n=null==(t=null==a?void 0:a.session)?void 0:t.user;if(!n)throw new Error("Пользователь не авторизован");const{data:s,error:r}=await Vn.from("profiles").select("perks, active_perk, email").eq("id",n.id).single();if(r)throw new Error("Не удалось проверить права пользователя");const i=(null==s?void 0:s.perks)||[],o=(null==s?void 0:s.active_perk)||"",l=(null==s?void 0:s.email)||"";if(!("igoraor79@gmail.com"===l||i.includes("admin")||"admin"===o))throw new Error("Только администраторы могут закреплять посты");const{data:c,error:d}=await Vn.from("posts").select("id").eq("is_pinned",!0).limit(1),m=c&&c.length>0?c[0].id:null;if(!e||"string"!=typeof e||!e.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))throw new Error("Некорректный ID поста: ".concat(e));const{data:u,error:p}=await Vn.rpc("pin_post",{post_id_to_pin:e});if(p){const{error:t}=await Vn.from("posts").update({is_pinned:!1}).eq("is_pinned",!0);if(t)throw t;const{data:a,error:n}=await Vn.from("posts").update({is_pinned:!0}).eq("id",e).select("*");if(n)throw n;return{success:!0,post:(null==a?void 0:a[0])||null,previouslyPinnedId:m}}return{success:!0,post:u,previouslyPinnedId:m}}catch(a){throw a}},async unpinPost(e){var t;try{const{data:a}=await Vn.auth.getSession(),n=null==(t=null==a?void 0:a.session)?void 0:t.user;if(!n)throw new Error("Пользователь не авторизован");const{data:s,error:r}=await Vn.from("profiles").select("perks, active_perk, email").eq("id",n.id).single();if(r)throw new Error("Не удалось проверить права пользователя");const i=(null==s?void 0:s.perks)||[],o=(null==s?void 0:s.active_perk)||"",l=(null==s?void 0:s.email)||"";if(!("igoraor79@gmail.com"===l||i.includes("admin")||"admin"===o))throw new Error("Только администраторы могут открепить посты");const{data:c,error:d}=await Vn.from("posts").update({is_pinned:!1}).eq("id",e).select();if(d)throw d;return{success:!0,post:null==c?void 0:c[0]}}catch(a){throw a}},async updatePost(e,t){var a;try{const{data:r}=await Vn.auth.getSession(),i=null==(a=null==r?void 0:r.session)?void 0:a.user;if(!i)throw new Error("Пользователь не авторизован");const{data:o,error:l}=await Vn.from("profiles").select("perks, active_perk, email").eq("id",i.id).single();if(l)throw new Error("Не удалось проверить права пользователя");const c=(null==o?void 0:o.perks)||[],d=(null==o?void 0:o.active_perk)||"",m=(null==o?void 0:o.email)||"";if(!("igoraor79@gmail.com"===m||c.includes("admin")||"admin"===d))throw new Error("Только администраторы могут редактировать посты");let u=!1;try{const{data:e,error:t}=await Vn.from("posts").select("image_urls").limit(1);u=!t}catch(n){}const p={updated_at:(new Date).toISOString()};if(void 0!==t.title&&(p.title=t.title||null),void 0!==t.content&&(p.content=t.content),void 0===t.imageUrl&&void 0===t.image_url||(p.image_url=t.imageUrl||t.image_url||null),u&&(void 0!==t.imageUrls||void 0!==t.image_urls)){const e=t.imageUrls||t.image_urls||null;p.image_urls=e,e&&e.length>0&&!p.image_url&&(p.image_url=e[0])}void 0!==t.styling&&(p.styling=t.styling),void 0!==t.poll&&(p.poll_data=t.poll);const{data:_,error:h}=await Vn.from("posts").update(p).eq("id",e).select("*");if(h)throw new Error("Не удалось обновить пост: ".concat(h.message));if(!_||0===_.length)throw new Error("Не удалось найти пост для обновления");try{const e=await Zn.getUserProfile(_[0].user_id);return{success:!0,post:{..._[0],author:{id:_[0].user_id,displayName:e.displayName,avatar:e.avatar,activePerk:e.activePerk||"user",id:_[0].user_id}}}}catch(s){return{success:!0,post:_[0]}}}catch(r){throw r}}},gr={"хуй":{weight:.9,variations:["xуй","хyй","х*й","х.й","х-й"]},"пизда":{weight:.9,variations:["пи3да","пизд@","писда","п*зда","п1зда"]},"блядь":{weight:.9,variations:["бл*дь","блять","blyad","бл**ь","бля"]},"ебать":{weight:.9,variations:["еб*ть","e6ать","ебaть","eбaть","еб@ть"]},"залупа":{weight:.8,variations:["zалупа","залуп@","залупо"]},"пидор":{weight:.8,variations:["п*дор","пидр","p!dor","пидoр"]},"мудак":{weight:.7,variations:["муд@к","мудaк","мудaчина"]},"хер":{weight:.6,variations:["х*р","xер","хеr"]},"шлюха":{weight:.7,variations:["шл*ха","шлюho","шлюх@"]},"дерьмо":{weight:.5,variations:["д*рьмо","dерьмо","дерьмо"]},"гондон":{weight:.6,variations:["г*ндон","гaндон","гoндон"]},"сука":{weight:.6,variations:["с*ка","сykа","сукa","cyka"]},"жопа":{weight:.4,variations:["ж*па","жoпa","jопа"]},"дурак":{weight:.3,variations:["д*рак","дуpак","дyрак"]},"придурок":{weight:.3,variations:["пр*дурок","придyрок"]},"тупой":{weight:.2,variations:["т*пой","тyпой"]}},fr=["научный","образовательный","медицинский","исторический"],xr=["употребление","херсон","скипидар","хердер","захер","гексахлороциклогексан"],br=[{pattern:/\.|\*|_|-|#|@|1|3|0|7|4/g,replacement:""},{pattern:/\s+(?=[а-яёa-z])/g,replacement:""},{pattern:/(\w)\1+/g,replacement:"$1"}];function yr(e){if(!e)return"";let t=e.toLowerCase();return br.forEach((({pattern:e,replacement:a})=>{t=t.replace(e,a)})),t}function vr(e){const t=[e],a=e.replace(/a/g,"а").replace(/e/g,"е").replace(/o/g,"о").replace(/p/g,"р").replace(/x/g,"х").replace(/c/g,"с").replace(/y/g,"у");a!==e&&t.push(a);const n=e.replace(/а/g,"a").replace(/е/g,"e").replace(/о/g,"o").replace(/р/g,"p").replace(/х/g,"x").replace(/с/g,"c").replace(/у/g,"y");return n!==e&&t.push(n),t}function wr(e,t={}){const{threshold:a=.6,safeContext:n=!1}=t;if(!e)return{hasProfanity:!1,score:0,matches:[]};let s=0,r=0;const i=[],o=e.split(/\s+/);let l=a;(n||fr.some((t=>e.includes(t))))&&(l=.85);for(const m of o){const e=vr(yr(m));for(const t of e)if(!xr.some((e=>t.includes(e)))){for(const[e,a]of Object.entries(gr))if(t===e||a.variations.includes(t)){s=Math.max(s,a.weight),r++,i.push({word:m,matchedTo:e,score:a.weight});break}if(0===i.length)for(const[e,a]of Object.entries(gr)){const n=.8*a.weight;if(t.length>3&&(t.includes(e)||a.variations.some((e=>t.includes(e))))){s=Math.max(s,n),r++,i.push({word:m,matchedTo:e,score:n});break}}}}const c=s>=l,d=r>0?Math.min(.95,s+.05*Math.min(r,5)):0;return{hasProfanity:c,score:d,matches:i,confidence:c?d>.8?"high":"medium":"low"}}function jr(e,t){if(!e)return"";if("string"!=typeof e)return"";if(function(e){return!!e&&("igoraor79@gmail.com"===e.email||"admin"===e.role||"admin"===e.activePerk||Array.isArray(e.perks)&&e.perks.includes("admin"))}(t))return e;try{return wr(e).hasProfanity?function(e,t={}){if(!e)return"";const{replacementChar:a="*",threshold:n=.6}=t,s=e.split(/(\s+)/),r=[];for(const i of s)/\s+/.test(i)?r.push(i):wr(i,{threshold:n}).hasProfanity?r.push(a.repeat(Math.max(2,i.length))):r.push(i);return r.join("")}(e):e}catch(a){return e}}const kr={async getCommentsByPostId(e){try{const{data:a,error:n}=await Vn.from("post_comments").select("*").eq("post_id",e).is("parent_id",null).order("created_at",{ascending:!1});if(n)throw n;if(!a||0===a.length)return[];const s=[];for(const e of a)try{const a=await Zn.getUserProfile(e.user_id),{data:n}=await Vn.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),r=(null==n?void 0:n.perks)||[],i=(null==n?void 0:n.active_perk)||r[0]||"user",{data:o,error:l}=await Vn.from("post_comments").select("*").eq("parent_id",e.id).order("created_at",{ascending:!0});if(l)throw l;const c=[];for(const e of o||[])try{const t=await Zn.getUserProfile(e.user_id),{data:a}=await Vn.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),n=(null==a?void 0:a.perks)||[],s=(null==a?void 0:a.active_perk)||n[0]||"user";c.push({...e,author:{displayName:t.displayName,avatar:t.avatar,perks:n,activePerk:s,id:e.user_id}})}catch(t){c.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id}})}s.push({...e,author:{displayName:a.displayName,avatar:a.avatar,perks:r,activePerk:i,id:e.user_id},replies:c})}catch(t){s.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id},replies:[]})}return s}catch(a){return[]}},async createComment(e){try{const t=await Zn.getUserProfile(e.userId),a=jr(e.content,{id:e.userId,...t}),{data:n,error:s}=await Vn.from("post_comments").insert({content:a,post_id:e.postId,user_id:e.userId,parent_id:null}).select();if(s)throw s;const{data:r}=await Vn.from("profiles").select("perks, active_perk").eq("id",e.userId).single(),i=(null==r?void 0:r.perks)||[],o=(null==r?void 0:r.active_perk)||i[0]||"user";return{...n[0],author:{displayName:t.displayName,avatar:t.avatar,perks:i,activePerk:o,id:e.userId},replies:[]}}catch(t){throw t}},async replyToComment(e){try{const t=await Zn.getUserProfile(e.userId),a=jr(e.content,{id:e.userId,...t}),{data:n,error:s}=await Vn.from("post_comments").insert({content:a,post_id:e.postId,user_id:e.userId,parent_id:e.commentId}).select();if(s)throw s;const{data:r}=await Vn.from("profiles").select("perks, active_perk").eq("id",e.userId).single(),i=(null==r?void 0:r.perks)||[],o=(null==r?void 0:r.active_perk)||i[0]||"user";return{...n[0],author:{displayName:t.displayName,avatar:t.avatar,perks:i,activePerk:o,id:e.userId}}}catch(t){throw t}},async getCommentsCount(e){try{const{count:t,error:a}=await Vn.from("post_comments").select("*",{count:"exact",head:!0}).eq("post_id",e);if(a)throw a;return t||0}catch(t){throw t}},async deleteComment(e,t){try{if(t)try{const{data:a,error:n}=await Vn.from("post_comments").select("user_id, post_id").eq("id",e).maybeSingle();if(n);else if(a){const e=a.user_id===t,{data:n,error:s}=await Vn.from("profiles").select("perks, active_perk, email").eq("id",t).maybeSingle(),r=!s&&n&&("igoraor79@gmail.com"===n.email||n.perks&&n.perks.includes("admin")||"admin"===n.active_perk);if(!e&&!r)throw new Error("У вас нет прав для удаления этого комментария")}}catch(a){if("У вас нет прав для удаления этого комментария"===a.message)throw a}try{const{error:t}=await Vn.from("post_comments").delete().eq("parent_id",e)}catch(n){}try{const{data:t,error:a}=await Vn.from("post_comments").delete().eq("id",e).select();if(a)throw a;return{success:!0,message:"Комментарий успешно удален",deletedComment:t&&t.length>0?t[0]:null}}catch(a){throw a}}catch(a){throw a}}},Nr=Te(e||(e=ae(["\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]))),Sr=Le.div(t||(t=ae(["\n  background: var(--bg-highlight, #f5f8fa);\n  border-radius: 12px;\n  padding: 20px;\n  margin: 15px 0;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  animation: ",' 0.3s ease-out;\n  border: 1px solid var(--border, #e1e8ed);\n  \n  [data-theme="dark"] & {\n    background: rgba(255, 255, 255, 0.05);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    border-color: rgba(255, 255, 255, 0.1);\n  }\n  \n  &::before {\n    display: none;\n  }\n'])),Nr),Cr=Le.h4(a||(a=ae(["\n  color: var(--text-primary);\n  font-size: 18px;\n  font-weight: 600;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  \n  &:before {\n    content: '';\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    background-color: var(--accent, #1da1f2);\n    margin-right: 10px;\n    border-radius: 4px;\n  }\n"]))),Er=Le.div(n||(n=ae(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-bottom: 20px;\n"]))),Pr=Le.div(s||(s=ae(["\n  position: relative;\n  cursor: ",";\n  opacity: ",";\n"])),(e=>e.$disabled?"default":"pointer"),(e=>e.$disabled?"0.8":"1")),Ar=Le.div(r||(r=ae(["\n  padding: 12px 16px;\n  border-radius: 8px;\n  border: 1px solid var(--border, #e1e8ed);\n  background: ",";\n  display: flex;\n  align-items: center;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: ",';\n  }\n  \n  [data-theme="dark"] & {\n    border-color: rgba(255, 255, 255, 0.1);\n    background: ',";\n    color: var(--text-primary);\n    \n    &:hover {\n      background: ",";\n    }\n    \n    ","\n  }\n"])),(e=>e.$isSelected?"rgba(29, 161, 242, 0.1)":"transparent"),(e=>e.$disabled?"transparent":"rgba(29, 161, 242, 0.05)"),(e=>e.$isSelected?"rgba(29, 161, 242, 0.2)":"rgba(255, 255, 255, 0.05)"),(e=>e.$disabled?"rgba(255, 255, 255, 0.05)":"rgba(29, 161, 242, 0.1)"),(e=>e.$isSelected&&"\n      box-shadow: 0 0 5px rgba(29, 161, 242, 0.3);\n      border-color: rgba(29, 161, 242, 0.5);\n    ")),Ir=Le.span(i||(i=ae(["\n  color: var(--text-primary) !important;\n  font-weight: ",";\n  font-size: 15px;\n  margin-left: ",';\n  flex-grow: 1;\n  \n  // Force color to adapt to theme\n  [data-theme="dark"] & {\n    color: var(--text-primary) !important;\n    ',"\n  }\n"])),(e=>e.$isSelected?"600":"400"),(e=>e.$isVoted?"8px":"0"),(e=>e.$isSelected&&"\n      text-shadow: 0 0 1px rgba(255, 255, 255, 0.2);\n    ")),Br=Le(qe)(o||(o=ae(['\n  color: var(--accent, #1da1f2);\n  margin-right: 10px;\n  \n  [data-theme="dark"] & {\n    color: white;\n    filter: drop-shadow(0 0 1px rgba(0, 0, 0, 0.7));\n  }\n']))),Or=Le.span(l||(l=ae(['\n  color: var(--accent, #1da1f2);\n  font-weight: 600;\n  font-size: 14px;\n  margin-left: auto;\n  \n  [data-theme="dark"] & {\n    color: white;\n    text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n  }\n']))),qr=Le.div(c||(c=ae(['\n  width: 100%;\n  height: 6px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border-radius: 3px;\n  margin-top: 8px;\n  overflow: hidden;\n  \n  [data-theme="dark"] & {\n    background-color: rgba(255, 255, 255, 0.05);\n  }\n']))),Dr=Le.div(d||(d=ae(["\n  height: 100%;\n  background: linear-gradient(90deg, var(--accent, #1da1f2) 0%, rgba(29, 161, 242, 0.6) 100%);\n  width: ",'%;\n  border-radius: 3px;\n  transition: width 0.5s ease-out;\n  \n  [data-theme="dark"] & {\n    background: linear-gradient(90deg, #1d9cf2 0%, #36c3ff 100%);\n    box-shadow: 0 0 5px rgba(29, 161, 242, 0.5);\n  }\n'])),(e=>e.$width)),Ur=Le.div(m||(m=ae(['\n  text-align: right;\n  color: var(--text-secondary);\n  font-size: 14px;\n  margin-top: 10px;\n  font-style: italic;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 5px;\n  \n  [data-theme="dark"] & {\n    color: rgba(255, 255, 255, 0.6);\n  }\n']))),Tr=Le(Me)(u||(u=ae(["\n  margin-right: 5px;\n"]))),Lr=Te(p||(p=ae(["\n  0% {\n    background-position: 0% 50%;\n  }\n  50% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n"])));Le(ie.button)(_||(_=ae(["\n  background: none;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  outline: inherit;\n"])));const Mr=Le.button(h||(h=ae(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  background: none;\n  border: none;\n  color: var(--text-secondary);\n  font-size: 14px;\n  cursor: pointer;\n  padding: 6px 10px;\n  border-radius: 4px;\n  transition: all 0.2s;\n  \n  &:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n    color: var(--accent);\n  }\n  \n  svg {\n    font-size: 16px;\n    ",'\n  }\n  \n  [data-theme="dark"] & {\n    &:hover {\n      background-color: rgba(255, 255, 255, 0.05);\n    }\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n'])),(e=>e.$isPinned&&"transform: rotate(45deg);")),zr=Le.span(g||(g=ae(['\n  font-size: 12px;\n  background-color: #5c6bc0;\n  color: white;\n  padding: 2px 8px;\n  border-radius: 12px;\n  margin-right: 8px;\n  font-weight: 500;\n\n  [data-theme="dark"] & {\n    background-color: #3949ab;\n  }\n']))),Fr=Le.div(f||(f=ae(['\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-size: 12px;\n  color: var(--accent);\n  background-color: var(--accent-light);\n  padding: 3px 8px;\n  border-radius: 12px;\n  font-weight: 500;\n  margin-bottom: 5px;\n  \n  svg {\n    font-size: 12px;\n    transform: rotate(45deg);\n  }\n  \n  @media (max-width: 576px) {\n    font-size: 11px;\n    padding: 2px 6px;\n  }\n  \n  /* Для темной темы */\n  [data-theme="dark"] & {\n    background-color: rgba(29, 161, 242, 0.25);\n    color: #ffffff;\n    box-shadow: 0 0 5px rgba(29, 161, 242, 0.3);\n  }\n']))),Rr=Le.div(x||(x=ae(["\n  position: relative;\n  border-radius: 16px;\n  margin-bottom: 20px;\n  \n  /* Create an animated gradient border effect */\n  &:before {\n    content: '';\n    position: absolute;\n    inset: -3px;\n    border-radius: 18px;\n    padding: 3px;\n    background: linear-gradient(\n      45deg, \n      var(--accent, #1da1f2) 0%, \n      rgba(255, 255, 255, 0.3) 50%, \n      var(--accent, #1da1f2) 100%\n    );\n    -webkit-mask: \n      linear-gradient(#fff 0 0) content-box, \n      linear-gradient(#fff 0 0);\n    -webkit-mask-composite: xor;\n    mask-composite: exclude;\n    background-size: 300% 300%;\n    animation: ",' 4s ease infinite;\n    opacity: 0.8;\n    \n    [data-theme="dark"] & {\n      background: linear-gradient(\n        45deg, \n        var(--accent, #1da1f2) 0%, \n        rgba(29, 161, 242, 0.7) 50%, \n        var(--accent, #1da1f2) 100%\n      );\n      opacity: 0.95;\n      box-shadow: 0 0 18px rgba(29, 161, 242, 0.5);\n    }\n  }\n'])),Lr),Gr=Le(ie.div)(b||(b=ae(["\n  overflow: hidden;\n"])));Le(ie.div)(y||(y=ae(["\n  background-color: rgba(255, 152, 0, 0.1);\n  border-left: 4px solid var(--accent, #1da1f2);\n  padding: 12px 16px;\n  margin: 12px 0;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  overflow: hidden;\n  \n  svg {\n    color: var(--accent, #1da1f2);\n    font-size: 20px;\n    flex-shrink: 0;\n  }\n  \n  span {\n    font-size: 14px;\n    color: var(--text-primary);\n  }\n  \n  button {\n    background-color: var(--accent, #1da1f2);\n    color: white;\n    border: none;\n    border-radius: 4px;\n    padding: 6px 12px;\n    font-size: 13px;\n    cursor: pointer;\n    margin-left: auto;\n    transition: all 0.2s;\n    \n    &:hover {\n      background-color: rgba(29, 161, 242, 0.8);\n    }\n  }\n"])));const Hr={initial:{opacity:0,height:0,overflow:"hidden"},animate:{opacity:1,height:"auto",transition:{height:{duration:.4,ease:[.04,.62,.23,.98]},opacity:{duration:.3,ease:"easeInOut"}}},exit:{opacity:0,height:0,transition:{height:{duration:.3,ease:[.04,.62,.23,.98]},opacity:{duration:.2,ease:"easeInOut"}}}},Vr=new Map,Wr=e=>{if(!e||"string"!=typeof e)return null;if(Vr.has(e))return Vr.get(e);if(e.includes("res.cloudinary.com/do9t8preg/image/fetch"))return Vr.set(e,e),e;if(e.startsWith("data:image/"))return Vr.set(e,e),e;try{const t="".concat("https://res.cloudinary.com/do9t8preg/image/fetch/f_auto,q_auto:best,dpr_auto,w_auto,c_limit,w_800/").concat(encodeURIComponent(e));return Vr.set(e,t),t}catch(t){return e}},Jr=(e,t=!1)=>{const a=new Date(e),n=new Date,s=Math.floor((n-a)/1e3),r=Math.floor(s/60),i=Math.floor(r/60),o=Math.floor(i/24),l=Math.floor(o/7),c=Math.floor(o/30),d=Math.floor(o/365);return s<60?"только что":r<60?t?"".concat(r,"м"):"".concat(r," ").concat($r(r,["минуту","минуты","минут"])," назад"):i<24?t?"".concat(i,"ч"):"".concat(i," ").concat($r(i,["час","часа","часов"])," назад"):o<7?t?"".concat(o,"д"):"".concat(o," ").concat($r(o,["день","дня","дней"])," назад"):l<4?t?"".concat(l,"нед"):"".concat(l," ").concat($r(l,["неделю","недели","недель"])," назад"):c<12?t?"".concat(c,"мес"):"".concat(c," ").concat($r(c,["месяц","месяца","месяцев"])," назад"):t?"".concat(d,"г"):"".concat(d," ").concat($r(d,["год","года","лет"])," назад")},$r=(e,t)=>t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]],Yr=e=>{if(!e)return!1;let t=e.replace("#","");3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);return(.299*parseInt(t.substring(0,2),16)+.587*parseInt(t.substring(2,4),16)+.114*parseInt(t.substring(4,6),16))/255<.5},Xr=({poll:e,postId:t,onVote:a,hasVoted:n,votedOption:s,results:r,isAdmin:i,user:o})=>{const{isAuthenticated:l}=gs(),[c,d]=le.useState(!1),[m,u]=le.useState(null),[p,_]=le.useState(!1),[h,g]=le.useState(!1),f=e.optionsColor||e.styling&&e.styling.optionsColor||null,x=e.styling&&e.styling.fontFamily||"inherit",b=le.useMemo((()=>r&&Array.isArray(r)?r.reduce(((e,t)=>e+(t.votes||0)),0):0),[r]),y=le.useMemo((()=>{if(!r||!Array.isArray(r)||0===b)return e.options.map((()=>0));const t=r.map((e=>e.votes/b*100)),a=t.map((e=>Math.floor(e))),n=100-a.reduce(((e,t)=>e+t),0),s=t.map(((e,t)=>t));s.sort(((e,a)=>t[a]-Math.floor(t[a])-(t[e]-Math.floor(t[e]))));const i=[...a];for(let e=0;e<n;e++)i[s[e%s.length]]++;return i}),[r,b,e.options.length]),v=n||i;return re.jsxs(Sr,{children:[!e.hideQuestion&&re.jsx(Cr,{children:e.question}),m&&re.jsx("div",{style:{padding:"10px",margin:"10px 0",backgroundColor:"rgba(255, 0, 0, 0.1)",borderLeft:"3px solid red",color:"var(--text-primary)",fontSize:"14px"},children:m}),re.jsx(Er,{children:e.options.map(((e,t)=>{let i;r&&Array.isArray(r)?(i=r.find((t=>t.option===e)),!i&&r[t]&&(i=r[t]),i||(i={option:e,votes:0})):i={option:e,votes:0};const o=v&&y[t]||0,m=s===t;return re.jsxs(Pr,{onClick:()=>n?null:(async e=>{if(l){if(!n&&!c){d(!0),u(null);try{await a(e)}catch(t){u(t.message||"Ошибка при голосовании. Пожалуйста, попробуйте позже."),setTimeout((()=>u(null)),5e3)}finally{d(!1)}}}else g(!0)})(t),$disabled:n||c,children:[re.jsxs(Ar,{$isSelected:m,$disabled:n||c,children:[c&&t===s&&re.jsx("span",{style:{marginRight:"8px"},children:"⏳"}),m&&re.jsx(Br,{}),re.jsx(Ir,{$isSelected:m,$isVoted:n,style:{color:f||"inherit",fontFamily:x},children:e}),v&&re.jsxs(Or,{children:[o,"%"]})]}),v&&re.jsx(qr,{children:re.jsx(Dr,{$width:o})})]},"option-".concat(t,"-").concat(e))}))}),h&&re.jsx(As,{type:"info",message:"Войдите, чтобы проголосовать",show:!!h,onClose:()=>g(!1)}),re.jsxs(Ur,{children:[i&&!n&&re.jsx(zr,{children:"Просмотр администратора"}),re.jsx(Tr,{}),b," ",$r(b,["голос","голоса","голосов"])]})]})},Zr=Le(ie.div)(v||(v=ae(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(135deg, rgba(33, 33, 38, 0.85) 0%, rgba(68, 68, 77, 0.85) 100%);\n  backdrop-filter: blur(8px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  perspective: 1000px;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n  transform: translateZ(0);\n  isolation: isolate;\n  padding: 20px;\n"]))),Qr=Le(ie.div)(w||(w=ae(["\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  padding: 24px;\n  width: 100%;\n  max-width: 380px;\n  box-shadow: var(--modal-shadow, 0 8px 30px rgba(0, 0, 0, 0.2));\n  position: relative;\n  border: 1px solid var(--modal-border, var(--border));\n  backdrop-filter: blur(10px);\n  transform-style: preserve-3d;\n  margin: auto;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n"]))),Kr=Le.div(j||(j=ae(["\n  color: var(--text-secondary);\n  margin-bottom: 24px;\n  overflow-y: auto;\n  max-height: calc(90vh - 150px);\n"]))),ei=Le.div(k||(k=ae(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 16px;\n"]))),ti=Le.h3(N||(N=ae(["\n  color: var(--text-primary);\n  font-size: 18px;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  \n  svg {\n    color: var(--error);\n  }\n"]))),ai=Le.button(S||(S=ae(["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  background: none;\n  border: none;\n  color: var(--text-secondary);\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:hover {\n    background: var(--bg-highlight);\n  }\n"]))),ni=Le.div(C||(C=ae(["\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n"]))),si=Le.button(E||(E=ae(["\n  background: var(--bg-highlight);\n  color: var(--text-primary);\n  border: 1px solid var(--border);\n  padding: 10px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  \n  &:hover {\n    background: var(--background-color);\n  }\n"]))),ri=Le.button(P||(P=ae(["\n  background: var(--error);\n  color: white;\n  border: none;\n  padding: 10px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  \n  &:hover {\n    opacity: 0.9;\n  }\n"]))),ii={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.3}}},oi={hidden:{opacity:0,scale:.95,y:-20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:300}},exit:{opacity:0,scale:.95,y:-20,transition:{duration:.3}}},li=e=>{const t=se.c(48),{isOpen:a,onClose:n,onConfirm:s,title:r,message:i,confirmText:o,cancelText:l,isDanger:c}=e,d=void 0===r?"Подтверждение":r,m=void 0===i?"Вы уверены?":i,u=void 0===o?"Подтвердить":o,p=void 0===l?"Отмена":l,_=void 0===c||c;let h;t[0]!==n?(h=e=>{e.target===e.currentTarget&&n()},t[0]=n,t[1]=h):h=t[1];const g=h;let f,x,b;if(t[2]!==a?(f=()=>{if(a){const e=window.scrollY;return document.documentElement.style.setProperty("--scroll-y","".concat(e,"px")),document.body.classList.add("modal-open"),document.body.style.top="-".concat(e,"px"),document.body.style.position="fixed",document.body.style.width="100%",()=>{document.body.classList.remove("modal-open"),document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,e)}}},x=[a],t[2]=a,t[3]=f,t[4]=x):(f=t[3],x=t[4]),le.useEffect(f,x),!a)return null;if(t[5]!==p||t[6]!==u||t[7]!==g||t[8]!==_||t[9]!==m||t[10]!==n||t[11]!==s||t[12]!==d){let e,a,r,i,o,l,c,h;t[14]!==_?(e=_&&re.jsx(pe,{size:20}),t[14]=_,t[15]=e):e=t[15],t[16]!==e||t[17]!==d?(a=re.jsxs(ti,{children:[e,d]}),t[16]=e,t[17]=d,t[18]=a):a=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(r=re.jsx(_e,{size:18}),t[19]=r):r=t[19],t[20]!==n?(i=re.jsx(ai,{onClick:n,children:r}),t[20]=n,t[21]=i):i=t[21],t[22]!==a||t[23]!==i?(o=re.jsxs(ei,{children:[a,i]}),t[22]=a,t[23]=i,t[24]=o):o=t[24],t[25]!==m?(l=re.jsx(Kr,{children:m}),t[25]=m,t[26]=l):l=t[26],t[27]===Symbol.for("react.memo_cache_sentinel")?(c=re.jsx(_e,{size:16}),t[27]=c):c=t[27],t[28]!==p||t[29]!==n?(h=re.jsxs(si,{onClick:n,children:[c,p]}),t[28]=p,t[29]=n,t[30]=h):h=t[30];const f=_?"var(--error)":"var(--accent)";let x,y,v,w,j,k;t[31]!==f?(x={background:f},t[31]=f,t[32]=x):x=t[32],t[33]===Symbol.for("react.memo_cache_sentinel")?(y=re.jsx(qe,{size:16}),t[33]=y):y=t[33],t[34]!==u||t[35]!==s||t[36]!==x?(v=re.jsxs(ri,{onClick:s,style:x,children:[y,u]}),t[34]=u,t[35]=s,t[36]=x,t[37]=v):v=t[37],t[38]!==h||t[39]!==v?(w=re.jsxs(ni,{children:[h,v]}),t[38]=h,t[39]=v,t[40]=w):w=t[40],t[41]!==o||t[42]!==l||t[43]!==w?(j=re.jsxs(Qr,{variants:oi,initial:"hidden",animate:"visible",exit:"exit",onClick:ci,children:[o,l,w]}),t[41]=o,t[42]=l,t[43]=w,t[44]=j):j=t[44],t[45]!==g||t[46]!==j?(k=re.jsx(oe,{mode:"wait",children:re.jsx(Zr,{variants:ii,initial:"hidden",animate:"visible",exit:"exit",onClick:g,children:j})}),t[45]=g,t[46]=j,t[47]=k):k=t[47],b=de.createPortal(k,document.getElementById("modal-root")||document.body),t[5]=p,t[6]=u,t[7]=g,t[8]=_,t[9]=m,t[10]=n,t[11]=s,t[12]=d,t[13]=b}else b=t[13];return b};function ci(e){return e.stopPropagation()}const di={postsContainer:"_postsContainer_w8o2b_2",postsHeader:"_postsHeader_w8o2b_9",headerButtons:"_headerButtons_w8o2b_34",refreshButton:"_refreshButton_w8o2b_46",rulesButton:"_rulesButton_w8o2b_46",postsList:"_postsList_w8o2b_131",loading:"_loading_w8o2b_139",spin:"_spin_w8o2b_1",errorMessage:"_errorMessage_w8o2b_162",noPosts:"_noPosts_w8o2b_178",notAuthenticatedMessage:"_notAuthenticatedMessage_w8o2b_193",createPostContainer:"_createPostContainer_w8o2b_210",createPostTitle:"_createPostTitle_w8o2b_219",createPostForm:"_createPostForm_w8o2b_232",contentInput:"_contentInput_w8o2b_238",imageUrlInput:"_imageUrlInput_w8o2b_258",pollContainer:"_pollContainer_w8o2b_275",pollQuestionInput:"_pollQuestionInput_w8o2b_306",pollOptions:"_pollOptions_w8o2b_332",sectionLabel:"_sectionLabel_w8o2b_338",inputWithIcon:"_inputWithIcon_w8o2b_354",pollOptionInputWrapper:"_pollOptionInputWrapper_w8o2b_369",pollOptionInput:"_pollOptionInput_w8o2b_369",removeOptionButton:"_removeOptionButton_w8o2b_401",addOptionButton:"_addOptionButton_w8o2b_429",formOptions:"_formOptions_w8o2b_457",formToggles:"_formToggles_w8o2b_464",optionToggle:"_optionToggle_w8o2b_470",submitButton:"_submitButton_w8o2b_498",postItem:"_postItem_w8o2b_523",pinnedPost:"_pinnedPost_w8o2b_546",postHeader:"_postHeader_w8o2b_575",authorInfo:"_authorInfo_w8o2b_584",avatar:"_avatar_w8o2b_598",authorName:"_authorName_w8o2b_602",postDate:"_postDate_w8o2b_619",postContent:"_postContent_w8o2b_625",darkTextConversion:"_darkTextConversion_w8o2b_633",postImage:"_postImage_w8o2b_651",postPoll:"_postPoll_w8o2b_685",pollTitle:"_pollTitle_w8o2b_696",pollOption:"_pollOption_w8o2b_332",pollResults:"_pollResults_w8o2b_737",pollResultOption:"_pollResultOption_w8o2b_740",pollOptionText:"_pollOptionText_w8o2b_743",pollOptionVotes:"_pollOptionVotes_w8o2b_749",pollProgressBar:"_pollProgressBar_w8o2b_752",pollProgress:"_pollProgress_w8o2b_752",pollVotersCount:"_pollVotersCount_w8o2b_765",postActions:"_postActions_w8o2b_772",actionButtons:"_actionButtons_w8o2b_781",likeButton:"_likeButton_w8o2b_807",liked:"_liked_w8o2b_813",likeCount:"_likeCount_w8o2b_824",commentButton:"_commentButton_w8o2b_828",deleteButton:"_deleteButton_w8o2b_847",commentsSection:"_commentsSection_w8o2b_881",commentsHeading:"_commentsHeading_w8o2b_887",loadingComments:"_loadingComments_w8o2b_897",noComments:"_noComments_w8o2b_909",commentForm:"_commentForm_w8o2b_918",commentItem:"_commentItem_w8o2b_997",commentReply:"_commentReply_w8o2b_1005",commentHeader:"_commentHeader_w8o2b_1015",commentAuthorAvatar:"_commentAuthorAvatar_w8o2b_1021",commentAuthorInfo:"_commentAuthorInfo_w8o2b_1034",commentAuthor:"_commentAuthor_w8o2b_1021",commentContent:"_commentContent_w8o2b_1048",commentDate:"_commentDate_w8o2b_1057",commentActions:"_commentActions_w8o2b_1069",replyButton:"_replyButton_w8o2b_1077",deleteCommentButton:"_deleteCommentButton_w8o2b_1078",repliesContainer:"_repliesContainer_w8o2b_1116",replyForm:"_replyForm_w8o2b_1120",replyFormActions:"_replyFormActions_w8o2b_1144",cancelReplyButton:"_cancelReplyButton_w8o2b_1166",submitReplyButton:"_submitReplyButton_w8o2b_1174",postTitle:"_postTitle_w8o2b_1227",stylingOptions:"_stylingOptions_w8o2b_1247",stylingTitle:"_stylingTitle_w8o2b_1273",stylingGroup:"_stylingGroup_w8o2b_1286",colorSelector:"_colorSelector_w8o2b_1297",colorOption:"_colorOption_w8o2b_1304",active:"_active_w8o2b_1315",fontSelector:"_fontSelector_w8o2b_1320",colorPickerContainer:"_colorPickerContainer_w8o2b_1385",colorPreview:"_colorPreview_w8o2b_1390",dropletIcon:"_dropletIcon_w8o2b_1412",colorPickerPopup:"_colorPickerPopup_w8o2b_1418","react-colorful":"_react-colorful_w8o2b_1424",colorPickerCover:"_colorPickerCover_w8o2b_1432",colorNote:"_colorNote_w8o2b_1441",likeAnimation:"_likeAnimation_w8o2b_1455",likePulse:"_likePulse_w8o2b_1",authPrompt:"_authPrompt_w8o2b_1470",loginButton:"_loginButton_w8o2b_1482",titleInput:"_titleInput_w8o2b_1496",editButton:"_editButton_w8o2b_1536",adminActions:"_adminActions_w8o2b_1566",imageContainer:"_imageContainer_w8o2b_1588",imageLoading:"_imageLoading_w8o2b_1595",imageError:"_imageError_w8o2b_1611",editPostForm:"_editPostForm_w8o2b_1627",cancelEditButton:"_cancelEditButton_w8o2b_1647",imagePreview:"_imagePreview_w8o2b_1687",pulse:"_pulse_w8o2b_1",loadMoreContainer:"_loadMoreContainer_w8o2b_1732",loadMoreSpinner:"_loadMoreSpinner_w8o2b_1742",noMorePosts:"_noMorePosts_w8o2b_1765",imageUrlInputContainer:"_imageUrlInputContainer_w8o2b_1788",addImageButton:"_addImageButton_w8o2b_1794",imageGalleryContainer:"_imageGalleryContainer_w8o2b_1814",imagePreviewItem:"_imagePreviewItem_w8o2b_1826",removeImageButton:"_removeImageButton_w8o2b_1871",zoomHint:"_zoomHint_w8o2b_1893",errorNote:"_errorNote_w8o2b_1897",lightboxOverlay:"_lightboxOverlay_w8o2b_1908",lightboxContainer:"_lightboxContainer_w8o2b_1912",lightboxImage:"_lightboxImage_w8o2b_1916",lightboxCloseButton:"_lightboxCloseButton_w8o2b_1920"};Le.div(A||(A=ae(["\n  position: relative;\n  display: inline-block;\n"]))),Le.button(I||(I=ae(["\n  background: none;\n  border: none;\n  color: var(--text-secondary);\n  padding: 6px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: var(--bg-hover);\n  }\n  \n  svg {\n    font-size: 18px;\n  }\n"]))),Le(ie.div)(B||(B=ae(['\n  position: absolute;\n  top: 100%;\n  right: 0;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);\n  min-width: 160px;\n  z-index: 100;\n  overflow: hidden;\n  \n  [data-theme="dark"] & {\n    background: var(--bg-tertiary);\n    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3);\n  }\n']))),Le.button(O||(O=ae(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  width: 100%;\n  text-align: left;\n  padding: 10px 16px;\n  background: none;\n  border: none;\n  color: ",";\n  font-size: 14px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  \n  &:hover {\n    background-color: ",";\n  }\n  \n  svg {\n    font-size: 16px;\n  }\n"])),(e=>e.$danger?"var(--error)":"var(--text-primary)"),(e=>e.$danger?"rgba(231, 76, 60, 0.1)":"var(--bg-hover)"));function mi({comment:e,onReply:t,onDelete:a}){var n;const[s,r]=le.useState(!1),[i,o]=le.useState(""),[l,c]=le.useState(!1),{user:d,isAuthenticated:m}=gs(),[u,p]=le.useState(!1),[_,h]=le.useState(!1),[g,f]=le.useState({}),[x,b]=le.useState(!1),[y,v]=le.useState(null),[w,j]=le.useState(null),[k,N]=le.useState(!1),S=le.useRef(null),[C,E]=le.useState(""),[P,A]=le.useState(!1),I=m&&d&&("igoraor79@gmail.com"===d.email||(null==(n=d.perks)?void 0:n.includes("admin"))||"admin"===d.activePerk),B=d&&d.id===e.user_id,O=I||B;le.useEffect((()=>{const e=e=>{S.current&&!S.current.contains(e.target)&&N(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const q=e=>{f((t=>({...t,[e]:!1})))};return re.jsxs("div",{className:di.commentItem,children:[re.jsx("style",{dangerouslySetInnerHTML:{__html:"\n  .commentActions {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n    margin-top: 8px;\n  }\n  \n  .replyButton,\n  .deleteCommentButton {\n    display: flex;\n    align-items: center;\n    gap: 5px;\n    font-size: 13px;\n    background: transparent;\n    border: none;\n    color: var(--text-secondary);\n    cursor: pointer;\n    padding: 4px 8px;\n    border-radius: 4px;\n    transition: all 0.2s;\n  }\n  \n  .replyButton:hover,\n  .deleteCommentButton:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n  }\n  \n  .deleteCommentButton {\n    color: #e74c3c;\n  }\n  \n  .commentItem {\n    position: relative;\n    overflow: hidden;\n  }\n  \n  @media (max-width: 576px) {\n    .commentActions {\n      width: 100%;\n    }\n    \n    .replyButton,\n    .deleteCommentButton {\n      font-size: 12px;\n      padding: 3px 6px;\n    }\n  }\n"}}),re.jsx("style",{dangerouslySetInnerHTML:{__html:"\n  @media (max-width: 576px) {\n    .commentItem {\n      position: relative;\n    }\n    \n    .commentHeader {\n      padding-right: 30px;\n    }\n    \n    .mobileOnly {\n      display: block;\n    }\n    \n    .desktopOnly {\n      display: none;\n    }\n  }\n  \n  @media (min-width: 577px) {\n    .mobileOnly {\n      display: none;\n    }\n    \n    .desktopOnly {\n      display: flex;\n    }\n  }\n"}}),re.jsx("style",{dangerouslySetInnerHTML:{__html:"\n  .commentItem {\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .commentSwipeActions {\n    position: absolute;\n    right: -100px;\n    top: 0;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    transition: transform 0.3s ease;\n    touch-action: pan-y;\n  }\n  \n  .commentActionButton {\n    width: 50px;\n    height: 50px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    margin-right: 10px;\n    color: white;\n    cursor: pointer;\n    transition: background-color 0.2s, transform 0.2s;\n  }\n  \n  .replyAction {\n    background-color: var(--accent, #1da1f2);\n  }\n  \n  .deleteAction {\n    background-color: var(--error, #e74c3c);\n  }\n  \n  .commentContent {\n    transition: transform 0.3s ease;\n  }\n  \n  .commentInner {\n    position: relative;\n    width: 100%;\n    padding-right: 10px;\n    transition: transform 0.3s ease;\n  }\n  \n  @media (max-width: 576px) {\n    .commentInner.swiped {\n      transform: translateX(-100px);\n    }\n    \n    .commentActions.mobileOnly {\n      position: absolute;\n      right: 10px;\n      top: 10px;\n    }\n  }\n"}}),re.jsxs("div",{ref:S,className:"commentInner ".concat(k?"swiped":""),onTouchStart:e=>{v(e.targetTouches[0].clientX)},onTouchMove:e=>{if(j(e.targetTouches[0].clientX),y&&w){const e=y-w;if(e>20&&e<120){const t=-e;S.current&&(S.current.style.transform="translateX(".concat(t,"px)"))}}},onTouchEnd:()=>{if(!y||!w)return;y-w>70?N(!0):(N(!1),S.current&&(S.current.style.transform="translateX(0)")),v(null),j(null)},children:[re.jsxs("div",{className:di.commentHeader,children:[re.jsx("div",{className:di.commentAuthorAvatar,children:re.jsx(Fs,{src:e.author.avatar,alt:e.author.displayName,className:di.avatar})}),re.jsx("div",{className:di.commentAuthorInfo,children:re.jsx(me,{to:"/profile/".concat(e.user_id),className:di.commentAuthor,children:re.jsx("span",{className:"early_user"===e.author.activePerk?Ls:"sponsor"===e.author.activePerk?Ts:"admin"===e.author.activePerk?Ms:zs,style:{display:"inline-block",margin:0,padding:0},children:e.author.displayName})})})]}),re.jsx("div",{className:di.commentContent,children:e.content}),re.jsxs("div",{className:di.commentDate,children:[re.jsx(fe,{})," ",Jr(e.created_at)]}),re.jsxs("div",{className:di.commentActions,children:[re.jsxs("button",{className:di.replyButton,onClick:()=>{m?(r((e=>!e)),s||setTimeout((()=>{const e=document.querySelectorAll(".".concat(di.replyForm," textarea"));e.length>0&&e[e.length-1].focus()}),100)):b("reply")},children:[re.jsx(ze,{})," Ответить"]}),O&&re.jsxs("button",{className:di.deleteCommentButton,onClick:()=>{O&&h(!0)},disabled:u,children:[re.jsx(Fe,{})," ",u?"Удаление...":"Удалить"]})]})]}),re.jsx(li,{isOpen:_,onClose:()=>{h(!1)},onConfirm:async()=>{if(O)try{p(!0);const t=await kr.deleteComment(e.id,d.id);if(!t||!t.success)throw new Error("Не удалось удалить комментарий. Попробуйте позже.");a(e.id),h(!1)}catch(t){E(t.message||"Неизвестная ошибка"),A(!0),h(!1)}finally{p(!1)}},title:"Удаление комментария",message:"Вы уверены, что хотите удалить этот комментарий? Это действие нельзя отменить.",confirmText:"Удалить",cancelText:"Отмена",isDanger:!0}),re.jsx(li,{isOpen:P,onClose:()=>A(!1),onConfirm:()=>A(!1),title:"Ошибка удаления",message:"Не удалось удалить комментарий: ".concat(C),confirmText:"Понятно",hideCancel:!0}),s&&re.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),i.trim())try{c(!0);const a=jr(i,d);await t(e.id,a),o(""),r(!1)}catch(n){}finally{c(!1)}},className:di.replyForm,children:[re.jsx("textarea",{value:i,onChange:e=>o(e.target.value),placeholder:"Напишите ответ...",disabled:l}),re.jsxs("div",{className:di.replyFormActions,children:[re.jsxs("button",{type:"button",onClick:()=>{r(!1),o("")},className:di.cancelReplyButton,disabled:l,children:[re.jsx(_e,{})," Отмена"]}),re.jsx("button",{type:"submit",className:di.submitReplyButton,disabled:l,children:l?re.jsxs(re.Fragment,{children:[re.jsx(Be,{})," Отправка..."]}):re.jsxs(re.Fragment,{children:[re.jsx(Re,{})," Ответить"]})})]})]}),e.replies&&e.replies.length>0&&re.jsx("div",{className:di.repliesContainer,children:e.replies.map((e=>{const t=d&&d.id===e.user_id,n=I||t;return re.jsxs("div",{className:"".concat(di.commentItem," ").concat(di.commentReply),children:[re.jsxs("div",{className:di.commentHeader,children:[re.jsx("div",{className:di.commentAuthorAvatar,children:re.jsx(Fs,{src:e.author.avatar,alt:e.author.displayName,className:di.avatar})}),re.jsx("div",{className:di.commentAuthorInfo,children:re.jsx(me,{to:"/profile/".concat(e.user_id),className:di.commentAuthor,children:re.jsx("span",{className:"early_user"===e.author.activePerk?Ls:"sponsor"===e.author.activePerk?Ts:"admin"===e.author.activePerk?Ms:zs,style:{display:"inline-block",margin:0,padding:0},children:e.author.displayName})})})]}),re.jsx("div",{className:di.commentContent,children:e.content}),re.jsxs("div",{className:di.commentDate,children:[re.jsx(fe,{})," ",Jr(e.created_at)]}),n&&re.jsx("div",{className:di.commentActions,children:re.jsxs("button",{className:di.deleteCommentButton,onClick:()=>f({...g,[e.id]:!0}),children:[re.jsx(Fe,{})," Удалить"]})}),re.jsx(li,{isOpen:g[e.id]||!1,onClose:()=>q(e.id),onConfirm:()=>(async(e,t)=>{const n=d&&d.id===t;if(I||n)try{const t=await kr.deleteComment(e,null==d?void 0:d.id);if(!t||!t.success)throw new Error("Не удалось удалить ответ. Попробуйте позже.");a(e),q(e)}catch(s){E(s.message||"Неизвестная ошибка"),A(!0),q(e)}})(e.id,e.user_id),title:"Удаление ответа",message:"Вы уверены, что хотите удалить этот ответ? Это действие нельзя отменить.",confirmText:"Удалить",cancelText:"Отмена",isDanger:!0})]},e.id)}))}),x&&re.jsx(As,{type:"info",message:"Войдите, чтобы ответить на комментарий",show:!!x,onClose:()=>b(!1)})]})}const ui=e=>{const t=se.c(30),{src:a,alt:n,className:s,style:r}=e,[i,o]=le.useState(!0),[l,c]=le.useState(!1),[d,m]=le.useState(!1);let u,p;t[0]!==a?(p=Wr(a),t[0]=a,t[1]=p):p=t[1];const _=p||a;let h;t[2]!==a||t[3]!==_?(h={displaySrc:_,originalSrc:a},t[2]=a,t[3]=_,t[4]=h):h=t[4],u=h;const{displaySrc:g,originalSrc:f}=u;let x;t[5]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{o(!1),c(!1)},t[5]=x):x=t[5];const b=x;let y;t[6]!==g||t[7]!==f||t[8]!==d?(y=()=>{d||g===f?(o(!1),c(!0)):m(!0)},t[6]=g,t[7]=f,t[8]=d,t[9]=y):y=t[9];const v=y;let w,j;t[10]!==i?(w=()=>{const e=setTimeout((()=>{i&&o(!1)}),5e3);return()=>clearTimeout(e)},t[10]=i,t[11]=w):w=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(j=[],t[12]=j):j=t[12],le.useEffect(w,j);const k="".concat(s||""," ").concat(di.imageContainer);let N,S;t[13]!==i?(N=i&&re.jsx("div",{className:di.imageLoading,children:"Загрузка изображения..."}),t[13]=i,t[14]=N):N=t[14],t[15]!==l?(S=l&&re.jsx("div",{className:di.imageError,children:"Ошибка загрузки"}),t[15]=l,t[16]=S):S=t[16];const C=d?f:g,E=i?"hidden":"visible";let P,A,I;return t[17]!==E?(P={width:"100%",height:"auto",borderRadius:"8px",visibility:E},t[17]=E,t[18]=P):P=t[18],t[19]!==n||t[20]!==v||t[21]!==C||t[22]!==P?(A=re.jsx("img",{src:C,alt:n,style:P,onLoad:b,onError:v,loading:"lazy"}),t[19]=n,t[20]=v,t[21]=C,t[22]=P,t[23]=A):A=t[23],t[24]!==r||t[25]!==N||t[26]!==S||t[27]!==A||t[28]!==k?(I=re.jsxs("div",{className:k,style:r,children:[N,S,A]}),t[24]=r,t[25]=N,t[26]=S,t[27]=A,t[28]=k,t[29]=I):I=t[29],I},pi=e=>{const t=se.c(14),{imageUrl:a,onClose:n}=e;let s,r,i,o,l,c,d;return t[0]!==n?(s=()=>{const e=e=>{"Escape"===e.key&&n()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},r=[n],t[0]=n,t[1]=s,t[2]=r):(s=t[1],r=t[2]),le.useEffect(s,r),t[3]===Symbol.for("react.memo_cache_sentinel")?(i=re.jsx(Ve,{}),t[3]=i):i=t[3],t[4]!==n?(o=re.jsx("button",{className:di.lightboxCloseButton,onClick:n,children:i}),t[4]=n,t[5]=o):o=t[5],t[6]!==a?(l=re.jsx("img",{src:a,alt:"Увеличенное изображение",className:di.lightboxImage,onClick:hi}),t[6]=a,t[7]=l):l=t[7],t[8]!==o||t[9]!==l?(c=re.jsxs("div",{className:di.lightboxContainer,children:[o,l]}),t[8]=o,t[9]=l,t[10]=c):c=t[10],t[11]!==n||t[12]!==c?(d=re.jsx("div",{className:di.lightboxOverlay,onClick:n,children:c}),t[11]=n,t[12]=c,t[13]=d):d=t[13],d},_i=e=>{const t=se.c(97),{post:a,onSave:n,onCancel:s,isSubmitting:r}=e,[i,o]=le.useState(a.title||""),[l,c]=le.useState(a.content||""),[d,m]=le.useState("");let u;t[0]!==a.image_url||t[1]!==a.image_urls?(u=a.image_urls||(a.image_url?[a.image_url]:[]),t[0]=a.image_url,t[1]=a.image_urls,t[2]=u):u=t[2];const[p,_]=le.useState(u);let h;t[3]===Symbol.for("react.memo_cache_sentinel")?(h=[],t[3]=h):h=t[3];const[g,f]=le.useState(h);let x;t[4]===Symbol.for("react.memo_cache_sentinel")?(x={},t[4]=x):x=t[4];const[b,y]=le.useState(x);let v;t[5]===Symbol.for("react.memo_cache_sentinel")?(v={},t[5]=v):v=t[5];const[w,j]=le.useState(v),[k,N]=le.useState(""),[S,C]=le.useState(!1),[E,P]=le.useState(""),[A,I]=le.useState(!0);let B,O,q,D,U;t[6]===Symbol.for("react.memo_cache_sentinel")?(B=()=>{const e=()=>{I(window.innerWidth>=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},O=[],t[6]=B,t[7]=O):(B=t[6],O=t[7]),le.useEffect(B,O),t[8]!==p?(q=()=>{const e=p.map(gi);f(e);const t={};p.forEach(((e,a)=>{t[a]=!0})),y(t);const a=setTimeout((()=>{const e={};p.forEach(((t,a)=>{e[a]=!1})),y(e)}),5e3);return()=>clearTimeout(a)},D=[p],t[8]=p,t[9]=q,t[10]=D):(q=t[9],D=t[10]),le.useEffect(q,D),t[11]===Symbol.for("react.memo_cache_sentinel")?(U=e=>{y((t=>({...t,[e]:!1})))},t[11]=U):U=t[11];const T=U;let L;t[12]===Symbol.for("react.memo_cache_sentinel")?(L=e=>{y((t=>({...t,[e]:!1}))),j((t=>({...t,[e]:"Ошибка загрузки изображения. Проверьте URL."})))},t[12]=L):L=t[12];const M=L;let z;t[13]!==d||t[14]!==w||t[15]!==p?(z=e=>{if(e.preventDefault(),d.trim()){if(p.length>=5)return void j(fi);if(_([...p,d.trim()]),m(""),w.maxImagesReached){const e={...w};delete e.maxImagesReached,j(e)}}},t[13]=d,t[14]=w,t[15]=p,t[16]=z):z=t[16];const F=z;let R,G,H,V,W,J,$,Y,X,Z,Q,K,ee,te,ae,ne,ie;if(t[17]!==l||t[18]!==d||t[19]!==w||t[20]!==F||t[21]!==b||t[22]!==p||t[23]!==A||t[24]!==r||t[25]!==n||t[26]!==g||t[27]!==i){const e=e=>{const t=[...p];t.splice(e,1),_(t);const a={...w};delete a[e],a.maxImagesReached&&delete a.maxImagesReached,j(a);const n={...b};delete n[e],y(n)};let a;t[37]!==A?(a=e=>{A&&(P(e),C(!0))},t[37]=A,t[38]=a):a=t[38];const s=a;let u,h;t[39]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{C(!1),P("")},t[39]=u):u=t[39],R=u,t[40]!==l||t[41]!==p||t[42]!==n||t[43]!==i?(h=e=>{if(e.preventDefault(),!l.trim())return void N("Текст поста не может быть пустым");const t={title:i.trim()||null,content:l.trim(),imageUrls:p.length>0?p:null,image_url:1===p.length?p[0]:null};n(t)},t[40]=l,t[41]=p,t[42]=n,t[43]=i,t[44]=h):h=t[44];let f,x,v;X=di.editPostFormContainer,G=h,H=di.editPostForm,t[45]===Symbol.for("react.memo_cache_sentinel")?(f=e=>o(e.target.value),t[45]=f):f=t[45],t[46]!==r||t[47]!==i?(V=re.jsx("input",{type:"text",className:di.titleInput,value:i,onChange:f,placeholder:"Заголовок (необязательно)",disabled:r}),t[46]=r,t[47]=i,t[48]=V):V=t[48],t[49]===Symbol.for("react.memo_cache_sentinel")?(x=e=>c(e.target.value),t[49]=x):x=t[49],t[50]!==l||t[51]!==r?(W=re.jsx("textarea",{className:di.contentInput,value:l,onChange:x,placeholder:"Текст поста",disabled:r,required:!0}),t[50]=l,t[51]=r,t[52]=W):W=t[52],t[53]===Symbol.for("react.memo_cache_sentinel")?(v=e=>m(e.target.value),t[53]=v):v=t[53];const k=r||p.length>=5;let S;t[54]!==d||t[55]!==k?(S=re.jsx("input",{type:"text",className:di.imageUrlInput,value:d,onChange:v,placeholder:"URL изображения (необязательно)",disabled:k}),t[54]=d,t[55]=k,t[56]=S):S=t[56];const E=!d.trim()||r||p.length>=5;let I,B;t[57]===Symbol.for("react.memo_cache_sentinel")?(I=re.jsx(He,{}),t[57]=I):I=t[57],t[58]!==F||t[59]!==E?(B=re.jsxs("button",{className:di.addImageButton,onClick:F,disabled:E,children:[I," Добавить"]}),t[58]=F,t[59]=E,t[60]=B):B=t[60],t[61]!==S||t[62]!==B?(J=re.jsxs("div",{className:di.imageUrlInputContainer,children:[S,B]}),t[61]=S,t[62]=B,t[63]=J):J=t[63],t[64]!==w.maxImagesReached?($=w.maxImagesReached&&re.jsx("div",{className:di.errorNote,children:w.maxImagesReached}),t[64]=w.maxImagesReached,t[65]=$):$=t[65],Y=p.length>0&&re.jsxs("div",{className:di.imageGalleryContainer,children:[p.map(((t,a)=>re.jsxs("div",{className:di.imagePreviewItem,children:[re.jsxs("div",{className:di.imagePreview,children:[b[a]&&re.jsx("div",{className:di.imageLoading,children:"Загрузка..."}),re.jsx("img",{src:g[a]||t,alt:"Изображение ".concat(a+1),onLoad:()=>T(a),onError:()=>M(a),style:{display:b[a]?"none":"block",cursor:A?"pointer":"default"},onClick:()=>s(g[a]||t)}),re.jsx("button",{className:di.removeImageButton,onClick:()=>e(a),disabled:r,children:re.jsx(_e,{})})]}),w[a]&&re.jsx("div",{className:di.errorNote,children:w[a]})]},a))),re.jsxs("div",{className:di.imageNote,children:[re.jsx(Ge,{})," Максимум ",5," изображений."]})]}),t[17]=l,t[18]=d,t[19]=w,t[20]=F,t[21]=b,t[22]=p,t[23]=A,t[24]=r,t[25]=n,t[26]=g,t[27]=i,t[28]=R,t[29]=G,t[30]=H,t[31]=V,t[32]=W,t[33]=J,t[34]=$,t[35]=Y,t[36]=X}else R=t[28],G=t[29],H=t[30],V=t[31],W=t[32],J=t[33],$=t[34],Y=t[35],X=t[36];return t[66]!==k?(Z=k&&re.jsxs("div",{className:di.errorMessage,children:[re.jsx(be,{})," ",k]}),t[66]=k,t[67]=Z):Z=t[67],t[68]!==r||t[69]!==s?(Q=re.jsx("button",{type:"button",className:di.cancelButton,onClick:s,disabled:r,children:"Отмена"}),t[68]=r,t[69]=s,t[70]=Q):Q=t[70],t[71]!==r?(K=r?re.jsxs(re.Fragment,{children:[re.jsx(Be,{className:di.spinnerIcon})," Сохранение..."]}):re.jsxs(re.Fragment,{children:[re.jsx(Re,{})," Сохранить"]}),t[71]=r,t[72]=K):K=t[72],t[73]!==r||t[74]!==K?(ee=re.jsx("button",{type:"submit",className:di.submitButton,disabled:r,children:K}),t[73]=r,t[74]=K,t[75]=ee):ee=t[75],t[76]!==Q||t[77]!==ee?(te=re.jsxs("div",{className:di.formActions,children:[Q,ee]}),t[76]=Q,t[77]=ee,t[78]=te):te=t[78],t[79]!==G||t[80]!==H||t[81]!==V||t[82]!==W||t[83]!==J||t[84]!==$||t[85]!==Y||t[86]!==Z||t[87]!==te?(ae=re.jsxs("form",{onSubmit:G,className:H,children:[V,W,J,$,Y,Z,te]}),t[79]=G,t[80]=H,t[81]=V,t[82]=W,t[83]=J,t[84]=$,t[85]=Y,t[86]=Z,t[87]=te,t[88]=ae):ae=t[88],t[89]!==R||t[90]!==E||t[91]!==S?(ne=S&&E&&re.jsx(pi,{imageUrl:E,onClose:R}),t[89]=R,t[90]=E,t[91]=S,t[92]=ne):ne=t[92],t[93]!==X||t[94]!==ae||t[95]!==ne?(ie=re.jsxs("div",{className:X,children:[ae,ne]}),t[93]=X,t[94]=ae,t[95]=ne,t[96]=ie):ie=t[96],ie};function hi(e){return e.stopPropagation()}function gi(e){return Wr(e)}function fi(e){return{...e,maxImagesReached:"Максимальное количество изображений: 5"}}const xi=e=>{var t,a,n,s;const r=se.c(85),{post:i,onSave:o,onCancel:l,isSubmitting:c}=e,[d,m]=le.useState(i.title||""),[u,p]=le.useState(i.content||""),[_,h]=le.useState((null==(t=i.poll_data)?void 0:t.question)||"");let g;r[0]!==(null==(a=i.poll_data)?void 0:a.options)?(g=(null==(n=i.poll_data)?void 0:n.options)||["",""],r[0]=null==(s=i.poll_data)?void 0:s.options,r[1]=g):g=r[1];const[f,x]=le.useState(g),[b,y]=le.useState("");let v,w,j;r[2]!==_||r[3]!==d?(v=()=>{""===_&&""!==d&&h(d)},w=[d,_],r[2]=_,r[3]=d,r[4]=v,r[5]=w):(v=r[4],w=r[5]),le.useEffect(v,w),r[6]!==f?(j=()=>{f.length<10&&x([...f,""])},r[6]=f,r[7]=j):j=r[7];const k=j;let N;r[8]!==f?(N=e=>{if(f.length>2){const t=[...f];t.splice(e,1),x(t)}},r[8]=f,r[9]=N):N=r[9];const S=N;let C,E,P,A,I,B,O,q,D,U,T,L,M,z,F,R,G,H,V,W;if(r[10]!==u||r[11]!==b||r[12]!==S||r[13]!==c||r[14]!==o||r[15]!==f||r[16]!==_||r[17]!==d){const e=(e,t)=>{const a=[...f];a[e]=t,x(a)};let t;r[28]!==u||r[29]!==o||r[30]!==f||r[31]!==_||r[32]!==d?(t=e=>{if(e.preventDefault(),!d.trim()&&!_.trim())return void y("Заголовок или вопрос опроса не может быть пустым");if(f.filter(bi).length<2)return void y("Требуется минимум два варианта ответа для опроса");const t={question:_.trim()||d.trim(),options:f.filter(yi)},a={title:d.trim(),content:u||"",poll:t};o(a)},r[28]=u,r[29]=o,r[30]=f,r[31]=_,r[32]=d,r[33]=t):t=r[33];const a=t;let n,s,i,l;I=di.editPostForm,r[34]!==b?(B=b&&re.jsxs("div",{className:di.errorMessage,children:[re.jsx(be,{})," ",b]}),r[34]=b,r[35]=B):B=r[35],E=a,r[36]===Symbol.for("react.memo_cache_sentinel")?(n=e=>m(e.target.value),r[36]=n):n=r[36],r[37]!==c||r[38]!==d?(P=re.jsx("input",{type:"text",className:di.titleInput,value:d,onChange:n,placeholder:"Заголовок опроса",disabled:c,required:!0}),r[37]=c,r[38]=d,r[39]=P):P=r[39],r[40]===Symbol.for("react.memo_cache_sentinel")?(s=e=>p(e.target.value),r[40]=s):s=r[40],r[41]!==u||r[42]!==c?(A=re.jsx("textarea",{className:di.contentInput,value:u,onChange:s,placeholder:"Дополнительное описание (необязательно)",disabled:c}),r[41]=u,r[42]=c,r[43]=A):A=r[43],U=di.pollContainer,r[44]===Symbol.for("react.memo_cache_sentinel")?(i=re.jsx(We,{}),r[44]=i):i=r[44],r[45]===Symbol.for("react.memo_cache_sentinel")?(l=e=>h(e.target.value),r[45]=l):l=r[45],r[46]!==c||r[47]!==_?(C=re.jsxs("div",{className:di.inputWithIcon,children:[i,re.jsx("input",{type:"text",className:di.pollQuestionInput,value:_,onChange:l,placeholder:"Вопрос опроса (если отличается от заголовка)",disabled:c})]}),r[46]=c,r[47]=_,r[48]=C):C=r[48],O=di.pollOptions,r[49]===Symbol.for("react.memo_cache_sentinel")?(q=re.jsxs("div",{className:di.sectionLabel,children:[re.jsx(Je,{})," Варианты ответа:"]}),r[49]=q):q=r[49],D=f.map(((t,a)=>re.jsxs("div",{className:di.pollOptionInputWrapper,children:[re.jsx("input",{type:"text",className:di.pollOptionInput,value:t,onChange:t=>e(a,t.target.value),placeholder:"Вариант ".concat(a+1),disabled:c,required:a<2}),f.length>2&&re.jsx("button",{type:"button",className:di.removeOptionButton,onClick:()=>S(a),disabled:c,children:re.jsx(_e,{})})]},a))),r[10]=u,r[11]=b,r[12]=S,r[13]=c,r[14]=o,r[15]=f,r[16]=_,r[17]=d,r[18]=C,r[19]=E,r[20]=P,r[21]=A,r[22]=I,r[23]=B,r[24]=O,r[25]=q,r[26]=D,r[27]=U}else C=r[18],E=r[19],P=r[20],A=r[21],I=r[22],B=r[23],O=r[24],q=r[25],D=r[26],U=r[27];return r[50]!==O||r[51]!==q||r[52]!==D?(T=re.jsxs("div",{className:O,children:[q,D]}),r[50]=O,r[51]=q,r[52]=D,r[53]=T):T=r[53],r[54]!==k||r[55]!==c||r[56]!==f.length?(L=f.length<10&&re.jsxs("button",{type:"button",className:di.addOptionButton,onClick:k,disabled:c,children:[re.jsx(He,{})," Добавить вариант"]}),r[54]=k,r[55]=c,r[56]=f.length,r[57]=L):L=r[57],r[58]!==C||r[59]!==T||r[60]!==L||r[61]!==U?(M=re.jsxs("div",{className:U,children:[C,T,L]}),r[58]=C,r[59]=T,r[60]=L,r[61]=U,r[62]=M):M=r[62],r[63]===Symbol.for("react.memo_cache_sentinel")?(z=re.jsx(_e,{}),r[63]=z):z=r[63],r[64]!==c||r[65]!==l?(F=re.jsxs("button",{type:"button",className:di.cancelEditButton,onClick:l,disabled:c,children:[z," Отмена"]}),r[64]=c,r[65]=l,r[66]=F):F=r[66],r[67]!==c?(R=c?re.jsxs(re.Fragment,{children:[re.jsx(Be,{})," Сохранение..."]}):re.jsxs(re.Fragment,{children:[re.jsx(Re,{})," Сохранить"]}),r[67]=c,r[68]=R):R=r[68],r[69]!==c||r[70]!==R?(G=re.jsx("button",{type:"submit",className:di.submitButton,disabled:c,children:R}),r[69]=c,r[70]=R,r[71]=G):G=r[71],r[72]!==F||r[73]!==G?(H=re.jsxs("div",{className:di.formOptions,children:[F,G]}),r[72]=F,r[73]=G,r[74]=H):H=r[74],r[75]!==E||r[76]!==P||r[77]!==A||r[78]!==M||r[79]!==H?(V=re.jsxs("form",{onSubmit:E,children:[P,A,M,H]}),r[75]=E,r[76]=P,r[77]=A,r[78]=M,r[79]=H,r[80]=V):V=r[80],r[81]!==I||r[82]!==B||r[83]!==V?(W=re.jsxs("div",{className:I,children:[B,V]}),r[81]=I,r[82]=B,r[83]=V,r[84]=W):W=r[84],W};function bi(e){return""!==e.trim()}function yi(e){return""!==e.trim()}const vi=Le.div(q||(q=ae(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(135deg, rgba(33, 33, 38, 0.85) 0%, rgba(68, 68, 77, 0.85) 100%);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 10000;\n  backdrop-filter: blur(8px);\n  box-sizing: border-box;\n  perspective: 1000px;\n"]))),wi=Le.div(D||(D=ae(["\n  position: relative;\n  max-width: 90vw;\n  max-height: 90vh;\n  width: auto;\n  height: auto;\n  border-radius: 12px;\n  background: rgba(25, 25, 30, 0.8);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  \n  @media (max-width: 768px) {\n    max-width: 95vw;\n    padding: 15px;\n    border-radius: 8px;\n  }\n"]))),ji=Le.button(U||(U=ae(["\n  position: absolute;\n  top: 15px;\n  right: 15px;\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  font-size: 20px;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  cursor: pointer;\n  z-index: 10;\n  transition: all 0.2s;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.4);\n    transform: scale(1.05);\n  }\n  \n  @media (max-width: 768px) {\n    top: 10px;\n    right: 10px;\n    width: 32px;\n    height: 32px;\n    font-size: 18px;\n  }\n"]))),ki=Le.button(T||(T=ae(["\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  background: rgba(255, 255, 255, 0.2);\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  font-size: 20px;\n  transition: all 0.2s;\n  z-index: 10;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.4);\n  }\n  \n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n  \n  &.prev {\n    left: 15px;\n  }\n  \n  &.next {\n    right: 15px;\n  }\n  \n  @media (max-width: 768px) {\n    width: 36px;\n    height: 36px;\n    font-size: 18px;\n    \n    &.prev {\n      left: 10px;\n    }\n    \n    &.next {\n      right: 10px;\n    }\n  }\n"]))),Ni=Le.div(L||(L=ae(["\n  position: relative;\n  max-width: 100%;\n  max-height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Si=Le(ie.img)(M||(M=ae(["\n  max-width: 100%;\n  max-height: 70vh;\n  object-fit: contain;\n  border-radius: 4px;\n  \n  @media (max-width: 768px) {\n    max-height: 80vh;\n  }\n"]))),Ci=Le.div(z||(z=ae(["\n  position: absolute;\n  bottom: 15px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.6);\n  color: white;\n  padding: 6px 12px;\n  border-radius: 20px;\n  font-size: 14px;\n  \n  @media (max-width: 768px) {\n    bottom: 10px;\n    padding: 4px 10px;\n    font-size: 12px;\n  }\n"]))),Ei=e=>{const t=se.c(56),{images:a,initialIndex:n,onClose:s,singleImage:r}=e;let i;t[0]!==a?(i=void 0===a?[]:a,t[0]=a,t[1]=i):i=t[1];const o=i,l=void 0===n?0:n,c=void 0===r?null:r;let d;t[2]!==o||t[3]!==c?(d=c?[c]:o,t[2]=o,t[3]=c,t[4]=d):d=t[4];const m=d,[u,p]=le.useState(l);let _;t[5]!==u?(_=()=>{u>0&&p(u-1)},t[5]=u,t[6]=_):_=t[6];const h=_;let g;t[7]!==u||t[8]!==m.length?(g=()=>{u<m.length-1&&p(u+1)},t[7]=u,t[8]=m.length,t[9]=g):g=t[9];const f=g;let x,b,y;t[10]!==f||t[11]!==h||t[12]!==s?(x=()=>{const e=e=>{e:switch(e.key){case"Escape":s();break e;case"ArrowLeft":h();break e;case"ArrowRight":f()}};return window.addEventListener("keydown",e),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",e),document.body.style.overflow=""}},b=[s,h,f],t[10]=f,t[11]=h,t[12]=s,t[13]=x,t[14]=b):(x=t[13],b=t[14]),le.useEffect(x,b),t[15]!==s?(y=e=>{e.target===e.currentTarget&&s()},t[15]=s,t[16]=y):y=t[16];const v=y;if(!m.length)return null;const w=m.length>1;let j;if(t[17]!==u||t[18]!==v||t[19]!==f||t[20]!==h||t[21]!==m||t[22]!==s||t[23]!==w){let e,a,n;t[25]===Symbol.for("react.memo_cache_sentinel")?(e=re.jsx(_e,{}),t[25]=e):e=t[25],t[26]!==s?(a=re.jsx(ji,{onClick:s,children:e}),t[26]=s,t[27]=a):a=t[27],t[28]!==u||t[29]!==f||t[30]!==h||t[31]!==m.length||t[32]!==w?(n=w&&re.jsxs(re.Fragment,{children:[re.jsx(ki,{className:"prev",onClick:e=>{e.stopPropagation(),h()},disabled:0===u,children:re.jsx($e,{})}),re.jsx(ki,{className:"next",onClick:e=>{e.stopPropagation(),f()},disabled:u===m.length-1,children:re.jsx(Ye,{})})]}),t[28]=u,t[29]=f,t[30]=h,t[31]=m.length,t[32]=w,t[33]=n):n=t[33];const r="lightbox-image-".concat(u),i=m[u],o="Изображение ".concat(u+1);let l,c,d,p,_,g,x,b,y;t[34]===Symbol.for("react.memo_cache_sentinel")?(l={opacity:0,scale:.9},c={opacity:1,scale:1},d={opacity:0,scale:.9},p={duration:.3},t[34]=l,t[35]=c,t[36]=d,t[37]=p):(l=t[34],c=t[35],d=t[36],p=t[37]),t[38]!==r||t[39]!==i||t[40]!==o?(_=re.jsx(oe,{mode:"wait",children:re.jsx(Si,{src:i,alt:o,initial:l,animate:c,exit:d,transition:p},r)}),t[38]=r,t[39]=i,t[40]=o,t[41]=_):_=t[41],t[42]!==u||t[43]!==m.length||t[44]!==w?(g=w&&re.jsxs(Ci,{children:[u+1," / ",m.length]}),t[42]=u,t[43]=m.length,t[44]=w,t[45]=g):g=t[45],t[46]!==n||t[47]!==_||t[48]!==g?(x=re.jsxs(Ni,{children:[n,_,g]}),t[46]=n,t[47]=_,t[48]=g,t[49]=x):x=t[49],t[50]!==a||t[51]!==x?(b=re.jsxs(wi,{onClick:Pi,children:[a,x]}),t[50]=a,t[51]=x,t[52]=b):b=t[52],t[53]!==v||t[54]!==b?(y=re.jsx(vi,{onClick:v,children:b}),t[53]=v,t[54]=b,t[55]=y):y=t[55],j=de.createPortal(y,document.getElementById("modal-root")||document.body),t[17]=u,t[18]=v,t[19]=f,t[20]=h,t[21]=m,t[22]=s,t[23]=w,t[24]=j}else j=t[24];return j};function Pi(e){return e.stopPropagation()}const Ai=({post:e,onLikeToggle:t,fullView:a=!1,onDelete:n,onPinChange:s,onUpdate:r})=>{var i;const{user:o,isAuthenticated:l}=gs(),[c,d]=le.useState(!1),[m,u]=le.useState(e.likes_count||0),[p,_]=le.useState(a),[h,g]=le.useState(e.is_pinned||!1),[f,x]=le.useState(!1),[b,y]=le.useState([]),[v,w]=le.useState(e.comments_count||0),[j,k]=le.useState(0),[N,S]=le.useState(""),[C,E]=le.useState(!1),[P,A]=le.useState(!1),[I,B]=le.useState(!1),[O,q]=le.useState(!1),[D,U]=le.useState(!1),[T,L]=le.useState(""),[M,z]=le.useState(!1),[F,R]=le.useState(""),[G,H]=le.useState(""),[V,W]=le.useState(!1),[J,$]=le.useState(!1),[Y,X]=le.useState(!1),[Z,Q]=le.useState(null),[K,ee]=le.useState([]),[te,ae]=le.useState(!1),[ne,se]=le.useState(!1),[ie,ce]=le.useState(""),[de,ue]=le.useState(window.innerWidth>=1024),[pe,_e]=le.useState(0),he=e.title&&e.title.trim().length>0,ge=l&&o&&("igoraor79@gmail.com"===o.email||(null==(i=o.perks)?void 0:i.includes("admin"))||"admin"===o.activePerk),xe=e.styling||{},ye=xe.titleColor||"#000000",ve=xe.contentColor||"#000000",we=xe.fontFamily||"inherit",je=Yr(ye),ke=Yr(ve),[Ne,Ce]=le.useState(window.innerWidth<=768),Ee=!!e.poll_data;le.useEffect((()=>{const e=()=>{Ce(window.innerWidth<=768),ue(window.innerWidth>=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),le.useEffect((()=>{const t=()=>{L(Jr(e.created_at,Ne))};t();const a=setInterval(t,6e4);return()=>clearInterval(a)}),[e.created_at,Ne]),le.useEffect((()=>{(async()=>{if(l&&o)try{const{liked:t}=await hr.isLikedByUser(e.id,o.id);d(t)}catch(t){}})()}),[e.id,o,l]),le.useEffect((()=>{e.poll_data&&(async()=>{if(e.poll_data&&l&&o)try{const{hasVoted:t,option:a,results:n}=await hr.getPollVoteStatus(e.id,o.id);X(t),Q(a),ee(n);const s=n.some((e=>e.votes>0));ae(s)}catch(t){try{const{results:t}=await hr.getPollResults(e.id);ee(t);const a=t.some((e=>e.votes>0));ae(a)}catch(a){if(e.poll_data&&e.poll_data.options){const t=e.poll_data.options.map((e=>({option:e,votes:0})));ee(t),ae(!1)}}}else if(e.poll_data)try{const{results:t}=await hr.getPollResults(e.id);ee(t);const a=t.some((e=>e.votes>0));ae(a)}catch(n){if(e.poll_data&&e.poll_data.options){const t=e.poll_data.options.map((e=>({option:e,votes:0})));ee(t),ae(!1)}}})()}),[e.id,e.poll_data,o,l]),le.useEffect((()=>{u(e.likes_count||0)}),[e.likes_count]),le.useEffect((()=>{w(e.comments_count||0)}),[e.comments_count]),le.useEffect((()=>{g(e.is_pinned||!1)}),[e.is_pinned]);const Ae=async()=>{if(l)try{const a=!c,n=a?m+1:m-1;d(a),u(n>0?n:0);const s=document.querySelector("#like-".concat(e.id));s&&(s.classList.add(di.likeAnimation),setTimeout((()=>{s.classList.remove(di.likeAnimation)}),1e3));const r=await hr.toggleLike(e.id,o.id);d(r.liked),u(r.likesCount),t&&t(e.id,r.liked,r.likesCount)}catch(a){d(!c);const e=c?m+1:m-1;u(e>0?e:0)}else R("like")},Ie=()=>{p?_(!1):(E(!0),(async()=>{if(b.length>0&&!p)return _(!0),void E(!1);try{E(!0);const t=await kr.getCommentsByPostId(e.id);let a=0;t.forEach((e=>{e.replies&&(a+=e.replies.length)})),k(t.length);const n=t.length+a;w(n),y(t),_(!0)}catch(t){}finally{E(!1)}})())},Oe=async t=>{if(l)try{const a=await hr.votePoll(e.id,t);if(!a.success)throw new Error(a.message||"Ошибка при голосовании");X(!0),Q(t),ee(a.results),ae(!0)}catch(a){alert("Не удалось проголосовать: ".concat(a.message||"Неизвестная ошибка"))}else R("poll")},qe=async t=>{if(t.preventDefault(),l)if(N.trim())try{q(!0),H("");const t=jr(N,o),a=await kr.createComment({content:t,postId:e.id,userId:o.id});y([a,...b]),k((e=>e+1)),w((e=>e+1)),S("")}catch(a){H("Не удалось отправить комментарий")}finally{q(!1)}else H("Комментарий не может быть пустым");else H("Войдите, чтобы оставить комментарий")},De=async(t,a)=>{if(l)try{const n=jr(a,o),s=await kr.replyToComment({content:n,commentId:t,postId:e.id,userId:o.id}),r=b.map((e=>{if(e.id===t){const t=e.replies||[];return{...e,replies:[...t,s]}}return e}));return y(r),w((e=>e+1)),s}catch(n){throw n}else R("reply")},Ue=e=>{var t;const a=b.findIndex((t=>t.id===e));if(-1!==a){const n=(null==(t=b[a].replies)?void 0:t.length)||0;y(b.filter((t=>t.id!==e))),k((e=>e-1)),w((e=>e-(1+n)))}else{const t=b.map((t=>t.replies&&t.replies.some((t=>t.id===e))?{...t,replies:t.replies.filter((t=>t.id!==e))}:t));y(t),w((e=>e-1))}},Te=async()=>{if(ge)try{if(B(!0),h){(await hr.unpinPost(e.id)).success&&(g(!1),s&&s(e.id,!1))}else{const t=await hr.pinPost(e.id);t.success&&(g(!0),s&&s(e.id,!0,t.previousPinnedId))}}catch(t){alert("Не удалось изменить статус закрепления: "+(t.message||"Неизвестная ошибка"))}finally{B(!1)}};le.useEffect((()=>{const t=()=>{L(Jr(e.created_at,Ne))};return window.addEventListener("themechange",t),()=>{window.removeEventListener("themechange",t)}}),[e.created_at,Ne]);const Le=async t=>{if(ge)try{U(!0);const a=await hr.updatePost(e.id,t);if(!a||!a.success)throw new Error("Не удалось обновить пост");r&&r(a.post),x(!1)}catch(a){alert("Не удалось обновить пост: "+(a.message||"Неизвестная ошибка"))}finally{U(!1)}},Me=()=>{ge&&(Ee?ze():x(!f))},ze=async()=>{try{U(!0);const{results:t}=await hr.getPollResults(e.id);t.reduce(((e,t)=>e+t.votes),0)>=1?W(!0):x(!0)}catch(t){$(!0)}finally{U(!1)}},Ge=le.useCallback(((t,a=0)=>{e.image_urls&&e.image_urls.length>0?(ce(""),se(!0),_e(a)):e.image_url&&(ce(e.image_url),se(!0)),document.body.style.overflow="hidden"}),[e.image_url,e.image_urls]),He=le.useCallback((()=>{se(!1),ce(""),_e(0),document.body.style.overflow=""}),[]),Ve=()=>re.jsxs(re.Fragment,{children:[re.jsxs("div",{className:di.postHeader,children:[re.jsxs(me,{to:"/profile/".concat(e.user_id),className:di.authorInfo,children:[re.jsx(Fs,{src:e.author.avatar,alt:e.author.displayName,className:di.avatar}),re.jsx("span",{className:"early_user"===e.author.activePerk?Ls:"sponsor"===e.author.activePerk?Ts:"admin"===e.author.activePerk?Ms:zs,style:{display:"inline-block",margin:0,padding:0},children:e.author.displayName})]}),re.jsxs("div",{className:di.postMeta,children:[h&&re.jsxs(Fr,{children:[re.jsx(Xe,{})," Закреплено"]}),re.jsxs("span",{className:di.postDate,children:[re.jsx(fe,{})," ",T]})]})]}),he&&re.jsx("h2",{className:di.postTitle,style:{color:ye,fontFamily:we},children:re.jsx("span",{className:je?di.darkTextConversion:"",children:e.title})}),re.jsx("div",{className:di.postContent,style:{color:ve,fontFamily:we},children:re.jsx("span",{className:ke?di.darkTextConversion:"",children:e.content})}),e.image_url&&!e.image_urls&&re.jsx("div",{className:di.postImage,onClick:()=>Ge(e.image_url),children:re.jsx(ui,{src:e.image_url,alt:"Изображение к посту",className:di.postImage,style:{display:"block"}})}),e.image_urls&&e.image_urls.length>0&&re.jsx("div",{className:di.imageGalleryContainer,children:e.image_urls.map(((e,t)=>re.jsx("div",{className:di.imagePreviewItem,children:re.jsx("div",{className:di.imagePreview,onClick:()=>Ge(e,t),children:re.jsx(ui,{src:e,alt:"Изображение ".concat(t+1),className:di.postImage})})},t)))}),e.poll_data&&re.jsx("div",{className:di.pollContainer,children:re.jsx(Xr,{poll:{...e.poll_data,hideQuestion:e.title&&e.poll_data.question===e.title},postId:e.id,onVote:Oe,hasVoted:Y,votedOption:Z,results:K,isAdmin:ge,user:o})})]}),We=()=>re.jsxs("div",{className:di.postActions,children:[re.jsxs("div",{className:di.actionButtons,children:[re.jsxs("button",{id:"like-".concat(e.id),className:"".concat(di.likeButton," ").concat(c?di.liked:""),onClick:Ae,children:[re.jsx(Ze,{})," ",re.jsx("span",{className:di.likeCount,children:m})]}),re.jsxs("button",{className:di.commentButton,onClick:Ie,children:[re.jsx(Se,{})," ",re.jsx("span",{children:v})]}),l&&ge&&re.jsxs(Mr,{onClick:Te,disabled:I,$isPinned:h,children:[re.jsx(Xe,{})," ",h?"Открепить":"Закрепить"]})]}),l&&ge&&re.jsxs("div",{className:di.adminActions,children:[(!Ee||Ee&&!te)&&re.jsx("button",{className:di.editButton,onClick:Me,disabled:f||D,children:D?re.jsxs(re.Fragment,{children:[re.jsx(Be,{})," Проверка..."]}):re.jsxs(re.Fragment,{children:[re.jsx(Pe,{})," Изменить"]})}),re.jsxs("button",{className:di.deleteButton,onClick:e=>{e.preventDefault(),e.stopPropagation(),z(!0)},disabled:P,style:{cursor:"pointer",transition:"all 0.2s ease",background:P?"rgba(0, 0, 0, 0.05)":"transparent"},onMouseOver:e=>{e.currentTarget.style.background="rgba(231, 76, 60, 0.1)",e.currentTarget.style.color="#e74c3c"},onMouseOut:e=>{e.currentTarget.style.background=P?"rgba(0, 0, 0, 0.05)":"transparent",e.currentTarget.style.color=""},children:[re.jsx(Fe,{style:{verticalAlign:"middle"}})," ",P?"Удаление...":"Удалить"]})]})]}),Je=()=>re.jsx(oe,{children:p&&re.jsx(Gr,{variants:Hr,initial:"initial",animate:"animate",exit:"exit",children:re.jsxs("div",{className:di.commentsSection,children:[re.jsxs("h4",{className:di.commentsHeading,children:[re.jsx(Qe,{})," Комментарии (",v,")"]}),C?re.jsxs("div",{className:di.loadingComments,children:[re.jsx(Be,{})," Загрузка комментариев..."]}):re.jsxs(re.Fragment,{children:[b&&b.length>0?re.jsx("div",{className:di.commentsList,children:b.map((e=>re.jsx(mi,{comment:e,onReply:De,onDelete:Ue},e.id)))}):re.jsx("div",{className:di.noComments,children:"Комментариев пока нет. Будьте первым!"}),l&&re.jsxs("form",{onSubmit:qe,className:di.commentForm,children:[G&&re.jsxs("div",{className:di.errorMessage,children:[re.jsx(be,{})," ",G]}),re.jsx("textarea",{value:N,onChange:e=>S(e.target.value),placeholder:"Напишите комментарий...",disabled:O}),re.jsx("button",{type:"submit",disabled:O,children:O?re.jsxs(re.Fragment,{children:[re.jsx(Be,{})," Отправка..."]}):re.jsxs(re.Fragment,{children:[re.jsx(Re,{})," Отправить"]})})]})]})]})})});return re.jsxs(re.Fragment,{children:[M&&re.jsx(li,{title:"Удаление поста",message:"Вы уверены, что хотите удалить этот пост? Это действие нельзя отменить.",confirmText:"Удалить",cancelText:"Отмена",onConfirm:async()=>{try{A(!0);if(!(await hr.deletePost(e.id)).success)throw new Error("Не удалось удалить пост");n&&n(e.id),z(!1)}catch(t){alert("Не удалось удалить пост: "+(t.message||"Попробуйте позже."))}finally{A(!1)}},onClose:()=>z(!1),isOpen:M,isDanger:!0}),V&&re.jsx(li,{title:"Редактирование невозможно",message:"Нельзя редактировать опрос, в котором уже есть голоса.",confirmText:"Понятно",onConfirm:()=>W(!1),onClose:()=>W(!1),isOpen:V,hideCancel:!0}),J&&re.jsx(li,{title:"Ошибка проверки",message:"Не удалось проверить статус опроса. Попробуйте позже.",confirmText:"Понятно",onConfirm:()=>$(!1),onClose:()=>$(!1),isOpen:J,hideCancel:!0}),h?re.jsx(Rr,{children:re.jsxs("div",{className:"".concat(di.postItem," ").concat(di.pinnedPost),children:[f?Ee?re.jsx(xi,{post:e,onSave:Le,onCancel:()=>x(!1),isSubmitting:D}):re.jsx(_i,{post:e,onSave:Le,onCancel:()=>x(!1),isSubmitting:D}):Ve(),!f&&We(),Je(),F&&re.jsx(As,{type:"info",message:"like"===F?"Войдите, чтобы поставить лайк":"poll"===F?"Войдите, чтобы проголосовать":"Войдите, чтобы ответить на комментарий",show:!!F,onClose:()=>R("")})]})}):re.jsxs("div",{className:di.postItem,children:[f?Ee?re.jsx(xi,{post:e,onSave:Le,onCancel:()=>x(!1),isSubmitting:D}):re.jsx(_i,{post:e,onSave:Le,onCancel:()=>x(!1),isSubmitting:D}):Ve(),!f&&We(),Je(),F&&re.jsx(As,{type:"info",message:"like"===F?"Войдите, чтобы поставить лайк":"poll"===F?"Войдите, чтобы проголосовать":"Войдите, чтобы ответить на комментарий",show:!!F,onClose:()=>R("")})]}),ne&&(e.image_urls&&e.image_urls.length>0?re.jsx(Ei,{images:e.image_urls,initialIndex:pe,onClose:He}):ie&&re.jsx(Ei,{singleImage:ie,onClose:He}))]})},Ii=new Map,Bi=[{name:"По умолчанию",value:"inherit"},{name:"Arial",value:"Arial, sans-serif"},{name:"Times New Roman",value:"Times New Roman, serif"},{name:"Courier New",value:"Courier New, monospace"},{name:"Georgia",value:"Georgia, serif"},{name:"Verdana",value:"Verdana, sans-serif"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Montserrat",value:"'Montserrat', sans-serif"},{name:"Poppins",value:"'Poppins', sans-serif"},{name:"Source Sans Pro",value:"'Source Sans Pro', sans-serif"},{name:"Ubuntu",value:"'Ubuntu', sans-serif"},{name:"Raleway",value:"'Raleway', sans-serif"},{name:"Nunito",value:"'Nunito', sans-serif"}],Oi=e=>{if(!e)return!1;let t=e.replace("#","");3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);return(.299*parseInt(t.substring(0,2),16)+.587*parseInt(t.substring(2,4),16)+.114*parseInt(t.substring(4,6),16))/255<.5},qi=e=>{const t=se.c(14),{imageUrl:a,onClose:n}=e;let s,r,i,o,l,c,d;return t[0]!==n?(s=()=>{const e=e=>{"Escape"===e.key&&n()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},r=[n],t[0]=n,t[1]=s,t[2]=r):(s=t[1],r=t[2]),le.useEffect(s,r),t[3]===Symbol.for("react.memo_cache_sentinel")?(i=re.jsx(Ve,{}),t[3]=i):i=t[3],t[4]!==n?(o=re.jsx("button",{className:di.lightboxCloseButton,onClick:n,children:i}),t[4]=n,t[5]=o):o=t[5],t[6]!==a?(l=re.jsx("img",{src:a,alt:"Увеличенное изображение",className:di.lightboxImage,onClick:Ui}),t[6]=a,t[7]=l):l=t[7],t[8]!==o||t[9]!==l?(c=re.jsxs("div",{className:di.lightboxContainer,children:[o,l]}),t[8]=o,t[9]=l,t[10]=c):c=t[10],t[11]!==n||t[12]!==c?(d=re.jsx("div",{className:di.lightboxOverlay,onClick:n,children:c}),t[11]=n,t[12]=c,t[13]=d):d=t[13],d},Di=e=>{const t=se.c(53),{imageUrls:a,setImageUrls:n,isSubmitting:s}=e,[r,i]=le.useState("");let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],t[0]=o):o=t[0];const[l,c]=le.useState(o);let d;t[1]===Symbol.for("react.memo_cache_sentinel")?(d={},t[1]=d):d=t[1];const[m,u]=le.useState(d);let p;t[2]===Symbol.for("react.memo_cache_sentinel")?(p={},t[2]=p):p=t[2];const[_,h]=le.useState(p),[g,f]=le.useState(!1),[x,b]=le.useState(""),[y,v]=le.useState(!0);let w,j,k,N,S;t[3]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{const e=()=>{v(window.innerWidth>=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},j=[],t[3]=w,t[4]=j):(w=t[3],j=t[4]),le.useEffect(w,j),t[5]!==a?(k=()=>{const e=a.map(Ti);c(e);const t={};a.forEach(((e,a)=>{t[a]=!0})),u(t);const n=setTimeout((()=>{const e={};a.forEach(((t,a)=>{e[a]=!1})),u(e)}),5e3);return()=>clearTimeout(n)},N=[a],t[5]=a,t[6]=k,t[7]=N):(k=t[6],N=t[7]),le.useEffect(k,N),t[8]===Symbol.for("react.memo_cache_sentinel")?(S=e=>{u((t=>({...t,[e]:!1})))},t[8]=S):S=t[8];const C=S;let E;t[9]===Symbol.for("react.memo_cache_sentinel")?(E=e=>{u((t=>({...t,[e]:!1}))),h((t=>({...t,[e]:"Ошибка загрузки изображения. Проверьте URL."})))},t[9]=E):E=t[9];const P=E;let A;t[10]!==r||t[11]!==_||t[12]!==a||t[13]!==n?(A=e=>{if(e.preventDefault(),r.trim()){if(a.length>=5)return void h(Li);if(n([...a,r.trim()]),i(""),_.maxImagesReached){const e={..._};delete e.maxImagesReached,h(e)}}},t[10]=r,t[11]=_,t[12]=a,t[13]=n,t[14]=A):A=t[14];const I=A;let B,O,q,D,U,T;if(t[15]!==r||t[16]!==_||t[17]!==I||t[18]!==m||t[19]!==a||t[20]!==y||t[21]!==s||t[22]!==l||t[23]!==n){const e=e=>{const t=[...a];t.splice(e,1),n(t);const s={..._};delete s[e],s.maxImagesReached&&delete s.maxImagesReached,h(s);const r={...m};delete r[e],u(r)};let o;t[28]!==y?(o=e=>{y&&(b(e),f(!0))},t[28]=y,t[29]=o):o=t[29];const c=o;let d,p;t[30]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{f(!1),b("")},t[30]=d):d=t[30],B=d,t[31]===Symbol.for("react.memo_cache_sentinel")?(p=e=>i(e.target.value),t[31]=p):p=t[31];const g=s||a.length>=5;let x;t[32]!==r||t[33]!==g?(x=re.jsx("input",{type:"text",className:di.imageUrlInput,value:r,onChange:p,placeholder:"URL изображения (необязательно)",disabled:g}),t[32]=r,t[33]=g,t[34]=x):x=t[34];const v=!r.trim()||s||a.length>=5;let w,j;t[35]===Symbol.for("react.memo_cache_sentinel")?(w=re.jsx(He,{}),t[35]=w):w=t[35],t[36]!==I||t[37]!==v?(j=re.jsxs("button",{className:di.addImageButton,onClick:I,disabled:v,children:[w," Добавить"]}),t[36]=I,t[37]=v,t[38]=j):j=t[38],t[39]!==x||t[40]!==j?(O=re.jsxs("div",{className:di.imageUrlInputContainer,children:[x,j]}),t[39]=x,t[40]=j,t[41]=O):O=t[41],t[42]!==_.maxImagesReached?(q=_.maxImagesReached&&re.jsx("div",{className:di.errorNote,children:_.maxImagesReached}),t[42]=_.maxImagesReached,t[43]=q):q=t[43],D=a.length>0&&re.jsxs("div",{className:di.imageGalleryContainer,children:[a.map(((t,a)=>re.jsxs("div",{className:di.imagePreviewItem,children:[re.jsxs("div",{className:di.imagePreview,children:[m[a]&&re.jsx("div",{className:di.imageLoading,children:"Загрузка..."}),re.jsx("img",{src:l[a]||t,alt:"Изображение ".concat(a+1),onLoad:()=>C(a),onError:()=>P(a),style:{display:m[a]?"none":"block",cursor:y?"pointer":"default"},onClick:()=>c(l[a]||t)}),re.jsx("button",{className:di.removeImageButton,onClick:()=>e(a),disabled:s,children:re.jsx(_e,{})})]}),_[a]&&re.jsx("div",{className:di.errorNote,children:_[a]})]},a))),re.jsxs("div",{className:di.imageNote,children:[re.jsx(Ge,{})," Максимум ",5," изображений."]})]}),t[15]=r,t[16]=_,t[17]=I,t[18]=m,t[19]=a,t[20]=y,t[21]=s,t[22]=l,t[23]=n,t[24]=B,t[25]=O,t[26]=q,t[27]=D}else B=t[24],O=t[25],q=t[26],D=t[27];return t[44]!==B||t[45]!==x||t[46]!==g?(U=g&&x&&re.jsx(qi,{imageUrl:x,onClose:B}),t[44]=B,t[45]=x,t[46]=g,t[47]=U):U=t[47],t[48]!==O||t[49]!==q||t[50]!==D||t[51]!==U?(T=re.jsxs(re.Fragment,{children:[O,q,D,U]}),t[48]=O,t[49]=q,t[50]=D,t[51]=U,t[52]=T):T=t[52],T};function Ui(e){return e.stopPropagation()}function Ti(e){return(e=>{if(!e)return null;if(Ii.has(e))return Ii.get(e);if(e.includes("cloudinary.com"))return Ii.set(e,e),e;try{const t="".concat("https://res.cloudinary.com/do9t8preg/image/fetch/f_auto,q_auto:best,dpr_auto,w_auto,c_limit,w_800/").concat(encodeURIComponent(e));return Ii.set(e,t),t}catch(t){return e}})(e)}function Li(e){return{...e,maxImagesReached:"Максимальное количество изображений: 5"}}const Mi=e=>{const t=se.c(26),{pollOptions:a,setPollOptions:n,isSubmitting:s,selectedFont:r,pollOptionsColor:i}=e;let o;t[0]!==a||t[1]!==n?(o=()=>{a.length<6&&n([...a,""])},t[0]=a,t[1]=n,t[2]=o):o=t[2];const l=o;let c;t[3]!==a||t[4]!==n?(c=e=>{if(a.length>2){const t=[...a];t.splice(e,1),n(t)}},t[3]=a,t[4]=n,t[5]=c):c=t[5];const d=c;let m,u,p,_;if(t[6]!==d||t[7]!==s||t[8]!==a||t[9]!==i||t[10]!==r||t[11]!==n){const e=(e,t)=>{const s=[...a];s[e]=t,n(s)};p=di.pollContainer,m=di.pollOptions,u=a.map(((t,n)=>re.jsx("div",{className:di.pollOption,children:re.jsxs("div",{className:di.pollOptionInputWrapper,children:[re.jsx("input",{type:"text",className:di.pollOptionInput,value:t,onChange:t=>e(n,t.target.value),placeholder:"Вариант ".concat(n+1),disabled:s,style:{color:i,fontFamily:r}}),a.length>2&&re.jsx("button",{type:"button",onClick:()=>d(n),className:di.removeOptionButton,disabled:s,children:re.jsx(Ke,{})})]})},n))),t[6]=d,t[7]=s,t[8]=a,t[9]=i,t[10]=r,t[11]=n,t[12]=m,t[13]=u,t[14]=p}else m=t[12],u=t[13],p=t[14];t[15]!==m||t[16]!==u?(_=re.jsx("div",{className:m,children:u}),t[15]=m,t[16]=u,t[17]=_):_=t[17];const h=s||a.length>=6;let g,f,x;return t[18]===Symbol.for("react.memo_cache_sentinel")?(g=re.jsx(He,{}),t[18]=g):g=t[18],t[19]!==l||t[20]!==h?(f=re.jsxs("button",{type:"button",onClick:l,className:di.addOptionButton,disabled:h,children:[g," Добавить вариант"]}),t[19]=l,t[20]=h,t[21]=f):f=t[21],t[22]!==p||t[23]!==_||t[24]!==f?(x=re.jsxs("div",{className:p,children:[_,f]}),t[22]=p,t[23]=_,t[24]=f,t[25]=x):x=t[25],x},zi="\n  .".concat(di.formOptions," {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    margin-top: 15px;\n  }\n  \n  .").concat(di.formToggles," {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n  \n  .").concat(di.optionToggle," {\n    display: flex;\n    align-items: center;\n    gap: 5px;\n    background-color: rgba(0, 0, 0, 0.03);\n    padding: 6px 10px;\n    border-radius: 4px;\n    font-size: 14px;\n    cursor: pointer;\n    white-space: nowrap;\n    margin-bottom: 5px;\n  }\n  \n  .").concat(di.submitButton," {\n    margin-top: 5px;\n    align-self: flex-end;\n  }\n\n  .").concat(di.imagePreview," {\n    max-width: 100%;\n    margin-top: 10px;\n    border-radius: 8px;\n    overflow: hidden;\n    border: 1px solid #ddd;\n    position: relative;\n  }\n  \n  .").concat(di.imagePreview," img {\n    max-width: 100%;\n    height: auto;\n    display: block;\n  }\n  \n  .").concat(di.imageNote," {\n    font-size: 12px;\n    color: #666;\n    margin-top: 5px;\n  }\n  \n  .").concat(di.imageUrlInputContainer," {\n    display: flex;\n    gap: 10px;\n  }\n  \n  .").concat(di.imageUrlInput," {\n    flex: 1;\n  }\n  \n  .").concat(di.addImageButton," {\n    background-color: #f0f2f5;\n    border: none;\n    border-radius: 4px;\n    padding: 8px 12px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    gap: 5px;\n    font-size: 14px;\n    transition: background-color 0.2s;\n  }\n  \n  .").concat(di.addImageButton,":hover {\n    background-color: #e4e6eb;\n  }\n  \n  .").concat(di.addImageButton,":disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n  \n  .").concat(di.imageGalleryContainer," {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n    gap: 15px;\n    margin-top: 15px;\n  }\n  \n  .").concat(di.imagePreviewItem," {\n    position: relative;\n  }\n  \n  .").concat(di.removeImageButton," {\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    background: rgba(0, 0, 0, 0.5);\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    padding: 0;\n    transition: background-color 0.2s;\n  }\n  \n  .").concat(di.removeImageButton,":hover {\n    background: rgba(0, 0, 0, 0.7);\n  }\n  \n  .").concat(di.imageLoading," {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: rgba(255, 255, 255, 0.7);\n    font-size: 14px;\n  }\n  \n  @media (max-width: 768px) {\n    .").concat(di.formOptions," {\n      width: 100%;\n    }\n    \n    .").concat(di.formToggles," {\n      width: 100%;\n      justify-content: flex-start;\n    }\n    \n    .").concat(di.optionToggle," {\n      flex: 0 0 auto;\n      font-size: 13px;\n    }\n    \n    .").concat(di.submitButton," {\n      width: 100%;\n      margin-top: 10px;\n    }\n    \n    .").concat(di.imageGalleryContainer," {\n      grid-template-columns: 1fr;\n    }\n  }\n");Le.div(F||(F=ae(["\n  position: relative;\n  display: inline-block;\n  margin-left: 10px;\n"]))),Le.div(R||(R=ae(["\n  width: 36px;\n  height: 36px;\n  border-radius: 6px;\n  cursor: pointer;\n  border: 2px solid #ddd;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  transition: all 0.3s ease;\n  position: relative;\n  \n  &:hover {\n    transform: scale(1.15);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n    z-index: 5;\n  }\n  \n  &:active {\n    transform: scale(0.95);\n  }\n"]))),Le(et).attrs((e=>({style:{color:e.$isDark?"white":"black"}})))(G||(G=ae(["\n  opacity: 0.7;\n  stroke-width: 2.5px;\n  font-size: 16px;\n  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2));\n  \n  &:hover {\n    opacity: 1;\n  }\n"]))),Le.div(H||(H=ae(["\n  position: absolute;\n  z-index: 1000;\n  top: calc(100% + 8px);\n  left: 0;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);\n  border: 2px solid #fff;\n  animation: fadeIn 0.2s ease-in-out;\n  \n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(-10px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  \n  .react-colorful {\n    width: 240px !important;\n    height: 240px !important;\n  }\n"]))),Le.div(V||(V=ae(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 999;\n  cursor: default;\n"])));const Fi=Le.div(W||(W=ae(["\n  font-size: 12px;\n  color: #666;\n  margin-top: 5px;\n  max-width: 300px;\n"]))),Ri=e=>{const t=se.c(57),{selectedFont:a,setSelectedFont:n,titleColor:s,setTitleColor:r,contentColor:i,setContentColor:o,pollOptionsColor:l,setPollOptionsColor:c,showPoll:d,isSubmitting:m}=e;let u,p,_,h,g,f,x,b,y,v,w,j,k,N,S,C,E,P,A,I,B,O,q,D,U,T;return t[0]===Symbol.for("react.memo_cache_sentinel")?(u=re.jsxs("h4",{className:di.stylingTitle,children:[re.jsx(et,{})," Настройки стиля"]}),t[0]=u):u=t[0],t[1]===Symbol.for("react.memo_cache_sentinel")?(p=re.jsx("label",{children:"Шрифт:"}),t[1]=p):p=t[1],t[2]!==n?(_=e=>n(e.target.value),t[2]=n,t[3]=_):_=t[3],t[4]!==a?(h={fontFamily:a},t[4]=a,t[5]=h):h=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(g=Bi.map(Gi),t[6]=g):g=t[6],t[7]!==m||t[8]!==a||t[9]!==_||t[10]!==h?(f=re.jsxs("div",{className:di.stylingGroup,children:[p,re.jsx("select",{value:a,onChange:_,className:di.fontSelector,disabled:m,style:h,children:g})]}),t[7]=m,t[8]=a,t[9]=_,t[10]=h,t[11]=f):f=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(x=re.jsx("label",{children:"Цвет заголовка:"}),b={display:"flex",alignItems:"center",gap:"10px"},t[12]=x,t[13]=b):(x=t[12],b=t[13]),t[14]!==r?(y=e=>r(e.target.value),t[14]=r,t[15]=y):y=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(v={width:"40px",height:"40px",border:"none",cursor:"pointer"},t[16]=v):v=t[16],t[17]!==y||t[18]!==s?(w=re.jsx("input",{type:"color",value:s,onChange:y,style:v}),t[17]=y,t[18]=s,t[19]=w):w=t[19],t[20]!==s?(j=re.jsx("span",{children:s}),t[20]=s,t[21]=j):j=t[21],t[22]!==w||t[23]!==j?(k=re.jsxs("div",{style:b,children:[w,j]}),t[22]=w,t[23]=j,t[24]=k):k=t[24],t[25]!==s?(N=Oi(s)&&re.jsx(Fi,{children:"Примечание: тёмные цвета будут автоматически адаптированы в темной теме для лучшей читаемости."}),t[25]=s,t[26]=N):N=t[26],t[27]!==k||t[28]!==N?(S=re.jsxs("div",{className:di.stylingGroup,children:[x,k,N]}),t[27]=k,t[28]=N,t[29]=S):S=t[29],t[30]===Symbol.for("react.memo_cache_sentinel")?(C=re.jsx("label",{children:"Цвет текста поста:"}),E={display:"flex",alignItems:"center",gap:"10px"},t[30]=C,t[31]=E):(C=t[30],E=t[31]),t[32]!==o?(P=e=>o(e.target.value),t[32]=o,t[33]=P):P=t[33],t[34]===Symbol.for("react.memo_cache_sentinel")?(A={width:"40px",height:"40px",border:"none",cursor:"pointer"},t[34]=A):A=t[34],t[35]!==i||t[36]!==P?(I=re.jsx("input",{type:"color",value:i,onChange:P,style:A}),t[35]=i,t[36]=P,t[37]=I):I=t[37],t[38]!==i?(B=re.jsx("span",{children:i}),t[38]=i,t[39]=B):B=t[39],t[40]!==I||t[41]!==B?(O=re.jsxs("div",{style:E,children:[I,B]}),t[40]=I,t[41]=B,t[42]=O):O=t[42],t[43]!==i?(q=Oi(i)&&re.jsx(Fi,{children:"Примечание: тёмные цвета будут автоматически адаптированы в темной теме для лучшей читаемости."}),t[43]=i,t[44]=q):q=t[44],t[45]!==O||t[46]!==q?(D=re.jsxs("div",{className:di.stylingGroup,children:[C,O,q]}),t[45]=O,t[46]=q,t[47]=D):D=t[47],t[48]!==l||t[49]!==c||t[50]!==d?(U=d&&re.jsxs("div",{className:di.stylingGroup,children:[re.jsx("label",{children:"Цвет вариантов опроса:"}),re.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[re.jsx("input",{type:"color",value:l,onChange:e=>c(e.target.value),style:{width:"40px",height:"40px",border:"none",cursor:"pointer"}}),re.jsx("span",{children:l})]})]}),t[48]=l,t[49]=c,t[50]=d,t[51]=U):U=t[51],t[52]!==S||t[53]!==D||t[54]!==U||t[55]!==f?(T=re.jsxs("div",{className:di.stylingOptions,children:[u,f,S,D,U]}),t[52]=S,t[53]=D,t[54]=U,t[55]=f,t[56]=T):T=t[56],T};function Gi(e){return re.jsx("option",{value:e.value,style:{fontFamily:e.value},children:e.name},e.value)}const Hi=e=>{const t=se.c(39),{showPoll:a,togglePoll:n,showStylingOptions:s,toggleStylingOptions:r,isPinned:i,setIsPinned:o,isSubmitting:l}=e;let c,d;t[0]!==l||t[1]!==a||t[2]!==n?(c=re.jsx("input",{type:"checkbox",checked:a,onChange:n,disabled:l}),t[0]=l,t[1]=a,t[2]=n,t[3]=c):c=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(d=re.jsx(Me,{}),t[4]=d):d=t[4];const m=a?"Убрать опрос":"Добавить опрос";let u,p,_;t[5]!==c||t[6]!==m?(u=re.jsxs("label",{className:di.optionToggle,children:[c,d," ",m]}),t[5]=c,t[6]=m,t[7]=u):u=t[7],t[8]!==l||t[9]!==s||t[10]!==r?(p=re.jsx("input",{type:"checkbox",checked:s,onChange:r,disabled:l}),t[8]=l,t[9]=s,t[10]=r,t[11]=p):p=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(_=re.jsx(Ce,{}),t[12]=_):_=t[12];const h=s?"Скрыть настройки":"Настройки стиля";let g,f,x,b;t[13]!==p||t[14]!==h?(g=re.jsxs("label",{className:di.optionToggle,children:[p,_," ",h]}),t[13]=p,t[14]=h,t[15]=g):g=t[15],t[16]!==i||t[17]!==o?(f=()=>o(!i),t[16]=i,t[17]=o,t[18]=f):f=t[18],t[19]!==i||t[20]!==l||t[21]!==f?(x=re.jsx("input",{type:"checkbox",checked:i,onChange:f,disabled:l}),t[19]=i,t[20]=l,t[21]=f,t[22]=x):x=t[22],t[23]===Symbol.for("react.memo_cache_sentinel")?(b=re.jsx(Xe,{}),t[23]=b):b=t[23];const y=i?"Открепить":"Закрепить";let v,w,j,k,N;return t[24]!==x||t[25]!==y?(v=re.jsxs("label",{className:di.optionToggle,children:[x,b," ",y]}),t[24]=x,t[25]=y,t[26]=v):v=t[26],t[27]!==v||t[28]!==u||t[29]!==g?(w=re.jsxs("div",{className:di.formToggles,children:[u,g,v]}),t[27]=v,t[28]=u,t[29]=g,t[30]=w):w=t[30],t[31]!==l?(j=l?"Публикация...":re.jsxs(re.Fragment,{children:[re.jsx(Re,{})," Опубликовать"]}),t[31]=l,t[32]=j):j=t[32],t[33]!==l||t[34]!==j?(k=re.jsx("button",{type:"submit",className:di.submitButton,disabled:l,children:j}),t[33]=l,t[34]=j,t[35]=k):k=t[35],t[36]!==w||t[37]!==k?(N=re.jsxs("div",{className:di.formOptions,children:[w,k]}),t[36]=w,t[37]=k,t[38]=N):N=t[38],N},Vi=({onPostCreated:e})=>{var t;const{user:a,isAuthenticated:n}=gs(),[s,r]=le.useState(""),[i,o]=le.useState(""),[l,c]=le.useState([]),[d,m]=le.useState(!1),[u,p]=le.useState(""),[_,h]=le.useState(!1),[g,f]=le.useState(["",""]),[x,b]=le.useState(!1),[y,v]=le.useState(!1),[w,j]=le.useState("#000000"),[k,N]=le.useState("#000000"),[S,C]=le.useState("#000000"),[E,P]=le.useState("inherit"),A=n&&a&&("igoraor79@gmail.com"===a.email||(null==(t=a.perks)?void 0:t.includes("admin"))||"admin"===a.activePerk);if(!A)return null;return re.jsxs("div",{className:di.createPostContainer,children:[re.jsx("style",{dangerouslySetInnerHTML:{__html:zi}}),re.jsxs("h3",{className:di.createPostTitle,children:[re.jsx(Pe,{})," Создать пост"]}),u&&re.jsxs("div",{className:di.errorMessage,children:[re.jsx(be,{})," ",u]}),re.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),A)if(_||i.trim())if(!_||i.trim()||s.trim()){if(!(_&&g.filter((e=>e.trim().length>0)).length<2&&(p("Для опроса необходимо минимум два варианта ответа"),1)))try{m(!0),p("");const t=_?{question:s.trim()||i.trim().split(" ").slice(0,5).join(" ")+"...",options:g.filter((e=>e.trim().length>0)).map((e=>e.trim())),optionsColor:S,styling:{optionsColor:S,fontFamily:E}}:null,n={title:s.trim()||null,content:i.trim(),imageUrls:l.length>0?l:null,userId:a.id,styling:{titleColor:w,contentColor:k,fontFamily:E},poll:t,isPinned:x},d=await hr.createPost(n);r(""),o(""),c([]),h(!1),f(["",""]),v(!1),j("#000000"),N("#000000"),C("#000000"),P("inherit"),b(!1),e&&e(d)}catch(n){n.message?p("Failed to create post: "+n.message):n.details?p("Error: "+n.details):p("Failed to create post. Try again later.")}finally{m(!1)}}else p("Добавьте текст поста или заголовок для опроса");else p("Текст поста не может быть пустым");else p("У вас недостаточно прав для создания постов")},className:di.createPostForm,children:[re.jsx("input",{type:"text",className:di.titleInput,value:s,onChange:e=>r(e.target.value),placeholder:"Заголовок поста",disabled:d,style:{color:w,fontFamily:E}}),re.jsx("textarea",{className:di.contentInput,value:i,onChange:e=>o(e.target.value),placeholder:_?"Текст поста с опросом (необязательно)...":"Текст вашего поста...",rows:4,disabled:d,required:!_,style:{color:k,fontFamily:E}}),!_&&re.jsx(Di,{imageUrls:l,setImageUrls:c,isSubmitting:d}),_&&re.jsx(Mi,{pollOptions:g,setPollOptions:f,isSubmitting:d,selectedFont:E,pollOptionsColor:S}),y&&re.jsx(Ri,{selectedFont:E,setSelectedFont:P,titleColor:w,setTitleColor:j,contentColor:k,setContentColor:N,pollOptionsColor:S,setPollOptionsColor:C,showPoll:_,isSubmitting:d}),re.jsx(Hi,{showPoll:_,togglePoll:()=>{h(!_),f(["",""])},showStylingOptions:y,toggleStylingOptions:()=>{v(!y)},isPinned:x,setIsPinned:b,isSubmitting:d})]})]})},Wi=Le(ie.div)(J||(J=ae(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(135deg, \n    rgba(33, 33, 38, 0.85) 0%, \n    rgba(68, 68, 77, 0.85) 100%\n  );\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  perspective: 1000px;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n  transform: translateZ(0);\n  isolation: isolate;\n  padding: 20px;\n"]))),Ji=Le(ie.div)($||($=ae(["\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  padding: 24px;\n  width: 100%;\n  max-width: 600px;\n  box-shadow: var(--modal-shadow, 0 8px 30px rgba(0, 0, 0, 0.2));\n  position: relative;\n  border: 1px solid var(--modal-border, var(--border));\n  transform-style: preserve-3d;\n  margin: auto;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n"]))),$i=Le.div(Y||(Y=ae(['\n  color: var(--text-primary);\n  margin-bottom: 24px;\n  overflow-y: auto;\n  max-height: calc(90vh - 150px);\n  padding-right: 10px;\n  font-feature-settings: "kern" 1, "liga" 1;\n  text-rendering: optimizeLegibility;\n  \n  h3 {\n    color: var(--text-primary);\n    margin: 20px 0 10px;\n    font-weight: 600;\n    font-size: 18px;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    \n    &:first-child {\n      margin-top: 0;\n    }\n  }\n  \n  p {\n    margin: 10px 0;\n    line-height: 1.6;\n    font-size: 15px;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n  \n  ul, ol {\n    margin: 10px 0;\n    padding-left: 20px;\n    font-size: 14px;\n    \n    li {\n      margin-bottom: 8px;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n    }\n  }\n  \n  .highlight {\n    background: lightgray;\n    padding: 2px 4px;\n    border-radius: 4px;\n    color: var(--accent);\n    font-weight: 500;\n  }\n  \n  @media (max-width: 480px) {\n    h3 {\n      font-size: 17px;\n    }\n    \n    p {\n      font-size: 14px;\n    }\n    \n    ul, ol {\n      font-size: 13px;\n    }\n  }\n']))),Yi=Le.div(X||(X=ae(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 16px;\n"]))),Xi=Le.h2(Z||(Z=ae(["\n  color: var(--text-primary);\n  font-size: 22px;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n\n  svg {\n    color: ",";\n    transition: color 0.3s ease;\n  }\n"])),(({isDark:e})=>e?"#fff":"var(--accent)")),Zi=Le.button(Q||(Q=ae(["\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  background: none;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: var(--bg-highlight);\n    color: var(--text-primary);\n  }\n  \n  svg {\n    width: 20px;\n    height: 20px;\n  }\n"])),(({isDark:e})=>e?"#fff":"var(--text-tertiary)")),Qi=Le.div(K||(K=ae(["\n  height: 1px;\n  background: var(--border);\n  margin: 16px 0;\n  width: 100%;\n"]))),Ki={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}},eo={hidden:{opacity:0,y:20,rotateX:5},visible:{opacity:1,y:0,rotateX:0,transition:{duration:.4,ease:[.19,1,.22,1],delay:.1}},exit:{opacity:0,y:20,transition:{duration:.3}}},to=e=>{const t=se.c(33),{isOpen:a,onClose:n}=e,{theme:s}=le.useContext(sa),r="dark"===s;let i,o,l;t[0]!==a?(i=()=>(document.body.style.overflow=a?"hidden":"",ao),o=[a],t[0]=a,t[1]=i,t[2]=o):(i=t[1],o=t[2]),le.useEffect(i,o),t[3]!==n?(l=e=>{e.target===e.currentTarget&&n()},t[3]=n,t[4]=l):l=t[4];const c=l;let d,m,u;if(t[5]!==a||t[6]!==n?(d=()=>{const e=e=>{"Escape"===e.key&&a&&n()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},m=[a,n],t[5]=a,t[6]=n,t[7]=d,t[8]=m):(d=t[7],m=t[8]),le.useEffect(d,m),!a)return null;if(t[9]!==c||t[10]!==r||t[11]!==n){let e,a,s,i,o,l,d,m,p,_,h,g,f;t[13]===Symbol.for("react.memo_cache_sentinel")?(e=re.jsx(_e,{size:20}),t[13]=e):e=t[13],t[14]!==r||t[15]!==n?(a=re.jsx(Zi,{onClick:n,isDark:r,children:e}),t[14]=r,t[15]=n,t[16]=a):a=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(s=re.jsx(tt,{size:24}),t[17]=s):s=t[17],t[18]!==r?(i=re.jsx(Yi,{children:re.jsxs(Xi,{isDark:r,children:[s,"Правила сообщества"]})}),t[18]=r,t[19]=i):i=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(o=re.jsx(Qi,{}),t[20]=o):o=t[20],t[21]===Symbol.for("react.memo_cache_sentinel")?(l=re.jsx("h3",{children:"1. Общие правила"}),d=re.jsx("p",{children:"Добро пожаловать в наше сообщество! Эти правила помогут создать комфортную и безопасную среду для всех участников:"}),m=re.jsxs("ul",{children:[re.jsx("li",{children:"Относитесь к другим участникам с уважением"}),re.jsx("li",{children:"Запрещены оскорбления, унижения, травля и дискриминация"}),re.jsx("li",{children:"Уважайте личное пространство и частную информацию других пользователей"}),re.jsx("li",{children:"Не публикуйте контент, нарушающий законодательство РФ"})]}),p=re.jsx("h3",{children:"2. Публикации и комментарии"}),_=re.jsx("p",{children:"При создании постов и комментариев просим придерживаться следующих принципов:"}),t[21]=l,t[22]=d,t[23]=m,t[24]=p,t[25]=_):(l=t[21],d=t[22],m=t[23],p=t[24],_=t[25]),t[26]===Symbol.for("react.memo_cache_sentinel")?(h=re.jsxs($i,{children:[l,d,m,p,_,re.jsxs("ul",{children:[re.jsxs("li",{children:["Используйте ",re.jsx("span",{className:"highlight",children:"понятный и уважительный язык"})]}),re.jsx("li",{children:"Не используйте нецензурную лексику и оскорбительные выражения"}),re.jsx("li",{children:"Не публикуйте спам, рекламу и другой нежелательный контент"}),re.jsx("li",{children:"Избегайте публикации недостоверной информации"}),re.jsx("li",{children:"Не публикуйте спойлеры"})]}),re.jsx("h3",{children:"3. Профиль и личные данные"}),re.jsx("p",{children:"Обеспечение безопасности ваших данных - наш приоритет:"}),re.jsxs("ul",{children:[re.jsx("li",{children:"Не публикуйте личную информацию других пользователей"}),re.jsx("li",{children:"Не размещайте в публичном доступе свои персональные данные"}),re.jsx("li",{children:"Выбирайте безопасные пароли и не передавайте их третьим лицам"})]}),re.jsx("h3",{children:"4. Нарушения и санкции"}),re.jsx("p",{children:"За нарушение правил могут последовать:"}),re.jsxs("ul",{children:[re.jsx("li",{children:"Предупреждение от модерации"}),re.jsx("li",{children:"Временная блокировка аккаунта"})]}),re.jsx("p",{children:"Правила могут обновляться и дополняться. Следите за изменениями в этом разделе."})]}),t[26]=h):h=t[26],t[27]!==i||t[28]!==a?(g=re.jsxs(Ji,{variants:eo,initial:"hidden",animate:"visible",exit:"exit",onClick:no,children:[a,i,o,h]}),t[27]=i,t[28]=a,t[29]=g):g=t[29],t[30]!==c||t[31]!==g?(f=re.jsx(oe,{mode:"wait",children:re.jsx(Wi,{variants:Ki,initial:"hidden",animate:"visible",exit:"exit",onClick:c,children:g})}),t[30]=c,t[31]=g,t[32]=f):f=t[32],u=de.createPortal(f,document.body),t[9]=c,t[10]=r,t[11]=n,t[12]=u}else u=t[12];return u};function ao(){document.body.style.overflow=""}function no(e){return e.stopPropagation()}const so=()=>{var e;const{user:t,isAuthenticated:a}=gs(),[n,s]=le.useState([]),[r,i]=le.useState(!0),[o,l]=le.useState(!1),[c,d]=le.useState(""),[m,u]=le.useState(0),[p,_]=le.useState(!1),[h,g]=le.useState(1),[f,x]=le.useState(!0),[b,y]=le.useState(0),v=le.useRef(),w=le.useRef(),j=a&&t&&("igoraor79@gmail.com"===t.email||(null==(e=t.perks)?void 0:e.includes("admin"))||"admin"===t.activePerk),k=async(e=1,t=!1)=>{try{1===e?i(!0):l(!0);const a=await hr.getPosts(e,10);if(!a||!a.posts)throw new Error("Не удалось получить данные постов");s(t?e=>[...e,...a.posts]:a.posts),x(a.hasMore),y(a.totalCount),d(""),i(!1),l(!1)}catch(a){d("Не удалось загрузить посты. Попробуйте позже."),i(!1),l(!1)}},N=le.useCallback((()=>{if(!o&&f){const e=h+1;g(e),k(e,!0)}}),[h,o,f]);le.useEffect((()=>{v.current&&v.current.disconnect(),v.current=new IntersectionObserver((e=>{e[0].isIntersecting&&f&&!o&&!r&&N()}),{rootMargin:"100px",threshold:.1});const e=w.current;return e&&v.current.observe(e),()=>{e&&v.current.unobserve(e)}}),[N,f,o,r]),le.useEffect((()=>{g(1),k(1,!1)}),[m]);const S=(e,t,a)=>{s((t=>t.map((t=>t.id===e?{...t,likes_count:a}:t))))},C=async e=>{try{(await hr.deletePost(e)).success&&(s((t=>t.filter((t=>t.id!==e)))),y((e=>e-1)))}catch(t){d("Не удалось удалить пост. "+(t.message||"Попробуйте позже."))}},E=async(e,t,a)=>{const r=n.map((n=>n.id===e?{...n,is_pinned:t}:a&&n.id===a&&t?{...n,is_pinned:!1}:n)),i=r.filter((e=>e.is_pinned)),o=r.filter((e=>!e.is_pinned));i.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))),o.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))),s([...i,...o])},P=e=>{s((t=>t.map((t=>t.id===e.id?{...t,...e}:t))))};return re.jsxs("div",{className:di.postsContainer,children:[re.jsxs("div",{className:di.postsHeader,children:[re.jsxs("h2",{children:[re.jsx(at,{})," Лента постов ",b>0&&"(".concat(n.length,"/").concat(b,")")]}),re.jsxs("div",{className:di.headerButtons,children:[re.jsxs("button",{className:di.rulesButton,onClick:()=>{_((e=>!e))},children:[re.jsx(nt,{})," Правила"]}),re.jsxs("button",{className:di.refreshButton,onClick:()=>{g(1),u((e=>e+1))},disabled:r,children:[r?re.jsx(Be,{}):re.jsx(st,{})," Обновить"]})]})]}),j&&re.jsx(Vi,{onPostCreated:e=>{s((t=>{if(e.is_pinned)return[e,...t];const a=t.filter((e=>e.is_pinned)),n=t.filter((e=>!e.is_pinned));return[...a,e,...n]})),y((e=>e+1))}}),c&&re.jsxs("div",{className:di.errorMessage,children:[re.jsx(be,{})," ",c]}),r&&1===h?re.jsxs("div",{className:di.loading,children:[re.jsx(Be,{})," Загрузка постов..."]}):n.length>0?re.jsxs(re.Fragment,{children:[re.jsx("div",{className:di.postsList,children:n.map((e=>re.jsx(Ai,{post:e,onLikeToggle:S,onDelete:C,onPinChange:E,onUpdate:P},e.id)))}),re.jsxs("div",{ref:w,className:di.loadMoreContainer,children:[o&&re.jsxs("div",{className:di.loadMoreSpinner,children:[re.jsx(Be,{})," Загрузка старых постов..."]}),!f&&n.length>=b&&re.jsx("div",{className:di.noMorePosts,children:"Вы загрузили все посты"})]})]}):re.jsxs("div",{className:di.noPosts,children:[re.jsx(rt,{}),re.jsxs("p",{children:["Постов пока нет. ",j?"Создайте первый пост!":"Скоро здесь появится интересный контент!"]})]}),re.jsx(to,{isOpen:p,onClose:()=>_(!1)})]})},ro={adminPanel:"_adminPanel_1idaq_2",title:"_title_1idaq_23",error:"_error_1idaq_38",fadeIn:"_fadeIn_1idaq_1",message:"_message_1idaq_51",success:"_success_1idaq_60",info:"_info_1idaq_65",content:"_content_1idaq_86",usersSection:"_usersSection_1idaq_98",editSection:"_editSection_1idaq_98",loader:"_loader_1idaq_118",spin:"_spin_1idaq_1005",userList:"_userList_1idaq_140",userGrid:"_userGrid_1idaq_163",userCard:"_userCard_1idaq_170",selected:"_selected_1idaq_185",banned:"_banned_1idaq_189",userAvatar:"_userAvatar_1idaq_204",userInfo:"_userInfo_1idaq_237",userPerks:"_userPerks_1idaq_254",userActions:"_userActions_1idaq_261",editButton:"_editButton_1idaq_287",banButton:"_banButton_1idaq_291",unbanButton:"_unbanButton_1idaq_295",banInfo:"_banInfo_1idaq_300",editForm:"_editForm_1idaq_328",formGroup:"_formGroup_1idaq_337",perksOptions:"_perksOptions_1idaq_381",perkOption:"_perkOption_1idaq_392",basePerk:"_basePerk_1idaq_412",baseLabel:"_baseLabel_1idaq_422",baseNote:"_baseNote_1idaq_425",protectedUser:"_protectedUser_1idaq_432",selectedUser:"_selectedUser_1idaq_460",editUserButton:"_editUserButton_1idaq_464",formActions:"_formActions_1idaq_486",cancelButton:"_cancelButton_1idaq_493",saveButton:"_saveButton_1idaq_494",noUserSelected:"_noUserSelected_1idaq_540",emptyList:"_emptyList_1idaq_564",banUserButton:"_banUserButton_1idaq_576",bannedUser:"_bannedUser_1idaq_597",modalOverlay:"_modalOverlay_1idaq_608",banDialog:"_banDialog_1idaq_634",slideUp:"_slideUp_1idaq_1",banDialogHeader:"_banDialogHeader_1idaq_680",closeButton:"_closeButton_1idaq_696",banDialogContent:"_banDialogContent_1idaq_724",currentBanInfo:"_currentBanInfo_1idaq_728",banDialogActions:"_banDialogActions_1idaq_792",eventsSection:"_eventsSection_1idaq_886",eventsList:"_eventsList_1idaq_909",eventItem:"_eventItem_1idaq_915",eventInfo:"_eventInfo_1idaq_931",eventToggle:"_eventToggle_1idaq_953",active:"_active_1idaq_974",loadingContainer:"_loadingContainer_1idaq_985",spinningLoader:"_spinningLoader_1idaq_1005"},io=e=>{const t=se.c(11),{users:a,loading:n,selectedUser:s,handleSelectUser:r,handleUnbanUser:i,setShowBanDialog:o,setBanDialogUser:l,setTemporaryMessage:c}=e;let d;t[0]!==l||t[1]!==o?(d=e=>{l(e),o(!0)},t[0]=l,t[1]=o,t[2]=d):d=t[2];const m=d,u=oo;let p;return t[3]!==m||t[4]!==r||t[5]!==i||t[6]!==n||t[7]!==(null==s?void 0:s.id)||t[8]!==c||t[9]!==a?(p=re.jsx("div",{className:ro.userList,children:n?re.jsxs("div",{className:ro.loader,children:[re.jsx(Be,{size:24})," Загрузка пользователей..."]}):re.jsx(re.Fragment,{children:0===a.length?re.jsx("p",{children:"Пользователи не найдены"}):re.jsx("div",{className:ro.userGrid,children:a.map((e=>{var t;return re.jsxs("div",{className:"".concat(ro.userCard," ").concat((null==s?void 0:s.id)===e.id?ro.selected:""," ").concat(e.is_banned?ro.banned:""),onClick:()=>r(e),children:[re.jsx("div",{className:ro.userAvatar,children:e.avatar?re.jsx(It,{avatar:e.avatar,alt:e.displayName||"Пользователь",size:64,style:{objectFit:"cover",width:"100%",height:"100%"}}):re.jsx(ge,{size:32})}),re.jsxs("div",{className:ro.userInfo,children:[re.jsx("h3",{children:e.displayName||"Без имени"}),re.jsx("p",{children:e.email}),re.jsx("div",{className:ro.userPerks,children:null==(t=e.perks)?void 0:t.map(lo)})]}),re.jsxs("div",{className:ro.userActions,children:[re.jsx("button",{className:ro.editButton,onClick:t=>{t.stopPropagation(),r(e)},title:"Редактировать профиль",children:re.jsx(Pe,{size:16})}),e.is_banned?re.jsx("button",{className:ro.unbanButton,onClick:t=>{t.stopPropagation(),i(e.id)},title:"Разблокировать пользователя",children:re.jsx(it,{size:16})}):re.jsx("button",{className:ro.banButton,onClick:t=>{t.stopPropagation(),u(e)?c({type:"error",text:"Нельзя заблокировать администратора или разработчика"}):m(e)},title:"Заблокировать пользователя",disabled:u(e),children:re.jsx(ve,{size:16})})]}),e.is_banned&&re.jsxs("div",{className:ro.banInfo,children:[re.jsxs("p",{children:["Заблокирован: ",e.ban_reason]}),e.ban_end_at&&re.jsxs("p",{children:["До: ",new Date(e.ban_end_at).toLocaleString()]}),re.jsxs("p",{children:["Админ: ",e.ban_admin_name]})]})]},e.id)}))})})}),t[3]=m,t[4]=r,t[5]=i,t[6]=n,t[7]=null==s?void 0:s.id,t[8]=c,t[9]=a,t[10]=p):p=t[10],p};function oo(e){var t,a;const n=localStorage.getItem("userEmail");return e.email===n||(null==(t=e.perks)?void 0:t.includes("admin"))||(null==(a=e.perks)?void 0:a.includes("developer"))}function lo(e){return re.jsx("span",{className:"".concat(ro.perk," ").concat(ro[e]),children:e},e)}const co=e=>{const t=se.c(64),{formData:a,handleChange:n,handlePerkChange:s,handleSubmit:r,loading:i,setIsEditing:o}=e;let l,c,d,m,u,p,_,h,g,f,x,b,y,v,w,j,k,N,S,C,E,P,A,I,B,O,q,D,U,T;return t[0]===Symbol.for("react.memo_cache_sentinel")?(l=re.jsxs("label",{htmlFor:"displayName",children:[re.jsx(ge,{size:18})," Отображаемое имя:"]}),t[0]=l):l=t[0],t[1]!==a.displayName||t[2]!==n?(c=re.jsxs("div",{className:ro.formGroup,children:[l,re.jsx("input",{type:"text",id:"displayName",name:"displayName",value:a.displayName,onChange:n,placeholder:"Введите имя пользователя"})]}),t[1]=a.displayName,t[2]=n,t[3]=c):c=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(d=re.jsxs("label",{htmlFor:"email",children:[re.jsx(ye,{size:18})," Email:"]}),t[4]=d):d=t[4],t[5]!==a.email||t[6]!==n?(m=re.jsxs("div",{className:ro.formGroup,children:[d,re.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:n,placeholder:"Введите email",readOnly:!0})]}),t[5]=a.email,t[6]=n,t[7]=m):m=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(u=re.jsxs("label",{children:[re.jsx(Ie,{size:18})," Привилегии:"]}),t[8]=u):u=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(p=re.jsx("input",{type:"checkbox",id:"perk-user",checked:!0,disabled:!0,readOnly:!0}),t[9]=p):p=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(_=re.jsxs("div",{className:"".concat(ro.perkOption," ").concat(ro.basePerk),children:[p,re.jsxs("label",{htmlFor:"perk-user",className:ro.baseLabel,children:["Пользователь ",re.jsx("span",{className:ro.baseNote,children:"(базовая привилегия)"})]})]}),t[10]=_):_=t[10],t[11]!==a.perks?(h=a.perks.includes("early_user"),t[11]=a.perks,t[12]=h):h=t[12],t[13]!==s?(g=()=>s("early_user"),t[13]=s,t[14]=g):g=t[14],t[15]!==h||t[16]!==g?(f=re.jsx("input",{type:"checkbox",id:"perk-early_user",checked:h,onChange:g}),t[15]=h,t[16]=g,t[17]=f):f=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(x=re.jsx("label",{htmlFor:"perk-early_user",children:"Ранний пользователь"}),t[18]=x):x=t[18],t[19]!==f?(b=re.jsxs("div",{className:ro.perkOption,children:[f,x]}),t[19]=f,t[20]=b):b=t[20],t[21]!==a.perks?(y=a.perks.includes("sponsor"),t[21]=a.perks,t[22]=y):y=t[22],t[23]!==s?(v=()=>s("sponsor"),t[23]=s,t[24]=v):v=t[24],t[25]!==y||t[26]!==v?(w=re.jsx("input",{type:"checkbox",id:"perk-sponsor",checked:y,onChange:v}),t[25]=y,t[26]=v,t[27]=w):w=t[27],t[28]===Symbol.for("react.memo_cache_sentinel")?(j=re.jsx("label",{htmlFor:"perk-sponsor",children:"Спонсор"}),t[28]=j):j=t[28],t[29]!==w?(k=re.jsxs("div",{className:ro.perkOption,children:[w,j]}),t[29]=w,t[30]=k):k=t[30],t[31]!==a.perks?(N=a.perks.includes("admin"),t[31]=a.perks,t[32]=N):N=t[32],t[33]!==s?(S=()=>s("admin"),t[33]=s,t[34]=S):S=t[34],t[35]!==N||t[36]!==S?(C=re.jsx("input",{type:"checkbox",id:"perk-admin",checked:N,onChange:S}),t[35]=N,t[36]=S,t[37]=C):C=t[37],t[38]===Symbol.for("react.memo_cache_sentinel")?(E=re.jsx("label",{htmlFor:"perk-admin",children:"Администратор"}),t[38]=E):E=t[38],t[39]!==C?(P=re.jsxs("div",{className:ro.perkOption,children:[C,E]}),t[39]=C,t[40]=P):P=t[40],t[41]!==b||t[42]!==k||t[43]!==P?(A=re.jsxs("div",{className:ro.formGroup,children:[u,re.jsxs("div",{className:ro.perksOptions,children:[_,b,k,P]})]}),t[41]=b,t[42]=k,t[43]=P,t[44]=A):A=t[44],t[45]!==o?(I=()=>o(!1),t[45]=o,t[46]=I):I=t[46],t[47]===Symbol.for("react.memo_cache_sentinel")?(B=re.jsx(_e,{size:18}),t[47]=B):B=t[47],t[48]!==I?(O=re.jsxs("button",{type:"button",className:ro.cancelButton,onClick:I,children:[B," Отмена"]}),t[48]=I,t[49]=O):O=t[49],t[50]!==i?(q=i?re.jsx(Be,{size:18}):re.jsx(Oe,{size:18}),t[50]=i,t[51]=q):q=t[51],t[52]!==i||t[53]!==q?(D=re.jsxs("button",{type:"submit",className:ro.saveButton,disabled:i,children:[q," Сохранить"]}),t[52]=i,t[53]=q,t[54]=D):D=t[54],t[55]!==O||t[56]!==D?(U=re.jsxs("div",{className:ro.formActions,children:[O,D]}),t[55]=O,t[56]=D,t[57]=U):U=t[57],t[58]!==r||t[59]!==c||t[60]!==A||t[61]!==U||t[62]!==m?(T=re.jsxs("form",{className:ro.editForm,onSubmit:r,children:[c,m,A,U]}),t[58]=r,t[59]=c,t[60]=A,t[61]=U,t[62]=m,t[63]=T):T=t[63],T},mo=e=>{const t=se.c(5),{siteEvents:a,eventsLoading:n,toggleSiteEvent:s}=e;let r,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=re.jsxs("h2",{children:[re.jsx(Ae,{size:18})," События сайта"]}),t[0]=r):r=t[0],t[1]!==n||t[2]!==a||t[3]!==s?(i=re.jsxs("div",{className:ro.eventsSection,children:[r,n?re.jsxs("div",{className:ro.loader,children:[re.jsx(Be,{size:24})," Загрузка настроек событий..."]}):re.jsx("div",{className:ro.eventsList,children:re.jsxs("div",{className:ro.eventItem,children:[re.jsxs("div",{className:ro.eventInfo,children:[re.jsx("h3",{children:'Привилегия "Ранний пользователь"'}),re.jsx("p",{children:'Автоматически выдает привилегию "Ранний пользователь" всем новым пользователям при регистрации.'}),re.jsxs("p",{children:[re.jsx("strong",{children:"Статус:"})," ",a.earlyUserPromotion?"Активно":"Неактивно"]})]}),re.jsxs("button",{className:"".concat(ro.eventToggle," ").concat(a.earlyUserPromotion?ro.active:""),onClick:()=>s("earlyUserPromotion"),disabled:n,children:[a.earlyUserPromotion?re.jsx(ot,{size:24}):re.jsx(lt,{size:24}),a.earlyUserPromotion?"Выключить":"Включить"]})]})})]}),t[1]=n,t[2]=a,t[3]=s,t[4]=i):i=t[4],i},uo=e=>{const t=se.c(27),{showBanDialog:a,banDialogUser:n,banReason:s,setBanReason:r,banDuration:i,setBanDuration:o,banLoading:l,handleBanUser:c,handleUnbanUser:d,setShowBanDialog:m}=e;if(!a||!n)return null;let u;if(t[0]!==n.displayName||t[1]!==n.id||t[2]!==n.is_banned||t[3]!==i||t[4]!==l||t[5]!==s||t[6]!==c||t[7]!==d||t[8]!==o||t[9]!==r||t[10]!==m){const e=n.is_banned?"Управление блокировкой":"Блокировка пользователя";let a,p,_,h,g;t[12]!==e?(a=re.jsx("h3",{children:e}),t[12]=e,t[13]=a):a=t[13],t[14]!==m?(p=()=>m(!1),t[14]=m,t[15]=p):p=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(_=re.jsx(_e,{}),t[16]=_):_=t[16],t[17]!==p?(h=re.jsx("button",{className:ro.closeButton,onClick:p,children:_}),t[17]=p,t[18]=h):h=t[18],t[19]!==a||t[20]!==h?(g=re.jsxs("div",{className:ro.banDialogHeader,children:[a,h]}),t[19]=a,t[20]=h,t[21]=g):g=t[21];const f=n.is_banned?re.jsxs("div",{className:ro.currentBanInfo,children:[re.jsxs("p",{children:["Пользователь ",re.jsx("strong",{children:n.displayName})," в настоящее время заблокирован."]}),re.jsxs("button",{className:ro.unbanButton,onClick:()=>d(n.id),disabled:l,children:[l?re.jsx(Be,{size:16}):re.jsx(qe,{size:16})," Разблокировать пользователя"]})]}):re.jsxs("form",{onSubmit:c,children:[re.jsxs("div",{className:ro.formGroup,children:[re.jsx("label",{htmlFor:"banReason",children:"Причина блокировки:"}),re.jsx("textarea",{id:"banReason",value:s,onChange:e=>r(e.target.value),placeholder:"Укажите причину блокировки пользователя",rows:4,required:!0})]}),re.jsxs("div",{className:ro.formGroup,children:[re.jsx("label",{htmlFor:"banDuration",children:"Длительность блокировки:"}),re.jsxs("select",{id:"banDuration",value:i,onChange:e=>o(e.target.value),required:!0,children:[re.jsx("option",{value:"",children:"Выберите длительность"}),re.jsx("option",{value:"30m",children:"30 минут"}),re.jsx("option",{value:"2h",children:"2 часа"}),re.jsx("option",{value:"6h",children:"6 часов"}),re.jsx("option",{value:"24h",children:"24 часа"}),re.jsx("option",{value:"7d",children:"7 дней"})]})]}),re.jsxs("div",{className:ro.banDialogActions,children:[re.jsxs("button",{type:"button",className:ro.cancelButton,onClick:()=>m(!1),disabled:l,children:[re.jsx(_e,{size:16})," Отмена"]}),re.jsxs("button",{type:"submit",className:ro.banButton,disabled:!s.trim()||!i||l,children:[l?re.jsx(Be,{size:16}):re.jsx(De,{size:16})," Заблокировать"]})]})]});let x,b;t[22]!==f?(x=re.jsx("div",{className:ro.banDialogContent,children:f}),t[22]=f,t[23]=x):x=t[23],t[24]!==g||t[25]!==x?(b=re.jsx("div",{className:ro.modalOverlay,children:re.jsxs("div",{className:ro.banDialog,children:[g,x]})}),t[24]=g,t[25]=x,t[26]=b):b=t[26],u=de.createPortal(b,document.getElementById("modal-root")||document.body),t[0]=n.displayName,t[1]=n.id,t[2]=n.is_banned,t[3]=i,t[4]=l,t[5]=s,t[6]=c,t[7]=d,t[8]=o,t[9]=r,t[10]=m,t[11]=u}else u=t[11];return u},po=e=>{const t=se.c(12),{message:a}=e;if(!a)return null;const n="".concat(ro.message," ").concat(ro[a.type]);let s,r,i,o;return t[0]!==a.type?(s="success"===a.type&&re.jsx(xe,{size:20,style:{marginRight:"10px"}}),t[0]=a.type,t[1]=s):s=t[1],t[2]!==a.type?(r="error"===a.type&&re.jsx(be,{size:20,style:{marginRight:"10px"}}),t[2]=a.type,t[3]=r):r=t[3],t[4]!==a.type?(i="info"===a.type&&re.jsx(he,{size:20,style:{marginRight:"10px"}}),t[4]=a.type,t[5]=i):i=t[5],t[6]!==a.text||t[7]!==n||t[8]!==s||t[9]!==r||t[10]!==i?(o=re.jsxs("div",{className:n,children:[s,r,i,a.text]}),t[6]=a.text,t[7]=n,t[8]=s,t[9]=r,t[10]=i,t[11]=o):o=t[11],o},_o=async()=>{try{const{data:t,error:a}=await Vn.from("profiles").select("*").order("created_at",{ascending:!1});if(a)throw new Error("Ошибка загрузки профилей пользователей");if(!t||0===t.length)return[];let n=[];try{const{data:e,error:t}=await Vn.rpc("admin_get_users");!t&&e&&(n=e)}catch(e){}let s=t.map((e=>{const t=n.find((t=>t.id===e.id)),a=(null==t?void 0:t.raw_user_meta_data)||{};return{id:e.id,displayName:e.display_name||a.display_name||"Пользователь",email:(null==t?void 0:t.email)||e.email||"Нет email",perks:e.perks||["user"],activePerk:e.active_perk||"user",avatar:e.avatar||a.avatar,createdAt:(null==t?void 0:t.created_at)||e.created_at||(new Date).toISOString(),is_banned:e.is_banned||!1,ban_reason:e.ban_reason,ban_end_at:e.ban_end_at,ban_admin_id:e.ban_admin_id,ban_admin_name:e.ban_admin_name}}));return s=await(async e=>{const t=new Date,a=[];for(const n of e)n.is_banned&&n.ban_end_at&&new Date(n.ban_end_at)<t&&(a.push(Vn.from("profiles").update({is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_id:null,ban_admin_name:null}).eq("id",n.id)),a.push(Vn.from("user_bans").update({is_active:!1}).eq("user_id",n.id).eq("is_active",!0)),n.is_banned=!1,n.ban_reason=null,n.ban_end_at=null,n.ban_admin_id=null,n.ban_admin_name=null);return a.length>0&&await Promise.all(a),e})(s),s}catch(t){throw t}},ho=(e,t,a)=>{const[n,s]=le.useState([]),[r,i]=le.useState(!0),[o,l]=le.useState(null),[c,d]=le.useState(!1),[m,u]=le.useState({displayName:"",email:"",perks:[]});return{users:n,setUsers:s,loading:r,setLoading:i,selectedUser:o,isEditing:c,formData:m,loadUsers:async()=>{try{i(!0);const e=await _o();return s(e),e}catch(e){throw e}finally{i(!1)}},handleSelectUser:e=>{l(e),u({displayName:e.displayName||"",email:e.email||"",perks:e.perks||["user"]}),d(!0)},handleChange:e=>{const{name:t,value:a}=e.target;u({...m,[t]:a})},handlePerkChange:e=>{if("user"===e)return;const t=m.perks.includes(e)?m.perks.filter((t=>t!==e)):[...m.perks,e];t.includes("user")||t.push("user"),u({...m,perks:t})},handleSubmit:async n=>{n.preventDefault();try{i(!0);let n=!1;if(m.displayName!==o.displayName&&(await is.adminUpdateDisplayName(o.id,m.displayName,_o),n=!0),JSON.stringify(m.perks)!==JSON.stringify(o.perks)&&(await(async(e,t)=>{try{const{data:n,error:s}=await Vn.from("profiles").select("*").eq("id",e).single();if(s)throw new Error("Не удалось получить профиль: ".concat(s.message));let r=["user"];t.includes("early_user")&&r.push("early_user"),t.includes("sponsor")&&r.push("sponsor"),t.includes("admin")&&r.push("admin");let i=n.active_perk;if(r.includes(i)||(i=r[0]),(await Vn.from("profiles").update({perks:r,active_perk:i,updated_at:(new Date).toISOString()}).eq("id",e)).error)try{const{error:t}=await Vn.rpc("admin_update_privileges",{user_id:e,privileges:r});if(t)throw new Error("Ошибка при обновлении привилегий через RPC: ".concat(t.message));const{error:a}=await Vn.from("profiles").update({active_perk:i}).eq("id",e)}catch(a){const t=JSON.stringify(r),{error:n}=await Vn.from("profiles").update({raw_perks:t,special_update:!0,updated_at:(new Date).toISOString()}).eq("id",e);if(n)throw n}const{data:o}=await Vn.from("profiles").select("*").eq("id",e).single();return!0}catch(n){throw n}})(o.id,m.perks),n=!0),!n)return a({type:"info",text:"Нет изменений для сохранения"}),void i(!1);const r=await _o();s(r),e&&e.id===o.id&&t(),a({type:"success",text:"Профиль пользователя успешно обновлен"}),setTimeout((()=>{d(!1),l(null)}),2e3)}catch(r){a({type:"error",text:r.message})}finally{i(!1)}},setIsEditing:d,handleResetPasswordByEmail:async e=>{try{i(!0),a({type:"info",text:"Отправка ссылки для сброса пароля на ".concat(e,"...")});const t=window.location.origin,n="".concat(t,"/reset-password"),{error:s}=await Vn.auth.resetPasswordForEmail(e,{redirectTo:n});if(s)throw new Error("Ошибка при отправке ссылки: ".concat(s.message));a({type:"success",text:"Ссылка для сброса пароля отправлена на ".concat(e)})}catch(t){a({type:"error",text:t.message})}finally{i(!1)}}}},go="site_events_cache",fo=()=>{const{user:e,isAuthenticated:t,loading:a}=gs(),n=ke(),s=le.useRef(!1),r=le.useRef(!1),i=le.useMemo((()=>{var t;return e&&(e.email===ns||(null==(t=e.perks)?void 0:t.includes("admin"))||"admin"===e.activePerk)}),[e]),[o,l]=le.useState("overview"),[c,d]=le.useState(""),[m,u]=le.useState(null),[p,_]=le.useState(!0),{message:h,setTemporaryMessage:g}=(()=>{const e=se.c(5),[t,a]=le.useState(null),n=le.useRef(null);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=(e,t)=>{const s=void 0===t?3e3:t;n.current&&clearTimeout(n.current),a(e),n.current=setTimeout((()=>{a(null)}),s)},e[0]=s):s=e[0];const r=s;let i,o,l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{n.current&&clearTimeout(n.current)},o=[],e[1]=i,e[2]=o):(i=e[1],o=e[2]),le.useEffect(i,o),e[3]!==t?(l={message:t,setTemporaryMessage:r},e[3]=t,e[4]=l):l=e[4],l})(),{siteEvents:f,eventsLoading:x,loadSiteEvents:b,toggleSiteEvent:y}=((e,t)=>{const[a,n]=le.useState((()=>{try{const e=localStorage.getItem(go);if(e)return JSON.parse(e)}catch(e){}return{earlyUserPromotion:!1}})),[s,r]=le.useState(!1),i=le.useRef(!1),o=le.useRef(!1);return le.useEffect((()=>{try{localStorage.setItem(go,JSON.stringify(a));const e=new CustomEvent("siteEventsChanged",{detail:{siteEvents:a}});window.dispatchEvent(e)}catch(e){}}),[a]),le.useEffect((()=>{const e=e=>{if(e.key===go&&e.newValue)try{const t=JSON.parse(e.newValue);n(t)}catch(t){}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]),{siteEvents:a,eventsLoading:s,loadSiteEvents:async()=>{if(!i.current)try{i.current=!0,r(!0);try{const{data:s,error:r}=await Vn.from("site_settings").select("*").limit(1);if(r){try{await Vn.rpc("create_site_settings_if_not_exists")}catch(e){}try{await Vn.from("site_settings").insert({early_user_promotion:a.earlyUserPromotion||!1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})}catch(t){}}else if(s&&0!==s.length){const e={earlyUserPromotion:s[0].early_user_promotion||!1};n(e),localStorage.setItem(go,JSON.stringify(e));const t=new CustomEvent("siteEventsChanged",{detail:{siteEvents:e}});window.dispatchEvent(t)}else try{await Vn.from("site_settings").insert({early_user_promotion:a.earlyUserPromotion||!1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})}catch(t){}}catch(s){}o.current=!0}finally{r(!1),i.current=!1}},toggleSiteEvent:async s=>{var o;if(!i.current)try{if(!e||e.email!==ns&&!(null==(o=e.perks)?void 0:o.includes("admin"))&&"admin"!==e.activePerk)return void t({type:"error",text:"Только администраторы могут управлять событиями сайта"});i.current=!0,r(!0);const c=!a[s];let d="earlyUserPromotion"===s?"early_user_promotion":s.replace(/([A-Z])/g,"_$1").toLowerCase();try{const{data:e,error:r}=await Vn.from("site_settings").select("id").limit(1);r||!e||0===e.length?await Vn.from("site_settings").insert({[d]:c,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}):await Vn.from("site_settings").update({[d]:c,updated_at:(new Date).toISOString()}).eq("id",e[0].id);const i={...a,[s]:c};n(i),localStorage.setItem(go,JSON.stringify(i));const o=new CustomEvent("siteEventsChanged",{detail:{siteEvents:i}});window.dispatchEvent(o),t({type:"success",text:'Событие "'.concat("earlyUserPromotion"===s?"Ранний пользователь":s,'" ').concat(c?"включено":"отключено")})}catch(l){t({type:"error",text:l.message||"Не удалось изменить настройку"})}}catch(c){t({type:"error",text:c.message})}finally{r(!1),i.current=!1}}}})(e,u),{users:v,loading:w,selectedUser:j,isEditing:k,formData:N,loadUsers:S,handleSelectUser:C,handleChange:E,handlePerkChange:P,handleSubmit:A,setIsEditing:I}=ho(e,t,g),{showBanDialog:B,setShowBanDialog:O,banDialogUser:q,setBanDialogUser:D,banReason:U,setBanReason:T,banDuration:L,setBanDuration:M,banLoading:z,handleBanUser:F,handleUnbanUser:R}=((e,t,a)=>{const[n,s]=le.useState(!1),[r,i]=le.useState(null),[o,l]=le.useState(""),[c,d]=le.useState(""),[m,u]=le.useState(!1);return{showBanDialog:n,setShowBanDialog:s,banDialogUser:r,setBanDialogUser:i,banReason:o,setBanReason:l,banDuration:c,setBanDuration:d,banLoading:m,handleBanUser:async n=>{if(n&&n.preventDefault(),r&&o.trim()&&c)try{u(!0);let n=null;if("permanent"!==c)switch(n=new Date,c){case"30m":n.setMinutes(n.getMinutes()+30);break;case"2h":n.setHours(n.getHours()+2);break;case"6h":n.setHours(n.getHours()+6);break;case"12h":n.setHours(n.getHours()+12);break;case"24h":n.setHours(n.getHours()+24);break;case"7d":n.setDate(n.getDate()+7);break;default:n=null}const m={user_id:r.id,admin_id:e.id,admin_name:e.displayName,reason:o.trim(),created_at:(new Date).toISOString(),end_at:n?n.toISOString():null,is_active:!0,ban_type:c},{error:p}=await Vn.from("user_bans").insert(m);if(p)throw new Error("Ошибка при сохранении бана: ".concat(p.message));const _={is_banned:!0,ban_reason:o.trim(),ban_end_at:n?n.toISOString():null,ban_admin_id:e.id,ban_admin_name:e.displayName};await Vn.from("profiles").update(_).eq("id",r.id);const h=await _o();a(h),t({type:"success",text:"Пользователь ".concat(r.displayName," успешно заблокирован")}),s(!1),l(""),d(""),i(null)}catch(m){t({type:"error",text:"Ошибка при блокировке: ".concat(m.message)})}finally{u(!1)}},handleUnbanUser:async e=>{if(e)try{u(!0);const r=(await _o()).find((t=>t.id===e));await Vn.from("user_bans").update({is_active:!1}).eq("user_id",e).eq("is_active",!0);const o={is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_id:null,ban_admin_name:null};await Vn.from("profiles").update(o).eq("id",e);const l=await _o();a(l),t({type:"success",text:"Пользователь ".concat((null==r?void 0:r.displayName)||"выбранный"," успешно разблокирован")}),n&&(s(!1),i(null))}catch(r){t({type:"error",text:"Ошибка при разблокировке: ".concat(r.message)})}finally{u(!1)}}}})(e,g,v);return le.useEffect((()=>{if(!a)if(i||a)if(!i||s.current||r.current)i&&s.current&&_(!1);else{r.current=!0;(async()=>{_(!0);try{await Promise.all([S(),b()]),s.current=!0}catch(e){g({type:"error",text:"Ошибка загрузки данных. Пожалуйста, обновите страницу."})}finally{_(!1)}})()}else n("/")}),[a,i,n,S,b,g]),a||p?re.jsxs("div",{className:ro.adminPanel,children:[re.jsxs("h1",{className:ro.title,children:[re.jsx(Ce,{size:24})," Панель администратора"]}),re.jsxs("div",{className:ro.loadingContainer,children:[re.jsx(Be,{size:32,className:ro.spinningLoader}),re.jsx("p",{children:"Загрузка панели администратора..."})]})]}):e&&i?re.jsxs("div",{className:ro.adminPanel,children:[re.jsxs("h1",{className:ro.title,children:[re.jsx(Ce,{size:24})," Панель администратора"]}),re.jsx(po,{message:h}),re.jsx(mo,{siteEvents:f,eventsLoading:x,toggleSiteEvent:y}),re.jsxs("div",{className:ro.content,children:[re.jsxs("div",{className:ro.usersSection,children:[re.jsxs("h2",{children:[re.jsx(ct,{size:18})," Список пользователей"]}),re.jsx(io,{users:v,loading:w,selectedUser:j,handleSelectUser:C,handleUnbanUser:R,setShowBanDialog:O,setBanDialogUser:D,setTemporaryMessage:g})]}),re.jsxs("div",{className:ro.editSection,children:[re.jsxs("h2",{children:[re.jsx(Pe,{size:18})," Редактирование профиля"]}),j&&k?re.jsx(co,{formData:N,handleChange:E,handlePerkChange:P,handleSubmit:A,loading:w,setIsEditing:I}):re.jsx("div",{className:ro.noUserSelected,children:w?re.jsxs("div",{className:ro.loader,children:[re.jsx(Be,{size:24})," Загрузка данных..."]}):re.jsxs("p",{children:[re.jsx(ge,{size:64}),re.jsx("br",{}),"Выберите пользователя из списка слева, чтобы редактировать"]})})]})]}),re.jsx(uo,{showBanDialog:B,banDialogUser:q,banReason:U,setBanReason:T,banDuration:L,setBanDuration:M,banLoading:z,handleBanUser:F,handleUnbanUser:R,setShowBanDialog:O})]}):null},xo={resetContainer:"_resetContainer_1iy2b_1",resetCard:"_resetCard_1iy2b_10",resetForm:"_resetForm_1iy2b_24",formGroup:"_formGroup_1iy2b_29",resetButton:"_resetButton_1iy2b_59",message:"_message_1iy2b_80",success:"_success_1iy2b_86",info:"_info_1iy2b_91",error:"_error_1iy2b_96"},bo=()=>{const[e,t]=le.useState(""),[a,n]=le.useState(""),[s,r]=le.useState(!1),[i,o]=le.useState(null),[l,c]=le.useState(""),d=ke();le.useEffect((()=>{const e=window.location.hash.substring(1).split("&").reduce(((e,t)=>{const[a,n]=t.split("=");return e[a]=n,e}),{});if(e.access_token){c(e.access_token);(async()=>{try{const{data:t,error:a}=await Vn.auth.setSession({access_token:e.access_token,refresh_token:e.refresh_token||""});o(a?{type:"error",text:"Ошибка при аутентификации: "+a.message}:{type:"info",text:"Введите новый пароль"})}catch(t){}})()}else o({type:"error",text:"Ссылка недействительна. Запросите новую ссылку для сброса пароля."})}),[]);return re.jsx("div",{className:xo.resetContainer,children:re.jsxs("div",{className:xo.resetCard,children:[re.jsx("h2",{children:"Сброс пароля"}),i&&re.jsx("div",{className:"".concat(xo.message," ").concat(xo[i.type]),children:i.text}),re.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e===a)if(e.length<6)o({type:"error",text:"Пароль должен содержать не менее 6 символов"});else try{r(!0),o({type:"info",text:"Обновление пароля..."});const{data:t,error:a}=await Vn.auth.updateUser({password:e});if(a)throw a;await Vn.auth.signOut(),o({type:"success",text:"Пароль успешно обновлен! Переход на страницу входа..."}),setTimeout((()=>{d("/")}),3e3)}catch(n){o({type:"error",text:n.message||"Произошла ошибка при обновлении пароля"})}finally{r(!1)}else o({type:"error",text:"Пароли не совпадают"})},className:xo.resetForm,children:[re.jsxs("div",{className:xo.formGroup,children:[re.jsx("label",{htmlFor:"password",children:"Новый пароль"}),re.jsx("input",{type:"password",id:"password",value:e,onChange:e=>t(e.target.value),required:!0,disabled:s||!l})]}),re.jsxs("div",{className:xo.formGroup,children:[re.jsx("label",{htmlFor:"confirmPassword",children:"Подтвердите пароль"}),re.jsx("input",{type:"password",id:"confirmPassword",value:a,onChange:e=>n(e.target.value),required:!0,disabled:s||!l})]}),re.jsx("button",{type:"submit",className:xo.resetButton,disabled:s||!l,children:s?"Обновление...":"Обновить пароль"})]})]})})},yo="_pageContainer_1uaky_1",vo="_formContainer_1uaky_9",wo="_title_1uaky_30",jo="_formGroup_1uaky_87",ko="_inputIcon_1uaky_98",No="_inputWrapper_1uaky_103",So="_inputIconInside_1uaky_107",Co="_disabledInput_1uaky_150",Eo="_textarea_1uaky_158",Po="_dropArea_1uaky_191",Ao="_highlight_1uaky_200",Io="_dropHint_1uaky_208",Bo="_browseButton_1uaky_227",Oo="_imagePreviewContainer_1uaky_241",qo="_imagePreview_1uaky_241",Do="_removeImageButton_1uaky_261",Uo="_submitButton_1uaky_283",To="_buttonIcon_1uaky_301",Lo=()=>{const{user:e}=gs(),[t,a]=le.useState(""),[n,s]=le.useState([]),[r,i]=le.useState(!1),[o,l]=le.useState(!1),[c,d]=le.useState(""),m=le.useRef(null),u=le.useRef(null),p=le.useRef(null);le.useEffect((()=>{const e=e=>{if(e.clipboardData&&e.clipboardData.items){const t=e.clipboardData.items;for(let a=0;a<t.length;a++)if(-1!==t[a].type.indexOf("image")){const n=t[a].getAsFile();_(n),e.preventDefault()}}},t=p.current,a=()=>t.classList.add(Ao),n=()=>t.classList.remove(Ao),s=e=>{if(e.preventDefault(),e.stopPropagation(),n(),e.dataTransfer.files&&e.dataTransfer.files.length>0){Array.from(e.dataTransfer.files).filter((e=>e.type.startsWith("image/"))).forEach((e=>{_(e)}))}};return document.addEventListener("paste",e),t.addEventListener("dragenter",a),t.addEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation(),a()})),t.addEventListener("dragleave",n),t.addEventListener("drop",s),()=>{document.removeEventListener("paste",e),t.removeEventListener("dragenter",a),t.removeEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation()})),t.removeEventListener("dragleave",n),t.removeEventListener("drop",s)}}),[]);const _=e=>{if(n.length>=5)return void d("Максимальное количество изображений: 5");const t=URL.createObjectURL(e);s((a=>[...a,{file:e,url:t}])),d("")},h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}},hover:{scale:1.03,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.2)"},tap:{scale:.98}};return re.jsx("div",{className:yo,children:re.jsxs(ie.div,{className:vo,variants:{hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.1,duration:.3}}},initial:"hidden",animate:"visible",children:[re.jsx(ie.h1,{className:wo,variants:h,children:"Обратная связь"}),re.jsx(As,{type:"error",message:c,show:!!c}),re.jsx(As,{type:"success",message:"Ваше сообщение успешно отправлено! Спасибо за обратную связь.",show:o}),re.jsxs("form",{ref:u,onSubmit:async r=>{if(r.preventDefault(),e&&e.email)if(t.trim())try{i(!0),d("");const r=new FormData;r.append("message",t),r.append("email",e.email),r.append("displayName",e.displayName||"Пользователь"),n.forEach((e=>{r.append("images",e.file)}));const o=await fetch("https://scform.onrender.com/api/feedback",{method:"POST",body:r}),c=await o.json().catch((()=>({})));if(!o.ok)throw new Error(c.error||"Произошла ошибка при отправке");a(""),s([]),l(!0),setTimeout((()=>{l(!1)}),5e3)}catch(o){d("Не удалось отправить сообщение: ".concat(o.message,". Пожалуйста, попробуйте позже или свяжитесь напрямую: igoraor79@gmail.com."))}finally{i(!1)}else d("Пожалуйста, введите текст сообщения");else d("Необходимо войти в аккаунт для отправки обратной связи")},children:[re.jsxs(ie.div,{className:jo,variants:h,children:[re.jsxs("label",{children:[re.jsx(ye,{className:ko})," Email:"]}),re.jsxs("div",{className:No,children:[re.jsx(ye,{className:So}),re.jsx("input",{type:"email",value:(null==e?void 0:e.email)||"Пожалуйста, войдите в аккаунт",disabled:!0,readOnly:!0,className:Co})]})]}),re.jsxs(ie.div,{className:jo,variants:h,children:[re.jsx("label",{children:"Суть запроса:"}),re.jsx("textarea",{value:t,onChange:e=>a(e.target.value),disabled:r,placeholder:"Опишите ваш запрос или предложение детально...",rows:6,className:Eo,required:!0})]}),re.jsxs(ie.div,{className:jo,variants:h,children:[re.jsxs("label",{children:[re.jsx(dt,{className:ko})," Вложения:"]}),re.jsxs("div",{ref:p,className:Po,children:[re.jsxs("p",{children:["Перетащите изображения сюда или ",re.jsx("button",{type:"button",className:Bo,onClick:()=>m.current.click(),children:"выберите файлы"})]}),re.jsx("p",{className:Io,children:"Вы также можете вставить изображения из буфера обмена (Ctrl+V)"}),re.jsx("input",{type:"file",ref:m,onChange:e=>{if(e.target.files&&e.target.files.length>0){Array.from(e.target.files).filter((e=>e.type.startsWith("image/"))).forEach((e=>{_(e)}))}},style:{display:"none"},accept:"image/*",multiple:!0})]}),n.length>0&&re.jsx(ie.div,{className:Oo,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:n.map(((e,t)=>re.jsxs("div",{className:qo,children:[re.jsx("img",{src:e.url,alt:"Прикрепленное изображение ".concat(t+1)}),re.jsx("button",{type:"button",className:Do,onClick:()=>{return e=t,void s((t=>{const a=[...t];return URL.revokeObjectURL(a[e].url),a.splice(e,1),a}));var e},children:re.jsx(_e,{})})]},t)))})]}),re.jsx(ie.button,{type:"submit",className:Uo,disabled:r||!(null==e?void 0:e.email),variants:h,initial:"hidden",animate:"visible",whileHover:"hover",whileTap:"tap",children:r?"Отправка...":re.jsxs(re.Fragment,{children:[re.jsx(Re,{className:To}),re.jsx("span",{children:"Отправить"})]})})]})]})})};function Mo(){var e;const t=se.c(32),{user:a}=gs(),[n,s]=le.useState(!1);let r,i;a&&("igoraor79@gmail.com"===a.email||(null==(e=a.perks)?void 0:e.includes("admin"))||a.activePerk),t[0]!==n?(r=()=>{const e=e=>{const t=document.querySelector(".".concat(gn)),a=document.querySelector(".".concat(pn));n&&t&&a&&!t.contains(e.target)&&!a.contains(e.target)&&s(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},i=[n],t[0]=n,t[1]=r,t[2]=i):(r=t[1],i=t[2]),le.useEffect(r,i);const o=mt();let l,c,d;t[3]!==n?(l=()=>{n&&s(!1)},t[3]=n,t[4]=l):l=t[4],t[5]!==o.pathname?(c=[o.pathname],t[5]=o.pathname,t[6]=c):c=t[6],le.useEffect(l,c),t[7]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{s(!1)},t[7]=d):d=t[7];const m=d;let u,p,_,h;t[8]===Symbol.for("react.memo_cache_sentinel")?(u=re.jsxs("header",{className:sn,children:[re.jsx(me,{to:"/",children:re.jsx(yn,{src:"sclogo",alt:"Логотип"})}),re.jsx("h1",{className:ln,children:"Цикл Душ"})]}),t[8]=u):u=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(p=re.jsx("li",{className:mn,children:re.jsx(me,{to:"/",children:"Главная"})}),t[9]=p):p=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(_=re.jsx("li",{className:mn,children:re.jsx(me,{to:"/characters",children:"Персонажи"})}),t[10]=_):_=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(h=re.jsxs("ul",{className:dn,children:[p,_,re.jsx("li",{className:mn,children:re.jsx(me,{to:"/about",children:"О нас"})})]}),t[11]=h):h=t[11];const g="".concat(pn," ").concat(n?hn:"");let f,x,b,y,v;t[12]!==n?(f=e=>{e.stopPropagation(),s(!n)},t[12]=n,t[13]=f):f=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(x=re.jsx("div",{className:_n}),b=re.jsx("div",{className:_n}),y=re.jsx("div",{className:_n}),t[14]=x,t[15]=b,t[16]=y):(x=t[14],b=t[15],y=t[16]),t[17]!==f||t[18]!==g?(v=re.jsxs("div",{className:g,onClick:f,children:[x,b,y]}),t[17]=f,t[18]=g,t[19]=v):v=t[19];const w="".concat(gn," ").concat(n?hn:"");let j,k,N,S,C,E,P,A;return t[20]===Symbol.for("react.memo_cache_sentinel")?(j=re.jsx("li",{className:xn,children:re.jsx(me,{to:"/",onClick:m,children:"Главная"})}),t[20]=j):j=t[20],t[21]===Symbol.for("react.memo_cache_sentinel")?(k=re.jsx("li",{className:xn,children:re.jsx(me,{to:"/characters",onClick:m,children:"Персонажи"})}),t[21]=k):k=t[21],t[22]===Symbol.for("react.memo_cache_sentinel")?(N=re.jsxs("ul",{className:fn,children:[j,k,re.jsx("li",{className:xn,children:re.jsx(me,{to:"/about",onClick:m,children:"О нас"})})]}),t[22]=N):N=t[22],t[23]!==w?(S=re.jsx("div",{className:w,children:N}),t[23]=w,t[24]=S):S=t[24],t[25]===Symbol.for("react.memo_cache_sentinel")?(C=re.jsx("div",{className:un,children:re.jsx(Vs,{})}),t[25]=C):C=t[25],t[26]!==v||t[27]!==S?(E=re.jsxs("nav",{className:cn,children:[h,v,S,C]}),t[26]=v,t[27]=S,t[28]=E):E=t[28],t[29]===Symbol.for("react.memo_cache_sentinel")?(P=re.jsx(zo,{}),t[29]=P):P=t[29],t[30]!==E?(A=re.jsxs("div",{className:nn,children:[u,E,P]}),t[30]=E,t[31]=A):A=t[31],A}function zo(){var e;const t=se.c(14),a=mt(),{user:n}=gs();let s,r,i,o,l,c,d,m,u,p,_,h,g;return n&&("igoraor79@gmail.com"===n.email||(null==(e=n.perks)?void 0:e.includes("admin"))||n.activePerk),t[0]===Symbol.for("react.memo_cache_sentinel")?(s={opacity:0,y:20},r={opacity:1,y:0},i={opacity:0,y:-20},o={duration:.3},t[0]=s,t[1]=r,t[2]=i,t[3]=o):(s=t[0],r=t[1],i=t[2],o=t[3]),t[4]===Symbol.for("react.memo_cache_sentinel")?(l=re.jsx(ut,{path:"/",element:re.jsx(ie.div,{initial:s,animate:r,exit:i,transition:o,children:re.jsx("div",{className:bn,children:re.jsx(so,{})})})}),t[4]=l):l=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(c=re.jsx(ut,{path:"/characters",element:re.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:re.jsx(Sa,{})})}),t[5]=c):c=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(d=re.jsx(ut,{path:"/about",element:re.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:re.jsx(an,{})})}),t[6]=d):d=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(m=re.jsx(ut,{path:"/profile",element:re.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:re.jsx(_r,{})})}),t[7]=m):m=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(u=re.jsx(ut,{path:"/profile/:userId",element:re.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:re.jsx(_r,{})})}),t[8]=u):u=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(p=re.jsx(ut,{path:"/reset-password",element:re.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:re.jsx(bo,{})})}),t[9]=p):p=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(_=re.jsx(ut,{path:"/admin",element:re.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:re.jsx(fo,{})})}),t[10]=_):_=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(h=re.jsx(ut,{path:"/feedback",element:re.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:re.jsx(Lo,{})})}),t[11]=h):h=t[11],t[12]!==a?(g=re.jsx(oe,{mode:"wait",children:re.jsxs(pt,{location:a,children:[l,c,d,m,u,p,_,h]},a.pathname)}),t[12]=a,t[13]=g):g=t[13],g}const Fo={v:"4.8.0",meta:{g:"LottieFiles AE 1.0.0",a:"Bas Milius",k:"Meteocons, Weather icons, Icon set",d:"Clear day - Meteocons.com",tc:""},fr:60,ip:0,op:360,w:512,h:512,nm:"clear-day",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"rays",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:359,s:[45]}],ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[180,0],[130.345,0]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-130.345,0],[-180,0]],c:!1},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ind:2,ty:"sh",ix:3,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[127.279,127.279],[92.168,92.168]],c:!1},ix:2},nm:"Path 3",mn:"ADBE Vector Shape - Group",hd:!1},{ind:3,ty:"sh",ix:4,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-92.168,-92.168],[-127.279,-127.279]],c:!1},ix:2},nm:"Path 4",mn:"ADBE Vector Shape - Group",hd:!1},{ind:4,ty:"sh",ix:5,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-127.279,127.279],[-92.168,92.168]],c:!1},ix:2},nm:"Path 5",mn:"ADBE Vector Shape - Group",hd:!1},{ind:5,ty:"sh",ix:6,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[92.168,-92.168],[127.279,-127.279]],c:!1},ix:2},nm:"Path 6",mn:"ADBE Vector Shape - Group",hd:!1},{ind:6,ty:"sh",ix:7,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,180],[0,130.345]],c:!1},ix:2},nm:"Path 7",mn:"ADBE Vector Shape - Group",hd:!1},{ind:7,ty:"sh",ix:8,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-130.345],[0,-180]],c:!1},ix:2},nm:"Path 8",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.984313726425,.749019622803,.141176477075,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:24,ix:5},lc:2,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1}],ip:0,op:360,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"core",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-46.392],[46.392,0],[0,46.392],[-46.392,0]],o:[[0,46.392],[-46.392,0],[0,-46.392],[46.392,0]],v:[[84,0],[0,84],[-84,0],[0,-84]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.972549021244,.686274528503,.0941176489,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:6,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"gf",o:{a:0,k:100,ix:10},r:1,bm:0,g:{p:5,k:{a:0,k:[0,.984,.749,.141,.225,.984,.749,.141,.45,.984,.749,.141,.725,.973,.684,.092,1,.961,.62,.043],ix:9}},s:{a:0,k:[-41.517,-71.871],ix:5},e:{a:0,k:[42.497,73.645],ix:6},t:1,nm:"Gradient Fill 1",mn:"ADBE Vector Graphic - G-Fill",hd:!1}],ip:0,op:360,st:0,bm:0}],markers:[]},Ro={v:"5.5.8",fr:29.9700012207031,ip:0,op:160.000006516934,w:150,h:150,nm:"icon_moon",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"moon Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[77.728,68.567,0],ix:2},a:{a:0,k:[583,600,0],ix:1},s:{a:0,k:[45,45,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,13.612],[-13.612,0],[0,0],[0,4.127],[-13.613,0],[0,0],[0,-13.612],[13.613,0],[0,0],[0,-4.127],[13.613,0]],o:[[-13.612,0],[0,-13.613],[0,0],[-1.971,-3.611],[0,-13.612],[0,0],[13.613,0],[0,13.614],[0,0],[1.971,3.611],[0,13.612],[0,0]],v:[[-57.605,42.935],[-82.292,18.248],[-57.605,-6.44],[-27.961,-6.44],[-30.971,-18.248],[-6.283,-42.935],[57.604,-42.935],[82.292,-18.248],[57.604,6.441],[27.961,6.441],[30.97,18.248],[6.282,42.935]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.733333349228,.96862745285,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[504.292,658.677],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Group 5",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[504.291,658.677],to:[-3.333,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:40,s:[484.291,658.677],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:80,s:[504.291,658.677],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:120,s:[484.291,658.677],to:[0,0],ti:[-3.333,0]},{t:160.000006516934,s:[504.291,658.677]}],ix:2},a:{a:0,k:[480.291,623.677],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"c1",np:1,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,7.3],[-7.3,0],[0,0],[0,-7.3],[7.299,0]],o:[[-7.3,0],[0,-7.3],[0,0],[7.299,0],[0,7.3],[0,0]],v:[[-49.017,13.239],[-62.255,.001],[-49.017,-13.238],[49.017,-13.238],[62.255,.001],[49.017,13.239]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.733333349228,.96862745285,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[608.408,572.45],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Group 9",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[608.408,572.45],to:[2.361,0],ti:[-5.079,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:33,s:[624.897,572.45],to:[2.092,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:40,s:[628.408,572.45],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:80,s:[608.408,572.45],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:120,s:[628.408,572.45],to:[0,0],ti:[3.333,0]},{t:160.000006516934,s:[608.408,572.45]}],ix:2},a:{a:0,k:[608.408,548.45],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"c2",np:1,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[23.394,0],[0,61.75],[-15.662,19.738],[-24.17,5.763],[2.294,-4.352],[0,-15.361],[-51.493,0],[-11.283,4.614],[1.603,-4.652],[19.108,-13.726]],o:[[-61.75,0],[0,-25.147],[15.552,-19.598],[4.785,-1.142],[-7.101,13.467],[0,51.492],[12.2,0],[4.556,-1.863],[-7.555,21.932],[-19.251,13.829]],v:[[2.221,111.03],[-109.767,-.958],[-85.479,-70.561],[-23.882,-109.888],[-17.49,-101.649],[-28.191,-58.205],[65.193,35.178],[100.583,28.225],[108.163,35.387],[67.407,89.892]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[1,.831372559071,.352941185236,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[599.388,602.031],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"banana",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,6.708],[-6.708,0],[0,0],[0,0],[1.729,-4.168],[0,0]],o:[[-6.708,0],[0,-6.708],[0,0],[0,0],[-2.247,3.961],[0,0],[0,0]],v:[[-13.228,12.165],[-25.393,0],[-13.228,-12.165],[25.393,-12.165],[20.546,-3.616],[14.555,8.634],[13.089,12.165]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.733333349228,.96862745285,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[474.245,549.909],to:[3.333,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:40,s:[494.245,549.909],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:80,s:[474.245,549.909],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:120,s:[494.245,549.909],to:[0,0],ti:[3.333,0]},{t:160.000006516934,s:[474.245,549.909]}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Group 14",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tr",p:{a:0,k:[484.245,549.909],ix:2},a:{a:0,k:[475.245,549.909],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"c3",np:1,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1798.00007323404,st:0,bm:0}],markers:[]},Go="_themeButton_1p4eo_1",Ho="_disabled_1p4eo_33",Vo=ce.memo((()=>{const e=se.c(14),{theme:t,toggleTheme:a}=le.useContext(sa),[n,s]=le.useState(!1);let r;const i="dark"===t?Fo:Ro;let o;e[0]!==i?(o={animationData:i,loop:!0,autoplay:!0},e[0]=i,e[1]=o):o=e[1],r=o;const l=r;let c;e[2]!==n||e[3]!==a?(c=()=>{n||(a(),s(!0),setTimeout((()=>{s(!1)}),3e3))},e[2]=n,e[3]=a,e[4]=c):c=e[4];const d=c,m="".concat(Go," ").concat(n?Ho:""),u="dark"===t?"Switch to Light Mode":"Switch to Dark Mode";let p,_,h;return e[5]===Symbol.for("react.memo_cache_sentinel")?(p={width:"35px",height:"35px",display:"block"},e[5]=p):p=e[5],e[6]!==l?(_=re.jsx(_t,{config:l,speed:1,style:p}),e[6]=l,e[7]=_):_=e[7],e[8]!==d||e[9]!==n||e[10]!==m||e[11]!==u||e[12]!==_?(h=re.jsx("button",{className:m,onClick:d,disabled:n,"aria-label":u,children:_}),e[8]=d,e[9]=n,e[10]=m,e[11]=u,e[12]=_,e[13]=h):h=e[13],h}));Vo.displayName="ThemeToggleButton";const Wo="app_version",Jo=()=>(le.useEffect((()=>{(async()=>{try{const e=(()=>{const e=window.location.hostname.includes("github.io")?"/soulcycle":"";return"".concat(window.location.protocol,"//").concat(window.location.host).concat(e)})(),t=await fetch("".concat(e,"/version.json?_=").concat(Date.now()));if(!t.ok)return;const a=await t.json(),n=a.version,s=a.buildTimestamp,r=localStorage.getItem(Wo);if(r){const e=JSON.parse(r);e.version===n&&e.timestamp===s||((()=>{const e=[];for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);e.includes(a)||localStorage.removeItem(a)}"caches"in window&&caches.keys().then((e=>{e.forEach((e=>{caches.delete(e)}))})),window.location.reload(!0)})(),localStorage.setItem(Wo,JSON.stringify({version:n,timestamp:s})))}else localStorage.setItem(Wo,JSON.stringify({version:n,timestamp:s}))}catch(e){}})()}),[]),null);function $o(){const e=se.c(8),{theme:t}=le.useContext(sa),{refreshUser:a}=gs();let n,s,r,i,o,l;return e[0]!==a?(n=()=>{const e=()=>{a()};return window.addEventListener("auth:refresh",e),()=>{window.removeEventListener("auth:refresh",e)}},s=[a],e[0]=a,e[1]=n,e[2]=s):(n=e[1],s=e[2]),le.useEffect(n,s),e[3]!==t?(r=()=>{let e=null;(async()=>{const a=At("dark"===t?"backgroundblack":"background",{format:await(async()=>{if(e)return e;const t=Xo,a=Yo,n=await t(),s=a();let r="jpg";return n?r="avif":s&&(r="webp"),e=r,r})(),quality:90});document.documentElement.style.setProperty("--page-bg","url('".concat(a,"')"))})()},i=[t],e[3]=t,e[4]=r,e[5]=i):(r=e[4],i=e[5]),le.useEffect(r,i),e[6]===Symbol.for("react.memo_cache_sentinel")?(o=re.jsx(Jo,{}),e[6]=o):o=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(l=re.jsxs(ht,{children:[o,re.jsxs("div",{className:ft,children:[re.jsx(Vo,{}),re.jsx(Mo,{})]})]}),e[7]=l):l=e[7],l}function Yo(){const e=document.createElement("canvas");return!!(e&&e.getContext&&e.getContext("2d"))&&0===e.toDataURL("image/webp").indexOf("data:image/webp")}async function Xo(){try{if(self.createImageBitmap){return await fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",{method:"HEAD"}).then(Zo)}return!1}catch(e){return!1}}function Zo(e){return e.ok}gt.createRoot(document.getElementById("root")).render(re.jsxs(ia,{children:[" ",re.jsxs(hs,{children:[" ",re.jsx($o,{})]})]}));export{ne as __vite_legacy_guard};
