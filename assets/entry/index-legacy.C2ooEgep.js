System.register(["../chunks/vendor-react-legacy.D5eyQRMl.js"],(function(e,t){"use strict";var a,r,o,n,i,s,l,d,c,_,m,p,u,b,g,h,x,f,v,y,k,w,j,N,S,q,C,B,P,I,A,z,E,O,D,$,T,U,F,M,L,G,R,H,W,V,Y,J,X,Z,Q,K,ee,te,ae,re,oe,ne,ie,se,le,de,ce,_e,me,pe,ue;return{setters:[e=>{a=e.c,r=e.j,o=e.m,n=e.A,i=e.r,s=e.R,l=e.a,d=e.L,c=e.b,_=e.F,m=e.d,p=e.e,u=e.f,b=e.g,g=e.h,h=e.i,x=e.k,f=e.l,v=e.n,y=e.o,k=e.u,w=e.p,j=e.q,N=e.s,S=e.t,q=e.v,C=e.w,B=e.x,P=e.y,I=e.z,A=e.B,z=e.C,E=e.D,O=e.E,D=e.G,$=e.H,T=e.I,U=e.J,F=e.K,M=e.M,L=e.N,G=e.O,R=e.P,H=e.Q,W=e.S,V=e.T,Y=e.U,J=e.V,X=e.W,Z=e.X,Q=e.Y,K=e.Z,ee=e._,te=e.$,ae=e.a0,re=e.a1,oe=e.a2,ne=e.a3,ie=e.a4,se=e.a5,le=e.a6,de=e.a7,ce=e.a8,_e=e.a9,me=e.aa,pe=e.ab,ue=e.ac}],execute:function(){var e=document.createElement("style");e.textContent='@charset "UTF-8";:root{--font-base: "graphr", sans-serif;--font-bold: "graphb", sans-serif;--text-color: #000;--text-primary: #222222;--text-secondary: #555555;--text-tertiary: #888888;--background-color: #fff;--background-color2: #f2f2f2;--bg-highlight: #f5f8fa;--bg-secondary: #f8f9fa;--bg-input: #ffffff;--border-color: #ddd;--border-color2: white;--border: #e1e8ed;--accent-color: #555555;--accent: #555555;--accent-rgb: 32, 178, 170;--accent-light: rgba(32, 178, 170, .1);--accent-hover: #555555;--success: #34d399;--success-rgb: 52, 211, 153;--warning: #fbbf24;--warning-rgb: 251, 191, 36;--error: #f87171;--error-rgb: 248, 113, 113;--error-light: rgba(248, 113, 113, .1);--info: #60a5fa;--info-rgb: 96, 165, 250;--overlay-color: rgba(0, 0, 0, .5);--shadow: 0 2px 8px rgba(0, 0, 0, .1);--shadow-hover: 0 5px 15px rgba(0, 0, 0, .15);--modal-bg: #ffffff;--modal-bg-rgb: 255, 255, 255;--modal-bg-end-rgb: 240, 240, 240;--modal-border: rgba(0, 0, 0, .15);--input-bg: #f8f8f8;--svg-color: %23000000;--gradient-start: #333333;--gradient-end: #666666;--transition-fast: .2s ease;--transition-normal: .3s ease;--transition-slow: .5s ease;--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--radius-xl: 16px;--radius-full: 9999px;--scrollbar-width: 8px;--scrollbar-track: #f1f1f1;--scrollbar-thumb: #c1c1c1;--scrollbar-thumb-hover: #a1a1a1}[data-theme=dark]{--text-color: #e0e0e0;--text-primary: #e0e0e0;--text-secondary: #b0b0b0;--text-tertiary: #808080;--background-color: #1e1e1e;--background-color2: #333333;--bg-highlight: #2a2a2a;--bg-secondary: #292929;--bg-input: #252525;--border-color: #555;--border-color2: black;--border: rgba(255, 255, 255, .1);--accent-color: #333333;--accent: #333333;--accent-rgb: 187, 134, 252;--accent-light: rgba(187, 134, 252, .1);--accent-hover: #333333;--overlay-color: rgba(255, 255, 255, .5);--shadow: 0 2px 8px rgba(0, 0, 0, .3);--shadow-hover: 0 5px 15px rgba(0, 0, 0, .4);--modal-bg: #2a2a2a;--modal-bg-rgb: 42, 42, 42;--modal-bg-end-rgb: 60, 60, 65;--modal-border: rgba(255, 255, 255, .2);--input-bg: #222222;--svg-color: %23ffffff;--gradient-start: #ffffff;--gradient-end: #a0a0a0;--scrollbar-track: #2a2a2a;--scrollbar-thumb: #444444;--scrollbar-thumb-hover: #555555}::-webkit-scrollbar{width:var(--scrollbar-width);height:var(--scrollbar-width)}::-webkit-scrollbar-track{background:var(--scrollbar-track);border-radius:var(--radius-full)}::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb);border-radius:var(--radius-full)}::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover)}*{scrollbar-width:thin;scrollbar-color:var(--scrollbar-thumb) var(--scrollbar-track)}*,*:after,*:before{padding:0;margin:0;box-sizing:border-box}html,body{font-size:10px;color:var(--text-color);background-color:var(--background-color);font-family:var(--font-base)}h1,h2,h3,h4,h5,h6{font-family:var(--font-bold);color:var(--text-primary)}._page_efhok_172{max-width:2000px;min-height:100vh;display:flex;align-items:center;justify-content:center;margin:0 auto;background-color:var(--background-color);background-image:var(--page-bg);background-size:cover;background-position:center;background-repeat:no-repeat;position:relative;transition:all var(--transition-slow);overflow:hidden;background-attachment:fixed}img{vertical-align:top}button{border:none;cursor:pointer;transition:all var(--transition-fast)}a{text-decoration:none;color:var(--accent);transition:color var(--transition-fast)}._card_efhok_208{background-color:var(--bg-secondary);border-radius:var(--radius-md);box-shadow:var(--shadow);padding:20px;border:1px solid var(--border);transition:all var(--transition-fast)}._btn_efhok_217{display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;border-radius:var(--radius-md);font-size:14px;font-weight:500;transition:all var(--transition-fast)}._btn-primary_efhok_228{background-color:var(--accent);color:#fff}._btn-primary_efhok_228:hover{background-color:var(--accent-hover)}._btn-secondary_efhok_237{background-color:var(--bg-highlight);color:var(--text-primary);border:1px solid var(--border)}._btn-secondary_efhok_237:hover{background-color:var(--background-color2)}@font-face{font-family:graphb;src:url(/soulcycle/assets/fonts/GraphikLCG-Bold.oGnNkPcM.woff2) format("woff2");font-weight:700;font-style:normal;font-display:swap}@font-face{font-family:graphr;src:url(/soulcycle/assets/fonts/GraphikLCG-Regular.BteGvBxa.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}._text-animation_efhok_267{display:inline-block}._text-animation_efhok_267 span{display:inline-block;opacity:0;transform:translateY(20px);animation:_fadeIn_efhok_1 .5s ease forwards}._text-animation-slow_efhok_278 span{animation:_fadeIn_efhok_1 1.2s ease forwards}@keyframes _fadeIn_efhok_1{to{opacity:1;transform:translateY(0)}}._window_52q69_2{height:75vh;position:relative;background-color:var(--background-color);border-radius:5px;display:flex;align-items:center;overflow:hidden;transition:width .3s,height .3s;z-index:1!important}._window__message_52q69_13{position:absolute;left:35%;top:50%;text-transform:uppercase;color:var(--text-color)}._window__message_52q69_13 h2{font-size:clamp(3rem,3vw,3rem)}._window__panel_52q69_23{position:absolute;min-height:80vh;max-width:200px!important;display:flex;flex-direction:column;align-items:center;justify-content:center;border-right:2px solid var(--border-color);z-index:5!important;background-color:var(--background-color)}._window__panel__iconWrapper_52q69_35{display:flex;flex-direction:column;gap:50px;z-index:5!important}._window__panel__navButtons_52q69_41{display:flex;flex-direction:column;gap:20px;z-index:5!important}._window__panel__navButtons__navButton_52q69_47{background:none;border:none;color:var(--text-color);z-index:5!important}._window__panel__navButtons__navButton__arrow_52q69_53{background:none;border:none;fill:var(--text-color);z-index:5!important}._window__message_52q69_13{display:flex;align-items:center;justify-content:center}._disabled_52q69_65{fill:#a9a9a9;opacity:.5;pointer-events:none}@media only screen and (max-width: 760px){._window_52q69_2{top:-20px;flex-direction:column;margin:0 20px!important;height:85vh}._window__panel_52q69_23{position:absolute;rotate:90deg;gap:20px;top:-42.5%}._window__panel__iconWrapper_52q69_35,._window__panel__navButtons_52q69_41{gap:10px}._window__message_52q69_13{left:5%;font-size:2.5rem}}._menu_1mm9j_2{width:100%;height:100%;display:flex;align-items:center;justify-content:center;gap:7%;background-color:#fffefe;position:relative;z-index:1;overflow:hidden}._menu__left_1mm9j_14{max-width:500px;min-height:100px;display:flex;flex-direction:column;gap:100px;align-items:center;justify-content:center;aspect-ratio:1/1}._menu__left__pic_1mm9j_24{max-width:500px;min-height:70px;aspect-ratio:1/1}._menu__left__pic_1mm9j_24 img{width:100%;height:100%;object-fit:contain;display:block}._menu__right_1mm9j_35{max-width:500px;min-height:100px;display:flex;flex-direction:column;gap:60px;padding:20px 80px;align-items:center;justify-content:center;background-color:#fff;border-radius:10px;border:2px solid black}[data-theme=dark] ._menu__right_1mm9j_35{background-color:#000;border:2px solid white}._menu__right__titleblock_1mm9j_52{width:100%;display:flex;flex-direction:column;gap:50px;align-items:center;justify-content:center}._menu__right__titleblock__fullname_1mm9j_60{font-size:2rem}._menu__right__titleblock__maininfo_1mm9j_63{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.8rem;gap:10px}._menu__right__lore_1mm9j_71{font-size:1.6rem;max-width:120px;min-height:30px;padding:20px 10px}._menu_1mm9j_2[id=faust]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/faustb.svg);z-index:-1;filter:blur(2.5px)}[data-theme=dark] ._menu_1mm9j_2[id=faust]:before{background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/faustb-black.svg)}._menu_1mm9j_2[id=lonarius]:before{content:"";position:absolute;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/lonariusb.svg);background-repeat:no-repeat;background-position:center;background-size:cover;z-index:-1;filter:blur(1.5px)}[data-theme=dark] ._menu_1mm9j_2[id=lonarius]:before{background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/lonariusb-black.svg);background-size:cover}._menu_1mm9j_2[id=vivian]:before{content:"";position:absolute;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/vivianb.svg);z-index:-1;filter:blur(1.5px)}[data-theme=dark] ._menu_1mm9j_2[id=vivian]:before{content:"";background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/vivianb-black.svg);position:absolute;width:100%;height:100%;z-index:-1;filter:blur(1.5px)}._menu_1mm9j_2[id=akito]:before{content:"";position:absolute;width:100%;height:100%;background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/akitob2.svg);background-color:#fff;background-repeat:no-repeat;background-position:center;background-size:cover;z-index:-1;filter:blur(1.5px)}[data-theme=dark] ._menu_1mm9j_2[id=akito]:before{content:"";background-image:url(https://res.cloudinary.com/do9t8preg/image/upload/v1746774915/akitob2.svg);position:absolute;width:100%;height:100%;z-index:-1;filter:blur(1.5px)}@media only screen and (max-width: 760px){._menu_1mm9j_2{flex-direction:column;gap:50px}._menu__left_1mm9j_14{max-width:320px!important;padding-top:40px}._menu__right_1mm9j_35{max-width:300px!important;padding:20px;gap:20px}._menu__right__titleblock_1mm9j_52{gap:20px}}@media (min-width: 761px) and (max-width: 1024px) and (orientation: portrait){._menu_1mm9j_2{flex-direction:column}._menu__left_1mm9j_14{max-width:500px!important;padding-top:40px;padding-left:3%}._menu__right_1mm9j_35{max-width:350px!important;padding:20px 40px;gap:20px}._menu__right__titleblock_1mm9j_52{gap:20px}}._button_1jwbf_1{position:relative;transition:all .3s ease-in-out;box-shadow:0 10px 20px rgba(0,0,0,.2);padding-block:.5rem;padding-inline:1.25rem;background-color:#000;border-radius:9999px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff!important;gap:10px;font-weight:700;border:3px solid rgba(255,255,255,.3019607843);outline:none;overflow:hidden;font-size:15px}._button_1jwbf_1:hover{transform:scale(1.05);border-color:rgba(255,255,255,.6)}._button_1jwbf_1:before{content:"";position:absolute;width:100px;height:100%;background-image:linear-gradient(120deg,rgba(255,255,255,0) 30%,rgba(255,255,255,.8),rgba(255,255,255,0) 70%);top:0;left:-100px;opacity:.6}._button_1jwbf_1:hover:before{animation:_shine_1jwbf_1 1.5s ease-out infinite}._icon_1jwbf_39{width:24px;height:24px;transition:all .3s ease-in-out}._button_1jwbf_1:hover ._icon_1jwbf_39{transform:translate(4px)}@keyframes _shine_1jwbf_1{0%{left:-100px}60%{left:100%}to{left:100%}}._modalOverlay_1214q_2{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;z-index:1000;padding:5px}._modalOverlay__content_1214q_15{background-color:var(--background-color);color:var(--text-color);padding:0 20px 40px;border-radius:8px;max-width:1000px;width:100%;position:relative;z-index:1001;display:flex;flex-direction:column;align-items:center;border:2px solid var(--border-color)}._modalOverlay__closeButton_1214q_29{position:absolute;top:10px;right:10px;background:none;border:none;cursor:pointer;transition:.4s ease;fill:var(--text-color)}._modalOverlay__closeButton_1214q_29:hover{fill:red}._modalOverlay__textContent_1214q_42{display:flex;flex-direction:column;align-items:center;gap:30px}._modalOverlay__navigation_1214q_48{display:flex;justify-content:space-between;align-items:center;width:100%}._modalOverlay__arrowRight_1214q_54,._modalOverlay__arrowLeft_1214q_54{position:absolute;bottom:1%;font-size:3rem;background:none;fill:var(--text-color)}._modalOverlay__arrowRight_1214q_54{right:2%}._modalOverlay__arrowLeft_1214q_54{left:2%}._modalOverlay__title_1214q_67{text-transform:uppercase;font-size:2rem;color:var(--text-color);position:relative}._modalOverlay__title_1214q_67:after{content:"";display:block;width:100%;height:4px;background:var(--border-color);position:absolute;bottom:-5px;left:0;transform:scaleX(0);animation:_appear_1214q_1 .5s forwards;animation-delay:.2s}._modalOverlay__textBlock_1214q_86{min-height:500px;width:100%}._modalOverlay__textBlock__textCont_1214q_90{display:flex;flex-direction:column;gap:20px;font-size:1.65rem;line-height:1.6;color:var(--text-color);transition:opacity .3s ease-in-out}._modalOverlay__textBlock__textCont_1214q_90 span{filter:blur(4px)}._modalOverlay__textBlock__textCont_1214q_90 blockquote{color:var(--accent-color)}._modalOverlay__pageIndicator_1214q_105{font-size:1.5rem;color:var(--text-color);position:absolute;bottom:2%}@keyframes _appear_1214q_1{to{transform:scaleX(1)}}._fadeIn_1214q_117{opacity:1}._fadeOut_1214q_121{opacity:0}._disabled_1214q_125{fill:#a9a9a9;opacity:.5;pointer-events:none}@media only screen and (max-width: 760px){._modalOverlay__textContent_1214q_42{min-height:700px}}._btn_2wi9v_2{max-width:78px;min-height:78px;display:flex;align-items:center;justify-content:center;background-color:var(--background-color);aspect-ratio:1;background:none;border:none;cursor:pointer;padding:0;transition:transform .2s ease}._btn_2wi9v_2:hover{transform:scale(1.1)}._btn__pic_2wi9v_19{width:100%;height:100%;display:block;transition:filter .3s ease}._btn__pic_2wi9v_19 img{width:100%;height:100%;object-fit:contain}._btn__pic_2wi9v_19._darkTheme_2wi9v_30{filter:invert(1) brightness(1.5)}hr{height:3px;background-color:var(--border-color)}._icon_2wi9v_39 img{content:attr(data-light)}[data-theme=dark] ._icon_2wi9v_39 img{content:attr(data-dark)}@media only screen and (max-width: 760px){._btn_2wi9v_2{rotate:270deg;max-width:60px;min-height:60px}}._aboutblock_kg2nj_3{max-width:1200px;margin:0 auto;padding:3rem 2rem;background-color:var(--bg-primary);color:var(--text-primary);display:flex;align-items:center;justify-content:center;flex-direction:column;gap:2.5rem;border-radius:15px;transition:all .3s ease}._aboutblock__header_kg2nj_17{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2rem}._aboutblock__header__htitle_kg2nj_25{font-family:graphb,sans-serif;font-size:clamp(2.2rem,4vw,3rem);color:var(--text-primary);position:relative;margin-bottom:1.5rem;padding-bottom:1rem;text-align:center}._aboutblock__header__htitle_kg2nj_25:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:60px;height:4px;background:var(--accent);border-radius:2px}._aboutblock__header__textblock_kg2nj_45{width:100%;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;align-items:stretch;justify-content:center;position:relative}._aboutblock__header__textblock__card_kg2nj_54{display:flex;flex-direction:column;background:var(--bg-secondary);border-radius:15px;padding:1.5rem;transition:all .3s ease;height:100%;position:relative;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.05);border:1px solid var(--border-color)}._aboutblock__header__textblock__card_kg2nj_54:hover{transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,0,0,.08)}._aboutblock__header__textblock__card_kg2nj_54:hover ._aboutblock__header__textblock__card__icon_kg2nj_71{transform:scale(1.05)}._aboutblock__header__textblock__card__icon_kg2nj_71{display:flex;justify-content:center;margin-bottom:1rem;transition:transform .4s ease}._aboutblock__header__textblock__card__icon__main_kg2nj_80{fill:var(--accent);animation:_wiggle_kg2nj_1 3s infinite ease-in-out}[data-theme=dark] ._aboutblock__header__textblock__card__icon__main_kg2nj_80{fill:var(--text-primary)}._aboutblock__header__textblock__card__icon__small_kg2nj_87{fill:var(--accent);opacity:.9;animation:_float_kg2nj_1 4s infinite ease-in-out}[data-theme=dark] ._aboutblock__header__textblock__card__icon__small_kg2nj_87{fill:var(--text-primary);opacity:.8}._aboutblock__header__textblock__card__content_kg2nj_96{flex:1;display:flex;flex-direction:column;justify-content:center}._aboutblock__header__textblock__card__content_kg2nj_96 p{font-size:clamp(.95rem,1vw + .5rem,1.2rem);line-height:1.6;margin:0}._aboutblock__header__textblock__card__link_kg2nj_107{color:gray;text-decoration:none;position:relative;transition:all .2s ease}._aboutblock__header__textblock__card__link_kg2nj_107:hover{text-decoration:none;opacity:.9}._aboutblock__header__textblock__card__link_kg2nj_107:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:1px;background-color:gray;transform:scaleX(0);transform-origin:right;transition:transform .3s ease}._aboutblock__header__textblock__card__link_kg2nj_107:hover:after{transform:scaleX(1);transform-origin:left}._aboutblock__header__textblock__telegram_kg2nj_133{display:flex;justify-content:center;align-items:center;grid-column:1/-1;margin-top:1rem}._aboutblock__divider_kg2nj_140{width:100%;display:flex;align-items:center;justify-content:center;gap:1rem;padding:.5rem 0}._aboutblock__divider__line_kg2nj_148{height:1px;flex:1;background:linear-gradient(to right,transparent,var(--border-color),transparent)}._aboutblock__divider__icon_kg2nj_153{font-size:1.8rem;color:var(--accent);animation:_pulse_kg2nj_1 3s infinite ease-in-out}._aboutblock__main_kg2nj_158{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2rem}._aboutblock__main__btitle_kg2nj_166,._aboutblock__main__dtitle_kg2nj_166{font-family:graphb,sans-serif;font-size:clamp(1.8rem,3vw,2.5rem);color:var(--text-primary);position:relative;margin-bottom:.5rem}._aboutblock__main__btitle_kg2nj_166:before,._aboutblock__main__dtitle_kg2nj_166:before{content:"✧";margin-right:.5rem;color:var(--accent);font-size:.8em;animation:_spin_kg2nj_1 4s linear infinite;display:inline-block}._aboutblock__main__authors_kg2nj_181,._aboutblock__main__developers_kg2nj_181{width:100%;display:flex;flex-wrap:wrap;gap:2rem;justify-content:center;padding:1.5rem;border-radius:15px;background-color:var(--bg-secondary);box-shadow:0 5px 20px rgba(0,0,0,.04);border:1px solid var(--border-color)}[data-theme=dark] ._aboutblock__main__authors_kg2nj_181,[data-theme=dark] ._aboutblock__main__developers_kg2nj_181{box-shadow:0 5px 20px rgba(0,0,0,.15)}._aboutblock__social_kg2nj_196{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem;margin-top:1rem}._aboutblock__social__title_kg2nj_205{font-family:graphb,sans-serif;font-size:clamp(1.8rem,3vw,2.5rem);color:var(--text-primary);position:relative;margin-bottom:.5rem;text-align:center}._aboutblock__social__title_kg2nj_205:before{content:"♥";margin-right:.5rem;color:var(--accent);font-size:.8em;animation:_pulse_kg2nj_1 2s infinite ease-in-out;display:inline-block}._aboutblock__social__links_kg2nj_221{display:flex;justify-content:center;gap:1.5rem;margin:1rem 0;padding:1.5rem;border-radius:15px;background-color:var(--bg-secondary);box-shadow:0 5px 15px rgba(0,0,0,.05);border:1px solid var(--border-color)}[data-theme=dark] ._aboutblock__social__links_kg2nj_221{box-shadow:0 5px 15px rgba(0,0,0,.2)}._aboutblock__social__links_kg2nj_221 a{transition:transform .3s ease}._aboutblock__social__links_kg2nj_221 a:hover{transform:translateY(-5px)}@keyframes _float_kg2nj_1{0%,to{transform:translateY(0)}50%{transform:translateY(-7px)}}@keyframes _wiggle_kg2nj_1{0%,to{transform:rotate(0)}25%{transform:rotate(3deg)}75%{transform:rotate(-3deg)}}@keyframes _pulse_kg2nj_1{0%,to{transform:scale(1);opacity:.8}50%{transform:scale(1.1);opacity:1}}@keyframes _spin_kg2nj_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){._aboutblock_kg2nj_3{padding:2rem 1rem;gap:2rem}._aboutblock__header__htitle_kg2nj_25{margin-bottom:1rem}._aboutblock__header__textblock_kg2nj_45{grid-template-columns:1fr}._aboutblock__header__textblock__card__content_kg2nj_96 p{font-size:1.05rem}._aboutblock__social__links_kg2nj_221{width:100%;max-width:100%}}@media (max-width: 480px){._aboutblock_kg2nj_3{padding:1.5rem 1rem}._aboutblock__header__htitle_kg2nj_25{font-size:1.8rem}._aboutblock__header__htitle_kg2nj_25:after{width:40px}._aboutblock__header__textblock__card__content_kg2nj_96 p{font-size:1.1rem;line-height:1.5}._aboutblock__divider__icon_kg2nj_153{font-size:1.4rem}}._member_17rw5_2{position:relative;display:flex;align-items:center;padding:20px;border-radius:16px;width:100%;max-width:340px;min-height:120px;overflow:hidden;background-color:var(--bg-primary);border:1px solid var(--border-color);transition:all .3s ease;box-shadow:0 5px 15px rgba(0,0,0,.05)}._member_17rw5_2:hover{transform:translateY(-5px);box-shadow:0 12px 30px rgba(0,0,0,.1)}._member_17rw5_2:hover ._member__info__details__name_17rw5_21:after{transform:scaleX(1);transform-origin:left}._member_17rw5_2:hover ._member__imageContainer_17rw5_25{transform:scale(1.05)}._member__imageWrapper_17rw5_28{position:relative;min-width:80px;width:80px;height:80px;overflow:hidden;border-radius:50%;z-index:1}._member__imageWrapper_17rw5_28:after{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:linear-gradient(45deg,var(--accent),transparent);border-radius:50%;z-index:-1;animation:_borderRotate_17rw5_1 4s linear infinite}._member__imageContainer_17rw5_25{width:100%;height:100%;overflow:hidden;border-radius:50%;background:var(--bg-primary);display:flex;align-items:center;justify-content:center;transition:transform .35s ease;border:3px solid var(--bg-primary)}._member__imageContainer_17rw5_25 a{width:100%;height:100%;display:block}._member__image_17rw5_25{width:100%;height:100%;object-fit:cover;border-radius:50%;transition:filter .3s ease}._member__info_17rw5_21{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:8px;flex:1;padding-left:20px}._member__info__details_17rw5_21{display:flex;flex-direction:column;gap:4px}._member__info__details__name_17rw5_21{font-size:1.4rem;margin:0;color:var(--text-primary);position:relative;display:inline-block;font-weight:600;letter-spacing:.5px;width:fit-content}._member__info__details__name_17rw5_21:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:2px;background:var(--accent);transform:scaleX(0);transform-origin:right;transition:transform .4s ease}._member__info__details__link_17rw5_109{color:var(--text-primary);text-decoration:none;transition:color .3s ease;position:relative}._member__info__details__link_17rw5_109:hover{color:var(--accent)}._member__info__details__link_17rw5_109:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:2px;background:var(--accent);transform:scaleX(0);transform-origin:right;transition:transform .4s ease}._member__info__details__link_17rw5_109:hover:after{transform:scaleX(1);transform-origin:left}._member__info__details__role_17rw5_134{font-size:1.1rem;color:var(--text-secondary);font-style:italic;margin-top:2px}._member__info__bio_17rw5_140{font-size:1rem;line-height:1.5;color:var(--text-secondary);margin-top:5px;margin-bottom:0}._member--igor_17rw5_147{position:relative;overflow:hidden}._member--igor_17rw5_147:before{content:"✧";position:absolute;top:15px;right:15px;font-size:1.5rem;color:var(--accent);opacity:.8;animation:_rotate_17rw5_1 8s linear infinite}._member--igor_17rw5_147:after{content:"";position:absolute;top:-30px;right:-30px;width:60px;height:60px;background:radial-gradient(circle,var(--accent) 0%,transparent 70%);opacity:.15;z-index:0}._member--lesya_17rw5_172{position:relative;overflow:hidden}._member--lesya_17rw5_172:before{content:"♥";position:absolute;top:15px;right:15px;font-size:1.5rem;color:var(--accent);opacity:.8;animation:_heartbeat_17rw5_1 2s infinite ease-in-out}._member--lesya_17rw5_172:after{content:"";position:absolute;bottom:-20px;left:-20px;width:60px;height:60px;background:radial-gradient(circle,var(--accent) 0%,transparent 70%);opacity:.15;z-index:0}[data-theme=dark] ._member_17rw5_2{background-color:var(--bg-secondary);border-color:var(--border-color);box-shadow:0 5px 15px rgba(0,0,0,.2)}[data-theme=dark] ._member_17rw5_2:hover{box-shadow:0 12px 30px rgba(0,0,0,.3)}[data-theme=dark] ._member_17rw5_2 ._member__imageContainer_17rw5_25{border-color:var(--bg-secondary)}[data-theme=dark] ._member_17rw5_2:after{opacity:.25}@keyframes _borderRotate_17rw5_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _heartbeat_17rw5_1{0%,to{transform:scale(1)}50%{transform:scale(1.2);opacity:1}}@keyframes _rotate_17rw5_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _float_17rw5_1{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}@media (max-width: 768px){._member_17rw5_2{padding:15px;min-height:100px;max-width:100%;flex-direction:row}._member__imageWrapper_17rw5_28{min-width:70px;width:70px;height:70px}._member__info_17rw5_21{padding-left:15px}._member__info__details__name_17rw5_21{font-size:1.2rem}._member__info__details__role_17rw5_134{font-size:.95rem}._member__info__bio_17rw5_140{font-size:1.1rem;line-height:1.4}._member--igor_17rw5_147:before,._member--lesya_17rw5_172:before{font-size:1.3rem;top:10px;right:10px}}@media (max-width: 480px){._member_17rw5_2{padding:12px;min-height:90px}._member__imageWrapper_17rw5_28{min-width:60px;width:60px;height:60px}._member__info_17rw5_21{padding-left:15px}._member__info__details__name_17rw5_21{font-size:1.1rem}._member__info__details__role_17rw5_134{font-size:.9rem}._member__info__bio_17rw5_140{font-size:1rem;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}._member--igor_17rw5_147:before,._member--lesya_17rw5_172:before{font-size:1.2rem;top:8px;right:8px}}._button_n0lbf_1{font-family:graphb;background:var(--text-color);color:var(--background-color);font-size:20px;border:none;border-radius:.7em;letter-spacing:.08em;position:relative;display:flex;align-content:center;align-items:center;overflow:hidden;height:2.5em;padding:.35em .92em .35em 2.8em;z-index:1}._button_n0lbf_1 ._icon_n0lbf_21{background:var(--background-color);height:2em;width:2em;border-radius:2em;position:absolute;display:flex;align-items:center;justify-content:center;left:.4em;transition:all .5s}._icon_n0lbf_21 svg{margin-left:.1em;transition:all .5s;color:var(--text-color);width:2.5rem;height:2.5rem;position:absolute;right:18%}._button_n0lbf_1:hover ._icon_n0lbf_21 svg{transform:rotate(360deg);right:40%}._button_n0lbf_1:hover ._icon_n0lbf_21{width:calc(100% - 1.5rem);border-radius:.5em}._main_1lmof_1{max-width:1500px;width:100%;min-height:100vh;position:relative;display:flex;flex-direction:column;gap:20px;padding:1% 6%;background:rgba(255,255,255,.85);backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,.1);border:1px solid rgba(255,255,255,.2)}._main_1lmof_1:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(135deg,rgba(255,255,255,.2),rgba(255,255,255,0));border-radius:12px;pointer-events:none}[data-theme=dark] ._main_1lmof_1{background:rgba(20,18,18,.85);box-shadow:0 8px 32px rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.1)}[data-theme=dark] ._main_1lmof_1:before{background:linear-gradient(135deg,rgba(50,50,70,.3),rgba(10,10,20,0))}._main__header_1lmof_35{max-width:200px;display:flex;gap:10px;align-items:end}._main__header__pic_1lmof_41{max-width:80px;min-height:80px;aspect-ratio:1;display:flex;align-items:center;justify-content:center;transition:filter .3s ease}._main__header__pic_1lmof_41 img{width:100%;height:100%;object-fit:contain}._main__header__pic_1lmof_41._darkTheme_1lmof_55{filter:invert(.8) brightness(1.5) hue-rotate(180deg)}._main__header__title_1lmof_58{font-size:2rem;color:var(--text-color)}._main__header__logo_1lmof_62{max-width:160px;height:auto;object-fit:contain;margin-right:1rem}._main__nav_1lmof_68{display:flex;justify-content:space-between;align-items:center;position:relative}._main__nav__perexod_1lmof_74{display:flex;gap:20px;list-style:none;font-size:clamp(2rem,2vw,3rem);font-family:var(--font-bold)}._main__nav__perexod__link_1lmof_81 a{color:var(--text-color)}._main__nav__auth_1lmof_84{display:flex;align-items:center}._main__nav__burger_1lmof_88{display:none;flex-direction:column;justify-content:space-between;width:30px;height:25px;cursor:pointer;z-index:1001;padding:0;background:none;border:none;transition:all .3s ease}._main__nav__burger__line_1lmof_101{width:100%;height:2px;background:var(--text-color, #333);transition:all .3s cubic-bezier(.4,0,.2,1);transform-origin:left center}[data-theme=light] ._main__nav__burger__line_1lmof_101{background:#333}[data-theme=dark] ._main__nav__burger__line_1lmof_101{background:#fff}._main__nav__burger_1lmof_88._open_1lmof_114 ._main__nav__burger__line_1lmof_101:first-child{transform:rotate(45deg)}._main__nav__burger_1lmof_88._open_1lmof_114 ._main__nav__burger__line_1lmof_101:nth-child(2){opacity:0}._main__nav__burger_1lmof_88._open_1lmof_114 ._main__nav__burger__line_1lmof_101:last-child{transform:rotate(-45deg)}._main__nav__mobile_1lmof_123{position:fixed;top:0;right:-100%;width:80%;max-width:300px;height:100vh;background:var(--bg-primary);z-index:1000;padding:80px 20px 20px;transition:right .3s cubic-bezier(.4,0,.2,1);box-shadow:-5px 0 15px rgba(0,0,0,.1);border-left:1px solid var(--border)}[data-theme=dark] ._main__nav__mobile_1lmof_123{background:#1e1e23;border-left:1px solid rgba(255,255,255,.1);box-shadow:-5px 0 15px rgba(0,0,0,.3)}._main__nav__mobile_1lmof_123._open_1lmof_114{right:0}._main__nav__mobile__list_1lmof_145{list-style:none;padding:0;margin:0}._main__nav__mobile__list__item_1lmof_150{margin-bottom:15px}._main__nav__mobile__list__item_1lmof_150 a{display:block;padding:12px 15px;color:var(--text-primary);text-decoration:none;font-size:16px;border-radius:8px;transition:all .2s ease}._main__nav__mobile__list__item_1lmof_150 a:hover{background:var(--bg-highlight);color:var(--accent)}@media (max-width: 768px){._main_1lmof_1{padding:1% 3%}._main__nav__perexod_1lmof_74{display:none}._main__nav__burger_1lmof_88{display:flex;margin-right:10px}._main__nav__auth_1lmof_84{margin-left:auto}}._characters_1lmof_182{display:flex;justify-content:center;align-items:center;width:100%}._homepage_1lmof_189{max-width:800px;margin:0 auto;padding:20px}._loading_1lmof_195,._error_1lmof_195{display:flex;justify-content:center;align-items:center;height:200px;font-size:18px;color:var(--text-primary)}._error_1lmof_195{color:#e74c3c}._postsList_1lmof_208{display:flex;flex-direction:column;gap:20px}._postCard_1lmof_214{background-color:var(--bg-secondary);border-radius:8px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,.1)}._postTitle_1lmof_221{font-size:22px;margin-bottom:10px;color:var(--text-primary)}._postMeta_1lmof_227{display:flex;justify-content:space-between;margin-bottom:15px;font-size:14px;color:var(--text-secondary)}._postImage_1lmof_235{margin-bottom:15px}._postImage_1lmof_235 img{width:100%;max-height:400px;object-fit:cover;border-radius:4px}._postContent_1lmof_245{color:var(--text-primary);line-height:1.5;white-space:pre-wrap}._noPostsMessage_1lmof_251{text-align:center;color:var(--text-secondary);padding:40px 0}._perkBase_1qxaq_18{font-weight:600!important;font-size:inherit!important;line-height:inherit!important;font-family:inherit!important;letter-spacing:inherit!important;display:inline-block!important}._sponsorPerk_1qxaq_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)!important}._earlyUserPerk_1qxaq_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)!important}._adminPerk_1qxaq_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)!important}._userPerk_1qxaq_45{color:var(--user-color)!important;text-shadow:none!important}._authContainer_1qxaq_51{position:relative;z-index:10}._loginButton_1qxaq_56{background:linear-gradient(90deg,#666,#444);color:#fff;border:none;padding:10px 20px;border-radius:30px;font-size:1.2rem;font-weight:600;cursor:pointer;transition:all .3s;box-shadow:0 4px 10px rgba(0,0,0,.2);position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;gap:8px;letter-spacing:.5px}._loginButton_1qxaq_56:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(0,0,0,.3);background:linear-gradient(90deg,#777,#555)}._loginButton_1qxaq_56:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.2),transparent);transform:rotate(45deg);transition:all .5s;opacity:0}._loginButton_1qxaq_56:hover:before{animation:_shine_1qxaq_1 1.5s infinite}[data-theme=light] ._loginButton_1qxaq_56{background:linear-gradient(90deg,#888,#666);box-shadow:0 4px 10px rgba(100,100,100,.2)}[data-theme=light] ._loginButton_1qxaq_56:hover{background:linear-gradient(90deg,#999,#777);box-shadow:0 6px 15px rgba(100,100,100,.3)}._userProfile_1qxaq_104{position:relative;display:flex;justify-content:center}._profileButton_1qxaq_110{display:flex;align-items:center;background:rgba(50,50,55,.7);border:1px solid rgba(100,100,100,.2);padding:6px 14px 6px 6px;cursor:pointer;border-radius:30px;transition:all .3s;backdrop-filter:blur(4px);box-shadow:0 4px 10px rgba(0,0,0,.1)}._profileButton_1qxaq_110:hover{background:rgba(60,60,65,.8);transform:translateY(-2px);box-shadow:0 6px 15px rgba(0,0,0,.15)}[data-theme=light] ._profileButton_1qxaq_110{background:rgba(240,240,245,.7);border:1px solid rgba(180,180,180,.3);box-shadow:0 4px 10px rgba(100,100,100,.1)}[data-theme=light] ._profileButton_1qxaq_110:hover{background:rgba(245,245,250,.9);box-shadow:0 6px 15px rgba(100,100,100,.15)}[data-theme=light] ._profileButton_1qxaq_110 svg{color:#333;stroke:#333}._profileButton_1qxaq_110 svg{color:#e0e0e0;stroke:#e0e0e0;transition:all .3s}._avatar_1qxaq_146{width:42px;height:42px;border-radius:50%;object-fit:cover;margin-right:10px;border:2px solid rgba(150,150,150,.5);box-shadow:0 2px 5px rgba(0,0,0,.1)}[data-theme=light] ._avatar_1qxaq_146{border:2px solid rgba(100,100,100,.3)}._username_1qxaq_159{font-size:1.2rem;font-weight:600;color:#e0e0e0;max-width:150px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}@media (max-width: 600px){._username_1qxaq_159{max-width:100px;font-size:1rem}}[data-theme=light] ._username_1qxaq_159{color:#333}._username_1qxaq_159._sponsorPerk_1qxaq_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)}._username_1qxaq_159._earlyUserPerk_1qxaq_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)}._username_1qxaq_159._adminPerk_1qxaq_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)}._userMenu_1qxaq_190{position:absolute;top:115%;right:0;background:rgba(36,36,40,.95);backdrop-filter:blur(10px);border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.3),0 0 15px rgba(255,255,255,.05) inset;min-width:200px;overflow:hidden;border:1px solid rgba(100,100,100,.2);z-index:1000;padding:5px}._userMenu_1qxaq_190:before{content:"";position:absolute;top:-7px;right:20px;transform:rotate(45deg);width:20px;height:20px;background:rgba(36,36,40,.95);border-left:1px solid rgba(100,100,100,.2);border-top:1px solid rgba(100,100,100,.2);z-index:-1}._userMenu_1qxaq_190 ul{list-style:none;margin:0;padding:5px}._userMenu_1qxaq_190 li{margin:5px 0}._userMenu_1qxaq_190 li:last-child{margin-top:5px}[data-theme=light] ._userMenu_1qxaq_190{background:rgba(250,250,255,.95);box-shadow:0 10px 25px rgba(0,0,0,.15),0 0 15px rgba(255,255,255,.1) inset;border:1px solid rgba(200,200,200,.3)}[data-theme=light] ._userMenu_1qxaq_190:before{background:rgba(250,250,255,.95);border-left:1px solid rgba(200,200,200,.3);border-top:1px solid rgba(200,200,200,.3)}._menuItem_1qxaq_239{display:block;width:100%;text-align:left;padding:10px 14px;background:rgba(32,32,37,.7);border:none;border-radius:8px;font-size:1.2rem;color:#e0e0e0;cursor:pointer;font-weight:500;transition:all .25s;display:flex;align-items:center;gap:10px;position:relative;overflow:hidden}._menuItem_1qxaq_239:before{content:"";position:absolute;left:0;top:0;height:100%;width:3px;background:transparent;transition:all .25s}._menuItem_1qxaq_239 svg{color:#8e8e9a;stroke-width:2px;transition:all .3s}[data-theme=light] ._menuItem_1qxaq_239 svg{color:#666;stroke:#666}[data-theme=dark] ._menuItem_1qxaq_239 svg{color:#8e8e9a;stroke:#8e8e9a}._menuItem_1qxaq_239:hover{background:rgba(45,45,50,.9);transform:translateY(-2px)}._menuItem_1qxaq_239:hover svg{color:#a0a0b0}[data-theme=light] ._menuItem_1qxaq_239{background:rgba(240,240,245,.7);color:#333}[data-theme=light] ._menuItem_1qxaq_239 svg{color:#6a6a75}[data-theme=light] ._menuItem_1qxaq_239:hover{background:rgba(230,230,235,.9)}[data-theme=light] ._menuItem_1qxaq_239:hover svg{color:#555565}._logoutButton_1qxaq_302{color:#f0f0f0;background:rgba(210,40,60,.25)}._logoutButton_1qxaq_302:before{background:rgba(210,40,60,.6)}._logoutButton_1qxaq_302 svg{color:rgba(210,60,80,.9);filter:drop-shadow(0 0 2px rgba(210,40,60,.3))}._logoutButton_1qxaq_302:hover{background:rgba(220,50,70,.35)}._logoutButton_1qxaq_302:hover:before{background:rgba(220,50,70,.8)}._logoutButton_1qxaq_302:hover svg{color:#e1465a}[data-theme=light] ._logoutButton_1qxaq_302{color:#333;background:rgba(220,53,69,.1)}[data-theme=light] ._logoutButton_1qxaq_302:before{background:rgba(220,53,69,.4)}[data-theme=light] ._logoutButton_1qxaq_302 svg{color:rgba(200,50,60,.8);filter:drop-shadow(0 0 1px rgba(200,50,60,.2))}[data-theme=light] ._logoutButton_1qxaq_302:hover{background:rgba(220,53,69,.2)}[data-theme=light] ._logoutButton_1qxaq_302:hover:before{background:rgba(220,53,69,.6)}[data-theme=light] ._logoutButton_1qxaq_302:hover svg{color:#c82832}._adminButton_1qxaq_343{color:#f0f0f0;background:linear-gradient(90deg,rgba(100,100,110,.3),rgba(80,80,90,.3));position:relative;overflow:hidden}._adminButton_1qxaq_343:before{background:rgba(80,140,200,.6)}._adminButton_1qxaq_343 svg{color:rgba(70,150,210,.9);filter:drop-shadow(0 0 2px rgba(70,150,210,.3))}._adminButton_1qxaq_343:after{content:"";position:absolute;top:0;right:0;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(70,150,210,.1),transparent);opacity:0;transition:opacity .3s ease}._adminButton_1qxaq_343:hover{background:linear-gradient(90deg,rgba(110,110,120,.35),rgba(90,90,100,.35))}._adminButton_1qxaq_343:hover:before{background:rgba(80,160,220,.8)}._adminButton_1qxaq_343:hover:after{opacity:1}._adminButton_1qxaq_343:hover svg{color:#50a0e6}[data-theme=light] ._adminButton_1qxaq_343{color:#333;background:linear-gradient(90deg,rgba(230,230,240,.5),rgba(210,210,220,.5))}[data-theme=light] ._adminButton_1qxaq_343:before{background:rgba(60,120,190,.5)}[data-theme=light] ._adminButton_1qxaq_343 svg{color:rgba(50,120,180,.9);filter:drop-shadow(0 0 1px rgba(50,120,180,.2))}[data-theme=light] ._adminButton_1qxaq_343:hover{background:linear-gradient(90deg,rgba(220,220,230,.6),rgba(200,200,210,.6))}[data-theme=light] ._adminButton_1qxaq_343:hover:before{background:rgba(60,130,200,.7)}[data-theme=light] ._adminButton_1qxaq_343:hover svg{color:#2878c8}@keyframes _shine_1qxaq_1{0%{left:-150%;opacity:0}50%{opacity:.4}to{left:150%;opacity:0}}._profileMenuItem_1qxaq_413:before{background:rgba(120,180,120,.6)}._profileMenuItem_1qxaq_413 svg{color:rgba(120,180,120,.9);filter:drop-shadow(0 0 2px rgba(120,180,120,.3))}._profileMenuItem_1qxaq_413:hover:before{background:rgba(130,200,130,.8)}._profileMenuItem_1qxaq_413:hover svg{color:#8cd28c}[data-theme=light] ._profileMenuItem_1qxaq_413:before{background:rgba(100,160,100,.5)}[data-theme=light] ._profileMenuItem_1qxaq_413 svg{color:rgba(100,160,100,.9);filter:drop-shadow(0 0 1px rgba(100,160,100,.2))}[data-theme=light] ._profileMenuItem_1qxaq_413:hover:before{background:rgba(110,180,110,.7)}[data-theme=light] ._profileMenuItem_1qxaq_413:hover svg{color:#5a965a}._feedbackButton_1qxaq_440:before{background:rgba(180,130,200,.6)}._feedbackButton_1qxaq_440 svg{color:rgba(180,130,200,.9);filter:drop-shadow(0 0 2px rgba(180,130,200,.3))}._feedbackButton_1qxaq_440:hover:before{background:rgba(200,140,220,.8)}._feedbackButton_1qxaq_440:hover svg{color:#d296e6}[data-theme=light] ._feedbackButton_1qxaq_440:before{background:rgba(160,110,180,.5)}[data-theme=light] ._feedbackButton_1qxaq_440 svg{color:rgba(160,110,180,.9);filter:drop-shadow(0 0 1px rgba(160,110,180,.2))}[data-theme=light] ._feedbackButton_1qxaq_440:hover:before{background:rgba(170,120,190,.7)}[data-theme=light] ._feedbackButton_1qxaq_440:hover svg{color:#9664aa}@media (max-width: 768px){._avatar_1qxaq_146{width:36px;height:36px}._username_1qxaq_159{font-size:1rem}._profileButton_1qxaq_110{padding:4px 10px 4px 4px}._userMenu_1qxaq_190{right:0;min-width:180px}._userMenu_1qxaq_190:before{right:20px}}._backdrop_1kje4_1{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,rgba(var(--modal-bg-rgb, 33, 33, 38),.85),rgba(var(--modal-bg-end-rgb, 68, 68, 77),.85));display:flex;justify-content:center;align-items:center;z-index:10000;backdrop-filter:blur(8px);perspective:1000px;box-sizing:border-box;overscroll-behavior:contain;transform:translateZ(0);isolation:isolate}._modal_1kje4_20{position:relative;max-width:450px;width:90%;border-radius:var(--radius-xl);background:var(--modal-bg);backdrop-filter:blur(10px);border:1px solid var(--modal-border);box-shadow:var(--modal-shadow);overflow:hidden;z-index:10001!important;padding:0;transform-style:preserve-3d;margin:auto;max-height:90vh;display:flex;flex-direction:column}._modalContent_1kje4_39{padding:30px;position:relative;z-index:5;overflow-y:auto;flex:1}._closeButton_1kje4_47{position:absolute;top:15px;right:15px;background:rgba(var(--accent-rgb),.1);border:none;font-size:20px;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--text-primary);cursor:pointer;z-index:10;box-shadow:var(--shadow);transition:all var(--transition-fast)}._closeButton_1kje4_47:hover{background:rgba(var(--accent-rgb),.2);transform:scale(1.05)}._formWrapper_1kje4_71{width:100%;position:relative;z-index:10}._formWrapper_1kje4_71 h2{font-size:2rem;margin-bottom:30px;color:var(--text-primary);text-align:center;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.1);background:linear-gradient(135deg,var(--gradient-start, #ffffff),var(--gradient-end, #a0a0a0));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}._formWrapper_1kje4_71 input{background:var(--bg-input);border:1px solid var(--border);color:var(--text-primary);position:relative;z-index:15;width:100%;padding:12px;border-radius:6px}._formWrapper_1kje4_71 input::placeholder{color:var(--text-tertiary)}._formWrapper_1kje4_71 input:focus{box-shadow:0 0 0 2px var(--accent-light);border-color:var(--accent);background:var(--bg-highlight);outline:none}._formWrapper_1kje4_71 .form-group{position:relative;z-index:20;margin-bottom:20px}._formWrapper_1kje4_71 label{color:var(--text-secondary);font-weight:500;display:block;margin-bottom:8px;position:relative;z-index:15}._formWrapper_1kje4_71 .submitButton{background:linear-gradient(90deg,var(--accent),var(--accent-hover));border-radius:var(--radius-full);font-weight:600;letter-spacing:.5px;padding:12px;box-shadow:var(--shadow);transform:translateY(0);transition:all var(--transition-normal);position:relative;overflow:hidden}._formWrapper_1kje4_71 .submitButton:hover:not(:disabled){background:linear-gradient(90deg,var(--accent-hover),var(--accent));transform:translateY(-2px);box-shadow:var(--shadow-hover)}._formWrapper_1kje4_71 .submitButton:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.2),transparent);transform:rotate(45deg);transition:all .5s;opacity:0}._formWrapper_1kje4_71 .submitButton:hover:not(:disabled):before{animation:shine 1.5s infinite}._formWrapper_1kje4_71 .switchButton{color:var(--text-tertiary);font-weight:600;transition:all var(--transition-fast)}._formWrapper_1kje4_71 .switchButton:hover:not(:disabled){color:var(--text-primary);transform:translateY(-1px)}._formWrapper_1kje4_71 p{color:var(--text-secondary)}._formWrapper_1kje4_71 .errorMessage{background-color:rgba(var(--error-rgb, 220, 53, 69),.15);border-left:3px solid var(--error);color:var(--text-primary)}._patternOverlay_1kje4_170{position:absolute;top:0;left:0;right:0;bottom:0;opacity:.05;background-image:linear-gradient(30deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(150deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(30deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(150deg,rgba(var(--accent-rgb),.1) 12%,transparent 12.5%,transparent 87%,rgba(var(--accent-rgb),.1) 87.5%,rgba(var(--accent-rgb),.1)),linear-gradient(60deg,rgba(var(--accent-rgb),.2) 25%,transparent 25.5%,transparent 75%,rgba(var(--accent-rgb),.2) 75%,rgba(var(--accent-rgb),.2));background-size:40px 70px;mix-blend-mode:overlay;z-index:1;pointer-events:none}@keyframes _shine_1kje4_1{0%{left:-200%;opacity:0}20%{opacity:1}to{left:100%;opacity:0}}@media (max-width: 600px){._backdrop_1kje4_1{align-items:center;padding:0}._modal_1kje4_20{width:100%;max-height:min(100vh - 40px,600px);border-radius:12px;margin:0 10px}._modalContent_1kje4_39{padding:24px 20px;overflow:hidden}}.ban-modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:1200;backdrop-filter:blur(4px)}[data-theme=dark] .ban-modal-overlay{background-color:rgba(0,0,0,.75)}.ban-modal{background-color:var(--background-color, white);border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,.25);width:90%;max-width:480px;overflow:hidden}[data-theme=dark] .ban-modal{box-shadow:0 8px 30px rgba(0,0,0,.4)}.ban-modal-header{background-color:#e74c3c;color:#fff;padding:20px;position:relative;display:flex;flex-direction:column;align-items:center;text-align:center}.ban-modal-header h2{margin:15px 0 0;font-size:22px;font-weight:600}.ban-modal-header .ban-close-button{position:absolute;top:15px;right:15px;background:none;border:none;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:50%;padding:6px;transition:background-color .2s}.ban-modal-header .ban-close-button:hover{background-color:rgba(255,255,255,.2)}.ban-modal-header .ban-icon-wrapper{display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:50%;width:60px;height:60px}.ban-modal-header .ban-icon-wrapper .ban-icon{color:#e74c3c;font-size:30px}[data-theme=dark] .ban-modal-header{background-color:#c0392b}.ban-modal-content{padding:25px}[data-theme=dark] .ban-modal-content{color:var(--text-primary, #e0e0e0)}.ban-details{display:flex;flex-direction:column;gap:20px;margin-bottom:25px}.ban-details .ban-reason,.ban-details .ban-admin,.ban-details .ban-time{display:flex;align-items:flex-start;gap:15px}.ban-details .ban-reason .ban-detail-icon,.ban-details .ban-admin .ban-detail-icon,.ban-details .ban-time .ban-detail-icon{font-size:22px;color:#e74c3c;flex-shrink:0;margin-top:3px}[data-theme=dark] .ban-details .ban-reason .ban-detail-icon,[data-theme=dark] .ban-details .ban-admin .ban-detail-icon,[data-theme=dark] .ban-details .ban-time .ban-detail-icon{color:#e67e22}.ban-details .ban-reason h3,.ban-details .ban-admin h3,.ban-details .ban-time h3{margin:0 0 8px;font-size:15px;font-weight:600;color:var(--text-secondary, #666)}[data-theme=dark] .ban-details .ban-reason h3,[data-theme=dark] .ban-details .ban-admin h3,[data-theme=dark] .ban-details .ban-time h3{color:#aaa}.ban-details .ban-reason p,.ban-details .ban-admin p,.ban-details .ban-time p{margin:0;padding:10px 15px;background-color:rgba(0,0,0,.05);border-radius:6px;font-size:14px;line-height:1.5;color:var(--text-primary, #333)}[data-theme=dark] .ban-details .ban-reason p,[data-theme=dark] .ban-details .ban-admin p,[data-theme=dark] .ban-details .ban-time p{background-color:rgba(255,255,255,.08)}.ban-details .ban-reason p.ban-permanent,.ban-details .ban-admin p.ban-permanent,.ban-details .ban-time p.ban-permanent{color:#c0392b;font-weight:600}[data-theme=dark] .ban-details .ban-reason p.ban-permanent,[data-theme=dark] .ban-details .ban-admin p.ban-permanent,[data-theme=dark] .ban-details .ban-time p.ban-permanent{color:#e74c3c}.ban-details .ban-reason p.ban-short,.ban-details .ban-admin p.ban-short,.ban-details .ban-time p.ban-short{color:#27ae60}[data-theme=dark] .ban-details .ban-reason p.ban-short,[data-theme=dark] .ban-details .ban-admin p.ban-short,[data-theme=dark] .ban-details .ban-time p.ban-short{color:#2ecc71}.ban-details .ban-reason p.ban-medium,.ban-details .ban-admin p.ban-medium,.ban-details .ban-time p.ban-medium{color:#f39c12}[data-theme=dark] .ban-details .ban-reason p.ban-medium,[data-theme=dark] .ban-details .ban-admin p.ban-medium,[data-theme=dark] .ban-details .ban-time p.ban-medium{color:#f1c40f}.ban-details .ban-reason p.ban-long,.ban-details .ban-admin p.ban-long,.ban-details .ban-time p.ban-long{color:#e67e22}[data-theme=dark] .ban-details .ban-reason p.ban-long,[data-theme=dark] .ban-details .ban-admin p.ban-long,[data-theme=dark] .ban-details .ban-time p.ban-long{color:#e74c3c}.ban-message{padding:15px;background-color:rgba(231,76,60,.07);border-radius:6px;border-left:3px solid #e74c3c;margin-bottom:25px}.ban-message p{margin:0;font-size:14px;line-height:1.5;color:var(--text-secondary, #666)}[data-theme=dark] .ban-message p{color:#bbb}[data-theme=dark] .ban-message{background-color:rgba(231,76,60,.15);border-color:#c0392b}.ban-ok-button{display:block;width:100%;padding:12px;background-color:#e74c3c;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s}.ban-ok-button:hover,[data-theme=dark] .ban-ok-button{background-color:#c0392b}[data-theme=dark] .ban-ok-button:hover{background-color:#a93226}@media (max-width: 480px){.ban-modal{width:95%;max-height:90vh;overflow-y:auto}.ban-modal-header h2{font-size:20px}.ban-details{gap:15px}}._form_16czx_1{display:flex;flex-direction:column;width:100%}._title_16czx_7{font-size:1.5rem;font-weight:600;margin-bottom:1.5rem;text-align:center;color:var(--text-primary)}._error_16czx_15{background-color:var(--error-light, rgba(239, 68, 68, .1));color:var(--error);padding:10px;border-radius:var(--radius-md);margin-bottom:16px;font-size:.875rem}._field_16czx_24{margin-bottom:16px}._label_16czx_28{display:block;margin-bottom:6px;font-size:.875rem;font-weight:500;color:var(--text-secondary)}._input_16czx_36{width:100%;padding:10px 12px;font-size:1rem;border:1px solid var(--border);border-radius:var(--radius-md);background-color:var(--bg-input);color:var(--text-primary);transition:border-color var(--transition-fast)}._input_16czx_36:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light)}._input_16czx_36::placeholder{color:var(--text-tertiary)}._input_16czx_36:disabled{background-color:var(--bg-highlight);cursor:not-allowed}._forgotPassword_16czx_59{text-align:right;margin-bottom:16px}._textButton_16czx_64{background:none;border:none;color:var(--accent);font-size:.875rem;cursor:pointer;padding:0}._textButton_16czx_64:hover{text-decoration:underline;color:var(--accent-hover)}._submitButton_16czx_77{padding:10px 16px;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:1rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}._submitButton_16czx_77:hover:not(:disabled){background-color:var(--accent-hover)}._terms_16czx_96{margin-bottom:16px;font-size:.75rem;color:var(--text-tertiary);text-align:center}._link_16czx_103{color:var(--accent);text-decoration:none}._link_16czx_103:hover{text-decoration:underline;color:var(--accent-hover)}._formContainer_16czx_112{display:flex;flex-direction:column;width:100%;color:var(--text-primary)}._formContainer_16czx_112 h2{text-align:center;margin-bottom:30px;color:var(--text-primary);font-size:28px;font-weight:700;letter-spacing:.5px;text-shadow:0 2px 4px rgba(0,0,0,.1);background:linear-gradient(135deg,var(--gradient-start, #ffffff),var(--gradient-end, #a0a0a0));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}._errorMessage_16czx_133{background-color:rgba(var(--error-rgb, 220, 53, 69),.15);border-left:3px solid var(--error);color:var(--text-primary);padding:12px 15px;border-radius:var(--radius-md);margin-bottom:20px;font-size:14px;box-shadow:var(--shadow)}._formGroup_16czx_144{margin-bottom:24px}._formGroup_16czx_144 label{display:flex;align-items:center;margin-bottom:10px;color:var(--text-secondary);font-weight:500;font-size:16px}._formGroup_16czx_144 ._inputIcon_16czx_155{margin-right:8px;font-size:18px;color:var(--text-tertiary)}._formGroup_16czx_144 ._inputWrapper_16czx_160{position:relative;width:100%}._formGroup_16czx_144 ._inputIconInside_16czx_164{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-tertiary);font-size:16px;pointer-events:none;opacity:.9;z-index:30}._formGroup_16czx_144 ._inputIconInside_16czx_164 svg{stroke-width:2px}._formGroup_16czx_144 input{width:100%;padding:14px 14px 14px 40px;border:1px solid var(--border);border-radius:var(--radius-md);background-color:var(--bg-input);color:var(--text-primary);font-size:16px;transition:all var(--transition-normal);position:relative;z-index:25}._formGroup_16czx_144 input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light);background-color:var(--bg-highlight)}._formGroup_16czx_144 input:disabled{opacity:.7;cursor:not-allowed}._formGroup_16czx_144 input::placeholder{color:var(--text-tertiary)}._charCounter_16czx_204{display:block;text-align:right;margin-top:4px;font-size:12px;color:var(--text-tertiary);transition:color var(--transition-fast)}._submitButton_16czx_77{width:100%;padding:14px;background:linear-gradient(90deg,var(--accent),var(--accent-hover));color:#fff;border:none;border-radius:var(--radius-full);font-size:16px;font-weight:600;cursor:pointer;margin-bottom:20px;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden;box-shadow:var(--shadow)}._submitButton_16czx_77 ._buttonIcon_16czx_231{margin-right:8px;font-size:18px}._submitButton_16czx_77:hover:not(:disabled){background:linear-gradient(90deg,var(--accent-hover),var(--accent));box-shadow:var(--shadow-hover);transform:translateY(-2px)}._submitButton_16czx_77:disabled{opacity:.7;cursor:not-allowed}._submitButton_16czx_77:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(to right,rgba(255,255,255,0),rgba(255,255,255,.2),rgba(255,255,255,0));transform:rotate(45deg);opacity:0;transition:all .5s}._submitButton_16czx_77:hover:not(:disabled):before{animation:_shimmer_16czx_1 1.5s infinite}._switchForm_16czx_260{display:flex;flex-direction:column;align-items:center;margin-top:10px}._switchForm_16czx_260 p{color:var(--text-secondary);margin-bottom:8px;font-size:15px}._switchButton_16czx_272{background:none;border:none;color:var(--text-tertiary);font-weight:600;font-size:15px;cursor:pointer;padding:0;position:relative;z-index:1;transition:all var(--transition-fast)}._switchButton_16czx_272:after{content:"";position:absolute;width:100%;height:2px;bottom:-2px;left:0;background:linear-gradient(90deg,var(--accent),var(--accent-hover));transform:scaleX(0);transform-origin:bottom right;transition:transform .3s ease-out}._switchButton_16czx_272:hover:not(:disabled){color:var(--text-primary)}._switchButton_16czx_272:hover:not(:disabled):after{transform:scaleX(1);transform-origin:bottom left}._switchButton_16czx_272:disabled{opacity:.7;cursor:not-allowed}@keyframes _shimmer_16czx_1{0%{left:-150%;opacity:0}50%{opacity:.4}to{left:150%;opacity:0}}@media (max-width: 600px){._formContainer_16czx_112 h2{font-size:24px;margin-bottom:20px}._formGroup_16czx_144{margin-bottom:18px}._formGroup_16czx_144 input{padding:12px 12px 12px 36px}}._notification_pnfun_1{display:flex;align-items:center;padding:12px 16px;border-radius:8px;margin-bottom:16px;box-shadow:0 4px 12px rgba(0,0,0,.1);max-width:100%;font-size:14px;line-height:1.5;position:relative}[data-theme=dark] ._notification_pnfun_1{box-shadow:0 4px 16px rgba(0,0,0,.2)}._iconContainer_pnfun_17{display:flex;align-items:center;justify-content:center;margin-right:12px;flex-shrink:0}._messageContainer_pnfun_25{flex-grow:1;margin-right:8px;word-break:break-word}._closeButton_pnfun_31{background:none;border:none;cursor:pointer;font-size:20px;line-height:1;padding:0;display:flex;align-items:center;justify-content:center;opacity:.7;transition:opacity .2s;width:24px;height:24px;flex-shrink:0}._closeButton_pnfun_31:hover{opacity:1}._closeButton_pnfun_31:focus{outline:none}._success_pnfun_54{background-color:rgba(46,204,113,.1);border-left:4px solid #2ecc71;color:#27ae60}._success_pnfun_54 ._iconContainer_pnfun_17{color:#2ecc71}._success_pnfun_54 ._closeButton_pnfun_31{color:#27ae60}[data-theme=dark] ._success_pnfun_54{background-color:rgba(46,204,113,.15);color:#2ecc71}._error_pnfun_70{background-color:rgba(231,76,60,.1);border-left:4px solid #e74c3c;color:#c0392b}._error_pnfun_70 ._iconContainer_pnfun_17{color:#e74c3c}._error_pnfun_70 ._closeButton_pnfun_31{color:#c0392b}[data-theme=dark] ._error_pnfun_70{background-color:rgba(231,76,60,.15);color:#e74c3c}._info_pnfun_86{background-color:rgba(52,152,219,.1);border-left:4px solid #3498db;color:#2980b9}._info_pnfun_86 ._iconContainer_pnfun_17{color:#3498db}._info_pnfun_86 ._closeButton_pnfun_31{color:#2980b9}[data-theme=dark] ._info_pnfun_86{background-color:rgba(52,152,219,.15);color:#3498db}@media (max-width: 576px){._notification_pnfun_1{padding:12px 14px;font-size:13px}}._perkBase_14u1w_18{font-weight:600!important;font-size:inherit!important;line-height:inherit!important;font-family:inherit!important;letter-spacing:inherit!important;display:inline-block!important}._sponsorPerk_14u1w_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)!important}._earlyUserPerk_14u1w_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)!important}._adminPerk_14u1w_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)!important}._userPerk_14u1w_45{color:var(--user-color)!important;text-shadow:none!important}:root{--sponsor-color: #ffcf4a;--sponsor-color-rgb: 255, 207, 74;--sponsor-shadow-color: rgba(255, 207, 74, .5);--early-user-color: #8bc9e3;--early-user-color-rgb: 139, 201, 227;--early-user-shadow-color: rgba(139, 201, 227, .5);--admin-color: #ff6b6b;--admin-color-rgb: 255, 107, 107;--admin-shadow-color: rgba(255, 107, 107, .5);--user-color: #888888;--user-color-rgb: 136, 136, 136;--user-shadow-color: rgba(136, 136, 136, .5)}._perkBase_1bbdr_18{font-weight:600!important;font-size:inherit!important;line-height:inherit!important;font-family:inherit!important;letter-spacing:inherit!important;display:inline-block!important}._sponsorPerk_1bbdr_27{color:var(--sponsor-color)!important;text-shadow:0 0 5px var(--sponsor-shadow-color)!important}._earlyUserPerk_1bbdr_33{color:var(--early-user-color)!important;text-shadow:0 0 5px var(--early-user-shadow-color)!important}._adminPerk_1bbdr_39{color:var(--admin-color)!important;text-shadow:0 0 5px var(--admin-shadow-color)!important}._userPerk_1bbdr_45{color:var(--user-color)!important;text-shadow:none!important}._profileContainer_1bbdr_51{max-width:900px;margin:30px auto;padding:30px;background-color:var(--bg-secondary);border-radius:var(--radius-lg);box-shadow:var(--shadow)}@media (max-width: 600px){._profileContainer_1bbdr_51{padding:20px 15px}}._loading_1bbdr_65,._error_1bbdr_65{display:flex;justify-content:center;align-items:center;height:200px;font-size:18px;color:var(--text-primary)}._error_1bbdr_65{color:var(--error)}._profileHeader_1bbdr_78{display:flex;margin-bottom:40px}@media (max-width: 600px){._profileHeader_1bbdr_78{flex-direction:column;align-items:center}}._avatarSection_1bbdr_89{position:relative;margin-right:40px}@media (max-width: 600px){._avatarSection_1bbdr_89{margin-right:0;margin-bottom:20px}}._avatarContainer_1bbdr_100{position:relative;width:180px;height:180px;border-radius:50%;overflow:hidden}._profileAvatar_1bbdr_108{width:100%;height:100%;object-fit:cover;border:5px solid var(--accent);border-radius:50%;box-shadow:0 4px 10px rgba(0,0,0,.1)}._changeAvatarButton_1bbdr_117{display:flex;align-items:center;justify-content:center;gap:8px;background-color:var(--accent);color:#fff;border:none;border-radius:8px;padding:8px 16px;font-size:16px;font-weight:600;cursor:pointer;margin-top:16px;box-shadow:0 2px 6px rgba(0,0,0,.2);transition:all .2s ease}._changeAvatarButton_1bbdr_117:hover{background-color:var(--accent-dark);transform:translateY(-2px)}@media (max-width: 600px){._changeAvatarButton_1bbdr_117{position:absolute;bottom:0;right:0;width:auto;height:auto;padding:8px;border-radius:50%;background-color:var(--accent);color:#fff;font-size:0;margin:0;transform:translate(5px,-5px)}._changeAvatarButton_1bbdr_117 svg{font-size:18px}._changeAvatarButton_1bbdr_117:hover{transform:translate(5px,-5px) scale(1.1)}}._profileInfo_1bbdr_161{flex:1}._displayName_1bbdr_165{font-size:2rem!important;font-weight:700;margin-bottom:20px;text-shadow:0 1px 3px rgba(0,0,0,.3);line-height:1.2;word-wrap:break-word;word-break:break-word;overflow-wrap:break-word;max-width:100%}@media (max-width: 600px){._displayName_1bbdr_165{font-size:1.75rem!important;text-align:center}}._userMeta_1bbdr_183{display:grid;gap:15px}@media (max-width: 600px){._userMeta_1bbdr_183{width:100%}}._userRole_1bbdr_193,._userJoined_1bbdr_193,._userEmail_1bbdr_193,._userPrivileges_1bbdr_193{display:flex;align-items:flex-start;font-size:16px;flex-wrap:wrap}@media (max-width: 600px){._userRole_1bbdr_193,._userJoined_1bbdr_193,._userEmail_1bbdr_193,._userPrivileges_1bbdr_193{flex-direction:column;gap:5px}}._label_1bbdr_206{min-width:170px;font-weight:600;color:var(--text-secondary)}@media (max-width: 600px){._label_1bbdr_206{min-width:unset;width:100%}}._value_1bbdr_218{color:var(--text-primary);font-weight:500;word-wrap:break-word;word-break:break-word;overflow-wrap:break-word;max-width:100%}._privilegeContainer_1bbdr_227{display:flex;align-items:center;gap:15px;flex-wrap:wrap}@media (max-width: 600px){._privilegeContainer_1bbdr_227{width:100%}}._changePerkButton_1bbdr_239{background-color:var(--accent);color:#fff;border:none;border-radius:4px;padding:5px 10px;font-size:12px;cursor:pointer}._changePerkButton_1bbdr_239:hover{background-color:var(--accent-dark)}._adminActions_1bbdr_252,._personalSettings_1bbdr_252{margin-top:30px;padding-top:20px;border-top:1px solid var(--border)}._adminActions_1bbdr_252 h2,._personalSettings_1bbdr_252 h2{font-size:20px;margin-bottom:15px;color:var(--text-primary)}._adminActions_1bbdr_252 h2{display:flex;align-items:center;gap:10px}._adminActions_1bbdr_252 h2 svg{color:var(--accent)}._actionButtons_1bbdr_273{display:flex;gap:10px}._editButton_1bbdr_278,._banButton_1bbdr_278,._saveButton_1bbdr_278,._cancelButton_1bbdr_278{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-weight:500;display:flex;align-items:center;gap:6px}._editButton_1bbdr_278:hover,._banButton_1bbdr_278:hover,._saveButton_1bbdr_278:hover,._cancelButton_1bbdr_278:hover{opacity:.9}._editButton_1bbdr_278{background-color:var(--accent);color:#fff}._banButton_1bbdr_278{background-color:#e74c3c!important;color:#fff;position:relative;overflow:hidden}._banButton_1bbdr_278:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:.5s}._banButton_1bbdr_278:hover:before{left:100%}._banButton_1bbdr_278:hover:not(:disabled){background-color:#c0392b!important;transform:translateY(-3px);box-shadow:0 8px 15px rgba(231,76,60,.4)!important}._saveButton_1bbdr_278{background-color:#2ecc71;color:#fff}._cancelButton_1bbdr_278{background-color:#f1f1f1;color:#333}[data-theme=dark] ._cancelButton_1bbdr_278{background-color:#333;color:#f1f1f1}._settingGroup_1bbdr_336{margin-bottom:15px}._settingGroup_1bbdr_336 label{display:block;margin-bottom:5px;color:var(--text-secondary)}._settingControl_1bbdr_345{display:flex;gap:10px}._settingControl_1bbdr_345 input{flex:1;padding:8px;border:1px solid var(--border);border-radius:4px;background-color:var(--bg-primary);color:var(--text-primary)}._backdrop_1bbdr_359{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,rgba(var(--modal-bg-rgb, 33, 33, 38),.85),rgba(var(--modal-bg-end-rgb, 68, 68, 77),.85));display:flex;justify-content:center;align-items:center;z-index:10000;backdrop-filter:blur(8px);perspective:1000px;box-sizing:border-box;overscroll-behavior:contain;transform:translateZ(0);isolation:isolate;padding:20px}@media (max-width: 600px){._backdrop_1bbdr_359{padding:0}}._modal_1bbdr_386{position:relative;max-width:450px;width:90%;border-radius:var(--radius-xl);background:var(--modal-bg, var(--bg-secondary));backdrop-filter:blur(10px);border:1px solid var(--modal-border, var(--border));box-shadow:var(--modal-shadow, var(--shadow));overflow:hidden;z-index:10001!important;padding:0;transform-style:preserve-3d;margin:auto;max-height:90vh;display:flex;flex-direction:column}@media (max-width: 600px){._modal_1bbdr_386{width:100%;height:100vh;max-height:100vh;border-radius:0;margin:0}}._modalContent_1bbdr_415{padding:30px;position:relative;z-index:5;overflow-y:auto;flex:1}@media (max-width: 600px){._modalContent_1bbdr_415{padding:24px 20px}}._modalContent_1bbdr_415 h3{font-size:22px;margin-bottom:20px;color:var(--text-primary);text-align:center;font-weight:600}._closeButton_1bbdr_435{position:absolute;top:15px;right:15px;background:rgba(var(--accent-rgb),.1);border:none;font-size:20px;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--text-primary);cursor:pointer;z-index:10;box-shadow:var(--shadow);transition:all var(--transition-fast);margin:0}._closeButton_1bbdr_435:hover{background:rgba(var(--accent-rgb),.2);transform:scale(1.05)}._avatarsGrid_1bbdr_461{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:20px;margin-top:20px}._avatarCard_1bbdr_468{cursor:pointer;padding:15px;border-radius:12px;display:flex;flex-direction:column;align-items:center;border:1px solid var(--border);background:var(--bg-secondary);transition:all .2s ease;position:relative}._avatarCard_1bbdr_468._selectedAvatar_1bbdr_480{border:2px solid var(--accent);background:var(--bg-highlight)}._avatarCard_1bbdr_468:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.1)}._avatarImageContainer_1bbdr_489{position:relative;width:90px;height:90px;margin-bottom:10px}._avatarImage_1bbdr_489{width:90px;height:90px;border-radius:50%;object-fit:cover;border:1px solid var(--border)}._selectedAvatar_1bbdr_480 ._avatarImage_1bbdr_489{border:3px solid var(--accent)}._selectedIndicator_1bbdr_507{position:absolute;top:-8px;right:-8px;background:var(--accent);border-radius:50%;padding:3px;display:flex;justify-content:center;align-items:center}._avatarName_1bbdr_519{font-size:14px;font-weight:500;color:var(--text-primary)}._selectedAvatar_1bbdr_480 ._avatarName_1bbdr_519{font-weight:600}._perksList_1bbdr_529{display:flex;flex-direction:column;gap:12px}._perkOption_1bbdr_535{display:flex;justify-content:space-between;align-items:center;padding:15px;background-color:var(--bg-highlight);border-radius:8px;cursor:pointer;border:1px solid var(--border);transition:all .2s ease}._perkOption_1bbdr_535:hover{transform:translate(5px);background-color:var(--bg-hover);border-color:var(--accent)}._activePerkOption_1bbdr_552{border:2px solid var(--accent);background-color:rgba(var(--accent-rgb),.1)}._perkName_1bbdr_557{font-weight:600;font-size:16px;padding:6px 12px;border-radius:20px;display:inline-block}._activePerkIndicator_1bbdr_565{display:flex;align-items:center;justify-content:center;background-color:var(--accent);color:#fff;width:24px;height:24px;border-radius:50%}._modalMotion_1bbdr_576{width:90%;max-width:500px;overflow:visible}@media (max-width: 600px){._modalMotion_1bbdr_576{width:100%;height:100%;max-width:100%}}._modalFooter_1bbdr_589{text-align:center;margin-top:10px}._modalForm_1bbdr_594{display:flex;flex-direction:column;gap:20px;width:100%}._formGroup_1bbdr_601{display:flex;flex-direction:column;gap:8px}._formGroup_1bbdr_601 label{font-weight:500;font-size:15px;color:var(--text-primary)}._formGroup_1bbdr_601 ._formControl_1bbdr_611{padding:14px 16px;border-radius:10px;border:1px solid var(--border);background-color:var(--bg-input);color:var(--text-primary);font-size:16px;transition:all .3s;width:100%}._formGroup_1bbdr_601 ._formControl_1bbdr_611:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(var(--accent-rgb),.2);background-color:var(--bg-secondary)}._formGroup_1bbdr_601 ._formControl_1bbdr_611:disabled{opacity:.7;cursor:not-allowed}._formActions_1bbdr_632{display:flex;justify-content:flex-end;gap:14px;margin-top:20px}._formActions_1bbdr_632 button{padding:12px 22px;border-radius:10px;font-weight:500;font-size:16px;transition:all .3s;cursor:pointer;display:flex;align-items:center;gap:8px}._formActions_1bbdr_632 button:disabled{opacity:.7;cursor:not-allowed}._formActions_1bbdr_632 ._cancelButton_1bbdr_278{background-color:var(--bg-primary);border:1px solid var(--border);color:var(--text-secondary)}._formActions_1bbdr_632 ._cancelButton_1bbdr_278:hover:not(:disabled){background-color:var(--bg-hover);transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.1)}._formActions_1bbdr_632 ._cancelButton_1bbdr_278:active:not(:disabled){transform:translateY(0);box-shadow:none}._formActions_1bbdr_632 ._submitButton_1bbdr_667{background-color:var(--accent);border:none;color:#fff;box-shadow:0 4px 10px rgba(var(--accent-rgb),.3)}._formActions_1bbdr_632 ._submitButton_1bbdr_667:hover:not(:disabled){background-color:var(--accent-dark);transform:translateY(-3px);box-shadow:0 8px 15px rgba(var(--accent-rgb),.4)}._formActions_1bbdr_632 ._submitButton_1bbdr_667:active:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px rgba(var(--accent-rgb),.3)}._formActions_1bbdr_632 ._banButton_1bbdr_278{background-color:var(--error)}._formActions_1bbdr_632 ._banButton_1bbdr_278:hover:not(:disabled){background-color:var(--error-dark, #c0392b)}._modalHeader_1bbdr_689{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:18px;border-bottom:2px solid rgba(var(--accent-rgb),.1)}@media (max-width: 600px){._modalHeader_1bbdr_689{margin-bottom:16px;margin-top:8px}}._modalHeader_1bbdr_689 h3{font-size:22px;font-weight:600;margin:0;color:var(--text-primary);text-align:left}._modalHeader_1bbdr_689 ._closeButton_1bbdr_435{background:rgba(0,0,0,.05);border:none;color:var(--text-secondary);cursor:pointer;padding:10px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease;margin:0;width:auto;box-shadow:none}._modalHeader_1bbdr_689 ._closeButton_1bbdr_435:hover{background-color:rgba(var(--accent-rgb),.1);color:var(--accent);transform:none;box-shadow:none}._errorMessage_1bbdr_732,._successMessage_1bbdr_732{padding:14px;border-radius:8px;display:flex;align-items:center;gap:12px;font-size:14px;line-height:1.4;animation:_fadeIn_1bbdr_1 .3s ease-in-out}._errorMessage_1bbdr_732{background-color:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);color:#dc2626}._successMessage_1bbdr_732{background-color:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.2);color:#16a34a}@keyframes _fadeIn_1bbdr_1{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}._passwordStrength_1bbdr_765{margin-top:8px;width:100%}._passwordStrengthInfo_1bbdr_770{display:flex;justify-content:space-between;margin-bottom:4px}._passwordStrengthText_1bbdr_776{font-size:14px;font-weight:500}._passwordStrengthPercentage_1bbdr_781{font-size:14px;color:var(--text-secondary)}._passwordStrengthBar_1bbdr_786{height:6px;width:100%;background-color:#e5e7eb;border-radius:3px;overflow:hidden;position:relative}._passwordStrengthFill_1bbdr_795{height:100%;position:absolute;left:0;top:0;border-radius:3px;transition:width .3s ease-out}._formActions_1bbdr_632 ._submitButton_1bbdr_667{min-width:130px;display:flex;justify-content:center;align-items:center}._formActions_1bbdr_632 ._submitButton_1bbdr_667 span{display:inline-flex;align-items:center}._successMessage_1bbdr_732{padding:40px 20px;display:flex;flex-direction:column;align-items:center;gap:20px;text-align:center}._successMessage_1bbdr_732 svg{font-size:45px;color:#16a34a;background:rgba(34,197,94,.2);padding:18px;border-radius:50%;box-shadow:0 5px 15px rgba(34,197,94,.3)}[data-theme=dark] ._successMessage_1bbdr_732 svg{color:#22c55e;background:rgba(22,163,74,.25);box-shadow:0 0 0 3px rgba(34,197,94,.4),0 5px 15px rgba(34,197,94,.4)}._successMessage_1bbdr_732 span{font-weight:600;font-size:20px;color:var(--text-primary)}._avatarWrapper_1bbdr_843{position:relative;border-radius:50%;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.1);transition:all .3s ease}._avatarWrapper_1bbdr_843:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(0,0,0,.2)}._loadingOverlay_1bbdr_855{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(var(--accent-rgb),.7);display:flex;align-items:center;justify-content:center;border-radius:50%;z-index:2}._avatarHint_1bbdr_869{text-align:center;color:var(--text-secondary);margin-top:20px;font-size:15px;line-height:1.5;padding:0 15px}._avatarHint_1bbdr_869:before{content:"";display:block;width:40px;height:2px;background-color:rgba(var(--accent-rgb),.3);margin:0 auto 15px}._adminEditForm_1bbdr_886{background-color:var(--bg-secondary);padding:20px;border-radius:8px;margin-top:20px;border:1px solid var(--border)}[data-theme=dark] ._adminEditForm_1bbdr_886{background-color:rgba(255,255,255,.05)}._formGroup_1bbdr_601{margin-bottom:20px}._formGroup_1bbdr_601 label{display:block;margin-bottom:8px;font-weight:500;color:var(--text-primary)}._blockLabel_1bbdr_907{display:block;margin-bottom:10px;font-weight:500;color:var(--text-primary)}._formInput_1bbdr_914,._formSelect_1bbdr_914{width:100%;padding:10px;border:1px solid var(--border);border-radius:4px;background-color:var(--bg-input);color:var(--text-primary);font-size:16px}._formInput_1bbdr_914:focus,._formSelect_1bbdr_914:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.1)}[data-theme=dark] ._formInput_1bbdr_914,[data-theme=dark] ._formSelect_1bbdr_914{background-color:rgba(255,255,255,.1);border-color:rgba(255,255,255,.2)}._checkboxGroup_1bbdr_933{display:flex;flex-direction:column;gap:12px}._checkboxLabel_1bbdr_939{display:flex;align-items:flex-start;gap:10px;cursor:pointer}._checkboxLabel_1bbdr_939 input[type=checkbox]{margin-top:3px;cursor:pointer}._checkboxLabel_1bbdr_939 input[type=checkbox]:disabled{cursor:not-allowed;opacity:.7}._checkboxText_1bbdr_954{display:flex;flex-direction:column}._statusMessage_1bbdr_959{padding:12px;border-radius:4px;margin-bottom:20px;display:flex;align-items:center;gap:10px}._statusMessage_1bbdr_959._error_1bbdr_65{background-color:rgba(231,76,60,.1);color:#e74c3c;border-left:3px solid #e74c3c}._statusMessage_1bbdr_959._success_1bbdr_732{background-color:rgba(46,204,113,.1);color:#2ecc71;border-left:3px solid #2ecc71}._statusMessage_1bbdr_959._info_1bbdr_977{background-color:rgba(52,152,219,.1);color:#3498db;border-left:3px solid #3498db}._statusMessage_1bbdr_959 svg{font-size:18px}._loadingIcon_1bbdr_986{animation:_spin_1bbdr_1 1s linear infinite}@keyframes _spin_1bbdr_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._adminActions_1bbdr_252{margin-top:2rem;padding:1.5rem;background-color:#f8f9fa;border-radius:10px;border:1px solid #eee;box-shadow:0 2px 10px rgba(0,0,0,.05)}[data-theme=dark] ._adminActions_1bbdr_252{background-color:#292929;border-color:#333;box-shadow:0 2px 10px rgba(0,0,0,.2)}._adminActions_1bbdr_252 h2{font-size:1.25rem;margin-bottom:1rem;color:#333;display:flex;align-items:center;gap:8px}[data-theme=dark] ._adminActions_1bbdr_252 h2{color:#e0e0e0}._adminActions_1bbdr_252 h2 svg{color:#666}[data-theme=dark] ._adminActions_1bbdr_252 h2 svg{color:#999}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273{display:flex;gap:10px}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button{padding:10px 15px;border:none;border-radius:5px;font-size:.9rem;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .2s ease}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button svg{font-size:1rem}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278{background-color:#3498db;color:#fff}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278:hover{background-color:#2980b9;transform:translateY(-2px);box-shadow:0 2px 5px rgba(0,0,0,.2)}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278{background-color:#2980b9}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._editButton_1bbdr_278:hover{background-color:#3498db;box-shadow:0 2px 5px rgba(0,0,0,.4)}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278{background-color:#e74c3c;color:#fff}._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278:hover{background-color:#c0392b;transform:translateY(-2px);box-shadow:0 2px 5px rgba(0,0,0,.2)}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278{background-color:#c0392b}[data-theme=dark] ._adminActions_1bbdr_252 ._actionButtons_1bbdr_273 button._banButton_1bbdr_278:hover{background-color:#e74c3c;box-shadow:0 2px 5px rgba(0,0,0,.4)}._adminEditForm_1bbdr_886{background-color:#fff;padding:1.5rem;border-radius:8px;border:1px solid #eee;margin-top:1rem}[data-theme=dark] ._adminEditForm_1bbdr_886{background-color:#252530;border-color:#333}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601{margin-bottom:1.25rem}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label{display:block;margin-bottom:.75rem;font-size:.95rem;font-weight:500;color:#444;display:flex;align-items:center;gap:6px}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label{color:#ccc}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label svg{color:#666}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 label svg{color:#999}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]{width:100%;padding:.75rem 1rem;border:1px solid #ddd;border-radius:6px;font-size:1rem}._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.2)}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]{background-color:#1e1e24;border-color:#444;color:#e0e0e0}[data-theme=dark] ._adminEditForm_1bbdr_886 ._formGroup_1bbdr_601 input[type=text]:focus{border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.3)}._adminEditForm_1bbdr_886 ._perksOptions_1bbdr_1133{display:flex;flex-direction:column;gap:.75rem;padding:1rem;background-color:#f8f9fa;border-radius:6px;border:1px solid #eee}[data-theme=dark] ._adminEditForm_1bbdr_886 ._perksOptions_1bbdr_1133{background-color:#1e1e24;border-color:#333}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535{display:flex;align-items:center}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 label{margin:0 0 0 .75rem;font-weight:400;cursor:pointer;font-size:.95rem}[data-theme=dark] ._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 label{color:#ccc}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 input[type=checkbox]{cursor:pointer;width:18px;height:18px}._adminEditForm_1bbdr_886 ._perkOption_1bbdr_535 input[type=checkbox]:checked{accent-color:#3498db}._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167{background-color:rgba(52,152,219,.05);padding:10px;border-radius:6px;border-left:3px solid #3498db}[data-theme=dark] ._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167{background-color:rgba(52,152,219,.1)}._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167 ._baseLabel_1bbdr_1176{font-weight:500}._adminEditForm_1bbdr_886 ._basePerk_1bbdr_1167 ._baseLabel_1bbdr_1176 ._baseNote_1bbdr_1179{font-size:.8rem;opacity:.7;font-style:italic;margin-left:5px}._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185{width:100%;padding:.75rem 1rem;border:1px solid #ddd;border-radius:6px;font-size:1rem;background-color:#fff}._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.2)}[data-theme=dark] ._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185{background-color:#1e1e24;border-color:#444;color:#e0e0e0}[data-theme=dark] ._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185:focus{border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,.3)}[data-theme=dark] ._adminEditForm_1bbdr_886 ._selectPerk_1bbdr_1185 option{background-color:#1e1e24}._adminEditForm_1bbdr_886 ._formActions_1bbdr_632{display:flex;justify-content:flex-end;gap:.75rem;margin-top:1.5rem}._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278,._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278{padding:.75rem 1.5rem;border-radius:6px;font-size:.95rem;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .2s ease}._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278{background-color:#f0f0f0;border:none;color:#333}._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278:hover{background-color:#e0e0e0}[data-theme=dark] ._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278{background-color:#3a3a3a;color:#ddd}[data-theme=dark] ._adminEditForm_1bbdr_886 ._cancelButton_1bbdr_278:hover{background-color:#444}._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278{background-color:#3498db;border:none;color:#fff}._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278:hover:not(:disabled){background-color:#2980b9}._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278:disabled{opacity:.7;cursor:not-allowed}[data-theme=dark] ._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278{background-color:#2980b9}[data-theme=dark] ._adminEditForm_1bbdr_886 ._saveButton_1bbdr_278:hover:not(:disabled){background-color:#3498db}._statusMessage_1bbdr_959{padding:.75rem 1rem;border-radius:6px;margin-bottom:1rem;font-size:.9rem;display:flex;align-items:center;gap:8px}._statusMessage_1bbdr_959 svg{font-size:1.1rem;flex-shrink:0}._statusMessage_1bbdr_959._success_1bbdr_732{background-color:rgba(46,204,113,.1);border-left:3px solid #2ecc71;color:#2ecc71}[data-theme=dark] ._statusMessage_1bbdr_959._success_1bbdr_732{background-color:rgba(46,204,113,.15)}._statusMessage_1bbdr_959._error_1bbdr_65{background-color:rgba(231,76,60,.1);border-left:3px solid #e74c3c;color:#e74c3c}[data-theme=dark] ._statusMessage_1bbdr_959._error_1bbdr_65{background-color:rgba(231,76,60,.15)}._statusMessage_1bbdr_959._info_1bbdr_977{background-color:rgba(52,152,219,.1);border-left:3px solid #3498db;color:#3498db}[data-theme=dark] ._statusMessage_1bbdr_959._info_1bbdr_977{background-color:rgba(52,152,219,.15)}._banInfoBox_1bbdr_1299{background-color:rgba(231,76,60,.1);border-left:4px solid #e74c3c;border-radius:4px;padding:15px;margin-bottom:20px}._banInfoBox_1bbdr_1299 h3{color:#e74c3c;margin-top:0;margin-bottom:15px;font-size:16px;display:flex;align-items:center}._banInfoBox_1bbdr_1299 h3:before{content:"⚠️";margin-right:8px}[data-theme=dark] ._banInfoBox_1bbdr_1299{background-color:rgba(231,76,60,.2);border-color:#c0392b}[data-theme=dark] ._banInfoBox_1bbdr_1299 h3{color:#e67e22}._banDetails_1bbdr_1326{margin-bottom:15px}._banDetails_1bbdr_1326 p{margin:8px 0;color:var(--text-primary);font-size:14px}._banDetails_1bbdr_1326 ._bannedStatus_1bbdr_1334{display:inline-block;background-color:#e74c3c;color:#fff;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500}[data-theme=dark] ._banDetails_1bbdr_1326 ._bannedStatus_1bbdr_1334{background-color:#c0392b}._banDetails_1bbdr_1326 ._banDuration_1bbdr_1346{display:inline-flex;align-items:center;gap:5px;color:var(--text-primary)}._banDetails_1bbdr_1326 ._banDuration_1bbdr_1346 svg{color:#e74c3c}._unbanButton_1bbdr_1356{background-color:#27ae60;color:#fff;border:none;border-radius:4px;padding:8px 16px;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:8px;transition:background-color .2s}._unbanButton_1bbdr_1356:hover{background-color:#2ecc71}._unbanButton_1bbdr_1356:disabled{opacity:.7;cursor:not-allowed}[data-theme=dark] ._unbanButton_1bbdr_1356{background-color:#219653}[data-theme=dark] ._unbanButton_1bbdr_1356:hover{background-color:#27ae60}._activePerk_1bbdr_552{font-size:1.8rem!important;border-radius:6px;display:inline-flex;align-items:center;cursor:pointer;background-color:var(--bg-secondary);box-shadow:0 2px 4px rgba(0,0,0,.05);margin-bottom:10px}._activePerk_1bbdr_552 ._editPerkIcon_1bbdr_1393{margin-left:8px}._profileDetail_1bbdr_1397{font-size:16px;margin-bottom:12px;display:flex;align-items:center;gap:10px}._profileDetail_1bbdr_1397:last-child{margin-bottom:0}._profileDetail_1bbdr_1397 ._detailIcon_1bbdr_1407{color:var(--text-secondary);flex-shrink:0}@media (max-width: 600px){._buttonText_1bbdr_1413{display:none}}textarea._formControl_1bbdr_611{min-height:120px;resize:vertical;line-height:1.5}textarea._formControl_1bbdr_611::placeholder{color:var(--text-tertiary, #999)}select._formControl_1bbdr_611{-webkit-appearance:none;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'currentColor\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'%3e%3cpolyline points=\'6 9 12 15 18 9\'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 16px center;background-size:16px;padding-right:40px}select._formControl_1bbdr_611 option{padding:10px}._banModalHeader_1bbdr_1441{background-color:rgba(231,76,60,.1);border-left:4px solid #e74c3c;padding:12px 15px;margin-bottom:24px;border-radius:6px}._banModalHeader_1bbdr_1441 h3{display:flex;align-items:center;gap:10px;color:#e74c3c;font-weight:600;margin:0}._banModalHeader_1bbdr_1441 h3 svg{flex-shrink:0}._banModalHeader_1bbdr_1441 p{margin:10px 0 0;font-size:14px;color:var(--text-secondary);line-height:1.5}._modalDivider_1bbdr_1467{height:1px;background:linear-gradient(to right,transparent,var(--border),transparent);margin:20px 0;opacity:.5}._errorMessage_1bbdr_732{display:flex;align-items:flex-start;gap:10px;padding:12px 15px;margin-bottom:20px;border-radius:6px;background-color:rgba(231,76,60,.1);border-left:4px solid #e74c3c;color:var(--text-primary);font-size:14px;line-height:1.5}._errorMessage_1bbdr_732 svg{color:#e74c3c;margin-top:2px;flex-shrink:0}._adminAvatar_1bbdr_1494{position:relative;border:2px solid #5c6bc0;box-shadow:0 0 10px rgba(92,107,192,.5)}._adminAvatar_1bbdr_1494:hover{box-shadow:0 0 15px rgba(92,107,192,.7)}[data-theme=dark] ._adminAvatar_1bbdr_1494{border-color:#3f51b5;box-shadow:0 0 10px rgba(63,81,181,.6)}[data-theme=dark] ._adminAvatar_1bbdr_1494:hover{box-shadow:0 0 15px rgba(63,81,181,.8)}._adminAvatarBadge_1bbdr_1510{position:absolute;top:-8px;right:-8px;background-color:#5c6bc0;color:#fff;font-size:11px;font-weight:600;padding:2px 6px;border-radius:10px;z-index:2}[data-theme=dark] ._adminAvatarBadge_1bbdr_1510{background-color:#3f51b5;box-shadow:0 0 5px rgba(0,0,0,.3)}._postsContainer_1m97j_2{width:100%;max-width:800px;margin:0 auto;padding:20px}._postsHeader_1m97j_9{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px}._postsHeader_1m97j_9 h2{font-size:22px;display:flex;align-items:center;gap:8px;color:var(--text-primary);margin:0}._postsHeader_1m97j_9 h2 svg{color:var(--accent)}@media (max-width: 480px){._postsHeader_1m97j_9 h2{font-size:18px;width:100%}}._postsHeader_1m97j_9 ._headerButtons_1m97j_34{display:flex;gap:10px;align-items:center;flex-wrap:wrap}@media (max-width: 480px){._postsHeader_1m97j_9 ._headerButtons_1m97j_34{width:100%;justify-content:space-between}}._postsHeader_1m97j_9 ._refreshButton_1m97j_46,._postsHeader_1m97j_9 ._rulesButton_1m97j_46{display:flex;align-items:center;gap:6px;padding:8px 14px;border-radius:8px;font-size:14px;font-weight:500;transition:all .2s ease;background:var(--bg-secondary);color:var(--text-secondary);border:1px solid var(--border);white-space:nowrap;will-change:transform,box-shadow}._postsHeader_1m97j_9 ._refreshButton_1m97j_46 svg,._postsHeader_1m97j_9 ._rulesButton_1m97j_46 svg{font-size:16px}._postsHeader_1m97j_9 ._refreshButton_1m97j_46:hover,._postsHeader_1m97j_9 ._rulesButton_1m97j_46:hover{background:var(--bg-highlight);transform:translateY(-2px);box-shadow:0 3px 8px rgba(0,0,0,.1)}._postsHeader_1m97j_9 ._refreshButton_1m97j_46:disabled,._postsHeader_1m97j_9 ._rulesButton_1m97j_46:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 480px){._postsHeader_1m97j_9 ._refreshButton_1m97j_46,._postsHeader_1m97j_9 ._rulesButton_1m97j_46{flex:1;justify-content:center;padding:10px 8px;font-size:13px}}._postsHeader_1m97j_9 ._rulesButton_1m97j_46{background:var(--accent-light);color:var(--accent);border:1px solid transparent}._postsHeader_1m97j_9 ._rulesButton_1m97j_46 svg{color:var(--accent)}._postsHeader_1m97j_9 ._rulesButton_1m97j_46:hover{background:var(--accent-light);opacity:.9}[data-theme=dark] ._postsHeader_1m97j_9 ._rulesButton_1m97j_46{background-color:#d3d3d3;color:var(--accent);border:1px solid var(--accent)}[data-theme=dark] ._postsHeader_1m97j_9 ._rulesButton_1m97j_46:hover{background-color:rgba(52,152,219,.3)}._refreshButton_1m97j_46{padding:8px 16px;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:14px;font-weight:500;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:8px;will-change:transform,background-color}._refreshButton_1m97j_46:hover:not(:disabled){background-color:var(--bg-color);transform:translateY(-2px)}._refreshButton_1m97j_46:disabled{opacity:.7;cursor:not-allowed}._refreshButton_1m97j_46 svg{font-size:16px}._postsList_1m97j_131{display:flex;flex-direction:column;gap:24px;margin-top:20px;will-change:contents}._loading_1m97j_139{text-align:center;padding:40px 0;color:var(--text-secondary);font-size:18px;display:flex;align-items:center;justify-content:center;gap:10px}._loading_1m97j_139 svg{animation:_spin_1m97j_1 1s linear infinite;will-change:transform}._errorMessage_1m97j_162{background-color:rgba(231,76,60,.1);color:var(--error);padding:12px 16px;border-radius:var(--radius-md);margin-bottom:20px;font-size:14px;display:flex;align-items:center;gap:8px;border-left:3px solid var(--error)}._errorMessage_1m97j_162 svg{font-size:18px}._noPosts_1m97j_178{text-align:center;padding:40px 0;color:var(--text-secondary);font-size:16px;display:flex;flex-direction:column;align-items:center;gap:16px}._noPosts_1m97j_178 svg{font-size:48px;opacity:.5}._notAuthenticatedMessage_1m97j_193{text-align:center;padding:16px;background-color:var(--bg-secondary);border-radius:var(--radius-md);color:var(--text-secondary);margin-bottom:20px;font-size:15px;display:flex;align-items:center;justify-content:center;gap:8px}._notAuthenticatedMessage_1m97j_193 svg{color:var(--accent)}._createPostContainer_1m97j_210{background:var(--bg-secondary);border-radius:var(--radius-lg);border:1px solid var(--border);padding:20px;margin-bottom:24px;transition:all var(--transition-fast)}._createPostTitle_1m97j_219{font-size:1.25rem;font-weight:600;margin:0 0 16px;color:var(--text-primary);display:flex;align-items:center;gap:8px}._createPostTitle_1m97j_219 svg{color:var(--accent)}._createPostForm_1m97j_232{display:flex;flex-direction:column;gap:16px}._contentInput_1m97j_238{width:100%;padding:16px;border:1px solid var(--border);border-radius:var(--radius-md);resize:none;min-height:100px;background-color:var(--bg-input);color:var(--text-primary);font-size:1.5rem!important}._contentInput_1m97j_238:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light)}._contentInput_1m97j_238::placeholder{color:var(--text-tertiary)}._imageUrlInput_1m97j_258{width:100%;padding:12px 16px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary)}._imageUrlInput_1m97j_258:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._imageUrlInput_1m97j_258::placeholder{color:var(--text-tertiary)}._pollContainer_1m97j_275{display:flex;flex-direction:column;gap:15px;padding:20px;margin-top:15px;margin-bottom:15px;background-color:var(--bg-highlight);border-radius:12px;border:1px solid var(--border-color);position:relative}[data-theme=dark] ._pollContainer_1m97j_275{background-color:rgba(255,255,255,.03);border-color:rgba(255,255,255,.1)}._pollContainer_1m97j_275:before{content:"📊 Опрос";position:absolute;top:-10px;left:15px;background-color:var(--accent);color:#fff;font-size:12px;font-weight:600;padding:3px 10px;border-radius:12px;box-shadow:0 2px 8px rgba(29,161,242,.2);display:none}._pollQuestionInput_1m97j_306{width:100%;padding:12px 16px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);font-size:15px}._pollQuestionInput_1m97j_306:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._pollQuestionInput_1m97j_306::placeholder{color:var(--text-tertiary)}[data-theme=dark] ._pollQuestionInput_1m97j_306{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(255,255,255,.9)}[data-theme=dark] ._pollQuestionInput_1m97j_306::placeholder{color:rgba(255,255,255,.5)}._pollOptions_1m97j_332{display:flex;flex-direction:column;gap:10px}._sectionLabel_1m97j_338{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-weight:500;color:var(--text-secondary);font-size:14px}._sectionLabel_1m97j_338 svg{color:var(--text-tertiary)}[data-theme=dark] ._sectionLabel_1m97j_338{color:rgba(255,255,255,.7)}._inputWithIcon_1m97j_354{position:relative;display:flex;align-items:center}._inputWithIcon_1m97j_354 svg{position:absolute;left:12px;color:var(--text-tertiary);font-size:16px}._inputWithIcon_1m97j_354 input{padding-left:40px}._pollOptionInputWrapper_1m97j_369{display:flex;gap:10px;align-items:center}._pollOptionInput_1m97j_369{flex:1;padding:12px 16px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);font-size:14px}._pollOptionInput_1m97j_369:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._pollOptionInput_1m97j_369::placeholder{color:var(--text-tertiary)}[data-theme=dark] ._pollOptionInput_1m97j_369{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(255,255,255,.9)}[data-theme=dark] ._pollOptionInput_1m97j_369::placeholder{color:rgba(255,255,255,.5)}._removeOptionButton_1m97j_401{width:32px;height:32px;border:none;background-color:rgba(231,76,60,.1);color:#e74c3c;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}._removeOptionButton_1m97j_401:hover{background-color:rgba(231,76,60,.2);transform:scale(1.1)}._removeOptionButton_1m97j_401 svg{font-size:16px}[data-theme=dark] ._removeOptionButton_1m97j_401{background-color:rgba(231,76,60,.2);color:#ff6b6b}[data-theme=dark] ._removeOptionButton_1m97j_401:hover{background-color:rgba(231,76,60,.3)}._addOptionButton_1m97j_429{margin-top:5px;padding:8px 16px;background:none;border:1px dashed var(--border);border-radius:8px;color:var(--accent);font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}._addOptionButton_1m97j_429:hover{background-color:rgba(29,161,242,.05);border-color:var(--accent)}[data-theme=dark] ._addOptionButton_1m97j_429:hover{background-color:rgba(29,161,242,.1);border-color:var(--accent)}._formOptions_1m97j_457{display:flex;justify-content:space-between;align-items:center;margin-top:16px}._formToggles_1m97j_464{display:flex;gap:12px;flex-wrap:wrap}._optionToggle_1m97j_470{display:flex;align-items:center;gap:5px;font-size:14px;color:var(--text-secondary);cursor:pointer;padding:6px 12px;border-radius:var(--radius-md);background-color:var(--bg-tertiary);transition:all var(--transition-fast)}._optionToggle_1m97j_470:hover{background-color:var(--bg-hover)}._optionToggle_1m97j_470 input[type=checkbox]{margin-right:5px;cursor:pointer}._optionToggle_1m97j_470 svg{font-size:16px;color:var(--text-secondary);pointer-events:none}._optionToggle_1m97j_470 *{cursor:pointer}._submitButton_1m97j_498{padding:10px 18px;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:14px;font-weight:500;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:8px}._submitButton_1m97j_498:hover:not(:disabled){background-color:var(--accent-hover)}._submitButton_1m97j_498:disabled{opacity:.7;cursor:not-allowed}._submitButton_1m97j_498 svg{font-size:16px}._postItem_1m97j_523{background-color:var(--bg-secondary);border-radius:var(--radius-lg);border:1px solid var(--border);padding:20px;position:relative;overflow:hidden;transition:transform .2s ease,box-shadow .2s ease;will-change:transform,box-shadow,opacity;transform:translateZ(0);backface-visibility:hidden}._postItem_1m97j_523:hover{box-shadow:0 4px 12px rgba(0,0,0,.05)}[data-theme=dark] ._postItem_1m97j_523:hover{box-shadow:0 4px 12px rgba(0,0,0,.2)}[data-theme=dark] ._postItem_1m97j_523{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);box-shadow:0 4px 20px rgba(0,0,0,.2)}._postItem_1m97j_523._pinnedPost_1m97j_546{position:relative}._postItem_1m97j_523._pinnedPost_1m97j_546:before{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;border-radius:16px;z-index:-1;opacity:.1;transition:opacity .3s ease}._postItem_1m97j_523._pinnedPost_1m97j_546:hover:before{opacity:.2}[data-theme=dark] ._postItem_1m97j_523._pinnedPost_1m97j_546{border:2px solid var(--accent)}[data-theme=dark] ._postItem_1m97j_523._pinnedPost_1m97j_546:before{background:linear-gradient(45deg,var(--accent),transparent 80%);opacity:.15}[data-theme=dark] ._postItem_1m97j_523._pinnedPost_1m97j_546:hover:before{opacity:.25}._postHeader_1m97j_575{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;flex-wrap:wrap;gap:10px}._authorInfo_1m97j_584{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--text-primary);font-weight:600;font-size:16px;will-change:opacity,transform;transform:translateZ(0)}._authorInfo_1m97j_584:hover{color:var(--accent)}._authorInfo_1m97j_584:hover ._avatar_1m97j_598{transform:scale(1.05)}._authorName_1m97j_602{font-weight:500}._avatar_1m97j_598{width:40px;height:40px;border-radius:50%;object-fit:cover;transition:transform .2s ease;will-change:transform;transform:translateZ(0)}[data-theme=dark] ._avatar_1m97j_598{box-shadow:0 2px 6px rgba(0,0,0,.25)}._postDate_1m97j_619{display:flex;align-items:center;gap:5px}._postContent_1m97j_625{margin:15px 0;font-size:1.8rem!important;line-height:1.5;white-space:pre-wrap;word-break:break-word;color:var(--text-primary)}[data-theme=dark] ._postContent_1m97j_625 ._darkTextConversion_1m97j_633{color:var(--text-primary)!important}@media (max-width: 768px){._postContent_1m97j_625{line-height:1.6}._postContent_1m97j_625 p,._postContent_1m97j_625 span,._postContent_1m97j_625 div{font-size:inherit}}@media (max-width: 480px){._postContent_1m97j_625{font-size:18px;line-height:1.7}}._postImage_1m97j_651{width:100%;margin:10px 0;border-radius:8px;overflow:hidden;position:relative;transition:all .2s ease;aspect-ratio:16/9;cursor:pointer}@media (min-width: 1024px){._postImage_1m97j_651:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,0,0,.1)}._postImage_1m97j_651:hover img{transform:scale(1.02)}}@media (max-width: 768px){._postImage_1m97j_651:active{opacity:.8}}._postImage_1m97j_651 img{width:100%;height:100%;object-fit:cover;border-radius:8px;display:block;transform:translateZ(0);transition:transform .3s ease}._postPoll_1m97j_685{background-color:var(--bg-highlight);border-radius:8px;padding:16px;margin-bottom:16px}[data-theme=dark] ._postPoll_1m97j_685{background-color:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.1)}._pollTitle_1m97j_696{font-weight:500;margin-bottom:12px;color:var(--text-primary);font-size:16px}@media (max-width: 768px){._pollTitle_1m97j_696{font-size:17px}}._pollOption_1m97j_332{display:flex;flex-direction:column}._pollOption_1m97j_332 label{display:flex;align-items:center;gap:10px;cursor:pointer;padding:10px;border-radius:8px;transition:background-color .2s ease}._pollOption_1m97j_332 label:hover{background-color:var(--bg-hover)}._pollOption_1m97j_332 label input{cursor:pointer}[data-theme=dark] ._pollOption_1m97j_332 label:hover{background-color:rgba(255,255,255,.08)}@media (max-width: 768px){._pollOption_1m97j_332 label{font-size:16px;padding:12px 10px}}._pollResults_1m97j_737{margin-top:16px}._pollResults_1m97j_737 ._pollResultOption_1m97j_740{margin-bottom:10px}._pollResults_1m97j_737 ._pollResultOption_1m97j_740 ._pollOptionText_1m97j_743{display:flex;justify-content:space-between;font-size:14px;margin-bottom:4px}._pollResults_1m97j_737 ._pollResultOption_1m97j_740 ._pollOptionText_1m97j_743 ._pollOptionVotes_1m97j_749{color:var(--text-secondary)}._pollResults_1m97j_737 ._pollResultOption_1m97j_740 ._pollProgressBar_1m97j_752{height:8px;background-color:var(--bg-input);border-radius:4px;overflow:hidden}._pollResults_1m97j_737 ._pollResultOption_1m97j_740 ._pollProgressBar_1m97j_752 ._pollProgress_1m97j_752{height:100%;background-color:var(--accent);border-radius:4px;transition:width .5s ease}._pollVotersCount_1m97j_765{font-size:12px;margin-top:16px;color:var(--text-tertiary);text-align:right}._postActions_1m97j_772{display:flex;align-items:center;justify-content:space-between;border-top:1px solid var(--border);padding-top:16px;margin-top:16px}._actionButtons_1m97j_781{display:flex;gap:16px}._actionButtons_1m97j_781 button{background:none;border:none;padding:8px;border-radius:50%;cursor:pointer;display:flex;align-items:center;color:var(--text-secondary);transition:all .2s}._actionButtons_1m97j_781 button:hover{background-color:rgba(29,161,242,.1);color:var(--accent)}[data-theme=dark] ._actionButtons_1m97j_781 button:hover{background-color:rgba(29,161,242,.2)}._actionButtons_1m97j_781 button svg{font-size:20px}._likeButton_1m97j_807{color:var(--text-secondary);display:flex;align-items:center;gap:8px}._likeButton_1m97j_807._liked_1m97j_813{color:#e0245e}._likeButton_1m97j_807._liked_1m97j_813:hover{color:#e0245e;background-color:rgba(224,36,94,.1)}[data-theme=dark] ._likeButton_1m97j_807._liked_1m97j_813:hover{background-color:rgba(224,36,94,.2)}._likeCount_1m97j_824{font-size:14px}._commentButton_1m97j_828{display:flex;align-items:center;gap:8px;background:none;border:none;color:var(--text-secondary);padding:8px 12px;border-radius:8px;cursor:pointer;transition:all .2s ease}._commentButton_1m97j_828:hover{background-color:var(--bg-hover)}._commentButton_1m97j_828 svg{font-size:20px}._deleteButton_1m97j_847{background-color:rgba(231,76,60,.1);color:#e74c3c;border:none;border-radius:6px;padding:6px 10px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:4px;cursor:pointer;transition:all .2s}._deleteButton_1m97j_847 svg{font-size:16px}._deleteButton_1m97j_847:hover{background-color:rgba(231,76,60,.2);transform:translateY(-1px)}._deleteButton_1m97j_847:disabled{opacity:.6;cursor:not-allowed;transform:none}[data-theme=dark] ._deleteButton_1m97j_847{background-color:rgba(231,76,60,.2);color:#ff6b6b}[data-theme=dark] ._deleteButton_1m97j_847:hover{background-color:rgba(231,76,60,.3)}._commentsSection_1m97j_881{margin-top:20px;padding-top:15px;border-top:1px solid var(--border)}._commentsHeading_1m97j_887{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600;margin-bottom:15px;color:var(--text-primary)}._loadingComments_1m97j_897{display:flex;align-items:center;justify-content:center;padding:20px;color:var(--text-secondary);gap:8px}._loadingComments_1m97j_897 svg{animation:_spin_1m97j_1 1s linear infinite}._noComments_1m97j_909{padding:20px;text-align:center;color:var(--text-secondary);background-color:var(--bg-highlight);border-radius:8px;font-style:italic}._commentForm_1m97j_918{margin-top:20px;padding:15px;border-radius:10px;background-color:var(--bg-highlight);box-shadow:0 2px 8px rgba(0,0,0,.1)}[data-theme=dark] ._commentForm_1m97j_918{background-color:rgba(255,255,255,.05);box-shadow:0 2px 8px rgba(0,0,0,.2)}._commentForm_1m97j_918 textarea{width:100%;min-height:80px;padding:12px;border-radius:8px;border:1px solid var(--border);background-color:var(--bg-input);color:var(--text-primary);font-size:15px;margin-bottom:12px;transition:border-color .2s,box-shadow .2s}._commentForm_1m97j_918 textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}[data-theme=dark] ._commentForm_1m97j_918 textarea{background-color:rgba(255,255,255,.08);border-color:rgba(255,255,255,.15)}[data-theme=dark] ._commentForm_1m97j_918 textarea:focus{box-shadow:0 0 0 2px rgba(29,161,242,.3)}._commentForm_1m97j_918 button{background-color:var(--accent);color:#fff;border:none;border-radius:24px;padding:10px 20px;font-size:15px;font-weight:600;display:flex;align-items:center;gap:8px;cursor:pointer;margin-left:auto;transition:background-color .2s}._commentForm_1m97j_918 button:hover:not(:disabled){background-color:var(--accent-dark)}._commentForm_1m97j_918 button:disabled{opacity:.6;cursor:not-allowed}._commentForm_1m97j_918 button svg{font-size:18px}._errorMessage_1m97j_162{display:flex;align-items:center;gap:8px;padding:10px;margin-bottom:12px;background-color:rgba(231,76,60,.1);border-left:3px solid #e74c3c;color:#e74c3c;border-radius:4px}[data-theme=dark] ._errorMessage_1m97j_162{background-color:rgba(231,76,60,.2)}._errorMessage_1m97j_162 svg{flex-shrink:0}._commentItem_1m97j_997{margin-bottom:20px;padding-left:10px;border-left:3px solid var(--accent)}[data-theme=dark] ._commentItem_1m97j_997{border-left-color:rgba(29,161,242,.6)}._commentItem_1m97j_997._commentReply_1m97j_1005{margin-left:25px;padding-left:15px;border-left:2px solid var(--border);margin-top:10px}[data-theme=dark] ._commentItem_1m97j_997._commentReply_1m97j_1005{border-left:2px solid var(--border)}._commentHeader_1m97j_1015{display:flex;align-items:center;margin-bottom:8px}._commentAuthorAvatar_1m97j_1021{width:32px;height:32px;border-radius:50%;overflow:hidden;margin-right:10px}._commentAuthorAvatar_1m97j_1021 img{width:100%;height:100%;object-fit:cover}._commentAuthorInfo_1m97j_1034{display:flex;flex-direction:column}._commentAuthor_1m97j_1021{text-decoration:none;font-weight:600;font-size:14px}._commentAuthor_1m97j_1021:hover{text-decoration:underline}._commentContent_1m97j_1048{margin-bottom:8px;font-size:14px;line-height:1.5;color:var(--text-primary);white-space:pre-wrap;word-break:break-word}._commentDate_1m97j_1057{font-size:12px;color:var(--text-tertiary);display:flex;align-items:center;gap:5px;margin-bottom:8px}._commentDate_1m97j_1057 svg{font-size:12px}._commentActions_1m97j_1069{display:flex;gap:12px;margin-top:8px;flex-wrap:wrap;width:100%}._replyButton_1m97j_1077,._deleteCommentButton_1m97j_1078{background:none;border:none;font-size:13px;color:var(--text-secondary);display:flex;align-items:center;gap:5px;cursor:pointer;padding:6px 10px;border-radius:var(--radius-sm);transition:all var(--transition-fast)}._replyButton_1m97j_1077:hover,._deleteCommentButton_1m97j_1078:hover{background-color:var(--bg-hover)}._replyButton_1m97j_1077 svg,._deleteCommentButton_1m97j_1078 svg{font-size:16px}@media (max-width: 576px){._replyButton_1m97j_1077,._deleteCommentButton_1m97j_1078{font-size:12px;padding:8px 12px;flex:1;justify-content:center}}._deleteCommentButton_1m97j_1078{color:var(--error)}._deleteCommentButton_1m97j_1078:hover{background-color:rgba(231,76,60,.1)}._repliesContainer_1m97j_1116{margin-top:12px}._replyForm_1m97j_1120{margin:10px 0 10px 30px;background:var(--bg-comment-form);border-radius:var(--radius-md);padding:12px;border-left:3px solid var(--accent)}._replyForm_1m97j_1120 textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:var(--radius-sm);background-color:var(--bg-input);color:var(--text-primary);resize:vertical;font-size:14px;min-height:60px;margin-bottom:8px}._replyForm_1m97j_1120 textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}._replyForm_1m97j_1120 ._replyFormActions_1m97j_1144{display:flex;justify-content:flex-end;gap:10px}._replyForm_1m97j_1120 ._replyFormActions_1m97j_1144 button{padding:6px 12px;border-radius:var(--radius-sm);font-size:14px;display:flex;align-items:center;gap:6px;cursor:pointer;transition:all var(--transition-fast)}._replyForm_1m97j_1120 ._replyFormActions_1m97j_1144 button:disabled{opacity:.7;cursor:not-allowed}._replyForm_1m97j_1120 ._replyFormActions_1m97j_1144 button svg{font-size:16px}._replyForm_1m97j_1120 ._replyFormActions_1m97j_1144 ._cancelReplyButton_1m97j_1166{background:none;border:1px solid var(--border);color:var(--text-secondary)}._replyForm_1m97j_1120 ._replyFormActions_1m97j_1144 ._cancelReplyButton_1m97j_1166:hover:not(:disabled){background:var(--bg-hover)}._replyForm_1m97j_1120 ._replyFormActions_1m97j_1144 ._submitReplyButton_1m97j_1174{background:var(--accent);color:#fff;border:none}._replyForm_1m97j_1120 ._replyFormActions_1m97j_1144 ._submitReplyButton_1m97j_1174:hover:not(:disabled){background:var(--accent-hover)}@media screen and (max-width: 768px){._postsContainer_1m97j_2{padding:15px}._formOptions_1m97j_457{flex-direction:column;align-items:flex-start;gap:15px}._formToggles_1m97j_464,._submitButton_1m97j_498{width:100%}._postHeader_1m97j_575{flex-wrap:wrap}._postActions_1m97j_772{flex-direction:column;gap:10px}._actionButtons_1m97j_781{width:100%;justify-content:space-between}._commentActions_1m97j_1069{width:100%;justify-content:flex-start}._commentHeader_1m97j_1015{flex-wrap:wrap}}@media screen and (max-width: 576px){._optionToggle_1m97j_470{padding:5px 10px;font-size:13px}._replyButton_1m97j_1077,._deleteCommentButton_1m97j_1078{font-size:12px;padding:3px 6px}._postTitle_1m97j_1227{font-size:1.3rem}._postContent_1m97j_625{font-size:1.1rem}}textarea{resize:none!important;font-family:inherit}[data-theme=dark] textarea{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(255,255,255,.9)}[data-theme=dark] textarea::placeholder{color:rgba(255,255,255,.5)}._stylingOptions_1m97j_1247{margin-top:15px;padding:20px;background-color:var(--bg-highlight);border-radius:12px;border:1px solid var(--border);position:relative}[data-theme=dark] ._stylingOptions_1m97j_1247{background-color:rgba(255,255,255,.03);border-color:rgba(255,255,255,.1)}._stylingOptions_1m97j_1247:before{content:"🎨 Стиль";position:absolute;top:-10px;left:15px;background-color:var(--accent);color:#fff;font-size:12px;font-weight:600;padding:3px 10px;border-radius:12px;box-shadow:0 2px 8px rgba(29,161,242,.2)}._stylingTitle_1m97j_1273{font-size:16px;font-weight:600;margin-bottom:15px;color:var(--text-primary);display:flex;align-items:center;gap:8px}._stylingTitle_1m97j_1273 svg{color:var(--accent)}._stylingGroup_1m97j_1286{margin-bottom:15px}._stylingGroup_1m97j_1286 label{display:block;margin-bottom:8px;color:var(--text-secondary);font-size:14px;font-weight:500}._colorSelector_1m97j_1297{display:flex;flex-wrap:wrap;gap:10px;margin-top:5px}._colorOption_1m97j_1304{width:24px;height:24px;border-radius:50%;cursor:pointer;border:2px solid transparent;transition:all .2s ease}._colorOption_1m97j_1304:hover{transform:scale(1.2)}._colorOption_1m97j_1304._active_1m97j_1315{border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.3)}._fontSelector_1m97j_1320{width:100%;padding:10px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);cursor:pointer}._fontSelector_1m97j_1320:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}._fontSelector_1m97j_1320 option{padding:8px}[data-theme=dark] ._fontSelector_1m97j_1320{background-color:rgba(255,255,255,.15);border-color:rgba(255,255,255,.3);color:#fff;font-weight:500;text-shadow:0 0 1px rgba(0,0,0,.5)}[data-theme=dark] ._fontSelector_1m97j_1320 option{background-color:#2a2a2a;color:#fff;font-weight:400;padding:12px 8px}._addOptionButton_1m97j_429{display:flex;align-items:center;justify-content:center;gap:8px;background:none;border:1px dashed var(--border);width:100%;padding:10px;border-radius:8px;margin-top:10px;cursor:pointer;color:var(--accent);font-size:14px;transition:all .2s ease}._addOptionButton_1m97j_429:hover:not(:disabled){background-color:rgba(29,161,242,.05);border-color:var(--accent)}._addOptionButton_1m97j_429:disabled{opacity:.5;cursor:not-allowed}[data-theme=dark] ._addOptionButton_1m97j_429{border-color:rgba(255,255,255,.2)}[data-theme=dark] ._addOptionButton_1m97j_429:hover:not(:disabled){background-color:rgba(29,161,242,.1)}._addOptionButton_1m97j_429 svg{font-size:16px}._colorPickerContainer_1m97j_1385{position:relative;display:inline-block}._colorPreview_1m97j_1390{width:42px;height:42px;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;border:2px solid var(--border);transition:all .2s ease}._colorPreview_1m97j_1390:hover{transform:scale(1.1);box-shadow:0 2px 8px rgba(0,0,0,.1)}[data-theme=dark] ._colorPreview_1m97j_1390{border-color:rgba(255,255,255,.2)}[data-theme=dark] ._colorPreview_1m97j_1390:hover{box-shadow:0 2px 8px rgba(0,0,0,.2)}._dropletIcon_1m97j_1412{color:rgba(255,255,255,.8);font-size:20px;filter:drop-shadow(0 0 1px rgba(0,0,0,.8))}._colorPickerPopup_1m97j_1418{position:absolute;z-index:100;top:calc(100% + 5px);left:0}._colorPickerPopup_1m97j_1418 ._react-colorful_1m97j_1424{border-radius:8px;box-shadow:0 2px 15px rgba(0,0,0,.15)}[data-theme=dark] ._colorPickerPopup_1m97j_1418 ._react-colorful_1m97j_1424{box-shadow:0 2px 15px rgba(0,0,0,.3)}._colorPickerCover_1m97j_1432{position:fixed;top:0;right:0;bottom:0;left:0;z-index:-1}._colorNote_1m97j_1441{font-size:12px;margin-top:8px;color:var(--accent);font-style:italic;line-height:1.4;padding:5px 8px;background-color:rgba(var(--accent-rgb),.1);border-radius:4px}[data-theme=dark] ._colorNote_1m97j_1441{background-color:rgba(var(--accent-rgb),.15)}._likeAnimation_1m97j_1455{animation:_likePulse_1m97j_1 .5s cubic-bezier(.4,0,.2,1)}@keyframes _likePulse_1m97j_1{0%{transform:scale(1)}50%{transform:scale(1.3)}to{transform:scale(1)}}._authPrompt_1m97j_1470{text-align:center;padding:20px;background:var(--bg-secondary);border-radius:12px;margin-bottom:20px;border:1px solid var(--border)}._authPrompt_1m97j_1470 p{margin:0 0 10px;color:var(--text-secondary)}._authPrompt_1m97j_1470 ._loginButton_1m97j_1482{display:inline-block;padding:8px 16px;background:var(--accent);color:#fff;text-decoration:none;border-radius:6px;transition:all .2s ease}._authPrompt_1m97j_1470 ._loginButton_1m97j_1482:hover{background:var(--accent-hover);transform:translateY(-1px)}._titleInput_1m97j_1496{width:100%;padding:12px 16px;border:1px solid var(--border);border-radius:8px;margin-bottom:12px;background-color:var(--bg-input);color:var(--text-primary);font-size:18px;font-weight:600}._titleInput_1m97j_1496:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,155,254,.15)}._titleInput_1m97j_1496::placeholder{color:var(--text-tertiary);font-weight:400}[data-theme=dark] ._titleInput_1m97j_1496{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1)}[data-theme=dark] ._titleInput_1m97j_1496:focus{box-shadow:0 0 0 2px rgba(76,155,254,.2)}._postTitle_1m97j_1227{font-size:22px;font-weight:700;margin:0 0 16px;line-height:1.3;color:var(--text-primary);word-break:break-word}[data-theme=dark] ._postTitle_1m97j_1227 ._darkTextConversion_1m97j_633{color:var(--text-primary)!important}._editButton_1m97j_1536{background-color:rgba(46,204,113,.1);color:#2ecc71;border:none;border-radius:6px;padding:6px 10px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:4px;cursor:pointer;transition:all .2s;margin-right:8px}._editButton_1m97j_1536 svg{font-size:16px}._editButton_1m97j_1536:hover{background-color:rgba(46,204,113,.2);transform:translateY(-1px)}[data-theme=dark] ._editButton_1m97j_1536{background-color:rgba(46,204,113,.2);color:#2eec81}[data-theme=dark] ._editButton_1m97j_1536:hover{background-color:rgba(46,204,113,.3)}._adminActions_1m97j_1566{display:flex;align-items:center}@media (max-width: 576px){._postActions_1m97j_772{flex-direction:column;align-items:flex-start;gap:10px}._adminActions_1m97j_1566{width:100%;justify-content:space-between}._editButton_1m97j_1536,._deleteButton_1m97j_847{flex:1;justify-content:center}}._imageContainer_1m97j_1588{position:relative;min-height:100px;width:100%;margin-bottom:12px}._imageLoading_1m97j_1595{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:var(--bg-secondary);border-radius:8px;color:var(--text-secondary);font-size:14px;z-index:1}._imageError_1m97j_1611{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:var(--bg-error);border-radius:8px;color:var(--error);font-size:14px;z-index:1}._editPostForm_1m97j_1627{background-color:var(--bg-highlight);border-radius:12px;padding:20px;margin-bottom:15px;border:1px solid var(--border)}[data-theme=dark] ._editPostForm_1m97j_1627{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1)}._editPostForm_1m97j_1627 ._errorMessage_1m97j_162{margin-bottom:15px}._editPostForm_1m97j_1627 form{display:flex;flex-direction:column;gap:15px}._cancelEditButton_1m97j_1647{padding:10px 18px;background-color:var(--bg-tertiary);color:var(--text-secondary);border:1px solid var(--border);border-radius:var(--radius-md);font-size:14px;font-weight:500;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:8px}._cancelEditButton_1m97j_1647:hover:not(:disabled){background-color:var(--bg-hover)}._cancelEditButton_1m97j_1647:disabled{opacity:.7;cursor:not-allowed}._cancelEditButton_1m97j_1647 svg{font-size:16px}._adminActions_1m97j_1566{display:flex;gap:8px}@media (max-width: 576px){._adminActions_1m97j_1566{width:100%;margin-top:10px}._adminActions_1m97j_1566 button{flex:1;justify-content:center}}._imagePreview_1m97j_1687{max-width:100%;margin-top:10px;border-radius:8px;overflow:hidden;position:relative;transition:all .2s ease;aspect-ratio:16/9;display:flex;align-items:center;justify-content:center}._imagePreview_1m97j_1687 img{max-width:100%;height:100%;width:100%;object-fit:cover;display:block;border-radius:8px;transition:transform .2s ease}@media (min-width: 1024px){._imagePreview_1m97j_1687:hover{box-shadow:0 4px 20px rgba(0,0,0,.15)}._imagePreview_1m97j_1687:hover img{transform:scale(1.03)}}._imageLoading_1m97j_1595{display:flex;align-items:center;justify-content:center;min-height:60px;background-color:var(--bg-highlight);border-radius:8px;color:var(--text-secondary);font-size:14px;padding:10px;animation:_pulse_1m97j_1 1.5s infinite}[data-theme=dark] ._imageLoading_1m97j_1595{background-color:rgba(255,255,255,.05)}._loadMoreContainer_1m97j_1733{text-align:center;padding:25px 0;margin:10px 0;display:flex;flex-direction:column;align-items:center;justify-content:center}._loadMoreSpinner_1m97j_1743{display:flex;align-items:center;justify-content:center;gap:12px;font-size:18px;color:var(--text-secondary);padding:15px 20px;border-radius:10px;background-color:var(--bg-highlight);box-shadow:0 2px 8px rgba(0,0,0,.08);width:auto;min-width:250px}._loadMoreSpinner_1m97j_1743 svg{font-size:24px;animation:_spin_1m97j_1 1.5s linear infinite}[data-theme=dark] ._loadMoreSpinner_1m97j_1743{background-color:rgba(255,255,255,.05);box-shadow:0 2px 8px rgba(0,0,0,.15)}._noMorePosts_1m97j_1766{font-size:18px;color:var(--text-secondary);margin:15px 0;padding:15px 20px;background-color:var(--bg-highlight);border-radius:10px;text-align:center;width:auto;min-width:250px}[data-theme=dark] ._noMorePosts_1m97j_1766{background-color:rgba(255,255,255,.05)}@keyframes _spin_1m97j_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._imageUrlInputContainer_1m97j_1789{display:flex;gap:10px;margin-bottom:10px}._addImageButton_1m97j_1795{background-color:#f0f2f5;border:none;border-radius:4px;padding:8px 12px;cursor:pointer;display:flex;align-items:center;gap:5px;font-size:14px;transition:background-color .2s}._addImageButton_1m97j_1795:hover{background-color:#e4e6eb}._addImageButton_1m97j_1795:disabled{opacity:.5;cursor:not-allowed}._imageGalleryContainer_1m97j_1815{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px;margin:15px 0}@media (min-width: 769px) and (max-width: 1200px){._imageGalleryContainer_1m97j_1815{grid-template-columns:repeat(2,1fr)}}._imagePreviewItem_1m97j_1832{position:relative;cursor:pointer;overflow:hidden;border-radius:8px;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}._imagePreviewItem_1m97j_1832:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,0,0,.1)}@media (max-width: 768px){._imagePreviewItem_1m97j_1832:active{opacity:.8}}._removeImageButton_1m97j_1849{position:absolute;top:5px;right:5px;background:rgba(0,0,0,.5);color:#fff;border:none;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;transition:background-color .2s;z-index:5}._removeImageButton_1m97j_1849:hover{background:rgba(0,0,0,.7)}._errorNote_1m97j_1871{font-size:12px;color:#e74c3c;margin-top:5px}@media (max-width: 768px){._imageGalleryContainer_1m97j_1815{grid-template-columns:1fr}}._lightboxOverlay_1m97j_1882,._lightboxContainer_1m97j_1886,._lightboxImage_1m97j_1890,._lightboxCloseButton_1m97j_1894{display:none}._adminPanel_1idaq_2{max-width:1200px;margin:2rem auto;padding:1.5rem;background-color:var(--bg-primary);border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,.08);position:relative;overflow:hidden;border:1px solid var(--border-color)}._adminPanel_1idaq_2:before{content:"";position:absolute;top:0;left:0;width:100%;height:4px;background:linear-gradient(90deg,#666,#444)}._title_1idaq_23{font-size:2rem;margin-bottom:1.75rem;padding-bottom:1rem;border-bottom:2px solid #666;color:var(--text-primary);font-weight:600;display:flex;align-items:center;gap:12px}._title_1idaq_23 svg{color:var(--text-secondary)}._error_1idaq_38{padding:1rem 1.25rem;margin-bottom:1.5rem;background-color:rgba(220,53,69,.08);color:#dc3545;border-radius:10px;border-left:4px solid #dc3545;font-size:1rem;display:flex;align-items:center;animation:_fadeIn_1idaq_1 .3s ease-in-out}._message_1idaq_51{padding:1rem 1.25rem;margin-bottom:1.5rem;border-radius:10px;font-size:1rem;display:flex;align-items:center;animation:_fadeIn_1idaq_1 .3s ease-in-out}._message_1idaq_51._success_1idaq_60{background-color:rgba(40,167,69,.08);border-left:4px solid #28a745;color:#28a745}._message_1idaq_51._info_1idaq_65{background-color:rgba(13,110,253,.08);border-left:4px solid #0d6efd;color:#0d6efd}._message_1idaq_51._error_1idaq_38{background-color:rgba(220,53,69,.08);border-left:4px solid #dc3545;color:#dc3545}@keyframes _fadeIn_1idaq_1{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}._content_1idaq_86{display:grid;grid-template-columns:1fr;gap:2rem}@media (min-width: 768px){._content_1idaq_86{grid-template-columns:minmax(300px,1fr) minmax(350px,1.5fr);gap:2.5rem}}@media (max-width: 767px){._content_1idaq_86 ._usersSection_1idaq_98,._content_1idaq_86 ._editSection_1idaq_98{min-width:100%}}._usersSection_1idaq_98 h2,._editSection_1idaq_98 h2{font-size:1.4rem;margin-bottom:1.25rem;color:var(--text-primary);font-weight:600;padding-bottom:.75rem;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:10px}._usersSection_1idaq_98 h2 svg,._editSection_1idaq_98 h2 svg{color:var(--text-secondary)}._loader_1idaq_118{display:flex;align-items:center;justify-content:center;height:160px;color:var(--text-secondary);font-size:1.05rem}._loader_1idaq_118 svg{margin-right:12px;animation:_spin_1idaq_1005 1.2s linear infinite;font-size:1.5rem}._userList_1idaq_140{max-height:680px;overflow-y:auto;border:1px solid var(--border-color);border-radius:10px;background-color:var(--bg-primary);box-shadow:0 4px 16px rgba(0,0,0,.04)}._userList_1idaq_140::-webkit-scrollbar{width:10px}._userList_1idaq_140::-webkit-scrollbar-track{background:var(--bg-secondary);border-radius:10px}._userList_1idaq_140::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:10px}._userList_1idaq_140::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}._userGrid_1idaq_163{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;padding:1rem}._userCard_1idaq_170{background-color:var(--bg-secondary);border-radius:10px;padding:1.25rem;cursor:pointer;transition:all .25s ease;border:1px solid var(--border-color);position:relative;overflow:hidden}._userCard_1idaq_170:hover{transform:translateY(-3px);box-shadow:0 6px 16px rgba(0,0,0,.1);border-color:var(--text-secondary)}._userCard_1idaq_170._selected_1idaq_185{border-color:var(--accent);box-shadow:0 0 0 2px rgba(var(--accent-rgb),.2)}._userCard_1idaq_170._banned_1idaq_189{border-left:4px solid #e74c3c}._userCard_1idaq_170._banned_1idaq_189:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:repeating-linear-gradient(45deg,rgba(231,76,60,.05),rgba(231,76,60,.05) 10px,rgba(231,76,60,.1) 10px,rgba(231,76,60,.1) 20px);pointer-events:none;z-index:1}._userAvatar_1idaq_204{width:64px;height:64px;border-radius:50%;overflow:hidden;background-color:var(--bg-hover);display:flex;align-items:center;justify-content:center;margin-bottom:1rem;border:2px solid var(--border-color);box-shadow:0 4px 10px rgba(0,0,0,.1);position:relative}._userAvatar_1idaq_204 img{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0}._userAvatar_1idaq_204 svg{color:var(--text-secondary)}._userAvatar_1idaq_204 picture{position:absolute;top:0;left:0;width:100%;height:100%}._userInfo_1idaq_237{position:relative;z-index:2}._userInfo_1idaq_237 h3{font-size:1.1rem;font-weight:600;margin-bottom:.5rem;color:var(--text-primary)}._userInfo_1idaq_237 p{font-size:.9rem;color:var(--text-secondary);margin-bottom:.75rem;word-break:break-all}._userPerks_1idaq_254{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.75rem}._userActions_1idaq_261{display:flex;justify-content:flex-end;gap:.5rem;margin-top:1rem}._userActions_1idaq_261 button{background:none;border:none;width:34px;height:34px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--text-secondary);cursor:pointer;transition:all .2s}._userActions_1idaq_261 button:hover{background-color:var(--bg-hover)}._userActions_1idaq_261 button:disabled{opacity:.5;cursor:not-allowed}._userActions_1idaq_261 ._editButton_1idaq_287:hover{color:var(--accent);background-color:rgba(var(--accent-rgb),.1)}._userActions_1idaq_261 ._banButton_1idaq_291:hover{color:#e74c3c;background-color:rgba(231,76,60,.1)}._userActions_1idaq_261 ._unbanButton_1idaq_295:hover{color:#2ecc71;background-color:rgba(46,204,113,.1)}._banInfo_1idaq_300{margin-top:1rem;padding:.75rem;background-color:rgba(231,76,60,.08);border-radius:6px;font-size:.8rem;color:#e74c3c}._banInfo_1idaq_300 p{margin:.25rem 0;color:inherit}._editSection_1idaq_98 h2{font-size:1.25rem;margin-bottom:1rem;color:var(--text-primary);font-weight:600;padding-bottom:.5rem;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:8px}._editSection_1idaq_98 h2 svg{color:var(--text-secondary)}._editForm_1idaq_328{background-color:var(--bg-primary);padding:2rem;border-radius:12px;border:1px solid var(--border-color);box-shadow:0 4px 20px rgba(0,0,0,.05);max-width:100%}._formGroup_1idaq_337{margin-bottom:1.75rem}._formGroup_1idaq_337 label{display:block;margin-bottom:.75rem;font-size:1rem;font-weight:500;color:var(--text-primary);display:flex;align-items:center;gap:8px}._formGroup_1idaq_337 label svg{color:var(--text-secondary);font-size:1.2rem}._formGroup_1idaq_337 input[type=text],._formGroup_1idaq_337 input[type=email],._formGroup_1idaq_337 input[type=password]{width:100%;padding:.85rem 1rem;border:1px solid var(--border-color);border-radius:8px;font-size:1.05rem;background-color:var(--bg-input);color:var(--text-primary);transition:all .2s ease;height:50px}._formGroup_1idaq_337 input[type=text]:focus,._formGroup_1idaq_337 input[type=email]:focus,._formGroup_1idaq_337 input[type=password]:focus{outline:none;border-color:var(--text-secondary);box-shadow:0 0 0 4px rgba(var(--accent-rgb),.15)}._formGroup_1idaq_337 input[type=text]::placeholder,._formGroup_1idaq_337 input[type=email]::placeholder,._formGroup_1idaq_337 input[type=password]::placeholder{color:var(--text-secondary);opacity:.6}._perksOptions_1idaq_381{display:flex;flex-direction:column;gap:1rem;margin-top:.75rem;padding:1.25rem;background-color:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color)}._perkOption_1idaq_392{display:flex;align-items:center}._perkOption_1idaq_392 label{margin:0 0 0 .75rem;font-weight:400;cursor:pointer;font-size:1rem;color:var(--text-primary)}._perkOption_1idaq_392 input[type=checkbox]{cursor:pointer;width:20px;height:20px}._perkOption_1idaq_392 input[type=checkbox]:checked{accent-color:var(--accent)}._basePerk_1idaq_412{background-color:var(--bg-hover);padding:10px;border-radius:6px;margin-bottom:10px;border-left:3px solid var(--accent)}._basePerk_1idaq_412 input[type=checkbox]{opacity:.7}._basePerk_1idaq_412 ._baseLabel_1idaq_422{font-weight:500}._basePerk_1idaq_412 ._baseLabel_1idaq_422 ._baseNote_1idaq_425{font-size:.8rem;opacity:.7;font-style:italic;margin-left:5px}._protectedUser_1idaq_432{display:inline-block;font-size:.7rem;background-color:rgba(var(--admin-color),.1);color:var(--admin-color);padding:2px 6px;border-radius:4px;margin-top:5px;font-weight:600}table{width:100%;border-collapse:collapse}table th,table td{padding:12px 15px;text-align:left;border-bottom:1px solid var(--border-color)}table th{font-weight:600;color:var(--text-secondary)}table tr:hover{background-color:var(--bg-hover)}._selectedUser_1idaq_460{background-color:rgba(var(--accent-rgb),.08)!important}._editUserButton_1idaq_464{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:5px;border-radius:4px;transition:all .2s}._editUserButton_1idaq_464:hover{background-color:var(--bg-hover);color:var(--text-primary)}._editUserButton_1idaq_464:disabled{opacity:.4;cursor:not-allowed}._editUserButton_1idaq_464:disabled:hover{background:none;color:var(--text-secondary)}._formActions_1idaq_486{display:flex;justify-content:flex-end;gap:1.25rem;margin-top:2.5rem}._cancelButton_1idaq_493,._saveButton_1idaq_494{padding:.85rem 2rem;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;border:none;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;min-width:140px}._cancelButton_1idaq_493{background-color:var(--bg-secondary);color:var(--text-primary)}._cancelButton_1idaq_493:hover{background-color:var(--bg-hover);transform:translateY(-2px)}._cancelButton_1idaq_493 svg{font-size:1.1rem}._saveButton_1idaq_494{background:var(--accent);color:#fff}._saveButton_1idaq_494:hover{background:var(--accent-dark);transform:translateY(-2px);box-shadow:0 4px 12px rgba(var(--accent-rgb),.3)}._saveButton_1idaq_494:disabled{opacity:.7;cursor:not-allowed;transform:none;box-shadow:none}._saveButton_1idaq_494 svg{font-size:1.1rem}._noUserSelected_1idaq_540{background-color:var(--bg-primary);padding:3rem 2rem;border-radius:12px;border:1px solid var(--border-color);box-shadow:0 4px 20px rgba(0,0,0,.05);display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:350px;text-align:center;color:var(--text-secondary)}._noUserSelected_1idaq_540 p{margin:1.5rem 0;font-size:1.1rem}._noUserSelected_1idaq_540 svg{font-size:4rem;color:var(--border-color);margin-bottom:1.5rem}._emptyList_1idaq_564{padding:2rem;text-align:center;color:var(--text-secondary)}._userActions_1idaq_261{display:flex;gap:8px;justify-content:flex-end}._banUserButton_1idaq_576{background:none;border:none;color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;padding:6px;border-radius:4px;transition:all .2s}._banUserButton_1idaq_576:hover{background-color:rgba(231,76,60,.1);color:#e74c3c}._banUserButton_1idaq_576:disabled{opacity:.5;cursor:not-allowed}._bannedUser_1idaq_597{display:inline-block;font-size:12px;background-color:#e74c3c;color:#fff;padding:2px 8px;border-radius:12px;margin-left:8px;font-weight:500}._modalOverlay_1idaq_608{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;background:linear-gradient(135deg,rgba(0,0,0,.75),rgba(0,0,0,.85));display:flex;align-items:center;justify-content:center;z-index:10000;backdrop-filter:blur(8px);perspective:1000px;box-sizing:border-box;overscroll-behavior:contain;transform:translateZ(0);isolation:isolate}@media (max-width: 576px){._modalOverlay_1idaq_608{padding:0}}._banDialog_1idaq_634{position:relative;background-color:var(--bg-primary);border-radius:16px;box-shadow:var(--modal-shadow);width:90%;max-width:500px;overflow:hidden;animation:_fadeIn_1idaq_1 .3s ease-out;border:1px solid var(--modal-border);display:flex;flex-direction:column;transform-style:preserve-3d;max-height:90vh}@media (max-width: 576px){._banDialog_1idaq_634{width:100%;height:100vh;max-width:100%;border-radius:0;animation:_slideUp_1idaq_1 .4s ease-out;border:none}}@keyframes _fadeIn_1idaq_1{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _slideUp_1idaq_1{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}._banDialogHeader_1idaq_680{background-color:#e74c3c;color:#fff;padding:20px;display:flex;justify-content:space-between;align-items:center;position:relative}._banDialogHeader_1idaq_680 h3{margin:0;font-size:20px;font-weight:600;text-align:center;width:100%}._banDialogHeader_1idaq_680 ._closeButton_1idaq_696{background:rgba(255,255,255,.2);border:none;color:#fff;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s;position:absolute;right:15px}._banDialogHeader_1idaq_680 ._closeButton_1idaq_696:hover{background-color:rgba(255,255,255,.3);transform:rotate(90deg)}@media (max-width: 576px){._banDialogHeader_1idaq_680{padding:24px 20px}._banDialogHeader_1idaq_680 h3{font-size:22px}}._banDialogContent_1idaq_724{padding:24px;flex:1}._banDialogContent_1idaq_724 ._currentBanInfo_1idaq_728{text-align:center;padding:15px;background-color:rgba(231,76,60,.1);border-radius:8px;margin-bottom:20px}._banDialogContent_1idaq_724 ._currentBanInfo_1idaq_728 p{margin-bottom:20px;color:var(--text-primary);font-size:16px}[data-theme=dark] ._banDialogContent_1idaq_724 ._currentBanInfo_1idaq_728{background-color:rgba(231,76,60,.15)}._banDialogContent_1idaq_724 ._formGroup_1idaq_337{margin-bottom:20px}._banDialogContent_1idaq_724 ._formGroup_1idaq_337 label{display:block;margin-bottom:10px;font-weight:500;color:var(--text-primary)}._banDialogContent_1idaq_724 ._formGroup_1idaq_337 textarea,._banDialogContent_1idaq_724 ._formGroup_1idaq_337 select{width:100%;padding:12px 15px;border:1px solid var(--border);border-radius:8px;background-color:var(--bg-input);color:var(--text-primary);font-size:15px}._banDialogContent_1idaq_724 ._formGroup_1idaq_337 textarea:focus,._banDialogContent_1idaq_724 ._formGroup_1idaq_337 select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(29,161,242,.2)}[data-theme=dark] ._banDialogContent_1idaq_724 ._formGroup_1idaq_337 textarea,[data-theme=dark] ._banDialogContent_1idaq_724 ._formGroup_1idaq_337 select{background-color:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1)}[data-theme=dark] ._banDialogContent_1idaq_724 ._formGroup_1idaq_337 textarea:focus,[data-theme=dark] ._banDialogContent_1idaq_724 ._formGroup_1idaq_337 select:focus{box-shadow:0 0 0 2px rgba(29,161,242,.3)}._banDialogContent_1idaq_724 ._formGroup_1idaq_337 textarea{resize:none;min-height:120px}@media (max-width: 576px){._banDialogContent_1idaq_724{padding:24px;flex:1;overflow-y:auto}._banDialogContent_1idaq_724 ._formGroup_1idaq_337 label{font-size:16px}._banDialogContent_1idaq_724 textarea,._banDialogContent_1idaq_724 select{padding:15px;font-size:16px}}._banDialogActions_1idaq_792{display:flex;justify-content:flex-end;gap:12px;margin-top:25px}._banDialogActions_1idaq_792 button{padding:12px 20px;border-radius:30px;font-size:15px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s}._banDialogActions_1idaq_792 button:disabled{opacity:.7;cursor:not-allowed}._banDialogActions_1idaq_792 ._cancelButton_1idaq_493{background:none;border:1px solid var(--border);color:var(--text-secondary)}._banDialogActions_1idaq_792 ._cancelButton_1idaq_493:hover:not(:disabled){background:var(--bg-hover);border-color:var(--text-secondary)}[data-theme=dark] ._banDialogActions_1idaq_792 ._cancelButton_1idaq_493{border-color:rgba(255,255,255,.2)}[data-theme=dark] ._banDialogActions_1idaq_792 ._cancelButton_1idaq_493:hover:not(:disabled){background:rgba(255,255,255,.1);border-color:rgba(255,255,255,.3)}._banDialogActions_1idaq_792 ._banButton_1idaq_291{background:#e74c3c;color:#fff;border:none}._banDialogActions_1idaq_792 ._banButton_1idaq_291:hover:not(:disabled){background:#c0392b;transform:translateY(-2px);box-shadow:0 4px 12px rgba(231,76,60,.3)}[data-theme=dark] ._banDialogActions_1idaq_792 ._banButton_1idaq_291{background:#c0392b}[data-theme=dark] ._banDialogActions_1idaq_792 ._banButton_1idaq_291:hover:not(:disabled){background:#a93226}._banDialogActions_1idaq_792 ._unbanButton_1idaq_295{background:#2ecc71;color:#fff;border:none;padding:12px 20px;border-radius:30px;font-size:15px;font-weight:500;display:flex;align-items:center;gap:8px;transition:all .2s;margin:0 auto}._banDialogActions_1idaq_792 ._unbanButton_1idaq_295:hover:not(:disabled){background:#27ae60;transform:translateY(-2px);box-shadow:0 4px 12px rgba(46,204,113,.3)}._banDialogActions_1idaq_792 ._unbanButton_1idaq_295:disabled{opacity:.7;cursor:not-allowed}[data-theme=dark] ._banDialogActions_1idaq_792 ._unbanButton_1idaq_295{background:#27ae60}[data-theme=dark] ._banDialogActions_1idaq_792 ._unbanButton_1idaq_295:hover:not(:disabled){background:#219653}@media (max-width: 576px){._banDialogActions_1idaq_792{margin-top:30px;padding-bottom:15px}._banDialogActions_1idaq_792 button{padding:15px 20px;font-size:16px}}._eventsSection_1idaq_886{margin-bottom:2rem;padding:1.5rem;background-color:var(--bg-primary);border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,.06);border:1px solid var(--border-color)}._eventsSection_1idaq_886 h2{font-size:1.4rem;margin-bottom:1.25rem;color:var(--text-primary);font-weight:600;padding-bottom:.75rem;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:10px}._eventsSection_1idaq_886 h2 svg{color:var(--text-secondary)}._eventsList_1idaq_909{display:flex;flex-direction:column;gap:1rem}._eventItem_1idaq_915{display:flex;align-items:center;justify-content:space-between;padding:1.25rem;background-color:var(--bg-secondary);border-radius:10px}@media (max-width: 768px){._eventItem_1idaq_915{flex-direction:column;align-items:flex-start;gap:1rem}}._eventInfo_1idaq_931{flex:1}._eventInfo_1idaq_931 h3{font-size:1.2rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:600}._eventInfo_1idaq_931 p{color:var(--text-secondary);margin-bottom:.5rem;font-size:.95rem;max-width:90%}._eventInfo_1idaq_931 p:last-child{margin-bottom:0}._eventInfo_1idaq_931 p strong{color:var(--text-primary)}._eventToggle_1idaq_953{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;border-radius:8px;font-weight:600;font-size:.95rem;background-color:var(--bg-hover);color:var(--text-primary);border:none;cursor:pointer;transition:all .2s ease}._eventToggle_1idaq_953:hover:not(:disabled){background-color:var(--bg-secondary)}._eventToggle_1idaq_953:disabled{opacity:.6;cursor:not-allowed}._eventToggle_1idaq_953._active_1idaq_974{background-color:#28a745;color:#fff}._eventToggle_1idaq_953._active_1idaq_974:hover:not(:disabled){background-color:#218838}._eventToggle_1idaq_953 svg{font-size:1.5rem}._loadingContainer_1idaq_985{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background:rgba(30,30,35,.2);border-radius:12px;margin:20px 0;text-align:center}._loadingContainer_1idaq_985 p{margin-top:16px;font-size:1.1rem;color:var(--text-color)}[data-theme=light] ._loadingContainer_1idaq_985{background:rgba(240,240,245,.3)}._spinningLoader_1idaq_1005{animation:_spin_1idaq_1005 1.5s linear infinite;color:var(--accent-color)}@keyframes _spin_1idaq_1005{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._resetContainer_1iy2b_1{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:2rem;background-color:var(--background-color)}._resetCard_1iy2b_10{width:100%;max-width:400px;padding:2rem;background-color:var(--bg-secondary);border-radius:var(--radius-lg);box-shadow:var(--shadow)}._resetCard_1iy2b_10 h2{text-align:center;margin-bottom:1.5rem;color:var(--text-primary)}._resetForm_1iy2b_24{display:flex;flex-direction:column}._formGroup_1iy2b_29{margin-bottom:1rem}._formGroup_1iy2b_29 label{display:block;margin-bottom:.5rem;font-size:.875rem;font-weight:500;color:var(--text-secondary)}._formGroup_1iy2b_29 input{width:100%;padding:.75rem;border:1px solid var(--border);border-radius:var(--radius-md);font-size:1rem;background-color:var(--bg-input);color:var(--text-primary);transition:all var(--transition-fast)}._formGroup_1iy2b_29 input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-light)}._formGroup_1iy2b_29 input:disabled{background-color:var(--bg-highlight);cursor:not-allowed}._resetButton_1iy2b_59{margin-top:1rem;padding:.75rem 1.5rem;background-color:var(--accent);color:#fff;border:none;border-radius:var(--radius-md);font-size:1rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}._resetButton_1iy2b_59:hover{background-color:var(--accent-hover);transform:translateY(-2px)}._resetButton_1iy2b_59:disabled{opacity:.7;cursor:not-allowed}._message_1iy2b_80{padding:.75rem;margin-bottom:1rem;border-radius:var(--radius-md);font-size:.875rem}._message_1iy2b_80._success_1iy2b_86{background-color:rgba(var(--success-rgb, 40, 167, 69),.1);border-left:4px solid var(--success);color:var(--success)}._message_1iy2b_80._info_1iy2b_91{background-color:rgba(var(--info-rgb, 13, 110, 253),.1);border-left:4px solid var(--info);color:var(--info)}._message_1iy2b_80._error_1iy2b_96{background-color:rgba(var(--error-rgb, 220, 53, 69),.1);border-left:4px solid var(--error);color:var(--error)}._pageContainer_1uaky_1{display:flex;justify-content:center;align-items:flex-start;padding:40px 20px;color:var(--text-primary, #e0e0e0)}._formContainer_1uaky_9{width:100%;max-width:800px;background-color:var(--bg-card, rgba(32, 33, 36, .8));border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.3),0 1px 2px rgba(255,255,255,.05);padding:40px;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.05)}[data-theme=light] ._formContainer_1uaky_9{background-color:var(--bg-card-light, rgba(255, 255, 255, .8));box-shadow:0 10px 30px rgba(0,0,0,.1),0 1px 5px rgba(0,0,0,.05);border:1px solid rgba(0,0,0,.05)}@media (max-width: 768px){._formContainer_1uaky_9{padding:30px 20px}}._title_1uaky_30{text-align:center;margin-bottom:30px;color:var(--text-primary, #ffffff);font-size:36px;font-weight:700;letter-spacing:.5px;text-shadow:0 2px 4px rgba(0,0,0,.2);background:linear-gradient(135deg,var(--gradient-start, #ffffff),var(--accent, #9333ea));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}[data-theme=light] ._title_1uaky_30{color:var(--text-primary-light, #333);text-shadow:0 2px 4px rgba(0,0,0,.1);background:linear-gradient(135deg,var(--gradient-start-light, #333),var(--accent, #9333ea));-webkit-background-clip:text;background-clip:text}@media (max-width: 768px){._title_1uaky_30{font-size:28px;margin-bottom:24px}}._errorMessage_1uaky_57{background-color:rgba(220,53,69,.15);border-left:3px solid #dc3545;color:var(--text-primary, #e0e0e0);padding:12px 15px;border-radius:8px;margin-bottom:20px;font-size:14px;box-shadow:0 4px 6px rgba(0,0,0,.1)}[data-theme=light] ._errorMessage_1uaky_57{color:var(--text-primary-light, #333);background-color:rgba(220,53,69,.1)}._successMessage_1uaky_72{background-color:rgba(40,167,69,.15);border-left:3px solid #28a745;color:var(--text-primary, #e0e0e0);padding:12px 15px;border-radius:8px;margin-bottom:20px;font-size:14px;box-shadow:0 4px 6px rgba(0,0,0,.1)}[data-theme=light] ._successMessage_1uaky_72{color:var(--text-primary-light, #333);background-color:rgba(40,167,69,.1)}._formGroup_1uaky_87{margin-bottom:24px}._formGroup_1uaky_87 label{display:flex;align-items:center;margin-bottom:10px;color:var(--text-secondary, #c0c0c0);font-weight:500;font-size:16px}._formGroup_1uaky_87 ._inputIcon_1uaky_98{margin-right:8px;font-size:18px;color:var(--text-tertiary, #a0a0a0)}._formGroup_1uaky_87 ._inputWrapper_1uaky_103{position:relative;width:100%}._formGroup_1uaky_87 ._inputIconInside_1uaky_107{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-tertiary, #a0a0a0);font-size:16px;pointer-events:none;opacity:.9;z-index:30}._formGroup_1uaky_87 input{width:100%;padding:14px 14px 14px 40px;border:1px solid var(--border, rgba(255, 255, 255, .1));border-radius:8px;background-color:var(--bg-input, rgba(24, 25, 28, .7));color:var(--text-primary, #e0e0e0);font-size:16px;transition:all .3s;position:relative;z-index:25}._formGroup_1uaky_87 input:focus{outline:none;border-color:var(--accent, #9333ea);box-shadow:0 0 0 2px rgba(147,51,234,.2)}._formGroup_1uaky_87 input:disabled{opacity:.8;cursor:not-allowed}._formGroup_1uaky_87 input::placeholder{color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._formGroup_1uaky_87 input{background-color:var(--bg-input-light, rgba(245, 245, 247, .7));color:var(--text-primary-light, #333);border:1px solid var(--border-light, rgba(0, 0, 0, .1))}[data-theme=light] ._formGroup_1uaky_87 input::placeholder{color:var(--text-tertiary-light, #888)}._formGroup_1uaky_87 ._disabledInput_1uaky_150{background-color:var(--bg-disabled, rgba(40, 40, 45, .7));color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._formGroup_1uaky_87 ._disabledInput_1uaky_150{background-color:var(--bg-disabled-light, rgba(235, 235, 240, .7));color:var(--text-tertiary-light, #888)}._formGroup_1uaky_87 ._textarea_1uaky_158{width:100%;padding:14px;border:1px solid var(--border, rgba(255, 255, 255, .1));border-radius:8px;background-color:var(--bg-input, rgba(24, 25, 28, .7));color:var(--text-primary, #e0e0e0);font-size:16px;resize:vertical;min-height:120px;transition:all .3s}._formGroup_1uaky_87 ._textarea_1uaky_158:focus{outline:none;border-color:var(--accent, #9333ea);box-shadow:0 0 0 2px rgba(147,51,234,.2)}._formGroup_1uaky_87 ._textarea_1uaky_158:disabled{opacity:.7;cursor:not-allowed}._formGroup_1uaky_87 ._textarea_1uaky_158::placeholder{color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._formGroup_1uaky_87 ._textarea_1uaky_158{background-color:var(--bg-input-light, rgba(245, 245, 247, .7));color:var(--text-primary-light, #333);border:1px solid var(--border-light, rgba(0, 0, 0, .1))}[data-theme=light] ._formGroup_1uaky_87 ._textarea_1uaky_158::placeholder{color:var(--text-tertiary-light, #888)}._dropArea_1uaky_191{padding:25px;border:2px dashed var(--border, rgba(255, 255, 255, .2));border-radius:8px;background-color:var(--bg-input, rgba(24, 25, 28, .5));text-align:center;transition:all .3s;cursor:pointer}._dropArea_1uaky_191:hover,._dropArea_1uaky_191._highlight_1uaky_200{border-color:var(--accent, #9333ea);background-color:var(--bg-input-hover, rgba(30, 32, 35, .7))}._dropArea_1uaky_191 p{margin:8px 0;color:var(--text-secondary, #c0c0c0)}._dropArea_1uaky_191 ._dropHint_1uaky_208{font-size:14px;color:var(--text-tertiary, #a0a0a0)}[data-theme=light] ._dropArea_1uaky_191{background-color:var(--bg-input-light, rgba(245, 245, 247, .5));border:2px dashed var(--border-light, rgba(0, 0, 0, .2))}[data-theme=light] ._dropArea_1uaky_191:hover,[data-theme=light] ._dropArea_1uaky_191._highlight_1uaky_200{border-color:var(--accent, #9333ea);background-color:var(--bg-input-hover-light, rgba(235, 235, 240, .7))}[data-theme=light] ._dropArea_1uaky_191 p{color:var(--text-secondary-light, #555)}[data-theme=light] ._dropArea_1uaky_191 ._dropHint_1uaky_208{color:var(--text-tertiary-light, #888)}._browseButton_1uaky_227{background:none;border:none;color:var(--accent, #9333ea);font-weight:600;cursor:pointer;padding:0;text-decoration:underline;transition:all .2s}._browseButton_1uaky_227:hover{color:var(--accent-hover, #a855f7)}._imagePreviewContainer_1uaky_241{display:flex;flex-wrap:wrap;gap:10px;margin-top:15px}._imagePreview_1uaky_241{position:relative;width:100px;height:100px;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px rgba(0,0,0,.2)}._imagePreview_1uaky_241 img{width:100%;height:100%;object-fit:cover}._imagePreview_1uaky_241 ._removeImageButton_1uaky_261{position:absolute;top:5px;right:5px;width:24px;height:24px;border-radius:50%;background-color:rgba(0,0,0,.6);color:#fff;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:.8;transition:all .2s}._imagePreview_1uaky_241 ._removeImageButton_1uaky_261:hover{opacity:1;background-color:rgba(220,53,69,.8)}._submitButton_1uaky_283{width:100%;padding:14px;background:linear-gradient(90deg,var(--accent, #9333ea),var(--accent-hover, #a855f7));color:#fff;border:none;border-radius:30px;font-size:16px;font-weight:600;cursor:pointer;margin-top:10px;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden;box-shadow:0 4px 10px rgba(0,0,0,.2)}._submitButton_1uaky_283 ._buttonIcon_1uaky_301{margin-right:8px;font-size:18px}._submitButton_1uaky_283:hover:not(:disabled){background:linear-gradient(90deg,var(--accent-hover, #a855f7),var(--accent, #9333ea));box-shadow:0 6px 15px rgba(0,0,0,.3);transform:translateY(-2px)}._submitButton_1uaky_283:disabled{opacity:.7;cursor:not-allowed}._submitButton_1uaky_283:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(to right,rgba(255,255,255,0),rgba(255,255,255,.2),rgba(255,255,255,0));transform:rotate(45deg);opacity:0;transition:all .5s}._submitButton_1uaky_283:hover:not(:disabled):before{animation:_shimmer_1uaky_1 1.5s infinite}@keyframes _shimmer_1uaky_1{0%{left:-150%;opacity:0}50%{opacity:.4}to{left:150%;opacity:0}}@media (max-width: 600px){._formContainer_1uaky_9{padding:25px 15px}._title_1uaky_30{font-size:24px;margin-bottom:20px}._formGroup_1uaky_87{margin-bottom:18px}._formGroup_1uaky_87 input,._formGroup_1uaky_87 ._textarea_1uaky_158{padding:12px 12px 12px 36px;font-size:14px}._formGroup_1uaky_87 label{font-size:14px}._formGroup_1uaky_87 ._inputIconInside_1uaky_107{left:10px;font-size:14px}._dropArea_1uaky_191{padding:15px}._imagePreview_1uaky_241{width:80px;height:80px}}._themeButton_1p4eo_1{position:absolute;top:10px;right:10px;z-index:10;padding:10px;background:#000;border-radius:35px;cursor:pointer;transition:transform .3s ease,background .3s ease;width:55px;height:55px;display:flex;align-items:center;justify-content:center;border:none;box-sizing:border-box}[data-theme=dark] ._themeButton_1p4eo_1{background:#fff}._themeButton_1p4eo_1:hover{transform:scale(1.1)}._themeButton_1p4eo_1:focus{outline:none}._disabled_1p4eo_33{opacity:.7;cursor:not-allowed}\n/*$vite$:1*/',document.head.appendChild(e);const t="_page_efhok_172",be="_text-animation_efhok_267",ge="_text-animation-slow_efhok_278",he={window:"_window_52q69_2",window__message:"_window__message_52q69_13",window__panel:"_window__panel_52q69_23",window__panel__iconWrapper:"_window__panel__iconWrapper_52q69_35",window__panel__navButtons:"_window__panel__navButtons_52q69_41",window__panel__navButtons__navButton:"_window__panel__navButtons__navButton_52q69_47",window__panel__navButtons__navButton__arrow:"_window__panel__navButtons__navButton__arrow_52q69_53",disabled:"_disabled_52q69_65"},xe=e=>{const t=a.c(8),{children:i,direction:s,selectedIcon:l,showMessage:d}=e,c=void 0===d||d;let _,m;return t[0]!==i||t[1]!==s||t[2]!==l||t[3]!==c?(_=l?r.jsx(o.div,{custom:s,initial:{opacity:0,x:s>0?100:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:s>0?-100:100},transition:{duration:.3},layout:!0,style:{width:"100%",height:"100%"},children:i},l):c&&r.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:r.jsx("div",{className:he.window__message,children:r.jsx("h2",{children:"Выберите персонажа"})})},"message"),t[0]=i,t[1]=s,t[2]=l,t[3]=c,t[4]=_):_=t[4],t[5]!==s||t[6]!==_?(m=r.jsx(n,{mode:"wait",custom:s,children:_}),t[5]=s,t[6]=_,t[7]=m):m=t[7],m},fe={menu:"_menu_1mm9j_2",menu__left:"_menu__left_1mm9j_14",menu__left__pic:"_menu__left__pic_1mm9j_24",menu__right:"_menu__right_1mm9j_35",menu__right__titleblock:"_menu__right__titleblock_1mm9j_52",menu__right__titleblock__fullname:"_menu__right__titleblock__fullname_1mm9j_60",menu__right__titleblock__maininfo:"_menu__right__titleblock__maininfo_1mm9j_63"},ve="guest",ye="vivian",ke="akito",we="lonarius",je="faust",Ne="igorpic",Se="lesyapic";function qe(e,t={}){const{format:a="auto",quality:r=90,width:o,height:n,version:i="v1746536649",dpr:s,flags:l,fetch_format:d}=t;let c=[];c.push(`q_${r}`),s&&c.push(`dpr_${s}`),l&&c.push(`fl_${l}`),d&&c.push(`f_${d}`);const _=e=>e?"string"==typeof e&&e.includes("px")?parseInt(e.replace("px",""),10):e:null,m=_(o),p=_(n);m&&c.push(`w_${m}`),p&&c.push(`h_${p}`),"auto"===a||d||c.push(`f_${a}`);const u=c.length>0?c.join(",")+"/":"";let b=e;return e.match(/\.(avif|webp|png|jpg|jpeg|svg)$/i)&&(b=e.substring(0,e.lastIndexOf("."))),`https://res.cloudinary.com/do9t8preg/image/upload/${u}${i}/${b.includes("/")?b.substring(b.lastIndexOf("/")+1):b}`}const Ce=e=>{const t=a.c(7),{avatar:o,alt:n,className:i,style:s,size:l,onClick:d}=e,c=void 0===o?ve:o,_=void 0===n?"Аватар пользователя":n,m=void 0===l?40:l;let p;return t[0]!==_||t[1]!==c||t[2]!==i||t[3]!==d||t[4]!==m||t[5]!==s?(p=r.jsx(Be,{path:c,alt:_,className:i,style:s,width:m,height:m,loading:"eager",onClick:d}),t[0]=_,t[1]=c,t[2]=i,t[3]=d,t[4]=m,t[5]=s,t[6]=p):p=t[6],p},Be=e=>{const t=a.c(31),{path:o,alt:n,className:i,style:s,width:l,height:d,loading:c,onLoad:_,onError:m,onClick:p}=e,u=void 0===c?"lazy":c;let b,g,h,x;if(t[0]!==d||t[1]!==o||t[2]!==l){const e={width:l,height:d};g=`img_${o}_${l||"auto"}_${d||"auto"}`,b=qe(o,{...e,format:"avif"}),x=qe(o,{...e,format:"webp"}),h=qe(o,{...e,format:"png"}),t[0]=d,t[1]=o,t[2]=l,t[3]=b,t[4]=g,t[5]=h,t[6]=x}else b=t[3],g=t[4],h=t[5],x=t[6];const f=h,v=`avif_${g}`;let y;t[7]!==b||t[8]!==v?(y=r.jsx("source",{srcSet:b,type:"image/avif"},v),t[7]=b,t[8]=v,t[9]=y):y=t[9];const k=`webp_${g}`;let w;t[10]!==k||t[11]!==x?(w=r.jsx("source",{srcSet:x,type:"image/webp"},k),t[10]=k,t[11]=x,t[12]=w):w=t[12];const j=n||"Изображение",N=`png_${g}`;let S,q,C;return t[13]!==m?(S=e=>{m&&m(e)},t[13]=m,t[14]=S):S=t[14],t[15]!==i||t[16]!==d||t[17]!==u||t[18]!==p||t[19]!==_||t[20]!==f||t[21]!==s||t[22]!==j||t[23]!==N||t[24]!==S||t[25]!==l?(q=r.jsx("img",{src:f,alt:j,className:i,style:s,width:l,height:d,loading:u,crossOrigin:"anonymous",onLoad:_,onClick:p,onError:S},N),t[15]=i,t[16]=d,t[17]=u,t[18]=p,t[19]=_,t[20]=f,t[21]=s,t[22]=j,t[23]=N,t[24]=S,t[25]=l,t[26]=q):q=t[26],t[27]!==q||t[28]!==y||t[29]!==w?(C=r.jsxs("picture",{children:[y,w,q]}),t[27]=q,t[28]=y,t[29]=w,t[30]=C):C=t[30],C},Pe={button:"_button_1jwbf_1",icon:"_icon_1jwbf_39"},Ie=e=>{const t=a.c(4),{text:o}=e;let n,i;return t[0]!==o?(n=o.split("").map(Ae),t[0]=o,t[1]=n):n=t[1],t[2]!==n?(i=r.jsx(r.Fragment,{children:n}),t[2]=n,t[3]=i):i=t[3],i};function Ae(e,t){const a=" "===e?" ":e;return r.jsx("span",{style:{animationDelay:.05*t+"s"},children:a},t)}const ze="_modalOverlay_1214q_2",Ee="_modalOverlay__content_1214q_15",Oe="_modalOverlay__closeButton_1214q_29",De="_modalOverlay__textContent_1214q_42",$e="_modalOverlay__navigation_1214q_48",Te="_modalOverlay__arrowRight_1214q_54",Ue="_modalOverlay__arrowLeft_1214q_54",Fe="_modalOverlay__title_1214q_67",Me="_modalOverlay__textBlock_1214q_86",Le="_modalOverlay__textBlock__textCont_1214q_90",Ge="_modalOverlay__pageIndicator_1214q_105",Re="_fadeIn_1214q_117",He="_fadeOut_1214q_121",We="_disabled_1214q_125",Ve=e=>e&&"string"==typeof e?e.replace(/class=/g,"className="):"",Ye={container:{fontFamily:"Graphr, sans-serif",lineHeight:"1.5"},paragraph:{marginBottom:"10px",lineHeight:"1.5",position:"relative"},bulletPoint:{marginBottom:"10px",textIndent:"0",position:"relative"},blockquote:{margin:"2rem 0rem",borderLeft:"4px solid var(--accent-color)",fontStyle:"italic",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"0 8px 8px 0"},blurredText:{filter:"blur(4px)",display:"inline-block"}},Je=({html:e,onHeightChange:t})=>{const a=i.useRef(null);if(i.useEffect((()=>{if(a.current&&t){const e=a.current.scrollHeight;t(e)}}),[e,t]),!e||"string"!=typeof e)return null;const o=document.createElement("div");o.innerHTML=e;const n=e=>{if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){const t=Array.from(e.childNodes).map(n),a={key:Math.random().toString(36).substr(2,9),className:e.className||void 0};let r={};return"p"===e.tagName.toLowerCase()?r=e.textContent.trim().startsWith("•")?{...Ye.bulletPoint}:{...Ye.paragraph}:"blockquote"===e.tagName.toLowerCase()?r={...Ye.blockquote}:"span"===e.tagName.toLowerCase()&&e.className&&e.className.includes("blur")&&(r={...Ye.blurredText}),a.style=r,Array.from(e.attributes).forEach((e=>{"class"!==e.name&&"style"!==e.name&&(a[e.name]=e.value)})),s.createElement(e.tagName.toLowerCase(),a,...t)}return null};return r.jsx("div",{ref:a,style:Ye.container,children:n(o)})},Xe=e=>{const t=a.c(62),{isOpen:o,onClose:n,id:s,characters:d}=e,[c,_]=i.useState(!1),[m,p]=i.useState(!1),[u,b]=i.useState(null),[,g]=i.useState(0),h=i.useRef(null),{currentPage:x,nextPage:f,prevPage:v}=(()=>{const e=a.c(8),[t,r]=i.useState(0);let o;e[0]!==t?(o=e=>{t<e-1&&r(t+1)},e[0]=t,e[1]=o):o=e[1];const n=o;let s;e[2]!==t?(s=()=>{t>0&&r(t-1)},e[2]=t,e[3]=s):s=e[3];const l=s;let d;return e[4]!==t||e[5]!==n||e[6]!==l?(d={currentPage:t,nextPage:n,prevPage:l,setCurrentPage:r},e[4]=t,e[5]=n,e[6]=l,e[7]=d):d=e[7],d})();let y,k,w;t[0]===Symbol.for("react.memo_cache_sentinel")?(y=()=>(p(!0),b(document.body),()=>{p(!1),b(null)}),k=[],t[0]=y,t[1]=k):(y=t[0],k=t[1]),i.useEffect(y,k);e:{if(!d||!s){let e;t[2]===Symbol.for("react.memo_cache_sentinel")?(e={character:null,pages:[]},t[2]=e):e=t[2],w=e;break e}let e,a,r;if(t[3]!==d||t[4]!==s){const r=((e,t)=>{const a=e[t];if(a&&a.lore&&"string"==typeof a.lore)return a})(d,s);if(!r||!r.lore||""===r.lore.trim()){w={character:r,pages:[]};break e}e=r,a=(e=>{if(!e||"string"!=typeof e)return[];if(!/<p>.*?<\/p>/g.test(e))return[`<p>${e}</p>`];if("undefined"==typeof window)return[e];const t=e.split("<p>").filter(Boolean).map((e=>e.split("</p>")[0].trim())),a=t.pop()||null,r=[];let o="",n=0;const i=window.innerWidth<=768,s=window.innerHeight,l=document.createElement("div");l.style.position="absolute",l.style.visibility="hidden",l.style.maxWidth="600px",l.style.fontFamily="graphr, sans-serif",l.style.fontSize="1.6rem",l.style.lineHeight="1.5",l.style.padding="10px",l.style.wordWrap="break-word";const d=document.createElement("style");d.textContent="\n    .blur {\n      filter: blur(4px);\n      display: inline-block;\n    }\n  ",document.head.appendChild(d),document.body.appendChild(l);try{const e=i&&s>400?600:800,d=i?500:1/0;if(t.length>0){const e=t.shift().trim();o=`<p>${e}</p>`,n=e.length}if(t.forEach((t=>{const a=t.trim(),i=`<p>${a}</p>`,s=a.length;l.innerHTML=Ve(o+i),l.scrollHeight>e||n+s>d?(r.push(o),o=i,n=s):(o+=i,n+=s)})),o&&r.push(o),a&&a.trim()){const t=`<blockquote>${a.trim()}</blockquote>`;l.innerHTML=Ve(o+t),l.scrollHeight>e?(r.push(o),r.push(t)):r[r.length-1]+=t}}finally{document.body.removeChild(l),document.head.removeChild(d)}return r})(r.lore),t[3]=d,t[4]=s,t[5]=e,t[6]=a,t[7]=w}else e=t[5],a=t[6],w=t[7];t[8]!==e||t[9]!==a?(r={character:e,pages:a},t[8]=e,t[9]=a,t[10]=r):r=t[10],w=r}const{character:j,pages:N}=w;if(!(o&&j&&0!==N.length&&m&&u))return null;let S;t[11]!==f||t[12]!==N.length?(S=()=>{_(!0),setTimeout((()=>{f(N.length),_(!1)}),300)},t[11]=f,t[12]=N.length,t[13]=S):S=t[13];const q=S;let C;t[14]!==v?(C=()=>{_(!0),setTimeout((()=>{v(),_(!1)}),300)},t[14]=v,t[15]=C):C=t[15];const B=C;let P;t[16]===Symbol.for("react.memo_cache_sentinel")?(P=e=>{g(e)},t[16]=P):P=t[16];const I=P;let A;if(t[17]!==j||t[18]!==x||t[19]!==c||t[20]!==q||t[21]!==B||t[22]!==n||t[23]!==N||t[24]!==u){let e,a;t[26]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 30 30",children:r.jsx("path",{d:"M7 4H6L4 6v2l8 7-8 7v2l2 2h2l7-8 7 8h2l2-2v-2l-8-7 8-7V6l-2-2h-2l-7 8-7-8H7z"})}),t[26]=e):e=t[26],t[27]!==n?(a=r.jsx("button",{onClick:n,className:Oe,children:e}),t[27]=n,t[28]=a):a=t[28];const o=0===x,i=`${Ue} ${0===x?We:""}`;let s,d;t[29]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:r.jsx("path",{d:"m12.718 4.707-1.413-1.415L2.585 12l8.72 8.707 1.413-1.415L6.417 13H20v-2H6.416l6.302-6.293z"})}),t[29]=s):s=t[29],t[30]!==B||t[31]!==o||t[32]!==i?(d=r.jsx("button",{onClick:B,disabled:o,className:i,children:s}),t[30]=B,t[31]=o,t[32]=i,t[33]=d):d=t[33];const _=x===N.length-1,m=`${Te} ${x===N.length-1?We:""}`;let p,b,g,f,v;t[34]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:r.jsx("path",{d:"M11.293 4.707 17.586 11H4v2h13.586l-6.293 6.293 1.414 1.414L21.414 12l-8.707-8.707-1.414 1.414z"})}),t[34]=p):p=t[34],t[35]!==q||t[36]!==_||t[37]!==m?(b=r.jsx("button",{onClick:q,disabled:_,className:m,children:p}),t[35]=q,t[36]=_,t[37]=m,t[38]=b):b=t[38],t[39]!==d||t[40]!==b?(g=r.jsxs("div",{className:$e,children:[d,b]}),t[39]=d,t[40]=b,t[41]=g):g=t[41],t[42]!==j?(f=(e=>{if(!e)return"Не найден";const{name:t}=e;return["Фауст","Лонариус"].includes(t)?`${t}а`:t})(j),t[42]=j,t[43]=f):f=t[43],t[44]!==f?(v=r.jsxs("h2",{className:Fe,children:["Лор ",f]}),t[44]=f,t[45]=v):v=t[45];const y=`${Le} ${c?He:Re}`,k=N[x];let w,S;t[46]!==k?(w=r.jsx(Je,{html:k,onHeightChange:I}),t[46]=k,t[47]=w):w=t[47],t[48]!==y||t[49]!==w?(S=r.jsx("div",{className:Me,ref:h,children:r.jsx("div",{className:y,children:w})}),t[48]=y,t[49]=w,t[50]=S):S=t[50];const C=x+1;let P,z,E;t[51]!==N.length||t[52]!==C?(P=r.jsxs("div",{className:Ge,children:["Страница ",C," из ",N.length]}),t[51]=N.length,t[52]=C,t[53]=P):P=t[53],t[54]!==g||t[55]!==v||t[56]!==S||t[57]!==P?(z=r.jsxs("div",{className:De,children:[g,v,S,P]}),t[54]=g,t[55]=v,t[56]=S,t[57]=P,t[58]=z):z=t[58],t[59]!==z||t[60]!==a?(E=r.jsx("div",{className:ze,children:r.jsxs("div",{className:Ee,onClick:Ze,children:[a,z]})}),t[59]=z,t[60]=a,t[61]=E):E=t[61],A=l.createPortal(E,u),t[17]=j,t[18]=x,t[19]=c,t[20]=q,t[21]=B,t[22]=n,t[23]=N,t[24]=u,t[25]=A}else A=t[25];return A};function Ze(e){return e.stopPropagation()}const Qe=e=>{const t=a.c(16),{id:o,characters:n}=e,[s,l]=i.useState(!1),[d,c]=i.useState(!1);let _,m,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(_=()=>(c(!0),()=>c(!1)),m=[],t[0]=_,t[1]=m):(_=t[0],m=t[1]),i.useEffect(_,m),t[2]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{l(!0)},t[2]=p):p=t[2];const u=p;let b;t[3]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{l(!1)},t[3]=b):b=t[3];const g=b;let h;t[4]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{"Escape"===e.key&&g()},t[4]=h):h=t[4];const x=h;let f,v,y,k,w,j;return t[5]===Symbol.for("react.memo_cache_sentinel")?(f=()=>(window.addEventListener("keydown",x),()=>{window.removeEventListener("keydown",x)}),v=[],t[5]=f,t[6]=v):(f=t[5],v=t[6]),i.useEffect(f,v),d?(t[7]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx("span",{className:`${be} ${ge}`,children:r.jsx(Ie,{text:"Читать лор"})}),t[7]=y):y=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("div",{className:Pe.wrapper,children:r.jsxs("button",{className:Pe.button,onClick:u,children:[y,r.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:Pe.icon,children:r.jsx("path",{clipRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm4.28 10.28a.75.75 0 000-1.06l-3-3a.75.75 0 10-1.06 1.06l1.72 1.72H8.25a.75.75 0 000 1.5h5.69l-1.72 1.72a.75.75 0 101.06 1.06l3-3z",fillRule:"evenodd"})})]})}),t[8]=k):k=t[8],t[9]!==n||t[10]!==o||t[11]!==s||t[12]!==d?(w=d&&s&&r.jsx(Xe,{isOpen:s,onClose:g,id:o,characters:n}),t[9]=n,t[10]=o,t[11]=s,t[12]=d,t[13]=w):w=t[13],t[14]!==w?(j=r.jsxs(r.Fragment,{children:[k,w]}),t[14]=w,t[15]=j):j=t[15],j):null};function Ke(e){const t=a.c(48),{id:o,src:n,name:i,surname:s,age:l,height:d,bd:c,characters:_}=e,m=void 0===s?"":s,p=void 0===l?"?":l,u=void 0===c?"?":c;let b;t[0]!==n?(b=n&&(n.startsWith("./")||n.startsWith("http")),t[0]=n,t[1]=b):b=t[1];const g=b;let h;t[2]!==o||t[3]!==g||t[4]!==n?(h=e=>g?`./pics/char/picsfull/${n}.${e}`:qe(`${o}full`,{quality:90,format:e}),t[2]=o,t[3]=g,t[4]=n,t[5]=h):h=t[5];const x=h;let f,v,y,k,w;t[6]!==x?(f=x("avif"),t[6]=x,t[7]=f):f=t[7],t[8]!==f?(v=r.jsx("source",{srcSet:f,type:"image/avif"}),t[8]=f,t[9]=v):v=t[9],t[10]!==x?(y=x("webp"),t[10]=x,t[11]=y):y=t[11],t[12]!==y?(k=r.jsx("source",{srcSet:y,type:"image/webp"}),t[12]=y,t[13]=k):k=t[13],t[14]!==x?(w=x("png"),t[14]=x,t[15]=w):w=t[15];const j=`icon-${i}`;let N,S;t[16]!==w||t[17]!==j?(N=r.jsx("img",{src:w,alt:j,loading:"lazy",onError:et}),t[16]=w,t[17]=j,t[18]=N):N=t[18],t[19]!==N||t[20]!==v||t[21]!==k?(S=r.jsx("div",{className:fe.menu__left,children:r.jsxs("picture",{className:fe.menu__left__pic,children:[v,k,N]})}),t[19]=N,t[20]=v,t[21]=k,t[22]=S):S=t[22];const q=`${i} ${m}`;let C;t[23]!==q?(C=r.jsx("h2",{className:`${fe.menu__right__titleblock__fullname} ${be}`,children:r.jsx(Ie,{text:q})}),t[23]=q,t[24]=C):C=t[24];const B=`Возраст: ${p} ${"?"!==p&&function(e){if(!Number.isInteger(e)||e<0)throw new Error("Возраст должен быть неотрицательным целым числом");const t=e%10,a=e%100;return a>=11&&a<=19?"лет":1===t?"год":t>=2&&t<=4?"года":"лет"}(p)}`;let P;t[25]!==B?(P=r.jsx("span",{className:`${fe.menu__right__titleblock__maininfo__age} ${be}`,children:r.jsx(Ie,{text:B})}),t[25]=B,t[26]=P):P=t[26];const I=`Рост: ${d} см`;let A;t[27]!==I?(A=r.jsx("span",{className:`${fe.menu__right__titleblock__maininfo__height} ${be}`,children:r.jsx(Ie,{text:I})}),t[27]=I,t[28]=A):A=t[28];const z=`День рождения: ${u}`;let E,O,D,$,T,U;return t[29]!==z?(E=r.jsx("span",{className:`${fe.menu__right__titleblock__maininfo__bd} ${be}`,children:r.jsx(Ie,{text:z})}),t[29]=z,t[30]=E):E=t[30],t[31]!==P||t[32]!==A||t[33]!==E?(O=r.jsxs("div",{className:fe.menu__right__titleblock__maininfo,children:[P,A,E]}),t[31]=P,t[32]=A,t[33]=E,t[34]=O):O=t[34],t[35]!==C||t[36]!==O?(D=r.jsxs("div",{className:fe.menu__right__titleblock,children:[C,O]}),t[35]=C,t[36]=O,t[37]=D):D=t[37],t[38]!==_||t[39]!==o?($=r.jsx(Qe,{id:o,characters:_}),t[38]=_,t[39]=o,t[40]=$):$=t[40],t[41]!==D||t[42]!==$?(T=r.jsxs("div",{className:fe.menu__right,children:[D,$]}),t[41]=D,t[42]=$,t[43]=T):T=t[43],t[44]!==o||t[45]!==S||t[46]!==T?(U=r.jsxs("div",{id:o,className:fe.menu,children:[S,T]}),t[44]=o,t[45]=S,t[46]=T,t[47]=U):U=t[47],U}function et(e){}const tt=i.createContext(),at={light:{"--primary-color":"#000000","--background-color":"#ffffff","--text-color":"#000000","--secondary-color":"#666666","--accent-color":"#3498db"},dark:{"--primary-color":"#ffffff","--background-color":"#1a1a1a","--text-color":"#ffffff","--secondary-color":"#999999","--accent-color":"#3498db"}},rt=e=>{const t=a.c(12),{children:o}=e;let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=localStorage.getItem("theme")||"light",document.documentElement.setAttribute("data-theme",n),t[0]=n):n=t[0];const[s,l]=i.useState(n);let d;t[1]!==s?(d=()=>{const e="light"===s?"dark":"light";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e);const t=getComputedStyle(document.documentElement);for(let r=0;r<t.length;r++){const e=t[r];e.startsWith("--")&&document.documentElement.style.removeProperty(e)}const a=at[e];a&&Object.entries(a).forEach(ot),"dark"===e?(document.documentElement.style.setProperty("--background-color","#1e1e1e"),document.documentElement.style.setProperty("--text-color","#e0e0e0"),document.documentElement.style.setProperty("--text-primary","#e0e0e0"),document.documentElement.style.setProperty("--bg-secondary","#292929"),document.documentElement.style.setProperty("--bg-highlight","#2a2a2a"),document.documentElement.style.setProperty("--modal-bg","#2a2a2a")):(document.documentElement.style.setProperty("--background-color","#fff"),document.documentElement.style.setProperty("--text-color","#000"),document.documentElement.style.setProperty("--text-primary","#222222"),document.documentElement.style.setProperty("--bg-secondary","#f8f9fa"),document.documentElement.style.setProperty("--bg-highlight","#f5f8fa"),document.documentElement.style.setProperty("--modal-bg","#ffffff")),l(e),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:e}}))},t[1]=s,t[2]=d):d=t[2];const c=d;let _,m,p;t[3]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{document.documentElement.setAttribute("data-theme",n);const e=getComputedStyle(document.documentElement);for(let a=0;a<e.length;a++){const t=e[a];t.startsWith("--")&&document.documentElement.style.removeProperty(t)}const t=at[n];t&&Object.entries(t).forEach(nt),"dark"===n&&(document.documentElement.style.setProperty("--background-color","#1e1e1e"),document.documentElement.style.setProperty("--text-color","#e0e0e0"),document.documentElement.style.setProperty("--text-primary","#e0e0e0"),document.documentElement.style.setProperty("--bg-secondary","#292929"),document.documentElement.style.setProperty("--bg-highlight","#2a2a2a"),document.documentElement.style.setProperty("--modal-bg","#2a2a2a"),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:n}}))),window.addEventListener("DOMContentLoaded",(()=>{document.documentElement.setAttribute("data-theme",n),"dark"===n?(document.documentElement.style.setProperty("--background-color","#1e1e1e"),document.documentElement.style.setProperty("--text-color","#e0e0e0")):(document.documentElement.style.setProperty("--background-color","#fff"),document.documentElement.style.setProperty("--text-color","#000"))}))},m=[],t[3]=_,t[4]=m):(_=t[3],m=t[4]),i.useEffect(_,m);const u="dark"===s;let b;t[5]!==u||t[6]!==s||t[7]!==c?(b={theme:s,toggleTheme:c,isDarkMode:u},t[5]=u,t[6]=s,t[7]=c,t[8]=b):b=t[8],p=b;const g=p;let h;return t[9]!==o||t[10]!==g?(h=r.jsx(tt.Provider,{value:g,children:o}),t[9]=o,t[10]=g,t[11]=h):h=t[11],h};function ot(e){const[t,a]=e;document.documentElement.style.setProperty(t,a)}function nt(e){const[t,a]=e;document.documentElement.style.setProperty(t,a)}const it="_btn_2wi9v_2",st="_btn__pic_2wi9v_19",lt="_darkTheme_2wi9v_30",dt=s.memo((e=>{const t=a.c(33),{src:o,index:n,onClick:s}=e,{theme:l}=i.useContext(tt);let d;e:{if(o.startsWith("./")||o.startsWith("http")){const e=`./pics/icons/${o}.avif`,a=`./pics/icons/${o}.webp`,r=`./pics/icons/${o}.png`;let n;t[0]!==e||t[1]!==a||t[2]!==r?(n={avif:e,webp:a,png:r},t[0]=e,t[1]=a,t[2]=r,t[3]=n):n=t[3],d=n;break e}let e,a,r,n;t[4]!==o?(e=qe(o,{quality:90,format:"avif"}),t[4]=o,t[5]=e):e=t[5],t[6]!==o?(a=qe(o,{quality:90,format:"webp"}),t[6]=o,t[7]=a):a=t[7],t[8]!==o?(r=qe(o,{quality:90,format:"png"}),t[8]=o,t[9]=r):r=t[9],t[10]!==e||t[11]!==a||t[12]!==r?(n={avif:e,webp:a,png:r},t[10]=e,t[11]=a,t[12]=r,t[13]=n):n=t[13],d=n}const c=d;let _;t[14]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx("hr",{}),t[14]=_):_=t[14];const m=`${st} ${"dark"===l?lt:""}`;let p,u;t[15]!==c.avif?(p=r.jsx("source",{srcSet:c.avif,type:"image/avif"}),t[15]=c.avif,t[16]=p):p=t[16],t[17]!==c.webp?(u=r.jsx("source",{srcSet:c.webp,type:"image/webp"}),t[17]=c.webp,t[18]=u):u=t[18];const b=`icon-${n}`;let g,h,x,f,v;return t[19]!==c.png||t[20]!==b?(g=r.jsx("img",{src:c.png,alt:b,loading:"eager",decoding:"async",crossOrigin:"anonymous",onError:ct}),t[19]=c.png,t[20]=b,t[21]=g):g=t[21],t[22]!==m||t[23]!==p||t[24]!==u||t[25]!==g?(h=r.jsxs("picture",{className:m,children:[p,u,g]}),t[22]=m,t[23]=p,t[24]=u,t[25]=g,t[26]=h):h=t[26],t[27]!==s||t[28]!==h?(x=r.jsx("button",{className:it,onClick:s,children:h}),t[27]=s,t[28]=h,t[29]=x):x=t[29],t[30]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("hr",{}),t[30]=f):f=t[30],t[31]!==x?(v=r.jsxs("div",{children:[_,x,f]}),t[31]=x,t[32]=v):v=t[32],v}));function ct(e){}dt.displayName="Icon";const _t=e=>{const t=a.c(40),{icons:s,onIconClick:l}=e,[d,c]=i.useState(0);let _;t[0]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{c(mt)},t[0]=_):_=t[0];const m=_;let p;t[1]!==s.length?(p=()=>{c((e=>e<s.length-3?e+1:e))},t[1]=s.length,t[2]=p):p=t[2];const u=p;let b,g,h,x,f,v,y,k,w;if(t[3]!==s||t[4]!==l||t[5]!==d){const e=s.slice(d,d+3);y=he.window__panel,f=he.window__panel__navButtons;const a=`${he.window__panel__navButtons__navButton} ${0===d?he.disabled:""}`,i=0===d;let c,_;t[13]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx("span",{className:he.window__panel__navButtons__navButton__arrow,children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:r.jsx("path",{d:"m3.293 11.293 1.414 1.414L11 6.414V20h2V6.414l6.293 6.293 1.414-1.414L12 2.586l-8.707 8.707z"})})}),t[13]=c):c=t[13],t[14]!==i||t[15]!==a?(v=r.jsx("button",{className:a,onClick:m,disabled:i,"aria-label":"Назад",children:c}),t[14]=i,t[15]=a,t[16]=v):v=t[16],x=he.window__panel__iconWrapper,b=n,g="popLayout",t[17]!==l||t[18]!==d?(_=(e,t)=>r.jsx(o.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{duration:.3,ease:"easeOut"},className:he.window__panel__iconWrapper__icons,children:r.jsx(dt,{src:e,index:d+t,onClick:()=>l(e)})},d+t),t[17]=l,t[18]=d,t[19]=_):_=t[19],h=e.map(_),t[3]=s,t[4]=l,t[5]=d,t[6]=b,t[7]=g,t[8]=h,t[9]=x,t[10]=f,t[11]=v,t[12]=y}else b=t[6],g=t[7],h=t[8],x=t[9],f=t[10],v=t[11],y=t[12];t[20]!==b||t[21]!==g||t[22]!==h?(k=r.jsx(b,{mode:g,children:h}),t[20]=b,t[21]=g,t[22]=h,t[23]=k):k=t[23],t[24]!==x||t[25]!==k?(w=r.jsx("div",{className:x,children:k}),t[24]=x,t[25]=k,t[26]=w):w=t[26];const j=`${he.window__panel__navButtons__navButton} ${d>=s.length-3?he.disabled:""}`,N=d>=s.length-3;let S,q,C,B;return t[27]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx("span",{className:he.window__panel__navButtons__navButton__arrow,children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:r.jsx("path",{d:"M13 17.586V4h-2v13.586l-6.293-6.293-1.414 1.414L12 21.414l8.707-8.707-1.414-1.414L13 17.586z"})})}),t[27]=S):S=t[27],t[28]!==u||t[29]!==j||t[30]!==N?(q=r.jsx("button",{className:j,onClick:u,disabled:N,"aria-label":"Вперёд",children:S}),t[28]=u,t[29]=j,t[30]=N,t[31]=q):q=t[31],t[32]!==w||t[33]!==q||t[34]!==f||t[35]!==v?(C=r.jsxs("div",{className:f,children:[v,w,q]}),t[32]=w,t[33]=q,t[34]=f,t[35]=v,t[36]=C):C=t[36],t[37]!==C||t[38]!==y?(B=r.jsx("div",{className:y,children:C}),t[37]=C,t[38]=y,t[39]=B):B=t[39],B};function mt(e){return e>0?e-1:e}const pt={},ut=6e5,bt={},gt=window.location.hostname.includes("github.io"),ht=e=>{if(e.startsWith("/gist/")){const t=e.split("/");return{username:t[2],gistId:t[3],filename:t[t.length-1]}}return null},xt=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return null}},ft=(e,t)=>{try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(a){return!1}},vt=e=>{try{return localStorage.removeItem(e),!0}catch(t){return!1}},yt=async(e,t=!1)=>{const a=`data_${e.split("?v=")[0]}`,r=e.startsWith("/gist/");if(!t){if(pt[a])return pt[a].data;const e=xt(a);if(e&&e.timestamp&&Date.now()-e.timestamp<ut)return pt[a]=e,e.data}const o=Date.now();if(bt[e]&&o-bt[e]<2e3){if(pt[a])return pt[a].data;const e=xt(a);return e?e.data:null}bt[e]=o;try{const o=(e=>e.startsWith("/gist/")&&gt?`https://api.github.com/gists/${ht(e).gistId}`:e)(e),n=e,i=await fetch(o,{cache:t?"no-cache":"default"});if(429===i.status){if(pt[a])return pt[a].data;const e=xt(a);return e?e.data:null}if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const s=await i.json();let l=s;r&&gt&&(l=((e,t)=>{try{const a=ht(t);if(!a||!e.files)return null;const r=a.filename;for(const t in e.files)if(t===r||t.endsWith(`/${r}`)){const a=e.files[t].content;if(a)return JSON.parse(a)}for(const t in e.files)if(t.endsWith(".json")){const a=e.files[t].content;if(a)return JSON.parse(a)}return e}catch(a){return null}})(s,n));const d={data:l,timestamp:Date.now()};return pt[a]=d,ft(a,d),l}catch(n){if(pt[a])return pt[a].data;const e=xt(a);return e?e.data:null}},kt=["faust","lonarius","vivian","akito"];function wt(){const e=a.c(18),[t,o]=i.useState(null),[n,s]=i.useState(1),[l,d]=i.useState(!1),[c,_]=i.useState(jt);let m,p,u;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{Object.keys(window.localStorage).filter((e=>e.includes("gist.github")||e.includes("githubusercontent"))).forEach((e=>window.localStorage.removeItem(e))),window.caches&&caches.keys().then((e=>{e.forEach((e=>{caches.delete(e)}))})),_(Date.now())},p=[],e[0]=m,e[1]=p):(m=e[0],p=e[1]),i.useEffect(m,p),e[2]===Symbol.for("react.memo_cache_sentinel")?(u={retryInterval:3e4},e[2]=u):u=e[2];const{data:b,loading:g,error:h,refresh:x}=function(e,t={}){const{skipCache:a=!1,retryInterval:r=1e4}=t,[o,n]=i.useState(null),[s,l]=i.useState(!0),[d,c]=i.useState(null),_=i.useRef(!0),m=i.useRef(null),p=e.split("?v=")[0],u=`data_${p}`,b=i.useCallback((async(t=!1)=>{t&&l(!0);try{if(!t&&!o){const e=xt(u);e&&e.data&&Date.now()-e.timestamp<ut&&(n(e.data),c(null),l(!1))}const r=await yt(e,t||a);if(!_.current)return;if(r)n(r),c(null),m.current&&(clearTimeout(m.current),m.current=null);else{const e=xt(u);if(!e||!e.data)throw new Error("Failed to load data")}}catch(i){_.current&&(c(i.message),_.current&&!m.current&&(m.current=setTimeout((()=>{_.current&&(m.current=null,b(!0))}),r)))}finally{_.current&&l(!1)}}),[e,p,u,a,r,o]);i.useEffect((()=>(_.current=!0,b(),()=>{_.current=!1,m.current&&clearTimeout(m.current)})),[b]);const g=i.useCallback((()=>{const e=`data_${p}`;delete pt[e],vt(e),b(!0)}),[p,b]);return{data:o,loading:s,error:d,refresh:()=>b(!0),clearCache:g}}(`/gist/igorao79/17a1e2924e5dbee9371956c24be2a31b/raw/chlore.json?v=${c}`,u);let f;e[3]!==l||e[4]!==t?(f=e=>{l||(d(!0),s(t?kt.indexOf(e)>kt.indexOf(t)?1:-1:1),o(e),setTimeout((()=>d(!1)),300))},e[3]=l,e[4]=t,e[5]=f):f=e[5];const v=f;let y,k;var w;let j;return e[6]!==v?(y=r.jsx(_t,{icons:kt,onIconClick:v}),e[6]=v,e[7]=y):y=e[7],e[8]!==b||e[9]!==n||e[10]!==h||e[11]!==g||e[12]!==x||e[13]!==t?(k=g?r.jsx("div",{className:he.loading,children:"Загрузка..."}):h?r.jsxs("div",{className:he.error,children:["Ошибка загрузки данных. ",!g&&r.jsx("button",{onClick:x,children:"Повторить"})]}):r.jsx(xe,{selectedIcon:t,direction:n,children:t&&b&&b[t]&&r.jsx(Ke,{id:t,src:b[t]?.src,name:b[t]?.name,surname:b[t]?.surname,age:b[t]?.age,height:b[t]?.height,bd:b[t]?.bd,lore:(w=b[t]?.lore,w?w.includes("<p>")?w:`<p>${w}</p>`:""),characters:b})}),e[8]=b,e[9]=n,e[10]=h,e[11]=g,e[12]=x,e[13]=t,e[14]=k):k=e[14],e[15]!==y||e[16]!==k?(j=r.jsxs("div",{className:he.window,children:[y,k]}),e[15]=y,e[16]=k,e[17]=j):j=e[17],j}function jt(){return Date.now()}const Nt="_aboutblock_kg2nj_3",St="_aboutblock__header_kg2nj_17",qt="_aboutblock__header__htitle_kg2nj_25",Ct="_aboutblock__header__textblock_kg2nj_45",Bt="_aboutblock__header__textblock__card_kg2nj_54",Pt="_aboutblock__header__textblock__card__icon_kg2nj_71",It="_aboutblock__header__textblock__card__icon__main_kg2nj_80",At="_aboutblock__header__textblock__card__icon__small_kg2nj_87",zt="_aboutblock__header__textblock__card__content_kg2nj_96",Et="_aboutblock__header__textblock__card__link_kg2nj_107",Ot="_aboutblock__divider_kg2nj_140",Dt="_aboutblock__divider__line_kg2nj_148",$t="_aboutblock__divider__icon_kg2nj_153",Tt="_aboutblock__main_kg2nj_158",Ut="_aboutblock__main__btitle_kg2nj_166",Ft="_aboutblock__main__dtitle_kg2nj_166",Mt="_aboutblock__main__authors_kg2nj_181",Lt="_aboutblock__main__developers_kg2nj_181",Gt="_aboutblock__social_kg2nj_196",Rt="_aboutblock__social__title_kg2nj_205",Ht="_aboutblock__social__links_kg2nj_221",Wt={member:"_member_17rw5_2",member__info__details__name:"_member__info__details__name_17rw5_21",member__imageContainer:"_member__imageContainer_17rw5_25",member__imageWrapper:"_member__imageWrapper_17rw5_28",borderRotate:"_borderRotate_17rw5_1",member__image:"_member__image_17rw5_25",member__info:"_member__info_17rw5_21",member__info__details:"_member__info__details_17rw5_21",member__info__details__link:"_member__info__details__link_17rw5_109",member__info__details__role:"_member__info__details__role_17rw5_134",member__info__bio:"_member__info__bio_17rw5_140","member--igor":"_member--igor_17rw5_147",rotate:"_rotate_17rw5_1","member--lesya":"_member--lesya_17rw5_172",heartbeat:"_heartbeat_17rw5_1",float:"_float_17rw5_1"},Vt={lesya:{id:"lesya",name:"Леся",src:"lesyapic",bookteam:"Художник, Соавтор",bio:"Соавтор и основной художник проекта."},igor:{id:"igor",name:"Игорь",src:"igorpic",developerteam:"Ведущий разработчик сайта. Отвечает за техническую реализацию проекта и внедрение новых функций.",bookteam:"Автор",bio:"Создатель и автор проекта."}},Yt=s.memo((e=>{const t=a.c(32),{memberId:o,profileUrl:n}=e,{theme:s}=i.useContext(tt);let l;l=Vt[o];const c=l;if(!c){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:Wt.member__notfound,children:"Участник не найден."}),t[0]=e):e=t[0],e}let _;_=`member--${c.id.replace(/\s+/g,"-").toLowerCase()}`;const m=_;let p;t[1]!==n?(p=n?new URL(n).hash.replace("#",""):null,t[1]=n,t[2]=p):p=t[2];const u=p,b=`${Wt.member} ${Wt[`member--${c.id}`]}`,g=`${Wt.member__imageContainer} ${"dark"===s?Wt.darkTheme:""}`;let h,x,f,v,y,k,w,j,N;return t[3]!==c.name||t[4]!==c.src||t[5]!==u||t[6]!==n?(h=n?r.jsx(d,{to:u,children:r.jsx(Be,{path:c.src,alt:c.name,className:Wt.member__image,loading:"lazy"})}):r.jsx(Be,{path:c.src,alt:c.name,className:Wt.member__image,loading:"lazy"}),t[3]=c.name,t[4]=c.src,t[5]=u,t[6]=n,t[7]=h):h=t[7],t[8]!==g||t[9]!==h?(x=r.jsx("div",{className:Wt.member__imageWrapper,children:r.jsx("div",{className:g,children:h})}),t[8]=g,t[9]=h,t[10]=x):x=t[10],t[11]!==c.name||t[12]!==u||t[13]!==n?(f=n?r.jsx(d,{to:u,className:Wt.member__info__details__link,children:c.name}):c.name,t[11]=c.name,t[12]=u,t[13]=n,t[14]=f):f=t[14],t[15]!==f?(v=r.jsx("h3",{className:Wt.member__info__details__name,children:f}),t[15]=f,t[16]=v):v=t[16],t[17]!==c.bookteam?(y=r.jsx("p",{className:Wt.member__info__details__role,children:c.bookteam}),t[17]=c.bookteam,t[18]=y):y=t[18],t[19]!==y||t[20]!==v?(k=r.jsxs("div",{className:Wt.member__info__details,children:[v,y]}),t[19]=y,t[20]=v,t[21]=k):k=t[21],t[22]!==c.bio?(w=r.jsx("p",{className:Wt.member__info__bio,children:c.bio}),t[22]=c.bio,t[23]=w):w=t[23],t[24]!==k||t[25]!==w?(j=r.jsxs("div",{className:Wt.member__info,children:[k,w]}),t[24]=k,t[25]=w,t[26]=j):j=t[26],t[27]!==m||t[28]!==j||t[29]!==b||t[30]!==x?(N=r.jsxs("div",{className:b,id:m,children:[x,j]}),t[27]=m,t[28]=j,t[29]=b,t[30]=x,t[31]=N):N=t[31],N}));Yt.displayName="BookMember";const Jt="_button_n0lbf_1",Xt="_icon_n0lbf_21",Zt=()=>{const e=a.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=r.jsxs("a",{href:"https://t.me/+yFsUa_nD88piNjg6",target:"_blank",rel:"noopener noreferrer",className:Jt,children:[r.jsx("div",{className:Xt,children:r.jsx("svg",{width:16,height:16,className:"bi bi-telegram",viewBox:"0 0 16 16",fill:"currentColor",children:r.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.3 6A388.8 388.8 0 0 0 3 8.3c0 .2.3.3.7.4H4l1.2.4.9-.3a82.9 82.9 0 0 1 3.6-2.1l-2 1.9-.3.3a8.2 8.2 0 0 1-.2.2c-.4.4-.7.7 0 1.1A66.2 66.2 0 0 1 9 11.4l.3.2c.3.2.6.4 1 .4.2 0 .4-.2.5-.8l1-5.8a1.4 1.4 0 0 0-.1-.3.3.3 0 0 0-.1-.2.5.5 0 0 0-.3 0c-.3 0-.8 0-3 1z"})})}),"Telegram"]}),e[0]=t):t=e[0],t},Qt=s.memo((e=>{const t=a.c(27),{memberId:o,profileUrl:n}=e,{theme:s}=i.useContext(tt);let l;l=Vt[o];const c=l;if(!c){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:Wt.member__notfound,children:"Участник не найден."}),t[0]=e):e=t[0],e}let _;_=`member--${c.id.replace(/\s+/g,"-").toLowerCase()}`;const m=_;let p;t[1]!==n?(p=n?new URL(n).hash.replace("#",""):null,t[1]=n,t[2]=p):p=t[2];const u=p,b=`${Wt.member} ${Wt[`member--${c.id}`]}`,g=`${Wt.member__imageContainer} ${"dark"===s?Wt.darkTheme:""}`;let h,x,f,v,y,k,w;return t[3]!==c.name||t[4]!==c.src||t[5]!==u||t[6]!==n?(h=n?r.jsx(d,{to:u,children:r.jsx(Be,{path:c.src,alt:c.name,className:Wt.member__image,loading:"lazy"})}):r.jsx(Be,{path:c.src,alt:c.name,className:Wt.member__image,loading:"lazy"}),t[3]=c.name,t[4]=c.src,t[5]=u,t[6]=n,t[7]=h):h=t[7],t[8]!==g||t[9]!==h?(x=r.jsx("div",{className:Wt.member__imageWrapper,children:r.jsx("div",{className:g,children:h})}),t[8]=g,t[9]=h,t[10]=x):x=t[10],t[11]!==c.name||t[12]!==u||t[13]!==n?(f=n?r.jsx(d,{to:u,className:Wt.member__info__details__link,children:c.name}):c.name,t[11]=c.name,t[12]=u,t[13]=n,t[14]=f):f=t[14],t[15]!==f?(v=r.jsx("h3",{className:Wt.member__info__details__name,children:f}),t[15]=f,t[16]=v):v=t[16],t[17]!==c.developerteam?(y=r.jsx("p",{className:Wt.member__info__details__role,children:c.developerteam}),t[17]=c.developerteam,t[18]=y):y=t[18],t[19]!==y||t[20]!==v?(k=r.jsx("div",{className:Wt.member__info,children:r.jsxs("div",{className:Wt.member__info__details,children:[v,y]})}),t[19]=y,t[20]=v,t[21]=k):k=t[21],t[22]!==m||t[23]!==k||t[24]!==b||t[25]!==x?(w=r.jsxs("div",{className:b,id:m,children:[x,k]}),t[22]=m,t[23]=k,t[24]=b,t[25]=x,t[26]=w):w=t[26],w}));function Kt(){const e=a.c(19);let t,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:0,y:20},e[0]=t):t=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(n={hidden:t,visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},e[1]=n):n=e[1];const i=n;let s,l;e[2]===Symbol.for("react.memo_cache_sentinel")?(s={opacity:0},e[2]=s):s=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(l={hidden:s,visible:{opacity:1,transition:{staggerChildren:.2}}},e[3]=l):l=e[3];const d=l;let c,_,m,p,u,b,g,h,x,f,v,y,k,w,j;return e[4]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx(o.h2,{className:qt,variants:i,children:"О нашей книге"}),e[4]=c):c=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx("div",{className:Pt,children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.9 108.7",width:"50",height:"50",children:[r.jsx("path",{className:It,d:"M95.2 91.4h-.8a1.6 1.6 0 0 1-1.6-1.7 23 23 0 0 0-1.9-9 27 27 0 0 0-13.4-13.5 23 23 0 0 0-9.1-1.8a1.6 1.6 0 0 1-1.6-1.7V63a1.6 1.6 0 0 1 1.6-1.7 22.9 22.9 0 0 0 9.1-1.8 25.4 25.4 0 0 0 8-5.5 25.6 25.6 0 0 0 5.4-7.9 22.9 22.9 0 0 0 1.8-9.1 1.6 1.6 0 0 1 1.7-1.6h.8a1.6 1.6 0 0 1 1.7 1.6 22.9 22.9 0 0 0 1.8 9.1 25.2 25.2 0 0 0 5.5 8 25.2 25.2 0 0 0 8 5.4 22.9 22.9 0 0 0 9 1.8A1.6 1.6 0 0 1 123 63v.8a1.6 1.6 0 0 1-1.7 1.7 23 23 0 0 0-9 1.8 27 27 0 0 0-13.5 13.4 23 23 0 0 0-1.8 9.1 1.6 1.6 0 0 1-1.7 1.7Z"}),r.jsx("path",{className:At,d:"M65,55h-0.7a1,1,0,0,1-1-1,15,15,0,0,0-1.2-6,18,18,0,0,0-4.3-5.6,18,18,0,0,0-5.6-4.3,15,15,0,0,0-6-1.2,1,1,0,0,1-1-1V35a1,1,0,0,1,1-1,15,15,0,0,0,6-1.2,18,18,0,0,0,5.6-4.3,18,18,0,0,0,4.3-5.6,15,15,0,0,0,1.2-6,1,1,0,0,1,1-1H65a1,1,0,0,1,1,1,15,15,0,0,0,1.2,6,18,18,0,0,0,4.3,5.6,18,18,0,0,0,5.6,4.3,15,15,0,0,0,6,1.2,1,1,0,0,1,1,1v0.7a1,1,0,0,1-1,1,15,15,0,0,0-6,1.2,18,18,0,0,0-5.6,4.3,18,18,0,0,0-4.3,5.6,15,15,0,0,0-1.2,6,1,1,0,0,1-1,1Z",transform:"scale(0.5) translate(90,70)"})]})}),e[5]=_):_=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsxs(o.div,{className:Bt,variants:i,children:[_,r.jsx("div",{className:zt,children:r.jsx("p",{children:"Основной жанр нашей книги - фэнтэзи с элементами дарк фэнтэзи, романтики и приключений"})})]}),e[6]=m):m=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx("div",{className:Pt,children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.88 108.69",width:"50",height:"50",children:[r.jsx("path",{className:It,d:"M95.24,91.38H94.4a1.65,1.65,0,0,1-1.65-1.65,22.91,22.91,0,0,0-1.81-9.12A27.06,27.06,0,0,0,77.52,67.19a23.05,23.05,0,0,0-9.12-1.81,1.65,1.65,0,0,1-1.64-1.64v-.85a1.64,1.64,0,0,1,1.64-1.64,22.88,22.88,0,0,0,9.12-1.82,25.35,25.35,0,0,0,7.93-5.49A25.62,25.62,0,0,0,90.94,46a22.87,22.87,0,0,0,1.81-9.11,1.65,1.65,0,0,1,1.65-1.64h.84a1.65,1.65,0,0,1,1.65,1.64A22.88,22.88,0,0,0,98.7,46a25.24,25.24,0,0,0,5.49,7.93,25.19,25.19,0,0,0,7.93,5.49,22.88,22.88,0,0,0,9.12,1.82,1.64,1.64,0,0,1,1.64,1.64v.85a1.65,1.65,0,0,1-1.64,1.64,23.05,23.05,0,0,0-9.12,1.81A27.06,27.06,0,0,0,98.7,80.61a23,23,0,0,0-1.81,9.12,1.65,1.65,0,0,1-1.65,1.65Z"}),r.jsx("path",{className:At,d:"M65,55h-0.7a1,1,0,0,1-1-1,15,15,0,0,0-1.2-6,18,18,0,0,0-4.3-5.6,18,18,0,0,0-5.6-4.3,15,15,0,0,0-6-1.2,1,1,0,0,1-1-1V35a1,1,0,0,1,1-1,15,15,0,0,0,6-1.2,18,18,0,0,0,5.6-4.3,18,18,0,0,0,4.3-5.6,15,15,0,0,0,1.2-6,1,1,0,0,1,1-1H65a1,1,0,0,1,1,1,15,15,0,0,0,1.2,6,18,18,0,0,0,4.3,5.6,18,18,0,0,0,5.6,4.3,15,15,0,0,0,6,1.2,1,1,0,0,1,1,1v0.7a1,1,0,0,1-1,1,15,15,0,0,0-6,1.2,18,18,0,0,0-5.6,4.3,18,18,0,0,0-4.3,5.6,15,15,0,0,0-1.2,6,1,1,0,0,1-1,1Z",transform:"scale(0.5) translate(90,70)"})]})}),e[7]=p):p=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsxs(o.div,{className:Bt,variants:i,children:[p,r.jsx("div",{className:zt,children:r.jsxs("p",{children:["Книга была создана 27 июня 2024 года — совершенно спонтанно, без чётких целей. За её развитием вы можете следить ",r.jsx("a",{href:"https://t.me/+yFsUa_nD88piNjg6",className:Et,children:"здесь"})]})})]}),e[8]=u):u=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx("div",{className:Pt,children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.88 108.69",width:"50",height:"50",children:[r.jsx("path",{className:It,d:"M95.24,91.38H94.4a1.65,1.65,0,0,1-1.65-1.65,22.91,22.91,0,0,0-1.81-9.12A27.06,27.06,0,0,0,77.52,67.19a23.05,23.05,0,0,0-9.12-1.81,1.65,1.65,0,0,1-1.64-1.64v-.85a1.64,1.64,0,0,1,1.64-1.64,22.88,22.88,0,0,0,9.12-1.82,25.35,25.35,0,0,0,7.93-5.49A25.62,25.62,0,0,0,90.94,46a22.87,22.87,0,0,0,1.81-9.11,1.65,1.65,0,0,1,1.65-1.64h.84a1.65,1.65,0,0,1,1.65,1.64A22.88,22.88,0,0,0,98.7,46a25.24,25.24,0,0,0,5.49,7.93,25.19,25.19,0,0,0,7.93,5.49,22.88,22.88,0,0,0,9.12,1.82,1.64,1.64,0,0,1,1.64,1.64v.85a1.65,1.65,0,0,1-1.64,1.64,23.05,23.05,0,0,0-9.12,1.81A27.06,27.06,0,0,0,98.7,80.61a23,23,0,0,0-1.81,9.12,1.65,1.65,0,0,1-1.65,1.65Z"}),r.jsx("path",{className:At,d:"M65,55h-0.7a1,1,0,0,1-1-1,15,15,0,0,0-1.2-6,18,18,0,0,0-4.3-5.6,18,18,0,0,0-5.6-4.3,15,15,0,0,0-6-1.2,1,1,0,0,1-1-1V35a1,1,0,0,1,1-1,15,15,0,0,0,6-1.2,18,18,0,0,0,5.6-4.3,18,18,0,0,0,4.3-5.6,15,15,0,0,0,1.2-6,1,1,0,0,1,1-1H65a1,1,0,0,1,1,1,15,15,0,0,0,1.2,6,18,18,0,0,0,4.3,5.6,18,18,0,0,0,5.6,4.3,15,15,0,0,0,6,1.2,1,1,0,0,1,1,1v0.7a1,1,0,0,1-1,1,15,15,0,0,0-6,1.2,18,18,0,0,0-5.6,4.3,18,18,0,0,0-4.3,5.6,15,15,0,0,0-1.2,6,1,1,0,0,1-1,1Z",transform:"scale(0.5) translate(90,70)"})]})}),e[9]=b):b=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsxs("header",{className:St,children:[c,r.jsxs(o.div,{className:Ct,variants:d,children:[m,u,r.jsxs(o.div,{className:Bt,variants:i,children:[b,r.jsx("div",{className:zt,children:r.jsx("p",{children:"Наша книга - это погружение в мир магии, загадочных созданий и невероятных приключений. Присоединяйтесь к нашему творческому путешествию!"})})]})]})]}),e[10]=g):g=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsxs("div",{className:Ot,children:[r.jsx("div",{className:Dt}),r.jsx("div",{className:$t,children:"✧"}),r.jsx("div",{className:Dt})]}),e[11]=h):h=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(o.h2,{className:Ut,variants:i,children:"Творческая команда"}),e[12]=x):x=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(o.div,{variants:i,children:r.jsx(Yt,{memberId:"igor",profileUrl:"http://localhost:5173/#/profile/ca7fe23e-f263-4372-8aac-a652791e724c"})}),e[13]=f):f=e[13],e[14]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsxs(o.div,{className:Mt,variants:d,children:[f,r.jsx(o.div,{variants:i,children:r.jsx(Yt,{memberId:"lesya",profileUrl:"http://localhost:5173/#/profile/f1ea0167-4743-4d9e-93fc-42e30a55f34f"})})]}),y=r.jsx(o.h2,{className:Ft,variants:i,children:"Команда разработки"}),e[14]=v,e[15]=y):(v=e[14],y=e[15]),e[16]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsxs(o.div,{className:Tt,variants:d,children:[x,v,y,r.jsx(o.div,{className:Lt,variants:d,children:r.jsx(o.div,{variants:i,children:r.jsx(Qt,{memberId:"igor",profileUrl:"http://localhost:5173/#/profile/ca7fe23e-f263-4372-8aac-a652791e724c"})})})]}),e[16]=k):k=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(w=r.jsx(o.h2,{className:Rt,variants:i,children:"Присоединяйтесь к нам"}),e[17]=w):w=e[17],e[18]===Symbol.for("react.memo_cache_sentinel")?(j=r.jsxs(o.div,{className:Nt,initial:"hidden",animate:"visible",variants:d,children:[g,h,k,r.jsxs(o.div,{className:Gt,variants:d,children:[w,r.jsx(o.div,{className:Ht,variants:i,children:r.jsx(Zt,{})})]})]}),e[18]=j):j=e[18],j}Qt.displayName="DeveloperMember";const ea="_main_1lmof_1",ta="_main__header_1lmof_35",aa="_main__header__pic_1lmof_41",ra="_darkTheme_1lmof_55",oa="_main__header__title_1lmof_58",na="_main__nav_1lmof_68",ia="_main__nav__perexod_1lmof_74",sa="_main__nav__perexod__link_1lmof_81",la="_main__nav__auth_1lmof_84",da="_main__nav__burger_1lmof_88",ca="_main__nav__burger__line_1lmof_101",_a="_open_1lmof_114",ma="_main__nav__mobile_1lmof_123",pa="_main__nav__mobile__list_1lmof_145",ua="_main__nav__mobile__list__item_1lmof_150",ba="_homepage_1lmof_189",ga=e=>{const t=a.c(38),{src:o,alt:n,folder:s,width:l,height:d}=e,{theme:c}=i.useContext(tt);if(o.startsWith("./")||o.startsWith("http")){let e,a;t[0]!==o?(e=o.split("/").pop(),a=e.replace("-black","").replace(/\.(avif|webp|png|jpg|jpeg)$/i,""),t[0]=o,t[1]=e,t[2]=a):(e=t[1],a=t[2]),e=a;const i="dark"===c?`${e}-black`:e;let s;t[3]!==o||t[4]!==i?(s=e=>`${o.substring(0,o.lastIndexOf("/")+1)}${i}.${e}`,t[3]=o,t[4]=i,t[5]=s):s=t[5];const _=s,m=`${aa} ${"dark"===c?ra:""}`,p=_("avif");let u;t[6]!==p?(u=r.jsx("source",{srcSet:p,type:"image/avif"}),t[6]=p,t[7]=u):u=t[7];const b=_("webp");let g;t[8]!==b?(g=r.jsx("source",{srcSet:b,type:"image/webp"}),t[8]=b,t[9]=g):g=t[9];const h=_("png");let x,f;return t[10]!==n||t[11]!==d||t[12]!==h||t[13]!==l?(x=r.jsx("img",{src:h,alt:n,loading:"lazy",width:l,height:d,onError:ha}),t[10]=n,t[11]=d,t[12]=h,t[13]=l,t[14]=x):x=t[14],t[15]!==x||t[16]!==m||t[17]!==u||t[18]!==g?(f=r.jsxs("picture",{className:m,children:[u,g,x]}),t[15]=x,t[16]=m,t[17]=u,t[18]=g,t[19]=f):f=t[19],f}let _,m,p,u;if(t[20]!==d||t[21]!==o||t[22]!==c||t[23]!==l){const e=o.replace(/\.(avif|webp|png|jpg|jpeg)$/i,""),a={quality:90,width:l||("sclogo"===o?160:void 0),height:d};m=`${aa} ${"dark"===c?ra:""}`,p=r.jsx("source",{srcSet:qe(e,{...a,format:"avif"}),type:"image/avif"}),u=r.jsx("source",{srcSet:qe(e,{...a,format:"webp"}),type:"image/webp"}),_=qe(e,{...a,format:"png"}),t[20]=d,t[21]=o,t[22]=c,t[23]=l,t[24]=_,t[25]=m,t[26]=p,t[27]=u}else _=t[24],m=t[25],p=t[26],u=t[27];const b=l||("sclogo"===o?160:void 0);let g,h;return t[28]!==n||t[29]!==d||t[30]!==_||t[31]!==b?(g=r.jsx("img",{src:_,alt:n,loading:"lazy",width:b,height:d,onError:xa}),t[28]=n,t[29]=d,t[30]=_,t[31]=b,t[32]=g):g=t[32],t[33]!==m||t[34]!==p||t[35]!==u||t[36]!==g?(h=r.jsxs("picture",{className:m,children:[p,u,g]}),t[33]=m,t[34]=p,t[35]=u,t[36]=g,t[37]=h):h=t[37],h};function ha(e){}function xa(e){}const fa="_authContainer_1qxaq_51",va="_loginButton_1qxaq_56",ya="_userProfile_1qxaq_104",ka="_profileButton_1qxaq_110",wa="_avatar_1qxaq_146",ja="_username_1qxaq_159",Na="_userMenu_1qxaq_190",Sa="_menuItem_1qxaq_239",qa="_logoutButton_1qxaq_302",Ca="_adminButton_1qxaq_343",Ba="_profileMenuItem_1qxaq_413",Pa="_feedbackButton_1qxaq_440",Ia="_backdrop_1kje4_1",Aa="_modal_1kje4_20",za="_modalContent_1kje4_39",Ea="_closeButton_1kje4_47",Oa="_formWrapper_1kje4_71",Da="_patternOverlay_1kje4_170",$a={BASE_URL:"/soulcycle/",DEV:!1,LEGACY:!0,MODE:"production",PROD:!0,SSR:!1},Ta=(e,t="")=>{const a=`VITE_${e}`;return"undefined"!=typeof window&&window.env&&window.env[a]&&""!==window.env[a]?window.env[a]:$a[a]||t},Ua=Ta("SUPABASE_URL","https://euafjzczdtitceulztfw.supabase.co"),Fa=Ta("SUPABASE_ANON_KEY","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV1YWZqemN6ZHRpdGNldWx6dGZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYyMDY0MTcsImV4cCI6MjA2MTc4MjQxN30.i5duBK9a2QKWbc2Y_v723APJeg0vsNNwNkgXZLyIMfM");Ta("APP_NAME","SoulCycle");const Ma=c(Ua,Fa,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1},global:{headers:{"Content-Type":"application/json",Accept:"application/json"}}}),La=new Map,Ga=3e5,Ra={profileUpdated:[]},Ha=(e,t)=>(Ra[e]||(Ra[e]=[]),Ra[e].push(t),()=>{Ra[e]=Ra[e].filter((e=>e!==t))}),Wa=(e,t)=>{Ra[e]&&Ra[e].forEach((e=>e(t)))},Va={async getUserProfile(e){try{if("ca7fe23e-f263-4372-8aac-a652791e724c"===e)La.delete(e);else if(La.has(e))return La.get(e);try{const{data:t,error:a}=await Ma.from("profiles").select("*").eq("id",e).single();if(!a&&t){const a={id:t.id,displayName:t.display_name||"Пользователь",email:t.email,avatar:t.avatar||null,role:t.role||"user",createdAt:t.created_at,perks:t.perks||["user"],activePerk:t.active_perk||t.perks?.[0]||"user"};return La.set(e,a),setTimeout((()=>La.delete(e)),Ga),a}}catch(t){}try{const{data:t,error:a}=await Ma.from("public_profiles").select("*").eq("id",e).single();if(!a&&t){const a={id:t.id,displayName:t.display_name||t.email?.split("@")[0]||"Пользователь",email:t.email,avatar:t.avatar||null,role:t.role||"user",createdAt:t.created_at,perks:t.perks||["user"],activePerk:t.active_perk||"user"};return La.set(e,a),setTimeout((()=>La.delete(e)),Ga),a}}catch(a){}try{const{data:t,error:a}=await Ma.auth.getSession();if(!a&&t?.session?.user&&t.session.user.id===e){const a=t.session.user,o=a.user_metadata||{};let n=["user"],i="user";try{const{data:t}=await Ma.from("profiles").select("perks, active_perk").eq("id",e).single();t&&(n=t.perks||["user"],i=t.active_perk||n[0]||"user")}catch(r){}const s={id:e,displayName:o.display_name||a.email?.split("@")[0]||"Пользователь",email:a.email,avatar:o.avatar||null,role:o.role||"user",createdAt:a.created_at,perks:n,activePerk:i};return La.set(e,s),setTimeout((()=>La.delete(e)),Ga),s}}catch(o){}return{id:e,displayName:"Пользователь",email:null,avatar:null,role:"user",createdAt:(new Date).toISOString(),perks:["user"],activePerk:"user"}}catch(n){return{id:e,displayName:"Пользователь",email:null,avatar:null,role:"user",createdAt:(new Date).toISOString(),perks:["user"],activePerk:"user"}}},updateProfileCache(e,t){if(La.has(e)){const a={...La.get(e),...t};La.set(e,a),setTimeout((()=>La.delete(e)),Ga),Wa("profileUpdated",{userId:e,profileData:a})}},async updateUserProfile(e,t){try{const{data:a,error:r}=await Ma.from("profiles").update(t).eq("id",e);if(r)throw r;return this.updateProfileCache(e,t),this.clearCache(),a}catch(a){throw a}},clearCache(){La.clear()},getCurrentUserFromStorage(){try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return null}},clearProfileCache(e){e&&La.delete(e)},getCachedProfile:e=>e&&La.has(e)?La.get(e):null},Ya=e=>{if(!e||"string"!=typeof e)return"Произошла ошибка при авторизации";const t={"Invalid login credentials":"Неверный email или пароль","Email not confirmed":"Email не подтвержден","User already registered":"Пользователь с таким email уже зарегистрирован","Invalid email":"Неверный формат email","Password should be at least 6 characters":"Пароль должен содержать не менее 6 символов","Email already in use":"Email уже используется другим пользователем","Email already confirmed":"Email уже подтвержден","Invalid email or password":"Неверный email или пароль","Email is required":"Email обязателен","Password is required":"Пароль обязателен","Server error":"Ошибка сервера","The new password should be different from the previous password":"Новый пароль должен отличаться от текущего","Invalid refresh token":"Сессия истекла. Пожалуйста, войдите снова","Database error detecting account":"Ошибка базы данных при поиске аккаунта","Failed to establish connection":"Не удалось установить соединение с сервером","Password recovery invalid":"Неверная ссылка для восстановления пароля","Confirmation token expired or invalid":"Ссылка для подтверждения истекла или недействительна","Unable to validate email address":"Невозможно проверить email адрес","Access token is missing":"Отсутствует токен доступа","Access token has expired":"Срок действия токена доступа истек","Invalid or expired access token":"Недействительный или просроченный токен доступа","Signup is disabled":"Регистрация временно отключена","Signup email invalid":"Указан некорректный email адрес","duplicate key value violates unique constraint":"Этот адрес email уже зарегистрирован","You must log in to perform this action":"Необходимо войти для выполнения этого действия","Password must be at least 6 characters":"Пароль должен содержать не менее 6 символов","Пользователь с таким именем уже существует":"Пользователь с таким именем уже существует","Your chosen username is already taken by another user":"Выбранное вами имя пользователя уже занято","Duplicate key value":"Указанный email или имя пользователя уже используется"};if(t[e])return t[e];for(const[a,r]of Object.entries(t))if(e.includes(a))return r;return"Ошибка авторизации: "+e},Ja="site_events_cache";let Xa=null;(()=>{try{const e=localStorage.getItem(Ja);e&&(Xa=JSON.parse(e)),window.addEventListener("siteEventsChanged",(e=>{e.detail&&e.detail.siteEvents&&(Xa=e.detail.siteEvents)})),window.addEventListener("storage",(e=>{if(e.key===Ja&&e.newValue)try{Xa=JSON.parse(e.newValue)}catch(t){}}))}catch(e){}})();const Za=async e=>{try{if(Xa&&void 0!==Xa[e])return Xa[e];try{const t=localStorage.getItem(Ja);if(t){const a=JSON.parse(t);if(a&&void 0!==a[e])return Xa=a,a[e]}}catch(t){}const r="earlyUserPromotion"===e?"early_user_promotion":e.replace(/([A-Z])/g,"_$1").toLowerCase(),{data:o,error:n}=await Ma.from("site_settings").select(r).single();if(n)return!1;const i=!!o&&Boolean(o[r]);Xa={...Xa,[e]:i};try{const t=localStorage.getItem(Ja),a=t?JSON.parse(t):{};a[e]=i,localStorage.setItem(Ja,JSON.stringify(a))}catch(a){}return i}catch(r){return!1}},Qa=async e=>{try{const t=[];if(await Za("earlyUserPromotion")){const{data:a,error:r}=await Ma.from("profiles").select("perks").eq("id",e).single();if(r)return t;const o=a?.perks||["user"];if(!o.includes("early_user")){const a=[...o,"early_user"],{error:r}=await Ma.from("profiles").update({perks:a}).eq("id",e);r||t.push("early_user")}}return t}catch(t){return[]}},Ka="igoraor79@gmail.com",er=async(e,t=null)=>{try{let a=Ma.from("profiles").select("id").ilike("display_name",e);t&&(a=a.neq("id",t));const{data:r,error:o}=await a;return!o&&0===r.length}catch(a){return!1}},tr=async e=>{if(!e)return{is_banned:!1};try{try{const{data:t,error:a}=await Ma.from("profiles").select("id").eq("id",e).single();if(a)return{is_banned:!1}}catch(t){return{is_banned:!1}}try{const{data:r,error:o}=await Ma.from("profiles").select("is_banned, ban_reason, ban_end_at, ban_admin_name").eq("id",e).single();if(o)return o.message&&o.message.includes("does not exist"),{is_banned:!1};if(!r.is_banned)return{is_banned:!1};if(r.ban_end_at){const a=new Date(r.ban_end_at);if(a<new Date){await Ma.from("profiles").update({is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_id:null,ban_admin_name:null}).eq("id",e);try{await Ma.from("user_bans").update({is_active:!1}).eq("user_id",e).eq("is_active",!0)}catch(t){}return{is_banned:!1}}}try{const{data:t,error:a}=await Ma.from("user_bans").select("*").eq("user_id",e).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1);return a?{is_banned:!0,reason:r.ban_reason,end_at:r.ban_end_at,admin_name:r.ban_admin_name}:t&&0!==t.length?{is_banned:!0,reason:t[0].reason,end_at:t[0].end_at,admin_name:t[0].admin_name,created_at:t[0].created_at,ban_type:t[0].ban_type}:{is_banned:!0,reason:r.ban_reason,end_at:r.ban_end_at,admin_name:r.ban_admin_name}}catch(a){return{is_banned:!0,reason:r.ban_reason,end_at:r.ban_end_at,admin_name:r.ban_admin_name}}}catch(r){return{is_banned:!1}}}catch(t){return{is_banned:!1}}},ar={async register(e){try{const{email:r,password:o,displayName:n}=e;if(!(await er(n)))throw new Error("Пользователь с таким именем уже существует");const{data:i,error:s}=await Ma.auth.signUp({email:r,password:o,options:{data:{display_name:n}}});if(s)throw new Error(Ya(s.message)||"Ошибка при регистрации");try{const{data:e,error:t}=await Ma.from("profiles").select("id").eq("id",i.user.id).single();if(t&&t.code,!e){const{error:e}=await Ma.from("profiles").insert({id:i.user.id,display_name:n,avatar:null,created_at:(new Date).toISOString(),perks:["user"],active_perk:"user"})}}catch(t){}const l=(await Qa(i.user.id)).includes("early_user")?["user","early_user"]:["user"],d={id:i.user.id,email:i.user.email,displayName:n,role:"user",perks:l,activePerk:l.includes("early_user")?"early_user":"user",createdAt:i.user.created_at};Va.updateProfileCache(d.id,{id:d.id,email:d.email,displayName:d.displayName,avatar:null,perks:l,activePerk:d.activePerk});try{const{error:e}=await Ma.from("profiles").update({perks:l,active_perk:d.activePerk}).eq("id",d.id)}catch(a){}return await this.autoLogin(i.user),{user:d}}catch(r){throw r.message&&(r.message=Ya(r.message)),r}},async autoLogin(e){try{const a=await tr(e.id);if(a.is_banned)throw new Error(`Ваш аккаунт заблокирован: ${a.reason}. Окончание блокировки: ${a.end_at?new Date(a.end_at).toLocaleString():"Бессрочно"}`);const r="igoraor79@gmail.com"===e.email,{data:o,error:n}=await Ma.from("profiles").select("*").eq("id",e.id).single();if(n&&n.code,!o?.perks||Array.isArray(o?.perks)&&0===o.perks.length){const{error:t}=await Ma.from("profiles").update({perks:["user"],active_perk:"user"}).eq("id",e.id)}let i=["user"];if(o?.perks)if("string"==typeof o.perks)try{i=JSON.parse(o.perks)}catch(t){}else Array.isArray(o.perks)&&(i=o.perks);r&&!i.includes("admin")&&i.push("admin");const s={id:e.id,email:e.email,displayName:o?.display_name||e.user_metadata.display_name||"Пользователь",role:r?"admin":o?.role||e.user_metadata.role||"user",createdAt:e.created_at,avatar:o?.avatar||e.user_metadata.avatar||null,perks:i,activePerk:o?.active_perk||i[0]||"user"};return localStorage.setItem("user",JSON.stringify(s)),Va.updateProfileCache(s.id,{id:s.id,email:s.email,displayName:s.displayName,avatar:s.avatar,perks:s.perks,activePerk:s.activePerk}),dr(s),s}catch(a){throw a}},async login(e){try{const{email:a,password:r}=e,{data:o,error:n}=await Ma.auth.signInWithPassword({email:a,password:r});if(n)throw new Error(Ya(n.message)||"Ошибка при входе");const i=await tr(o.user.id);if(i.is_banned)throw new Error(`Ваш аккаунт заблокирован: ${i.reason}. Окончание блокировки: ${i.end_at?new Date(i.end_at).toLocaleString():"Бессрочно"}`);const s="igoraor79@gmail.com"===a,{data:l,error:d}=await Ma.from("profiles").select("*").eq("id",o.user.id).single();if(d&&d.code,!l?.perks||Array.isArray(l?.perks)&&0===l.perks.length){const{error:e}=await Ma.from("profiles").update({perks:["user"],active_perk:"user"}).eq("id",o.user.id)}let c=["user"];if(l?.perks)if("string"==typeof l.perks)try{c=JSON.parse(l.perks)}catch(t){}else Array.isArray(l.perks)&&(c=l.perks);s&&!c.includes("admin")&&c.push("admin");const _={id:o.user.id,email:o.user.email,displayName:l?.display_name||o.user.user_metadata.display_name||"Пользователь",role:s?"admin":l?.role||o.user.user_metadata.role||"user",createdAt:o.user.created_at,avatar:l?.avatar||o.user.user_metadata.avatar||null,perks:c,activePerk:l?.active_perk||c[0]||"user"};return localStorage.setItem("user",JSON.stringify(_)),Va.updateProfileCache(_.id,{id:_.id,email:_.email,displayName:_.displayName,avatar:_.avatar,perks:_.perks,activePerk:_.activePerk}),{user:_,token:o.session.access_token}}catch(a){throw a.message&&(a.message=Ya(a.message)),a}},async logout(){try{const{error:e}=await Ma.auth.signOut();if(e)throw new Error(Ya(e.message)||"Ошибка при выходе");localStorage.removeItem("user"),Va.clearCache()}catch(e){throw e.message&&(e.message=Ya(e.message)),e}},isAuthenticated:()=>!!localStorage.getItem("user"),getToken(){const{data:e}=Ma.auth.getSession();return e?.session?.access_token||null},async resetPassword(e){try{const t=`${window.location.origin}/reset-password`,{error:a}=await Ma.auth.resetPasswordForEmail(e,{redirectTo:t});if(a)throw new Error(Ya(a.message)||"Ошибка при сбросе пароля");return!0}catch(t){throw t.message&&(t.message=Ya(t.message)),t}},async changePassword(e,t){try{const{data:a,error:r}=await Ma.auth.getSession();if(r||!a.session)throw new Error(Ya("You must log in to perform this action"));const o=a.session.user.email,{error:n}=await Ma.auth.signInWithPassword({email:o,password:e});if(n)throw new Error("Неверный текущий пароль");const{error:i}=await Ma.auth.updateUser({password:t});if(i)throw new Error(Ya(i.message)||"Ошибка при изменении пароля");return!0}catch(a){throw a.message&&(a.message=Ya(a.message)),a}},checkUserBan:tr},rr={async getCurrentUser(){try{const{data:a,error:r}=await Ma.auth.getSession();if(r)throw new Error("Ошибка при получении сессии");const o=a.session;if(!o)return null;const{data:n,error:i}=await Ma.from("profiles").select("*").eq("id",o.user.id).single();i&&i.code;const s="igoraor79@gmail.com"===o.user.email;let l=["user"];if(n?.perks)if("string"==typeof n.perks)try{l=JSON.parse(n.perks)}catch(e){}else Array.isArray(n.perks)&&(l=n.perks);s&&!l.includes("admin")&&l.push("admin");const d={id:o.user.id,email:o.user.email,displayName:n?.display_name||o.user.user_metadata.display_name||"Пользователь",role:s?"admin":n?.role||o.user.user_metadata.role||"user",avatar:n?.avatar||o.user.user_metadata.avatar,perks:l,activePerk:n?.active_perk||l[0]||"user",createdAt:o.user.created_at};if(n?.display_name&&o.user.user_metadata.display_name!==n.display_name)try{const{error:e}=await Ma.rpc("admin_update_user_metadata",{user_id:o.user.id,metadata_key:"display_name",metadata_value:n.display_name})}catch(t){}return Va.updateProfileCache(d.id,{id:d.id,email:d.email,displayName:d.displayName,avatar:d.avatar,perks:d.perks,activePerk:d.activePerk}),d}catch(a){return null}},async getUserById(e){try{const{data:a,error:r}=await Ma.from("profiles").select("*").eq("id",e).single();if(r)throw new Error("Не удалось получить профиль пользователя");const o="igoraor79@gmail.com"===a.email;let n=["user"];if(a?.perks)if("string"==typeof a.perks)try{n=JSON.parse(a.perks)}catch(t){}else Array.isArray(a.perks)&&(n=a.perks);return o&&!n.includes("admin")&&n.push("admin"),{id:a.id,displayName:a.display_name,email:a.email,role:o?"admin":a.role||"user",avatar:a.avatar,perks:n,activePerk:a.active_perk||n[0]||"user",createdAt:a.created_at,is_banned:a.is_banned||!1,ban_reason:a.ban_reason,ban_end_at:a.ban_end_at,ban_admin_name:a.ban_admin_name}}catch(a){throw a}},async updateAvatar(e,t=null){try{const{data:{user:a},error:r}=await Ma.auth.getUser();if(r)throw new Error(Ya(r.message)||"Ошибка при получении пользователя");if(!a)throw new Error("Пользователь не найден");const o=t||a.id;if(o!==a.id&&"igoraor79@gmail.com"!==a.email&&!a.user_metadata?.perks?.includes("admin")&&"admin"!==a.user_metadata?.active_perk)throw new Error("Недостаточно прав для изменения аватара другого пользователя");if(!t||t===a.id){const t=JSON.parse(localStorage.getItem("user"))||{};if(t.avatar=e,localStorage.setItem("user",JSON.stringify(t)),"undefined"!=typeof window){const a=new CustomEvent("app:user:updated",{detail:{...t,avatar:e}});window.dispatchEvent(a);const r=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(t),url:window.location.href});window.dispatchEvent(r),Wa("profileUpdated",{userId:o,profileData:{...t,avatar:e}})}}if(!t||t===a.id){const{data:t,error:a}=await Ma.auth.updateUser({data:{avatar:e}});if(a)throw new Error(Ya(a.message)||"Ошибка при обновлении аватара")}const{error:n}=await Ma.from("profiles").update({avatar:e}).eq("id",o);return Va.updateProfileCache(o,{avatar:e}),Wa("profile-updated",{userId:o,field:"avatar",value:e}),{success:!0,avatar:e}}catch(a){throw a.message&&(a.message=Ya(a.message)),a}},async updateActivePerk(e,t=null,a=null){try{const{data:{user:r}}=await Ma.auth.getUser(),o=a||t||r?.id;if(!o)throw new Error("ID пользователя не указан");const{error:n}=await Ma.from("profiles").update({active_perk:e}).eq("id",o);if(n)throw n;if(!a&&!t||r?.id===o){const t=JSON.parse(localStorage.getItem("user"))||{};t.activePerk=e,localStorage.setItem("user",JSON.stringify(t)),dr(t)}return Va.updateProfileCache(o,{activePerk:e}),{success:!0}}catch(r){throw r}},async updateDisplayName(e,t,a=null){try{const{data:r,error:o}=await Ma.auth.getSession();if(o||!r.session)throw new Error("Пользователь не авторизован");const n=r.session.user.id,i=r.session.user.email,{error:s}=await Ma.auth.signInWithPassword({email:i,password:t});if(s)throw new Error("Неверный пароль");if(!(await er(e,n)))throw new Error("Пользователь с таким именем уже существует");(e=>{try{document.querySelectorAll(".username, [data-user-displayname]").forEach((t=>{(t.classList.contains("username")||t.hasAttribute("data-user-displayname"))&&(t.textContent=e)}))}catch(t){}})(e);const{error:l}=await Ma.from("profiles").update({display_name:e}).eq("id",n);if(l)throw new Error(`Ошибка при обновлении имени пользователя: ${l.message}`);const{data:d,error:c}=await Ma.auth.updateUser({data:{display_name:e}});if(c)throw new Error(`Ошибка при обновлении имени: ${c.message}`);const{data:_,error:m}=await Ma.rpc("sync_user_display_name",{admin_id:n,target_user_id:n,new_display_name:e}),p=localStorage.getItem("user");if(p){const t=JSON.parse(p);t.displayName=e,localStorage.setItem("user",JSON.stringify(t)),Va.updateProfileCache(n,{displayName:e}),Wa("profileUpdated",{userId:n,profileData:{...t,displayName:e}});const r={...t,displayName:e};setTimeout((()=>{if(dr(r),"undefined"!=typeof window){const t=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(r),url:window.location.href});window.dispatchEvent(t);const a=new CustomEvent("userDisplayNameChanged",{detail:{newDisplayName:e,userId:n}});window.dispatchEvent(a)}a&&"function"==typeof a&&a()}),200)}else a&&"function"==typeof a&&a();return!0}catch(r){throw r}},async refreshCurrentUser(){try{const{data:t,error:a}=await Ma.auth.getSession();if(a||!t.session)return localStorage.removeItem("user"),null;const{data:r,error:o}=await Ma.from("profiles").select("*").eq("id",t.session.user.id).single();if(o)return null;const{data:n,error:i}=await Ma.auth.getUser();if(i)return null;const s="igoraor79@gmail.com"===t.session.user.email;if(r.display_name!==n.user.user_metadata.display_name)try{const{error:e}=await Ma.rpc("admin_update_user_metadata",{user_id:t.session.user.id,metadata_key:"display_name",metadata_value:r.display_name})}catch(e){}const l={id:t.session.user.id,email:t.session.user.email,displayName:r.display_name||"Пользователь",role:s?"admin":r.role||"user",createdAt:t.session.user.created_at,avatar:r.avatar||null,perks:r.perks||["user"],activePerk:r.active_perk||"user"};if(localStorage.setItem("user",JSON.stringify(l)),Va.updateProfileCache(l.id,{id:l.id,email:l.email,displayName:l.displayName,avatar:l.avatar,perks:l.perks,activePerk:l.activePerk}),"undefined"!=typeof window){const e=new CustomEvent("app:user:updated",{detail:l});window.dispatchEvent(e)}return l}catch(t){return null}}},or={async createSyncDisplayNameFunction(){try{const{error:e}=await Ma.rpc("create_sync_display_name_function",{sql_function:"\n          CREATE OR REPLACE FUNCTION sync_user_display_name(\n            admin_id UUID,            -- ID администратора, выполняющего операцию\n            target_user_id UUID,      -- ID целевого пользователя\n            new_display_name TEXT     -- Новое отображаемое имя\n          )\n          RETURNS JSONB\n          LANGUAGE plpgsql\n          SECURITY DEFINER\n          AS $$\n          DECLARE\n            admin_email TEXT;\n            admin_perks JSONB;\n            admin_active_perk TEXT;\n            is_admin BOOLEAN;\n            current_metadata JSONB;\n            updated_metadata JSONB;\n            old_display_name TEXT;\n          BEGIN\n            -- 1. Проверяем права администратора\n            SELECT email, perks, active_perk INTO admin_email, admin_perks, admin_active_perk\n            FROM profiles\n            WHERE id = admin_id;\n            \n            is_admin := (admin_email = 'igoraor79@gmail.com' OR \n                        admin_perks ? 'admin' OR \n                        admin_active_perk = 'admin');\n            \n            IF NOT is_admin THEN\n              RETURN jsonb_build_object(\n                'success', false,\n                'message', 'Недостаточно прав для изменения имени другого пользователя'\n              );\n            END IF;\n            \n            -- 2. Получаем текущее отображаемое имя\n            SELECT display_name INTO old_display_name \n            FROM profiles \n            WHERE id = target_user_id;\n            \n            -- 3. Обновляем имя в таблице profiles\n            UPDATE profiles \n            SET display_name = new_display_name,\n                updated_at = NOW()\n            WHERE id = target_user_id;\n            \n            -- 4. Получаем текущие метаданные из auth.users\n            SELECT raw_user_meta_data INTO current_metadata \n            FROM auth.users \n            WHERE id = target_user_id;\n            \n            -- 5. Обновляем метаданные пользователя в auth.users\n            updated_metadata := current_metadata || jsonb_build_object('display_name', new_display_name);\n            \n            UPDATE auth.users\n            SET raw_user_meta_data = updated_metadata\n            WHERE id = target_user_id;\n            \n            -- 6. Возвращаем результат операции\n            RETURN jsonb_build_object(\n              'success', true,\n              'message', 'Имя пользователя успешно обновлено в профиле и метаданных',\n              'old_display_name', old_display_name,\n              'new_display_name', new_display_name,\n              'updated_metadata', updated_metadata\n            );\n          EXCEPTION\n            WHEN OTHERS THEN\n              RETURN jsonb_build_object(\n                'success', false,\n                'message', 'Ошибка при обновлении имени: ' || SQLERRM\n              );\n          END;\n          $$ ;\n          \n          -- Предоставляем права на выполнение функции аутентифицированным пользователям\n          GRANT EXECUTE ON FUNCTION sync_user_display_name(UUID, UUID, TEXT) TO authenticated;\n        "});return!e}catch(e){return!1}},async adminUpdateDisplayName(e,t,a=null){try{const{data:i,error:s}=await Ma.auth.getSession();if(s||!i.session)throw new Error("Администратор не авторизован");const l=i.session.user.id,d=i.session.user.email;if("igoraor79@gmail.com"!==d&&!i.session.user.user_metadata?.perks?.includes("admin")&&"admin"!==i.session.user.user_metadata?.active_perk)throw new Error("Недостаточно прав для изменения имени другого пользователя");if(!(await er(t,e)))throw new Error("Пользователь с таким именем уже существует");const c=localStorage.getItem("user");if(c&&JSON.parse(c).id===e)try{document.querySelectorAll(".username, [data-user-displayname]").forEach((e=>{(e.classList.contains("username")||e.hasAttribute("data-user-displayname"))&&(e.textContent=t)}))}catch(r){}const{error:_}=await Ma.from("profiles").update({display_name:t,updated_at:(new Date).toISOString()}).eq("id",e);if(_)throw new Error(`Ошибка при обновлении имени пользователя: ${_.message}`);try{const{data:a,error:r}=await Ma.from("profiles").select("email").eq("id",e).single();if(r)throw new Error("Не удалось получить данные пользователя");if(!a||!a.email)throw new Error("Email пользователя не найден");const{data:o,error:n}=await Ma.auth.admin.updateUserById(e,{user_metadata:{display_name:t}});if(n){const{error:e}=await Ma.auth.updateUser({data:{display_name:t}})}}catch(o){}const{data:m,error:p}=await Ma.rpc("sync_user_display_name",{admin_id:l,target_user_id:e,new_display_name:t});if("igoraor79@gmail.com"===d)try{const{error:a}=await Ma.rpc("direct_update_user_metadata",{target_id:e,display_name_value:t})}catch(n){}Va.updateProfileCache(e,{displayName:t}),Wa("profileUpdated",{userId:e,profileData:{displayName:t}});let u={id:e,displayName:t};try{const a=localStorage.getItem("user");if(a){const r=JSON.parse(a);if(r.id===e&&(r.displayName=t,localStorage.setItem("user",JSON.stringify(r)),u=r,"undefined"!=typeof window)){const a=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(r),url:window.location.href});window.dispatchEvent(a);const o=new CustomEvent("userDisplayNameChanged",{detail:{newDisplayName:t,userId:e}});window.dispatchEvent(o)}}}catch(r){}return dr(u),a&&"function"==typeof a&&await a(),!0}catch(r){throw r}},async fixProfileIssues(){try{const{data:e}=await Ma.auth.getSession();if(!e||!e.session||"igoraor79@gmail.com"!==e.session.user.email)throw new Error("Только администратор может выполнять эту операцию");const t=await fetch("/src/sql/profile_navigation_fix.sql");if(!t.ok)throw new Error("Не удалось загрузить скрипт для исправления профилей");const a=await t.text(),{data:r,error:o}=await Ma.rpc("execute_sql_admin",{sql_query:a});if(o)throw new Error(`Ошибка при исправлении профилей: ${o.message}`);return{success:!0,message:"Проблемы с профилями успешно исправлены",details:r}}catch(e){throw e}},async addUserPerk(e,t){try{const{data:a,error:r}=await Ma.auth.getSession();if(r||!a.session)throw new Error("Пользователь не авторизован");const o=a.session.user.id;if("igoraor79@gmail.com"!==a.session.user.email&&!a.session.user.user_metadata?.perks?.includes("admin")&&"admin"!==a.session.user.user_metadata?.active_perk)throw new Error("Недостаточно прав для изменения привилегий пользователей");const{data:n,error:i}=await Ma.from("profiles").select("perks").eq("id",e).single();if(i)throw new Error(`Не удалось получить информацию о пользователе: ${i.message}`);const s=Array.isArray(n.perks)?n.perks:[];if(s.includes(t))return{success:!0,message:"Пользователь уже имеет данную привилегию"};const l=[...s,t],{error:d}=await Ma.from("profiles").update({perks:l}).eq("id",e);if(d)throw new Error(d.message||"Ошибка при добавлении привилегии");const{error:c}=await Ma.from("user_perks").insert({user_id:e,perk_name:t,granted_at:(new Date).toISOString(),granted_by:o,is_active:!0,metadata:{action:"add_perk",previous_perks:s}});return{success:!0,perks:l}}catch(a){throw a}},async getUserPerksHistory(e){try{const{data:t,error:a}=await Ma.auth.getSession();if(a||!t.session)throw new Error("Пользователь не авторизован");const r=t.session.user.id,o="igoraor79@gmail.com"===t.session.user.email||t.session.user.user_metadata?.perks?.includes("admin")||"admin"===t.session.user.user_metadata?.active_perk;if(r!==e&&!o)throw new Error("Недостаточно прав для просмотра истории привилегий");const{data:n,error:i}=await Ma.from("user_perks").select("*").eq("user_id",e).order("granted_at",{ascending:!1});if(i)throw new Error(`Не удалось получить историю привилегий: ${i.message}`);return n||[]}catch(t){throw t}}},nr={...ar,...rr,...or,checkUserBan:tr,checkDisplayNameUnique:er},ir=e=>{const t=a.c(38),{banInfo:n,onClose:i}=e;if(!n)return null;const s=sr;let l,d,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={opacity:0,y:20,scale:.95},t[0]=l):l=t[0],t[1]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:1,y:0,scale:1,transition:{duration:.3}},t[1]=d):d=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(c={hidden:l,visible:d,exit:{opacity:0,y:20,scale:.95,transition:{duration:.2}}},t[2]=c):c=t[2];const g=c;let h,x;t[3]===Symbol.for("react.memo_cache_sentinel")?(h={scale:0,rotate:-180},t[3]=h):h=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(x={hidden:h,visible:{scale:1,rotate:0,transition:{type:"spring",damping:10,stiffness:100,delay:.2}}},t[4]=x):x=t[4];const f=x;let v;t[5]!==n.end_at?(v=()=>{if(!n.end_at)return"ban-permanent";const e=(new Date(n.end_at)-new Date)/36e5;return e<=2?"ban-short":e<=24?"ban-medium":"ban-long"},t[5]=n.end_at,t[6]=v):v=t[6];const y=v;let k,w,j,N,S,q,C,B,P,I,A,z;t[7]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx(o.div,{className:"ban-icon-wrapper",initial:"hidden",animate:"visible",variants:f,children:r.jsx(_,{className:"ban-icon"})}),w=r.jsx("h2",{children:"Ваш аккаунт заблокирован"}),t[7]=k,t[8]=w):(k=t[7],w=t[8]),t[9]===Symbol.for("react.memo_cache_sentinel")?(j=r.jsx(m,{}),t[9]=j):j=t[9],t[10]!==i?(N=r.jsxs("div",{className:"ban-modal-header",children:[k,w,r.jsx("button",{className:"ban-close-button",onClick:i,children:j})]}),t[10]=i,t[11]=N):N=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx(p,{className:"ban-detail-icon"}),q=r.jsx("h3",{children:"Причина блокировки:"}),t[12]=S,t[13]=q):(S=t[12],q=t[13]),t[14]!==n.reason?(C=r.jsxs("div",{className:"ban-reason",children:[S,r.jsxs("div",{children:[q,r.jsx("p",{children:n.reason})]})]}),t[14]=n.reason,t[15]=C):C=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(B=r.jsx(u,{className:"ban-detail-icon"}),P=r.jsx("h3",{children:"Заблокировал:"}),t[16]=B,t[17]=P):(B=t[16],P=t[17]),t[18]!==n.admin_name?(I=r.jsxs("div",{className:"ban-admin",children:[B,r.jsxs("div",{children:[P,r.jsx("p",{children:n.admin_name})]})]}),t[18]=n.admin_name,t[19]=I):I=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx(b,{className:"ban-detail-icon"}),z=r.jsx("h3",{children:"Срок блокировки:"}),t[20]=A,t[21]=z):(A=t[20],z=t[21]);const E=y(),O=s(n.end_at);let D,$,T,U,F,M;return t[22]!==E||t[23]!==O?(D=r.jsxs("div",{className:"ban-time",children:[A,r.jsxs("div",{children:[z,r.jsx("p",{className:E,children:O})]})]}),t[22]=E,t[23]=O,t[24]=D):D=t[24],t[25]!==C||t[26]!==I||t[27]!==D?($=r.jsxs("div",{className:"ban-details",children:[C,I,D]}),t[25]=C,t[26]=I,t[27]=D,t[28]=$):$=t[28],t[29]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx("div",{className:"ban-message",children:r.jsx("p",{children:"Если вы считаете, что блокировка была наложена по ошибке, пожалуйста, свяжитесь с администрацией сайта для разрешения этой ситуации."})}),t[29]=T):T=t[29],t[30]!==i?(U=r.jsx("button",{className:"ban-ok-button",onClick:i,children:"Понятно"}),t[30]=i,t[31]=U):U=t[31],t[32]!==$||t[33]!==U?(F=r.jsxs("div",{className:"ban-modal-content",children:[$,T,U]}),t[32]=$,t[33]=U,t[34]=F):F=t[34],t[35]!==N||t[36]!==F?(M=r.jsx("div",{className:"ban-modal-overlay",children:r.jsxs(o.div,{className:"ban-modal",initial:"hidden",animate:"visible",exit:"exit",variants:g,children:[N,F]})}),t[35]=N,t[36]=F,t[37]=M):M=t[37],M};function sr(e){if(!e)return"Бессрочно";const t=new Date(e),a=new Date;if(t<a)return"Истекло";const r=t-a,o=Math.floor(r/1e3),n=Math.floor(o/60),i=Math.floor(n/60),s=Math.floor(i/24);return s>0?`${s} ${1===s?"день":s<5?"дня":"дней"}`:i>0?`${i} ${1===i?"час":i<5?"часа":"часов"}`:n>0?`${n} ${1===n?"минута":n<5?"минуты":"минут"}`:"менее минуты"}const lr="app:user:updated",dr=e=>{let t=e;try{const a=localStorage.getItem("user");a&&(t={...JSON.parse(a),...e})}catch(r){}const a=new CustomEvent(lr,{detail:t});window.dispatchEvent(a)},cr=i.createContext(null),_r=i.createContext({displayName:"",setDisplayName:()=>{}});let mr=0,pr=null;const ur=({children:e})=>{const[t,a]=i.useState(null),[o,n]=i.useState(!0),[s,l]=i.useState(null),[d,c]=i.useState(!1),[_,m]=i.useState(""),p=i.useRef("");i.useEffect((()=>{(async()=>{try{n(!0);const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);a(t),c(!0),t.displayName&&(m(t.displayName),p.current=t.displayName);const r=await nr.refreshCurrentUser();r&&(a(r),r.displayName!==p.current&&(m(r.displayName),p.current=r.displayName))}const t=await nr.getCurrentUser();t?(a(t),c(!0),t.displayName!==p.current&&(m(t.displayName),p.current=t.displayName)):(a(null),c(!1),localStorage.removeItem("user"),m(""),p.current="")}catch(e){a(null),c(!1)}finally{n(!1)}})()}),[]),i.useEffect((()=>{t&&t.displayName&&t.displayName!==p.current&&(m(t.displayName),p.current=t.displayName)}),[t]);const u=async()=>{if(t)try{n(!0),pr||t.displayName;const e=Date.now(),r=await nr.checkUserBan(t.id);if(r.is_banned)return l(r),await nr.logout(),a(null),n(!1),m(""),p.current="",void(pr=null);const{data:o,error:i}=await Ma.from("profiles").select("*").eq("id",t.id).single();if(i)return;let s;o.perks&&0!==o.perks.length||(o.perks=["user"],o.active_perk="user"),o.perks.includes(o.active_perk)||(o.active_perk=o.perks[0]||"user");const d=o.display_name;pr&&e-mr<1e4?s=pr:(s=d,pr=null),s!==p.current&&(m(s),p.current=s);const c={...t,displayName:s,avatar:o.avatar||t.avatar,perks:o.perks,activePerk:o.active_perk};if(localStorage.setItem("user",JSON.stringify(c)),dr(c),a(c),"undefined"!=typeof window){const e=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(c),url:window.location.href});window.dispatchEvent(e)}}catch(e){}finally{n(!1)}};i.useEffect((()=>{if(!t)return;const e=Ma.channel(`profile-changes-${t.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${t.id}`},(e=>{u()})).subscribe();return()=>{e.unsubscribe()}}),[t]),i.useEffect((()=>{if(!t)return;const e=Ha("profileUpdated",(({userId:e,profileData:r})=>{if(t&&e===t.id){const e={...t,displayName:r.displayName||t.displayName,avatar:r.avatar||t.avatar,perks:r.perks||t.perks,activePerk:r.activePerk||t.activePerk};localStorage.setItem("user",JSON.stringify(e)),dr(e),a(e);const o=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(e),url:window.location.href});window.dispatchEvent(o)}}));return()=>e()}),[t]);const b=()=>{l(null)};return r.jsx(cr.Provider,{value:{user:t,login:async e=>{try{n(!0);const{data:t,error:r}=await Ma.auth.signInWithPassword({email:e.email,password:e.password});if(r)throw new Error(Ya(r.message));const o=await nr.checkUserBan(t.user.id);if(o.is_banned)return await nr.logout(),l(o),n(!1),null;const i=await nr.login(e);return a(i.user),c(!0),i}catch(t){throw t.message&&(t.message=Ya(t.message)),t}finally{n(!1)}},register:async e=>{try{n(!0);const t=await nr.register(e),{data:r}=await Ma.auth.getSession();if(t&&t.user){a(t.user),c(!0),localStorage.setItem("user",JSON.stringify(t.user)),dr(t.user),await u();const{data:e}=await Ma.auth.getSession(),{data:r,error:o}=await Ma.from("profiles").select("id, display_name, perks").eq("id",t.user.id).single()}return t}catch(t){throw t.message&&(t.message=Ya(t.message)),t}finally{n(!1)}},logout:async()=>{try{n(!0),await nr.logout(),a(null),c(!1),window.location.href="/"}catch(e){}finally{n(!1)}},loginWithProvider:async e=>{try{n(!0);const{data:t,error:a}=await Ma.auth.signInWithOAuth({provider:e,options:{redirectTo:window.location.origin,queryParams:{access_type:"offline",prompt:"consent",hd:"domain.com"}}});if(a)throw a;return t}catch(t){throw t}finally{n(!1)}},loading:o,refreshUser:u,isAuthenticated:d,checkUserBan:nr.checkUserBan,banInfo:s,closeBanModal:b,updateUserAvatar:async e=>{if(t)try{const r={...t,avatar:e};localStorage.setItem("user",JSON.stringify(r)),a(r);const o=new CustomEvent(lr,{detail:r});window.dispatchEvent(o);const n=new StorageEvent("storage",{key:"user",newValue:JSON.stringify(r),url:window.location.href});return window.dispatchEvent(n),r}catch(r){return null}},updateUserDisplayName:e=>{if(!t)return!1;m(e),p.current=e,pr=e,mr=Date.now();const r={...t,displayName:e};return localStorage.setItem("user",JSON.stringify(r)),a(r),!0}},children:r.jsxs(_r.Provider,{value:{displayName:_,setDisplayName:m},children:[e,s&&r.jsx(ir,{banInfo:s,onClose:b})]})})},br=()=>{const e=i.useContext(cr);if(null===e)throw new Error("useAuth должен использоваться внутри AuthProvider");return e},gr=()=>{const e=i.useContext(_r);if(void 0===e)throw new Error("useUserDisplayName должен использоваться внутри AuthProvider");return e},hr="_submitButton_16czx_77",xr="_formContainer_16czx_112",fr="_errorMessage_16czx_133",vr="_formGroup_16czx_144",yr="_inputIcon_16czx_155",kr="_inputWrapper_16czx_160",wr="_inputIconInside_16czx_164",jr="_charCounter_16czx_204",Nr="_buttonIcon_16czx_231",Sr="_switchForm_16czx_260",qr="_switchButton_16czx_272",Cr={notification:"_notification_pnfun_1",iconContainer:"_iconContainer_pnfun_17",messageContainer:"_messageContainer_pnfun_25",closeButton:"_closeButton_pnfun_31",success:"_success_pnfun_54",error:"_error_pnfun_70",info:"_info_pnfun_86"},Br=e=>{const t=a.c(18),{type:s,message:l,show:d,onClose:c,autoCloseDelay:_}=e,m=void 0===s?"info":s,u=void 0===d||d,b=void 0===_?3e3:_,x=i.useRef(null);let f,v,y;if(t[0]!==b||t[1]!==c||t[2]!==u?(f=()=>(u&&c&&(x.current&&clearTimeout(x.current),x.current=setTimeout((()=>{c()}),b)),()=>{x.current&&clearTimeout(x.current)}),v=[u,c,b],t[0]=b,t[1]=c,t[2]=u,t[3]=f,t[4]=v):(f=t[3],v=t[4]),i.useEffect(f,v),!l)return null;t[5]!==m?(y=()=>{switch(m){case"error":return r.jsx(h,{size:20});case"success":return r.jsx(g,{size:20});default:return r.jsx(p,{size:20})}},t[5]=m,t[6]=y):y=t[6];const k=y;let w,j,N;t[7]===Symbol.for("react.memo_cache_sentinel")?(w={opacity:0,y:-20,scale:.95},t[7]=w):w=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(j={opacity:1,y:0,scale:1,transition:{type:"spring",damping:25,stiffness:300,duration:.4}},t[8]=j):j=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(N={hidden:w,visible:j,exit:{opacity:0,y:-10,scale:.95,transition:{duration:.3}}},t[9]=N):N=t[9];const S=N;let q,C;return t[10]!==k||t[11]!==l||t[12]!==c||t[13]!==u||t[14]!==m?(q=u&&r.jsxs(o.div,{className:`${Cr.notification} ${Cr[m]}`,variants:S,initial:"hidden",animate:"visible",exit:"exit",children:[r.jsx("div",{className:Cr.iconContainer,children:k()}),r.jsx("div",{className:Cr.messageContainer,children:l}),c&&r.jsx("button",{className:Cr.closeButton,onClick:c,"aria-label":"Закрыть уведомление",children:"×"})]}),t[10]=k,t[11]=l,t[12]=c,t[13]=u,t[14]=m,t[15]=q):q=t[15],t[16]!==q?(C=r.jsx(n,{children:q}),t[16]=q,t[17]=C):C=t[17],C},Pr=e=>{const t=a.c(43),{onSuccess:n,onSwitchToRegister:s}=e,{login:l,loading:d}=br(),[c,_]=i.useState(""),[m,p]=i.useState(""),[u,b]=i.useState("");let g;t[0]!==c||t[1]!==l||t[2]!==n||t[3]!==m?(g=async e=>{if(e.preventDefault(),c&&m)try{b(""),await l({email:c,password:m}),n&&n()}catch(t){b(t.message||"Ошибка входа. Проверьте ваши учетные данные.")}else b("Пожалуйста, заполните все поля")},t[0]=c,t[1]=l,t[2]=n,t[3]=m,t[4]=g):g=t[4];const h=g;let y;t[5]===Symbol.for("react.memo_cache_sentinel")?(y={focus:{scale:1.02,x:5},blur:{scale:1,x:0}},t[5]=y):y=t[5];const k=y;let w;t[6]===Symbol.for("react.memo_cache_sentinel")?(w={hover:{scale:1.03,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)"},tap:{scale:.98}},t[6]=w):w=t[6];const j=w;let N;t[7]===Symbol.for("react.memo_cache_sentinel")?(N=r.jsx(o.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:"Вход в аккаунт"}),t[7]=N):N=t[7];const S=!!u;let q,C,B,P,I,A,z,E,O,D,$,T,U,F,M,L,G;return t[8]!==u||t[9]!==S?(q=r.jsx(Br,{type:"error",message:u,show:S}),t[8]=u,t[9]=S,t[10]=q):q=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsxs("label",{htmlFor:"email",children:[r.jsx(x,{className:yr})," Email:"]}),t[11]=C):C=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(B=r.jsx(x,{className:wr}),t[12]=B):B=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(P=e=>_(e.target.value),t[13]=P):P=t[13],t[14]!==c||t[15]!==d?(I=r.jsxs("div",{className:vr,children:[C,r.jsx(o.div,{whileFocus:"focus",whileTap:"focus",variants:k,children:r.jsxs("div",{className:kr,children:[B,r.jsx("input",{type:"email",id:"email",value:c,onChange:P,disabled:d,placeholder:"Введите ваш email",required:!0})]})})]}),t[14]=c,t[15]=d,t[16]=I):I=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsxs("label",{htmlFor:"password",children:[r.jsx(f,{className:yr})," Пароль:"]}),t[17]=A):A=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(z=r.jsx(f,{className:wr}),t[18]=z):z=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(E=e=>p(e.target.value),t[19]=E):E=t[19],t[20]!==d||t[21]!==m?(O=r.jsxs("div",{className:vr,children:[A,r.jsx(o.div,{whileFocus:"focus",whileTap:"focus",variants:k,children:r.jsxs("div",{className:kr,children:[z,r.jsx("input",{type:"password",id:"password",value:m,onChange:E,disabled:d,placeholder:"Введите ваш пароль",required:!0})]})})]}),t[20]=d,t[21]=m,t[22]=O):O=t[22],t[23]!==d?(D=d?"Вход...":r.jsxs(r.Fragment,{children:[r.jsx(v,{className:Nr}),r.jsx("span",{children:"Войти"})]}),t[23]=d,t[24]=D):D=t[24],t[25]!==d||t[26]!==D?($=r.jsx(o.button,{type:"submit",className:hr,disabled:d,variants:j,whileHover:"hover",whileTap:"tap",children:D}),t[25]=d,t[26]=D,t[27]=$):$=t[27],t[28]!==h||t[29]!==I||t[30]!==O||t[31]!==$?(T=r.jsxs("form",{onSubmit:h,children:[I,O,$]}),t[28]=h,t[29]=I,t[30]=O,t[31]=$,t[32]=T):T=t[32],t[33]===Symbol.for("react.memo_cache_sentinel")?(U=r.jsx("p",{children:"Еще нет аккаунта?"}),t[33]=U):U=t[33],t[34]===Symbol.for("react.memo_cache_sentinel")?(F={scale:1.05},M={scale:.98},t[34]=F,t[35]=M):(F=t[34],M=t[35]),t[36]!==d||t[37]!==s?(L=r.jsxs("div",{className:Sr,children:[U,r.jsx(o.button,{className:qr,onClick:s,disabled:d,whileHover:F,whileTap:M,children:"Зарегистрироваться"})]}),t[36]=d,t[37]=s,t[38]=L):L=t[38],t[39]!==T||t[40]!==L||t[41]!==q?(G=r.jsxs("div",{className:xr,children:[N,q,T,L]}),t[39]=T,t[40]=L,t[41]=q,t[42]=G):G=t[42],G},Ir=e=>{const t=a.c(72),{onSuccess:n,onSwitchToLogin:s}=e,{register:l,loading:d}=br(),[c,_]=i.useState(""),[m,p]=i.useState(""),[b,g]=i.useState(""),[h,v]=i.useState(""),[k,w]=i.useState("");let j;t[0]!==b||t[1]!==h||t[2]!==c||t[3]!==n||t[4]!==m||t[5]!==l?(j=async e=>{if(e.preventDefault(),c&&m&&b&&h)if(m===b)if(m.length<6)w("Пароль должен содержать не менее 6 символов");else if(m.length>15)w("Пароль не должен превышать 15 символов");else if(h.length>12)w("Имя пользователя не должно превышать 12 символов");else try{w(""),await l({email:c,password:m,displayName:h}),await new Promise(Ar),n&&n()}catch(t){w(t.message||"Ошибка при регистрации. Попробуйте позже.")}else w("Пароли не совпадают");else w("Пожалуйста, заполните все поля")},t[0]=b,t[1]=h,t[2]=c,t[3]=n,t[4]=m,t[5]=l,t[6]=j):j=t[6];const N=j;let S;t[7]===Symbol.for("react.memo_cache_sentinel")?(S={focus:{scale:1.02,x:5},blur:{scale:1,x:0}},t[7]=S):S=t[7];const q=S;let C;t[8]===Symbol.for("react.memo_cache_sentinel")?(C={hover:{scale:1.03,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)"},tap:{scale:.98}},t[8]=C):C=t[8];const B=C;let P,I;t[9]===Symbol.for("react.memo_cache_sentinel")?(P={opacity:0},t[9]=P):P=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(I={hidden:P,visible:{opacity:1,transition:{staggerChildren:.1}}},t[10]=I):I=t[10];const A=I;let z,E;t[11]===Symbol.for("react.memo_cache_sentinel")?(z={opacity:0,y:20},t[11]=z):z=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(E={hidden:z,visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}},t[12]=E):E=t[12];const O=E;let D;t[13]===Symbol.for("react.memo_cache_sentinel")?(D=e=>{const t=e.target.value;t.length<=12&&v(t)},t[13]=D):D=t[13];const $=D;let T;t[14]===Symbol.for("react.memo_cache_sentinel")?(T=e=>{const t=e.target.value;t.length<=15&&p(t)},t[14]=T):T=t[14];const U=T;let F;t[15]===Symbol.for("react.memo_cache_sentinel")?(F=e=>{const t=e.target.value;t.length<=15&&g(t)},t[15]=F):F=t[15];const M=F;let L,G,R,H,W,V,Y,J,X,Z,Q,K,ee,te,ae,re,oe,ne,ie,se,le,de,ce,_e,me,pe,ue;return t[16]===Symbol.for("react.memo_cache_sentinel")?(L=r.jsx(o.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:"Регистрация"}),t[16]=L):L=t[16],t[17]!==k?(G=k&&r.jsx(o.div,{className:fr,initial:{opacity:0,y:-10,height:0},animate:{opacity:1,y:0,height:"auto"},transition:{duration:.3,ease:"easeOut"},children:k}),t[17]=k,t[18]=G):G=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(R=r.jsxs("label",{htmlFor:"displayName",children:[r.jsx(u,{className:yr})," Имя пользователя:"]}),t[19]=R):R=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(H=r.jsx(u,{className:wr}),t[20]=H):H=t[20],t[21]!==h||t[22]!==d?(W=r.jsx(o.div,{whileFocus:"focus",whileTap:"focus",variants:q,children:r.jsxs("div",{className:kr,children:[H,r.jsx("input",{type:"text",id:"displayName",value:h,onChange:$,disabled:d,placeholder:"Введите ваше имя (до 12 символов)",required:!0,maxLength:12})]})}),t[21]=h,t[22]=d,t[23]=W):W=t[23],t[24]!==h.length?(V=r.jsxs("small",{className:jr,children:[h.length,"/12 символов"]}),t[24]=h.length,t[25]=V):V=t[25],t[26]!==W||t[27]!==V?(Y=r.jsxs(o.div,{className:vr,variants:O,children:[R,W,V]}),t[26]=W,t[27]=V,t[28]=Y):Y=t[28],t[29]===Symbol.for("react.memo_cache_sentinel")?(J=r.jsxs("label",{htmlFor:"email",children:[r.jsx(x,{className:yr})," Email:"]}),t[29]=J):J=t[29],t[30]===Symbol.for("react.memo_cache_sentinel")?(X=r.jsx(x,{className:wr}),t[30]=X):X=t[30],t[31]===Symbol.for("react.memo_cache_sentinel")?(Z=e=>_(e.target.value),t[31]=Z):Z=t[31],t[32]!==c||t[33]!==d?(Q=r.jsxs(o.div,{className:vr,variants:O,children:[J,r.jsx(o.div,{whileFocus:"focus",whileTap:"focus",variants:q,children:r.jsxs("div",{className:kr,children:[X,r.jsx("input",{type:"email",id:"email",value:c,onChange:Z,disabled:d,placeholder:"Введите ваш email",required:!0})]})})]}),t[32]=c,t[33]=d,t[34]=Q):Q=t[34],t[35]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsxs("label",{htmlFor:"password",children:[r.jsx(f,{className:yr})," Пароль:"]}),t[35]=K):K=t[35],t[36]===Symbol.for("react.memo_cache_sentinel")?(ee=r.jsx(f,{className:wr}),t[36]=ee):ee=t[36],t[37]!==d||t[38]!==m?(te=r.jsx(o.div,{whileFocus:"focus",whileTap:"focus",variants:q,children:r.jsxs("div",{className:kr,children:[ee,r.jsx("input",{type:"password",id:"password",value:m,onChange:U,disabled:d,placeholder:"От 6 до 15 символов",required:!0,maxLength:15})]})}),t[37]=d,t[38]=m,t[39]=te):te=t[39],t[40]!==m.length?(ae=r.jsxs("small",{className:jr,children:[m.length,"/15 символов"]}),t[40]=m.length,t[41]=ae):ae=t[41],t[42]!==te||t[43]!==ae?(re=r.jsxs(o.div,{className:vr,variants:O,children:[K,te,ae]}),t[42]=te,t[43]=ae,t[44]=re):re=t[44],t[45]===Symbol.for("react.memo_cache_sentinel")?(oe=r.jsxs("label",{htmlFor:"confirmPassword",children:[r.jsx(f,{className:yr})," Подтвердите пароль:"]}),t[45]=oe):oe=t[45],t[46]===Symbol.for("react.memo_cache_sentinel")?(ne=r.jsx(f,{className:wr}),t[46]=ne):ne=t[46],t[47]!==b||t[48]!==d?(ie=r.jsxs(o.div,{className:vr,variants:O,children:[oe,r.jsx(o.div,{whileFocus:"focus",whileTap:"focus",variants:q,children:r.jsxs("div",{className:kr,children:[ne,r.jsx("input",{type:"password",id:"confirmPassword",value:b,onChange:M,disabled:d,placeholder:"Повторите пароль",required:!0,maxLength:15})]})})]}),t[47]=b,t[48]=d,t[49]=ie):ie=t[49],t[50]!==d?(se=d?"Регистрация...":r.jsxs(r.Fragment,{children:[r.jsx(y,{className:Nr}),r.jsx("span",{children:"Зарегистрироваться"})]}),t[50]=d,t[51]=se):se=t[51],t[52]!==d||t[53]!==se?(le=r.jsx(o.button,{type:"submit",className:hr,disabled:d,variants:B,whileHover:"hover",whileTap:"tap",children:se}),t[52]=d,t[53]=se,t[54]=le):le=t[54],t[55]!==N||t[56]!==Y||t[57]!==Q||t[58]!==re||t[59]!==ie||t[60]!==le?(de=r.jsxs(o.form,{onSubmit:N,variants:A,initial:"hidden",animate:"visible",children:[Y,Q,re,ie,le]}),t[55]=N,t[56]=Y,t[57]=Q,t[58]=re,t[59]=ie,t[60]=le,t[61]=de):de=t[61],t[62]===Symbol.for("react.memo_cache_sentinel")?(ce=r.jsx("p",{children:"Уже есть аккаунт?"}),t[62]=ce):ce=t[62],t[63]===Symbol.for("react.memo_cache_sentinel")?(_e={scale:1.05},me={scale:.98},t[63]=_e,t[64]=me):(_e=t[63],me=t[64]),t[65]!==d||t[66]!==s?(pe=r.jsxs("div",{className:Sr,children:[ce,r.jsx(o.button,{className:qr,onClick:s,disabled:d,whileHover:_e,whileTap:me,children:"Войти"})]}),t[65]=d,t[66]=s,t[67]=pe):pe=t[67],t[68]!==G||t[69]!==de||t[70]!==pe?(ue=r.jsxs("div",{className:xr,children:[L,G,de,pe]}),t[68]=G,t[69]=de,t[70]=pe,t[71]=ue):ue=t[71],ue};function Ar(e){return setTimeout(e,500)}const zr=e=>{const t=a.c(33),{isOpen:o,onClose:n,initialView:d}=e,c=void 0===d?"login":d,[_,p]=s.useState(c);let u,b,g,h,x;t[0]!==o?(u=()=>(document.body.style.overflow=o?"hidden":"",Er),b=[o],t[0]=o,t[1]=u,t[2]=b):(u=t[1],b=t[2]),i.useEffect(u,b),t[3]!==o||t[4]!==n?(g=()=>{const e=e=>{"Escape"===e.key&&o&&n()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},h=[o,n],t[3]=o,t[4]=n,t[5]=g,t[6]=h):(g=t[5],h=t[6]),i.useEffect(g,h),t[7]!==n?(x=e=>{e.target===e.currentTarget&&n()},t[7]=n,t[8]=x):x=t[8];const f=x;let v;t[9]!==n?(v=()=>{setTimeout((()=>n()),500)},t[9]=n,t[10]=v):v=t[10];const y=v;let k;t[11]!==n?(k=()=>{setTimeout((()=>{try{window.dispatchEvent(new CustomEvent("auth:refresh")),window.location.reload()}catch(e){n()}}),1500)},t[11]=n,t[12]=k):k=t[12];const w=k;if(!o)return null;let j;if(t[13]!==f||t[14]!==y||t[15]!==w||t[16]!==n||t[17]!==_){let e,a,o,i,s,d;t[19]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(m,{}),t[19]=e):e=t[19],t[20]!==n?(a=r.jsx("button",{className:Ea,onClick:n,children:e}),t[20]=n,t[21]=a):a=t[21],t[22]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx("div",{className:Da}),t[22]=o):o=t[22],t[23]!==y||t[24]!==w||t[25]!==_?(i=r.jsxs("div",{className:za,children:[o,r.jsx("div",{className:Oa,children:"login"===_?r.jsx(Pr,{onSwitchToRegister:()=>p("register"),onSuccess:y}):r.jsx(Ir,{onSwitchToLogin:()=>p("login"),onSuccess:w})})]}),t[23]=y,t[24]=w,t[25]=_,t[26]=i):i=t[26],t[27]!==a||t[28]!==i?(s=r.jsxs("div",{className:Aa,onClick:Or,children:[a,i]}),t[27]=a,t[28]=i,t[29]=s):s=t[29],t[30]!==f||t[31]!==s?(d=r.jsx("div",{className:Ia,onClick:f,children:s}),t[30]=f,t[31]=s,t[32]=d):d=t[32],j=l.createPortal(d,document.getElementById("modal-root")||document.body),t[13]=f,t[14]=y,t[15]=w,t[16]=n,t[17]=_,t[18]=j}else j=t[18];return j};function Er(){document.body.style.overflow=""}function Or(e){return e.stopPropagation()}const Dr="_sponsorPerk_14u1w_27 _perkBase_14u1w_18",$r="_earlyUserPerk_14u1w_33 _perkBase_14u1w_18",Tr="_adminPerk_14u1w_39 _perkBase_14u1w_18",Ur="_userPerk_14u1w_45 _perkBase_14u1w_18",Fr=e=>{const t=a.c(19),{src:o,alt:n,className:i,onLoad:s,style:l}=e;let d,c=ve;t[0]!==l?(d=()=>l?.width?2*parseInt(l.width,10):l?.height?2*parseInt(l.height,10):180,t[0]=l,t[1]=d):d=t[1];const _=d;if(o)if(o.includes("pfp1")||o.includes("vivian"))c=ye;else if(o.includes("pfp2")||o.includes("akito"))c=ke;else if(o.includes("pfp3")||o.includes("lonarius"))c=we;else if(o.includes("pfp4")||o.includes("faust"))c=je;else if(o.includes("igorpic")||o===Ne)c=Ne;else if(o.includes("lesyapic")||o===Se)c=Se;else if(o.startsWith("http")||o.startsWith("data:")){const e=n||"Аватар пользователя";let a,d;return t[2]!==l?(a={...l,objectFit:"cover",imageRendering:"auto"},t[2]=l,t[3]=a):a=t[3],t[4]!==i||t[5]!==s||t[6]!==o||t[7]!==e||t[8]!==a?(d=r.jsx("img",{src:o,alt:e,className:i,style:a,onLoad:s,loading:"eager",crossOrigin:"anonymous",onError:Mr}),t[4]=i,t[5]=s,t[6]=o,t[7]=e,t[8]=a,t[9]=d):d=t[9],d}const m=c,p=n||"Аватар пользователя";let u;t[10]!==l?(u={...l,objectFit:"cover",imageRendering:"auto"},t[10]=l,t[11]=u):u=t[11];const b=_();let g;return t[12]!==c||t[13]!==i||t[14]!==s||t[15]!==p||t[16]!==u||t[17]!==b?(g=r.jsx(Ce,{avatar:m,alt:p,className:i,style:u,size:b,onLoad:s}),t[12]=c,t[13]=i,t[14]=s,t[15]=p,t[16]=u,t[17]=b,t[18]=g):g=t[18],g};function Mr(e){e.target.src=`https://res.cloudinary.com/do9t8preg/image/upload/q_100,dpr_auto,fl_progressive/v1746775570/${ve}`,e.target.onerror=null}let Lr=null,Gr=0;const Rr=()=>{const{user:e,logout:t,isAuthenticated:a}=br(),{displayName:s}=gr(),{theme:l}=i.useContext(tt),d=k(),[c,_]=i.useState(!1),[m,p]=i.useState(!1),[b,g]=i.useState(!1),[h,x]=i.useState(""),[f,y]=i.useState(null),[,q]=i.useReducer((e=>e+1),0),[C,B]=i.useState(Date.now()),P=i.useCallback((e=>{if(!e)return"";switch(e){case"sponsor":return Dr;case"early_user":return $r;case"admin":return Tr;default:return Ur}}),[]);i.useEffect((()=>{if(e){const t="igoraor79@gmail.com"===e.email||e.perks?.includes("admin")||"admin"===e.activePerk;g(t),x(P(e.activePerk)),e.avatar&&e.avatar!==f&&y(e.avatar)}else x(""),y(null)}),[e,P,f]),i.useEffect((()=>{const e=()=>{try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);t.avatar&&t.avatar!==f&&(y(t.avatar),B(Date.now()))}}catch(e){}};e();const t=setInterval(e,1e3);return()=>clearInterval(t)}),[f]),i.useEffect((()=>{const t=t=>{const a=t.detail;if(a){!a.avatar||e?.avatar===a.avatar&&f===a.avatar||(y(a.avatar),B(Date.now()),Lr=a.avatar,Gr=Date.now());const t="igoraor79@gmail.com"===a.email||a.perks?.includes("admin")||"admin"===a.activePerk;g(t),x(P(a.activePerk)),q()}},a=()=>{q();try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e),a="igoraor79@gmail.com"===t.email||t.perks?.includes("admin")||"admin"===t.activePerk;g(a),x(P(t.activePerk)),t.avatar&&f!==t.avatar&&(y(t.avatar),B(Date.now()))}}catch(e){}};return window.addEventListener(lr,t),window.addEventListener("auth:refresh",a),()=>{window.removeEventListener(lr,t),window.removeEventListener("auth:refresh",a)}}),[P,e,f]),i.useEffect((()=>{const e=e=>{if("user"===e.key)try{const t=e.newValue?JSON.parse(e.newValue):null;t&&t.avatar&&f!==t.avatar&&(y(t.avatar),B(Date.now()),Lr=t.avatar,Gr=Date.now()),q()}catch(t){}};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}),[f]),i.useEffect((()=>{const t=Ha("profileUpdated",(t=>{const{userId:a,profileData:r}=t.detail||{};e&&a===e.id&&r&&r.avatar&&f!==r.avatar&&(y(r.avatar),B(Date.now()),Lr=r.avatar,Gr=Date.now())}));return()=>{t()}}),[e,f]);const I={hidden:{opacity:0,x:-5,y:5},visible:{opacity:1,x:0,y:0,transition:{type:"spring",damping:20,stiffness:300}}},A={hover:{scale:1.03,y:-2},tap:{scale:.98}};return r.jsxs("div",{className:fa,children:[a?r.jsxs("div",{className:ya,children:[r.jsxs(o.button,{className:ka,onClick:()=>{p(!m)},"aria-label":"Меню пользователя",variants:A,whileHover:"hover",whileTap:"tap",children:[r.jsx(Fr,{src:f||e?.avatar,alt:"Аватар пользователя",className:wa},C),r.jsx("span",{className:`${ja} ${h}`,children:s}),r.jsx(o.span,{animate:{rotate:m?180:0},transition:{duration:.3},style:{marginLeft:"3px",display:"flex",alignItems:"center"},children:r.jsx(w,{size:14})})]}),r.jsx(n,{children:m&&r.jsx(o.div,{className:Na,variants:{hidden:{opacity:0,y:-10,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",damping:25,stiffness:300,duration:.3,staggerChildren:.06}},exit:{opacity:0,y:-5,scale:.98,transition:{duration:.2}}},initial:"hidden",animate:"visible",exit:"exit",children:r.jsxs("ul",{children:[r.jsx(o.li,{variants:I,children:r.jsxs(o.button,{className:`${Sa} ${Ba}`,onClick:()=>{d("/profile"),p(!1)},whileHover:{x:5},children:[r.jsx(u,{})," Профиль"]})}),r.jsx(o.li,{variants:I,children:r.jsxs(o.button,{className:`${Sa} ${Pa}`,onClick:()=>{d("/feedback"),p(!1)},whileHover:{x:5},children:[r.jsx(j,{})," Обратная связь"]})}),b&&r.jsx(o.li,{variants:I,children:r.jsxs(o.button,{className:`${Sa} ${Ca}`,onClick:()=>{d("/admin"),p(!1)},whileHover:{x:5},children:[r.jsx(N,{})," Администрирование"]})}),r.jsx(o.li,{variants:I,children:r.jsxs(o.button,{className:`${Sa} ${qa}`,onClick:()=>{t(),p(!1)},whileHover:{x:5},children:[r.jsx(S,{})," Выйти"]})})]})})})]}):r.jsxs(o.button,{className:va,onClick:()=>{_(!0)},variants:A,whileHover:"hover",whileTap:"tap",children:[r.jsx(v,{size:16})," Войти"]}),r.jsx(zr,{isOpen:c,onClose:()=>{_(!1)}})]})},Hr={perkBase:"_perkBase_1bbdr_18",sponsorPerk:"_sponsorPerk_1bbdr_27 _perkBase_1bbdr_18",earlyUserPerk:"_earlyUserPerk_1bbdr_33 _perkBase_1bbdr_18",adminPerk:"_adminPerk_1bbdr_39 _perkBase_1bbdr_18",userPerk:"_userPerk_1bbdr_45 _perkBase_1bbdr_18",profileContainer:"_profileContainer_1bbdr_51",loading:"_loading_1bbdr_65",error:"_error_1bbdr_65",profileHeader:"_profileHeader_1bbdr_78",avatarSection:"_avatarSection_1bbdr_89",avatarContainer:"_avatarContainer_1bbdr_100",profileAvatar:"_profileAvatar_1bbdr_108",changeAvatarButton:"_changeAvatarButton_1bbdr_117",profileInfo:"_profileInfo_1bbdr_161",displayName:"_displayName_1bbdr_165",userMeta:"_userMeta_1bbdr_183",userRole:"_userRole_1bbdr_193",userJoined:"_userJoined_1bbdr_193",userEmail:"_userEmail_1bbdr_193",userPrivileges:"_userPrivileges_1bbdr_193",label:"_label_1bbdr_206",value:"_value_1bbdr_218",privilegeContainer:"_privilegeContainer_1bbdr_227",changePerkButton:"_changePerkButton_1bbdr_239",adminActions:"_adminActions_1bbdr_252",personalSettings:"_personalSettings_1bbdr_252",actionButtons:"_actionButtons_1bbdr_273",editButton:"_editButton_1bbdr_278",banButton:"_banButton_1bbdr_278",saveButton:"_saveButton_1bbdr_278",cancelButton:"_cancelButton_1bbdr_278",settingGroup:"_settingGroup_1bbdr_336",settingControl:"_settingControl_1bbdr_345",backdrop:"_backdrop_1bbdr_359",modal:"_modal_1bbdr_386",modalContent:"_modalContent_1bbdr_415",closeButton:"_closeButton_1bbdr_435",avatarsGrid:"_avatarsGrid_1bbdr_461",avatarCard:"_avatarCard_1bbdr_468",selectedAvatar:"_selectedAvatar_1bbdr_480",avatarImageContainer:"_avatarImageContainer_1bbdr_489",avatarImage:"_avatarImage_1bbdr_489",selectedIndicator:"_selectedIndicator_1bbdr_507",avatarName:"_avatarName_1bbdr_519",perksList:"_perksList_1bbdr_529",perkOption:"_perkOption_1bbdr_535",activePerkOption:"_activePerkOption_1bbdr_552",perkName:"_perkName_1bbdr_557",activePerkIndicator:"_activePerkIndicator_1bbdr_565",modalMotion:"_modalMotion_1bbdr_576",modalFooter:"_modalFooter_1bbdr_589",modalForm:"_modalForm_1bbdr_594",formGroup:"_formGroup_1bbdr_601",formControl:"_formControl_1bbdr_611",formActions:"_formActions_1bbdr_632",submitButton:"_submitButton_1bbdr_667",modalHeader:"_modalHeader_1bbdr_689",errorMessage:"_errorMessage_1bbdr_732",successMessage:"_successMessage_1bbdr_732",fadeIn:"_fadeIn_1bbdr_1",passwordStrength:"_passwordStrength_1bbdr_765",passwordStrengthInfo:"_passwordStrengthInfo_1bbdr_770",passwordStrengthText:"_passwordStrengthText_1bbdr_776",passwordStrengthPercentage:"_passwordStrengthPercentage_1bbdr_781",passwordStrengthBar:"_passwordStrengthBar_1bbdr_786",passwordStrengthFill:"_passwordStrengthFill_1bbdr_795",avatarWrapper:"_avatarWrapper_1bbdr_843",loadingOverlay:"_loadingOverlay_1bbdr_855",avatarHint:"_avatarHint_1bbdr_869",adminEditForm:"_adminEditForm_1bbdr_886",blockLabel:"_blockLabel_1bbdr_907",formInput:"_formInput_1bbdr_914",formSelect:"_formSelect_1bbdr_914",checkboxGroup:"_checkboxGroup_1bbdr_933",checkboxLabel:"_checkboxLabel_1bbdr_939",checkboxText:"_checkboxText_1bbdr_954",statusMessage:"_statusMessage_1bbdr_959",success:"_success_1bbdr_732",info:"_info_1bbdr_977",loadingIcon:"_loadingIcon_1bbdr_986",spin:"_spin_1bbdr_1",perksOptions:"_perksOptions_1bbdr_1133",basePerk:"_basePerk_1bbdr_1167",baseLabel:"_baseLabel_1bbdr_1176",baseNote:"_baseNote_1bbdr_1179",selectPerk:"_selectPerk_1bbdr_1185",banInfoBox:"_banInfoBox_1bbdr_1299",banDetails:"_banDetails_1bbdr_1326",bannedStatus:"_bannedStatus_1bbdr_1334",banDuration:"_banDuration_1bbdr_1346",unbanButton:"_unbanButton_1bbdr_1356",activePerk:"_activePerk_1bbdr_552",editPerkIcon:"_editPerkIcon_1bbdr_1393",profileDetail:"_profileDetail_1bbdr_1397",detailIcon:"_detailIcon_1bbdr_1407",buttonText:"_buttonText_1bbdr_1413",banModalHeader:"_banModalHeader_1bbdr_1441",modalDivider:"_modalDivider_1bbdr_1467",adminAvatar:"_adminAvatar_1bbdr_1494",adminAvatarBadge:"_adminAvatarBadge_1bbdr_1510"},Wr=[{id:1,name:ve,displayName:"Гость"},{id:2,name:ye,displayName:"Вивиан"},{id:3,name:ke,displayName:"Акито"},{id:4,name:we,displayName:"Лонариус"},{id:5,name:je,displayName:"Фауст"}],Vr=[{id:101,name:Ne,displayName:"Игорь",adminOnly:!0},{id:102,name:Se,displayName:"Леся",adminOnly:!0}],Yr=e=>{if(!e)return"Навсегда";const t=new Date(e),a=new Date;if(t<a)return"Истек (требуется ручная разблокировка)";const r=t-a,o=Math.floor(r/1e3),n=Math.floor(o/60),i=Math.floor(n/60),s=Math.floor(i/24);return s>0?`${s} ${1===s?"день":s<5?"дня":"дней"}`:i>0?`${i} ${1===i?"час":i<5?"часа":"часов"}`:n>0?`${n} ${1===n?"минута":n<5?"минуты":"минут"}`:"Менее минуты"},Jr=e=>{const t=a.c(48),{profileUser:o,isOwnProfile:n,isAdmin:i,avatarManager:s,perkManager:l,getActivePerkClass:d,getActivePerkName:c}=e,_=o.avatar||ve,m=o.displayName||"Пользователь";let p,u,b;t[0]!==_||t[1]!==m?(p=r.jsx("div",{className:Hr.avatarContainer,children:r.jsx(Fr,{src:_,alt:m,className:Hr.profileAvatar})}),t[0]=_,t[1]=m,t[2]=p):p=t[2],t[3]!==s||t[4]!==i||t[5]!==n?(u=(n||i)&&r.jsxs("button",{className:Hr.changeAvatarButton,onClick:s.handleAvatarChange,"aria-label":"Изменить аватар",children:[r.jsx(q,{size:18})," ",r.jsx("span",{className:Hr.buttonText,children:"Изменить аватар"})]}),t[3]=s,t[4]=i,t[5]=n,t[6]=u):u=t[6],t[7]!==p||t[8]!==u?(b=r.jsxs("div",{className:Hr.avatarSection,children:[p,u]}),t[7]=p,t[8]=u,t[9]=b):b=t[9];const g=`${Hr.displayName} ${d()}`,h=o.displayName||"Пользователь";let f,v;t[10]!==i||t[11]!==o.id?(f=i&&r.jsxs("span",{className:Hr.adminLabel,children:[" (ID: ",o.id.substring(0,8),"...)"]}),t[10]=i,t[11]=o.id,t[12]=f):f=t[12],t[13]!==g||t[14]!==h||t[15]!==f?(v=r.jsxs("h1",{className:g,children:[h,f]}),t[13]=g,t[14]=h,t[15]=f,t[16]=v):v=t[16];const y=`${Hr.activePerk} ${d()}`,k=(n||i)&&o.perks?.length>1?l.handleOpenPerkModal:void 0,w=(n||i)&&o.perks?.length>1?"pointer":"default";let j,N,S,B,P,I,A,z,E,O,D;return t[17]!==w?(j={cursor:w},t[17]=w,t[18]=j):j=t[18],t[19]!==c?(N=c(),t[19]=c,t[20]=N):N=t[20],t[21]!==i||t[22]!==n||t[23]!==o.perks?.length?(S=(n||i)&&o.perks?.length>1&&r.jsx(q,{size:16,className:Hr.editPerkIcon}),t[21]=i,t[22]=n,t[23]=o.perks?.length,t[24]=S):S=t[24],t[25]!==y||t[26]!==k||t[27]!==j||t[28]!==N||t[29]!==S?(B=r.jsx("div",{className:Hr.perksContainer,children:r.jsxs("div",{className:y,onClick:k,style:j,children:[N,S]})}),t[25]=y,t[26]=k,t[27]=j,t[28]=N,t[29]=S,t[30]=B):B=t[30],t[31]!==o.email?(P=o.email&&r.jsxs("div",{className:Hr.profileDetail,children:[r.jsx(x,{className:Hr.detailIcon,size:20}),r.jsx("span",{children:o.email})]}),t[31]=o.email,t[32]=P):P=t[32],t[33]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx(C,{className:Hr.detailIcon,size:20}),t[33]=I):I=t[33],t[34]!==o.createdAt?(A=(e=>{try{return new Date(e).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}catch(t){return"Неизвестно"}})(o.createdAt),t[34]=o.createdAt,t[35]=A):A=t[35],t[36]!==A?(z=r.jsxs("div",{className:Hr.profileDetail,children:[I,r.jsxs("span",{children:["Регистрация: ",A]})]}),t[36]=A,t[37]=z):z=t[37],t[38]!==P||t[39]!==z?(E=r.jsxs("div",{className:Hr.profileDetails,children:[P,z]}),t[38]=P,t[39]=z,t[40]=E):E=t[40],t[41]!==B||t[42]!==E||t[43]!==v?(O=r.jsxs("div",{className:Hr.profileInfo,children:[v,B,E]}),t[41]=B,t[42]=E,t[43]=v,t[44]=O):O=t[44],t[45]!==O||t[46]!==b?(D=r.jsxs("div",{className:Hr.profileHeader,children:[b,O]}),t[45]=O,t[46]=b,t[47]=D):D=t[47],D},Xr=({user:e,onSave:t,onCancel:a})=>{const[o,n]=i.useState({displayName:e.displayName||"",perks:e.perks||["user"],activePerk:e.activePerk||"user"}),[s,l]=i.useState(!1),[d,c]=i.useState({type:"",message:""}),_=e=>{if("user"===e)return;const t=o.perks.includes(e)?o.perks.filter((t=>t!==e)):[...o.perks,e];t.includes("user")||t.push("user"),n({...o,perks:t})};return r.jsxs("form",{className:Hr.adminEditForm,onSubmit:async a=>{a.preventDefault();try{if(l(!0),c({type:"",message:""}),!o.perks.includes(o.activePerk))return c({type:"error",message:"Активная привилегия должна быть в списке привилегий пользователя"}),void l(!1);const a={display_name:o.displayName,perks:o.perks},{error:r}=await Ma.from("profiles").update(a).eq("id",e.id);if(r)throw new Error(`Ошибка при обновлении профиля: ${r.message}`);await nr.updateActivePerk(o.activePerk,null,e.id);const{data:n,error:i}=await Ma.from("profiles").select("*").eq("id",e.id).single();if(i)throw new Error(`Ошибка при получении обновленного профиля: ${i.message}`);const s={...e,displayName:n.display_name,perks:n.perks,activePerk:n.active_perk};c({type:"success",message:"Профиль пользователя успешно обновлен"}),setTimeout((()=>{t(s)}),1500)}catch(r){c({type:"error",message:r.message})}finally{l(!1)}},children:[d.message&&r.jsxs("div",{className:`${Hr.statusMessage} ${Hr[d.type]}`,children:["error"===d.type&&r.jsx(h,{}),"success"===d.type&&r.jsx(g,{}),"info"===d.type&&r.jsx(p,{}),d.message]}),r.jsxs("div",{className:Hr.formGroup,children:[r.jsxs("label",{htmlFor:"displayName",children:[r.jsx(u,{})," Отображаемое имя:"]}),r.jsx("input",{type:"text",id:"displayName",name:"displayName",value:o.displayName,onChange:e=>{const{name:t,value:a}=e.target;n({...o,[t]:a})},placeholder:"Имя пользователя"})]}),r.jsxs("div",{className:Hr.formGroup,children:[r.jsxs("label",{children:[r.jsx(B,{})," Привилегии:"]}),r.jsxs("div",{className:Hr.perksOptions,children:[r.jsxs("div",{className:`${Hr.perkOption} ${Hr.basePerk}`,children:[r.jsx("input",{type:"checkbox",id:"perk-user",checked:!0,disabled:!0,readOnly:!0}),r.jsxs("label",{htmlFor:"perk-user",className:Hr.baseLabel,children:["Пользователь ",r.jsx("span",{className:Hr.baseNote,children:"(базовая привилегия)"})]})]}),r.jsxs("div",{className:Hr.perkOption,children:[r.jsx("input",{type:"checkbox",id:"perk-early_user",checked:o.perks.includes("early_user"),onChange:()=>_("early_user")}),r.jsx("label",{htmlFor:"perk-early_user",children:"Ранний пользователь"})]}),r.jsxs("div",{className:Hr.perkOption,children:[r.jsx("input",{type:"checkbox",id:"perk-sponsor",checked:o.perks.includes("sponsor"),onChange:()=>_("sponsor")}),r.jsx("label",{htmlFor:"perk-sponsor",children:"Спонсор"})]}),r.jsxs("div",{className:Hr.perkOption,children:[r.jsx("input",{type:"checkbox",id:"perk-admin",checked:o.perks.includes("admin"),onChange:()=>_("admin")}),r.jsx("label",{htmlFor:"perk-admin",children:"Администратор"})]})]})]}),r.jsxs("div",{className:Hr.formGroup,children:[r.jsxs("label",{htmlFor:"activePerk",children:[r.jsx(B,{})," Активная привилегия:"]}),r.jsx("select",{id:"activePerk",name:"activePerk",value:o.activePerk,onChange:e=>{const t=e.target.value;o.perks.includes(t)?(n({...o,activePerk:t}),c({type:"",message:""})):c({type:"error",message:"Нельзя установить активную привилегию, которой нет у пользователя"})},className:Hr.selectPerk,children:o.perks.map((e=>r.jsxs("option",{value:e,children:["user"===e&&"Пользователь","early_user"===e&&"Ранний пользователь","sponsor"===e&&"Спонсор","admin"===e&&"Администратор"]},e)))})]}),r.jsxs("div",{className:Hr.formActions,children:[r.jsxs("button",{type:"button",className:Hr.cancelButton,onClick:a,children:[r.jsx(m,{})," Отмена"]}),r.jsxs("button",{type:"submit",className:Hr.saveButton,disabled:s,children:[s?r.jsx(P,{}):r.jsx(I,{})," Сохранить"]})]})]})},Zr=e=>{const t=a.c(21),{profileUser:o,adminEditStatus:n,isAdminEditing:i,banManager:s,setIsAdminEditing:l,setShowBanDialog:d,handleAdminProfileSave:c}=e;let _,m,u,x,f;return t[0]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsxs("h2",{children:[r.jsx(q,{})," Администрирование"]}),t[0]=_):_=t[0],t[1]!==n.message||t[2]!==n.type?(m=n.message&&r.jsxs("div",{className:`${Hr.statusMessage} ${Hr[n.type]}`,children:["error"===n.type?r.jsx(h,{}):"success"===n.type?r.jsx(g,{}):r.jsx(p,{}),n.message]}),t[1]=n.message,t[2]=n.type,t[3]=m):m=t[3],t[4]!==s||t[5]!==o.ban_admin_name||t[6]!==o.ban_end_at||t[7]!==o.ban_reason||t[8]!==o.is_banned?(u=o.is_banned&&r.jsxs("div",{className:Hr.banInfoBox,children:[r.jsx("h3",{children:"Информация о блокировке"}),r.jsxs("div",{className:Hr.banDetails,children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Статус:"})," ",r.jsx("span",{className:Hr.bannedStatus,children:"Заблокирован"})]}),o.ban_reason&&r.jsxs("p",{children:[r.jsx("strong",{children:"Причина:"})," ",o.ban_reason]}),o.ban_admin_name&&r.jsxs("p",{children:[r.jsx("strong",{children:"Заблокировал:"})," ",o.ban_admin_name]}),o.ban_end_at&&r.jsxs("p",{children:[r.jsx("strong",{children:"Окончание через:"}),r.jsxs("span",{className:Hr.banDuration,children:[r.jsx(b,{})," ",Yr(o.ban_end_at)]})]})]}),r.jsxs("button",{className:Hr.unbanButton,onClick:s.handleUnbanUser,disabled:s.banLoading,children:[s.banLoading?r.jsx(P,{}):r.jsx(A,{})," Снять блокировку"]})]}),t[4]=s,t[5]=o.ban_admin_name,t[6]=o.ban_end_at,t[7]=o.ban_reason,t[8]=o.is_banned,t[9]=u):u=t[9],t[10]!==s||t[11]!==c||t[12]!==i||t[13]!==o||t[14]!==l||t[15]!==d?(x=i?r.jsx(Xr,{user:o,onSave:c,onCancel:()=>l(!1)}):r.jsxs("div",{className:Hr.actionButtons,children:[r.jsxs("button",{className:Hr.editButton,onClick:()=>l(!0),children:[r.jsx(q,{})," Редактировать профиль"]}),!o.is_banned&&"igoraor79@gmail.com"!==o.email&&r.jsxs("button",{className:Hr.banButton,onClick:()=>d(!0),disabled:s.banLoading,children:[r.jsx(z,{})," Заблокировать"]})]}),t[10]=s,t[11]=c,t[12]=i,t[13]=o,t[14]=l,t[15]=d,t[16]=x):x=t[16],t[17]!==m||t[18]!==u||t[19]!==x?(f=r.jsxs("div",{className:Hr.adminActions,children:[_,m,u,x]}),t[17]=m,t[18]=u,t[19]=x,t[20]=f):f=t[20],f},Qr=e=>{const t=a.c(19),{profileUser:o,successMessage:n,accountManager:i}=e;let s,l,d;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx("h2",{children:"Личные настройки"}),t[0]=s):s=t[0],t[1]!==n?(l=n&&r.jsxs("div",{className:Hr.successMessage,children:[r.jsx(A,{size:16}),r.jsx("span",{children:n})]}),t[1]=n,t[2]=l):l=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("label",{htmlFor:"displayName",children:"Имя пользователя:"}),t[3]=d):d=t[3];const c=o.displayName||"Пользователь";let _,m,p,u,b,g,h;return t[4]!==c?(_=r.jsx("input",{type:"text",id:"displayName",value:c,readOnly:!0}),t[4]=c,t[5]=_):_=t[5],t[6]!==i?(m=r.jsx("button",{className:Hr.editButton,onClick:()=>i.setIsNameModalOpen(!0),children:"Изменить"}),t[6]=i,t[7]=m):m=t[7],t[8]!==_||t[9]!==m?(p=r.jsxs("div",{className:Hr.settingGroup,children:[d,r.jsxs("div",{className:Hr.settingControl,children:[_,m]})]}),t[8]=_,t[9]=m,t[10]=p):p=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx("label",{htmlFor:"password",children:"Пароль:"}),t[11]=u):u=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx("input",{type:"password",id:"password",value:"••••••",readOnly:!0}),t[12]=b):b=t[12],t[13]!==i?(g=r.jsxs("div",{className:Hr.settingGroup,children:[u,r.jsxs("div",{className:Hr.settingControl,children:[b,r.jsx("button",{className:Hr.editButton,onClick:()=>i.setIsPasswordModalOpen(!0),children:"Изменить"})]})]}),t[13]=i,t[14]=g):g=t[14],t[15]!==g||t[16]!==l||t[17]!==p?(h=r.jsxs("div",{className:Hr.personalSettings,children:[s,l,p,g]}),t[15]=g,t[16]=l,t[17]=p,t[18]=h):h=t[18],h},Kr=e=>{const t=a.c(53),{avatars:n,adminAvatars:s,isAdmin:d,onSelectAvatar:c,onClose:_}=e;let p;t[0]!==s?(p=void 0===s?[]:s,t[0]=s,t[1]=p):p=t[1];const u=p,[b,h]=i.useState(null),[x,f]=i.useState(!1),[v,y]=i.useState(!1);let k;t[2]!==u||t[3]!==n||t[4]!==d?(k=d?[...n,...u]:n,t[2]=u,t[3]=n,t[4]=d,t[5]=k):k=t[5];const w=k;let j,N,S,q;t[6]===Symbol.for("react.memo_cache_sentinel")?(j=[],t[6]=j):j=t[6],i.useEffect(to,j),t[7]!==x||t[8]!==_||t[9]!==v?(N=()=>{const e=e=>{"Escape"!==e.key||x||v||_()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},S=[_,x,v],t[7]=x,t[8]=_,t[9]=v,t[10]=N,t[11]=S):(N=t[10],S=t[11]),i.useEffect(N,S),t[12]!==x||t[13]!==_||t[14]!==v?(q=e=>{e.target!==e.currentTarget||x||v||_()},t[12]=x,t[13]=_,t[14]=v,t[15]=q):q=t[15];const C=q;let B;t[16]!==x||t[17]!==c||t[18]!==v?(B=async e=>{x||v||(h(e),f(!0),setTimeout((()=>{y(!0),setTimeout((()=>{c(e.id)}),1e3)}),500))},t[16]=x,t[17]=c,t[18]=v,t[19]=B):B=t[19];const P=B;let I;if(t[20]!==w||t[21]!==C||t[22]!==P||t[23]!==x||t[24]!==_||t[25]!==b?.id||t[26]!==v){const e=x||v;let a,n,i,s,d,c,p,u,h;if(t[28]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(m,{size:20}),t[28]=a):a=t[28],t[29]!==_||t[30]!==e?(n=r.jsx("button",{className:Hr.closeButton,onClick:_,disabled:e,children:a}),t[29]=_,t[30]=e,t[31]=n):n=t[31],t[32]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("h3",{children:"Выберите аватар"}),t[32]=i):i=t[32],t[33]!==v?(s=v&&r.jsxs(o.div,{className:Hr.successMessage,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[r.jsx(g,{size:40}),r.jsx("span",{children:"Аватар успешно изменен!"})]}),t[33]=v,t[34]=s):s=t[34],t[35]!==w||t[36]!==P||t[37]!==b?.id){let e;t[39]!==P||t[40]!==b?.id?(e=e=>r.jsxs(o.div,{className:`${Hr.avatarCard} ${b?.id===e.id?Hr.selectedAvatar:""} ${e.adminOnly?Hr.adminAvatar:""}`,whileHover:{scale:1.05},whileTap:{scale:.98},onClick:()=>P(e),children:[r.jsxs("div",{className:Hr.avatarImageContainer,children:[r.jsx(Fr,{src:e.name,alt:e.displayName,className:Hr.avatarImage}),b?.id===e.id&&r.jsx(o.div,{className:Hr.selectedIndicator,initial:{scale:0},animate:{scale:1},transition:{duration:.3,delay:.1},children:r.jsx(A,{size:16,color:"#fff"})}),e.adminOnly&&r.jsx("span",{className:Hr.adminAvatarBadge,children:"Admin"})]}),r.jsx("span",{className:Hr.avatarName,children:e.displayName})]},e.id),t[39]=P,t[40]=b?.id,t[41]=e):e=t[41],d=w.map(e),t[35]=w,t[36]=P,t[37]=b?.id,t[38]=d}else d=t[38];t[42]!==d?(c=r.jsx("div",{className:Hr.avatarsGrid,children:d}),t[42]=d,t[43]=c):c=t[43],t[44]!==s||t[45]!==c?(p=r.jsxs("div",{className:Hr.modalContent,children:[i,s,c]}),t[44]=s,t[45]=c,t[46]=p):p=t[46],t[47]!==n||t[48]!==p?(u=r.jsxs("div",{className:Hr.modal,onClick:ao,children:[n,p]}),t[47]=n,t[48]=p,t[49]=u):u=t[49],t[50]!==C||t[51]!==u?(h=r.jsx("div",{className:Hr.backdrop,onClick:C,children:u}),t[50]=C,t[51]=u,t[52]=h):h=t[52],I=l.createPortal(h,document.getElementById("modal-root")||document.body),t[20]=w,t[21]=C,t[22]=P,t[23]=x,t[24]=_,t[25]=b?.id,t[26]=v,t[27]=I}else I=t[27];return I};function eo(){document.body.style.overflow=""}function to(){return document.body.style.overflow="hidden",eo}function ao(e){return e.stopPropagation()}const ro=e=>{const t=a.c(36),{perks:n,activePerk:s,onSelectPerk:d,onClose:c,userId:_}=e;let p,u,b,g;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],t[0]=p):p=t[0],i.useEffect(no,p),t[1]!==c?(u=()=>{const e=e=>{"Escape"===e.key&&c()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},b=[c],t[1]=c,t[2]=u,t[3]=b):(u=t[2],b=t[3]),i.useEffect(u,b),t[4]!==c?(g=e=>{e.target===e.currentTarget&&c()},t[4]=c,t[5]=g):g=t[5];const h=g,x=_?`Выбор привилегии для пользователя (${_.substring(0,8)}...)`:"Выберите привилегию";let f;if(t[6]!==s||t[7]!==h||t[8]!==x||t[9]!==c||t[10]!==d||t[11]!==n){let e,a,i,_,p,u,b,g;if(t[13]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(m,{size:20}),t[13]=e):e=t[13],t[14]!==c?(a=r.jsx("button",{className:Hr.closeButton,onClick:c,children:e}),t[14]=c,t[15]=a):a=t[15],t[16]!==x?(i=r.jsx("h3",{children:x}),t[16]=x,t[17]=i):i=t[17],t[18]!==s||t[19]!==d||t[20]!==n){let e;t[22]!==s||t[23]!==d?(e=e=>{const t="sponsor"===e?Dr:"early_user"===e?$r:"admin"===e?Tr:Ur;return r.jsxs(o.div,{className:`${Hr.perkOption} ${e===s?Hr.activePerkOption:""}`,whileHover:{scale:1.03},whileTap:{scale:.98},onClick:()=>d(e),children:[r.jsxs("div",{className:`${Hr.perkName} ${t}`,children:["sponsor"===e&&"Спонсор","early_user"===e&&"Ранний пользователь","admin"===e&&"Администратор","user"===e&&"Пользователь"]}),e===s&&r.jsx("div",{className:Hr.activePerkIndicator,children:r.jsx(A,{size:16})})]},e)},t[22]=s,t[23]=d,t[24]=e):e=t[24],_=n.map(e),t[18]=s,t[19]=d,t[20]=n,t[21]=_}else _=t[21];t[25]!==_?(p=r.jsx("div",{className:Hr.perksList,children:_}),t[25]=_,t[26]=p):p=t[26],t[27]!==p||t[28]!==i?(u=r.jsxs("div",{className:Hr.modalContent,children:[i,p]}),t[27]=p,t[28]=i,t[29]=u):u=t[29],t[30]!==u||t[31]!==a?(b=r.jsxs("div",{className:Hr.modal,onClick:io,children:[a,u]}),t[30]=u,t[31]=a,t[32]=b):b=t[32],t[33]!==h||t[34]!==b?(g=r.jsx("div",{className:Hr.backdrop,onClick:h,children:b}),t[33]=h,t[34]=b,t[35]=g):g=t[35],f=l.createPortal(g,document.getElementById("modal-root")||document.body),t[6]=s,t[7]=h,t[8]=x,t[9]=c,t[10]=d,t[11]=n,t[12]=f}else f=t[12];return f};function oo(){document.body.style.overflow=""}function no(){return document.body.style.overflow="hidden",oo}function io(e){return e.stopPropagation()}const so=({onClose:e,onSubmit:t,initialName:a})=>{const[n,s]=i.useState(a||""),[d,c]=i.useState(""),[_,p]=i.useState(""),[u,b]=i.useState(!1),[g,x]=i.useState(!1);return i.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]),i.useEffect((()=>{const t=t=>{"Escape"!==t.key||u||e()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[e,u]),l.createPortal(r.jsx("div",{className:Hr.backdrop,onClick:t=>{t.target!==t.currentTarget||u||e()},children:r.jsxs("div",{className:Hr.modal,onClick:e=>e.stopPropagation(),children:[r.jsx("button",{className:Hr.closeButton,onClick:e,disabled:u,children:r.jsx(m,{size:20})}),r.jsxs("div",{className:Hr.modalContent,children:[r.jsx("h3",{children:"Изменить имя пользователя"}),g?r.jsxs(o.div,{className:Hr.successMessage,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[r.jsx(A,{size:20}),r.jsx("span",{children:"Имя пользователя успешно изменено!"})]}):r.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),p(""),n.trim())if(d){b(!0);try{await t(n.trim(),d),x(!0),setTimeout((()=>e()),1500)}catch(r){p(r.message||"Не удалось обновить имя пользователя")}finally{b(!1)}}else p("Введите пароль для подтверждения");else p("Имя пользователя не может быть пустым")},className:Hr.modalForm,children:[r.jsxs("div",{className:Hr.formGroup,children:[r.jsx("label",{htmlFor:"newName",children:"Новое имя:"}),r.jsx("input",{type:"text",id:"newName",value:n,onChange:e=>s(e.target.value),placeholder:"Введите новое имя",className:Hr.formControl,disabled:u,autoFocus:!0})]}),r.jsxs("div",{className:Hr.formGroup,children:[r.jsx("label",{htmlFor:"password",children:"Введите пароль для подтверждения:"}),r.jsx("input",{type:"password",id:"password",value:d,onChange:e=>c(e.target.value),placeholder:"Ваш текущий пароль",className:Hr.formControl,disabled:u})]}),_&&r.jsxs(o.div,{className:Hr.errorMessage,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},children:[r.jsx(h,{size:18}),r.jsx("span",{children:_})]}),r.jsxs("div",{className:Hr.formActions,children:[r.jsx("button",{type:"button",className:Hr.cancelButton,onClick:e,disabled:u,children:"Отмена"}),r.jsx(o.button,{type:"submit",className:Hr.submitButton,disabled:u,whileHover:{scale:1.03},whileTap:{scale:.97},children:u?r.jsx(o.span,{animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:"Сохранение..."}):"Сохранить"})]})]})]})]})}),document.getElementById("modal-root")||document.body)},lo=({onClose:e,onSubmit:t})=>{const[a,n]=i.useState(""),[s,d]=i.useState(""),[c,_]=i.useState(""),[p,u]=i.useState(""),[b,g]=i.useState(!1),[x,f]=i.useState(!1);return i.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]),i.useEffect((()=>{const t=t=>{"Escape"!==t.key||b||e()};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[e,b]),l.createPortal(r.jsx("div",{className:Hr.backdrop,onClick:t=>{t.target!==t.currentTarget||b||e()},children:r.jsxs("div",{className:Hr.modal,onClick:e=>e.stopPropagation(),children:[r.jsx("button",{className:Hr.closeButton,onClick:e,disabled:b,children:r.jsx(m,{size:20})}),r.jsxs("div",{className:Hr.modalContent,children:[r.jsx("h3",{children:"Изменить пароль"}),x?r.jsxs(o.div,{className:Hr.successMessage,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[r.jsx(A,{size:20}),r.jsx("span",{children:"Пароль успешно изменен!"})]}):r.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),u(""),a)if(s)if(s.length<6)u("Новый пароль должен содержать не менее 6 символов");else if(s===c){g(!0);try{await t(a,s),f(!0),setTimeout((()=>e()),1500)}catch(o){u(o.message||"Не удалось изменить пароль")}finally{g(!1)}}else u("Пароли не совпадают");else u("Введите новый пароль");else u("Введите текущий пароль")},className:Hr.modalForm,children:[r.jsxs("div",{className:Hr.formGroup,children:[r.jsx("label",{htmlFor:"currentPassword",children:"Текущий пароль:"}),r.jsx("input",{type:"password",id:"currentPassword",value:a,onChange:e=>n(e.target.value),placeholder:"Введите текущий пароль",className:Hr.formControl,disabled:b,autoFocus:!0})]}),r.jsxs("div",{className:Hr.formGroup,children:[r.jsx("label",{htmlFor:"newPassword",children:"Новый пароль:"}),r.jsx("input",{type:"password",id:"newPassword",value:s,onChange:e=>d(e.target.value),placeholder:"Введите новый пароль",className:Hr.formControl,disabled:b})]}),r.jsxs("div",{className:Hr.formGroup,children:[r.jsx("label",{htmlFor:"confirmPassword",children:"Подтвердите пароль:"}),r.jsx("input",{type:"password",id:"confirmPassword",value:c,onChange:e=>_(e.target.value),placeholder:"Повторите новый пароль",className:Hr.formControl,disabled:b})]}),p&&r.jsxs(o.div,{className:Hr.errorMessage,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},children:[r.jsx(h,{size:18}),r.jsx("span",{children:p})]}),r.jsxs("div",{className:Hr.formActions,children:[r.jsx("button",{type:"button",className:Hr.cancelButton,onClick:e,disabled:b,children:"Отмена"}),r.jsx(o.button,{type:"submit",className:Hr.submitButton,disabled:b,whileHover:{scale:1.03},whileTap:{scale:.97},children:b?r.jsx(o.span,{animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:"Сохранение..."}):"Сохранить"})]})]})]})]})}),document.getElementById("modal-root")||document.body)},co=e=>{const t=a.c(75),{onClose:n,onBanUser:s,loading:d,username:c}=e,[_,u]=i.useState(""),[g,x]=i.useState(""),[f,v]=i.useState("");let y,k,w,j;t[0]===Symbol.for("react.memo_cache_sentinel")?(y=[],t[0]=y):y=t[0],i.useEffect(mo,y),t[1]!==d||t[2]!==n?(k=()=>{const e=e=>{"Escape"!==e.key||d||n()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},w=[n,d],t[1]=d,t[2]=n,t[3]=k,t[4]=w):(k=t[3],w=t[4]),i.useEffect(k,w),t[5]!==d||t[6]!==n?(j=e=>{e.target!==e.currentTarget||d||n()},t[5]=d,t[6]=n,t[7]=j):j=t[7];const N=j;let S;t[8]!==g||t[9]!==_||t[10]!==s?(S=e=>{e.preventDefault(),_.trim()?g?(v(""),s(_,g)):v("Пожалуйста, выберите длительность блокировки"):v("Пожалуйста, укажите причину блокировки")},t[8]=g,t[9]=_,t[10]=s,t[11]=S):S=t[11];const q=S;let C;if(t[12]!==g||t[13]!==_||t[14]!==f||t[15]!==N||t[16]!==q||t[17]!==d||t[18]!==n||t[19]!==c){let e,a,i,s,v,y,k,w,j,S,B,I,A,E,O,D,$,T,U,F,M,L,G,R,H,W,V,Y,J,X;t[21]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(m,{size:20}),t[21]=e):e=t[21],t[22]!==d||t[23]!==n?(a=r.jsx("button",{className:Hr.closeButton,onClick:n,disabled:d,children:e}),t[22]=d,t[23]=n,t[24]=a):a=t[24],t[25]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsxs("h3",{children:[r.jsx(z,{size:22})," Блокировка пользователя"]}),t[25]=i):i=t[25],t[26]!==c?(s=r.jsxs("div",{className:Hr.banModalHeader,children:[i,r.jsxs("p",{children:["Пользователь ",r.jsx("strong",{children:c})," будет заблокирован и не сможет входить в приложение или взаимодействовать с другими пользователями."]})]}),t[26]=c,t[27]=s):s=t[27],t[28]!==f?(v=f&&r.jsxs(o.div,{className:Hr.errorMessage,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[r.jsx(h,{size:18}),r.jsx("span",{children:f})]}),t[28]=f,t[29]=v):v=t[29],t[30]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsxs("label",{htmlFor:"banReason",children:[r.jsx(p,{size:16,style:{marginRight:"6px"}}),"Причина блокировки:"]}),t[30]=y):y=t[30],t[31]===Symbol.for("react.memo_cache_sentinel")?(k=e=>u(e.target.value),t[31]=k):k=t[31],t[32]!==_?(w=r.jsxs("div",{className:Hr.formGroup,children:[y,r.jsx("textarea",{id:"banReason",value:_,onChange:k,placeholder:"Укажите причину блокировки пользователя",className:Hr.formControl,rows:4})]}),t[32]=_,t[33]=w):w=t[33],t[34]===Symbol.for("react.memo_cache_sentinel")?(j=r.jsx("div",{className:Hr.modalDivider}),t[34]=j):j=t[34],t[35]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsxs("label",{htmlFor:"banDuration",children:[r.jsx(b,{size:16,style:{marginRight:"6px"}}),"Длительность блокировки:"]}),t[35]=S):S=t[35],t[36]===Symbol.for("react.memo_cache_sentinel")?(B=e=>x(e.target.value),t[36]=B):B=t[36],t[37]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx("option",{value:"",children:"Выберите длительность"}),A=r.jsx("option",{value:"30m",children:"30 минут"}),E=r.jsx("option",{value:"2h",children:"2 часа"}),O=r.jsx("option",{value:"6h",children:"6 часов"}),D=r.jsx("option",{value:"12h",children:"12 часов"}),$=r.jsx("option",{value:"1d",children:"1 день"}),T=r.jsx("option",{value:"3d",children:"3 дня"}),U=r.jsx("option",{value:"1w",children:"1 неделя"}),F=r.jsx("option",{value:"permanent",children:"Навсегда"}),t[37]=I,t[38]=A,t[39]=E,t[40]=O,t[41]=D,t[42]=$,t[43]=T,t[44]=U,t[45]=F):(I=t[37],A=t[38],E=t[39],O=t[40],D=t[41],$=t[42],T=t[43],U=t[44],F=t[45]),t[46]!==g?(M=r.jsxs("div",{className:Hr.formGroup,children:[S,r.jsxs("select",{id:"banDuration",value:g,onChange:B,className:Hr.formControl,children:[I,A,E,O,D,$,T,U,F]})]}),t[46]=g,t[47]=M):M=t[47],t[48]===Symbol.for("react.memo_cache_sentinel")?(L=r.jsx(m,{}),t[48]=L):L=t[48],t[49]!==d||t[50]!==n?(G=r.jsxs("button",{type:"button",className:Hr.cancelButton,onClick:n,disabled:d,children:[L," Отмена"]}),t[49]=d,t[50]=n,t[51]=G):G=t[51],t[52]!==d?(R=d?r.jsxs(o.span,{animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:[r.jsx(P,{})," Блокировка..."]}):r.jsxs(r.Fragment,{children:[r.jsx(z,{})," Заблокировать"]}),t[52]=d,t[53]=R):R=t[53],t[54]!==d||t[55]!==R?(H=r.jsx("button",{type:"submit",className:`${Hr.submitButton} ${Hr.banButton}`,disabled:d,children:R}),t[54]=d,t[55]=R,t[56]=H):H=t[56],t[57]!==G||t[58]!==H?(W=r.jsxs("div",{className:Hr.formActions,children:[G,H]}),t[57]=G,t[58]=H,t[59]=W):W=t[59],t[60]!==q||t[61]!==w||t[62]!==M||t[63]!==W?(V=r.jsxs("form",{onSubmit:q,className:Hr.modalForm,children:[w,j,M,W]}),t[60]=q,t[61]=w,t[62]=M,t[63]=W,t[64]=V):V=t[64],t[65]!==s||t[66]!==v||t[67]!==V?(Y=r.jsxs("div",{className:Hr.modalContent,children:[s,v,V]}),t[65]=s,t[66]=v,t[67]=V,t[68]=Y):Y=t[68],t[69]!==Y||t[70]!==a?(J=r.jsxs("div",{className:Hr.modal,onClick:po,children:[a,Y]}),t[69]=Y,t[70]=a,t[71]=J):J=t[71],t[72]!==N||t[73]!==J?(X=r.jsx("div",{className:Hr.backdrop,onClick:N,children:J}),t[72]=N,t[73]=J,t[74]=X):X=t[74],C=l.createPortal(X,document.getElementById("modal-root")||document.body),t[12]=g,t[13]=_,t[14]=f,t[15]=N,t[16]=q,t[17]=d,t[18]=n,t[19]=c,t[20]=C}else C=t[20];return C};function _o(){document.body.style.overflow=""}function mo(){return document.body.style.overflow="hidden",_o}function po(e){return e.stopPropagation()}const uo=()=>{const e=k(),{userId:t}=E(),{user:a,isAuthenticated:o,loading:n,refreshUser:s,updateUserDisplayName:l}=br(),{setDisplayName:d}=gr(),[c,_]=i.useState(null),[m,p]=i.useState(!0),[u,b]=i.useState(null),[g,h]=i.useState(""),[x,f]=i.useState(!1),[v,y]=i.useState({type:"",message:""}),[w,j]=i.useState(!1),N=!t||a&&t===a.id,S=a&&("igoraor79@gmail.com"===a.email||a.perks?.includes("admin")||"admin"===a.activePerk),q=e=>{_(e)},C=(e=>{const{profileUser:t,currentUser:a,updateProfileUser:r,setAdminEditStatus:o}=e,[n,s]=i.useState(!1),[l,d]=i.useState(null);return{banLoading:n,banInfo:l,loadBanInfo:async e=>{try{const{data:a,error:o}=await Ma.from("user_bans").select("*").eq("user_id",e).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1);if(o)return;a&&a.length>0&&(d(a[0]),r({...t,ban_info:a[0]}))}catch(u){}},handleUnbanUser:async()=>{if(a&&t)try{s(!0);const{error:e}=await Ma.from("profiles").update({is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_name:null,ban_admin_id:null}).eq("id",t.id);if(e)throw new Error(`Ошибка при разблокировке профиля: ${e.message}`);const{error:a}=await Ma.from("user_bans").update({is_active:!1}).eq("user_id",t.id).eq("is_active",!0);r({...t,is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_name:null}),o({type:"success",message:"Пользователь успешно разблокирован"}),setTimeout((()=>{o({type:"",message:""})}),3e3)}catch(u){o({type:"error",message:u.message||"Ошибка при разблокировке пользователя"})}finally{s(!1)}},handleBanUser:async e=>{if(a&&t)try{s(!0);const n=a.displayName||"Администратор",i="permanent"===e.duration?null:new Date(Date.now()+24*parseInt(e.duration)*60*60*1e3).toISOString(),{error:l}=await Ma.from("profiles").update({is_banned:!0,ban_reason:e.reason,ban_end_at:i,ban_admin_name:n,ban_admin_id:a.id}).eq("id",t.id);if(l)throw new Error(`Ошибка при блокировке профиля: ${l.message}`);const{error:d}=await Ma.from("user_bans").insert({user_id:t.id,reason:e.reason,admin_id:a.id,admin_name:n,end_at:i,is_active:!0,ban_type:"permanent"===e.duration?"permanent":"temporary"});r({...t,is_banned:!0,ban_reason:e.reason,ban_end_at:i,ban_admin_name:n}),o({type:"success",message:"Пользователь успешно заблокирован"}),setTimeout((()=>{o({type:"",message:""})}),3e3)}catch(u){o({type:"error",message:u.message||"Ошибка при блокировке пользователя"})}finally{s(!1)}},formatBanEndTime:Yr}})({profileUser:c,currentUser:a,updateProfileUser:q,setAdminEditStatus:y}),B=(e=>{const{profileUser:t,isOwnProfile:a,isAdmin:r,updateProfileUser:o}=e,[n,s]=i.useState(!1);return{isAvatarModalOpen:n,setIsAvatarModalOpen:s,handleAvatarChange:()=>{s(!0)},handleAvatarSelect:async e=>{try{const n=!a&&r?t.id:null;(await nr.updateAvatar(e,n)).success&&o({...t,avatar:e}),s(!1)}catch(u){}}}})({profileUser:c,isOwnProfile:N,isAdmin:S,updateProfileUser:q}),P=(e=>{const{profileUser:t,isOwnProfile:a,isAdmin:r,updateProfileUser:o,refreshUser:n}=e,[s,l]=i.useState(!1);return{isPerkModalOpen:s,setIsPerkModalOpen:l,handleOpenPerkModal:()=>{l(!0)},handlePerkSelect:async e=>{try{if(!t||!e)return;if(!t.perks.includes(e))throw new Error("У вас нет выбранной привилегии");const i=!a&&r?t.id:null;await nr.updateActivePerk(e,null,i),o({...t,activePerk:e}),a&&n&&n(),l(!1)}catch(u){}}}})({profileUser:c,isOwnProfile:N,isAdmin:S,updateProfileUser:q,refreshUser:s}),I=(({profileUser:e,updateProfileUser:t,setSuccessMessage:a,refreshUser:r,updateUserDisplayName:o,setDisplayName:n})=>{const[s,l]=i.useState(!1),[d,c]=i.useState(!1);return{isNameModalOpen:s,setIsNameModalOpen:l,isPasswordModalOpen:d,setIsPasswordModalOpen:c,handleChangeName:async(i,s)=>{try{o(i),n(i),await nr.updateDisplayName(i,s,null);const d={...e,displayName:i};t(d),a("Имя пользователя успешно изменено"),l(!1),setTimeout((()=>{r()}),1e3),setTimeout((()=>{a("")}),3e3)}catch(u){throw u}},handleChangePassword:async(e,t)=>{try{await nr.changePassword(e,t),a("Пароль успешно изменен"),c(!1),setTimeout((()=>{a("")}),3e3)}catch(u){throw u}}}})({profileUser:c,updateProfileUser:q,setSuccessMessage:h,refreshUser:s,updateUserDisplayName:l,setDisplayName:d});return i.useEffect((()=>{n||o||t||e("/",{replace:!0})}),[o,n,e,t]),i.useEffect((()=>{c?.is_banned&&t&&C.loadBanInfo(t)}),[c?.is_banned,t]),i.useEffect((()=>{(async()=>{try{if(n)return;if(p(!0),N&&a)_({...a,role:"igoraor79@gmail.com"===a.email?"admin":a.role||"user"}),b(null);else if(t)try{/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);const e=await nr.getUserById(t);_({id:e.id,displayName:e.displayName||"Пользователь",role:e.role||"user",email:e.email,avatar:e.avatar,perks:e.perks||["user"],activePerk:e.activePerk||"user",createdAt:e.createdAt,is_banned:e.is_banned||!1,ban_reason:e.ban_reason,ban_end_at:e.ban_end_at,ban_admin_name:e.ban_admin_name}),b(null)}catch(r){if(r.message&&r.message.includes("Неверный ID"))return void e("/profile",{replace:!0});_({id:t,displayName:"Пользователь",role:"user",email:S?"user@example.com":null,avatar:null,perks:["user"],activePerk:"user",createdAt:(new Date).toISOString()})}else b("Профиль не найден")}catch(o){b("Ошибка при загрузке профиля")}finally{p(!1)}})()}),[t,a,N,S,n,e]),m||!c?r.jsx("div",{className:Hr.loading,children:"Загрузка профиля..."}):u?r.jsx("div",{className:Hr.error,children:u}):r.jsxs("div",{className:Hr.profileContainer,children:[r.jsx(Jr,{profileUser:c,isOwnProfile:N,isAdmin:S,avatarManager:B,perkManager:P,getActivePerkClass:()=>c?.activePerk?"early_user"===c.activePerk?$r:"sponsor"===c.activePerk?Dr:"admin"===c.activePerk?Tr:Ur:Ur,getActivePerkName:()=>c?.activePerk?"early_user"===c.activePerk?"Ранний пользователь":"sponsor"===c.activePerk?"Спонсор":"admin"===c.activePerk?"Администратор":"Пользователь":"Пользователь"}),S&&!N&&r.jsx(Zr,{profileUser:c,adminEditStatus:v,isAdminEditing:x,banManager:C,setIsAdminEditing:f,setShowBanDialog:j,handleAdminProfileSave:async e=>{_(e),y({type:"success",message:"Профиль пользователя успешно обновлен"}),f(!1),setTimeout((()=>{y({type:"",message:""})}),3e3)}}),N&&r.jsx(Qr,{profileUser:c,successMessage:g,accountManager:I}),B.isAvatarModalOpen&&r.jsx(Kr,{avatars:Wr,adminAvatars:Vr,isAdmin:S||"admin"===c?.activePerk,onSelectAvatar:B.handleAvatarSelect,onClose:()=>B.setIsAvatarModalOpen(!1)}),P.isPerkModalOpen&&r.jsx(ro,{perks:c.perks||["user"],activePerk:c.activePerk||"user",onSelectPerk:P.handlePerkSelect,onClose:()=>P.setIsPerkModalOpen(!1),userId:N?void 0:c.id}),I.isNameModalOpen&&r.jsx(so,{onClose:()=>I.setIsNameModalOpen(!1),onSubmit:I.handleChangeName,initialName:c?.displayName}),I.isPasswordModalOpen&&r.jsx(lo,{onClose:()=>I.setIsPasswordModalOpen(!1),onSubmit:I.handleChangePassword}),w&&r.jsx(co,{onClose:()=>j(!1),onBanUser:C.handleBanUser,loading:C.banLoading,username:c.displayName})]})},bo={async getPosts(e=1,t=10){try{let o=!1;try{const{data:e,error:t}=await Ma.from("posts").select("styling").limit(1);o=!t}catch(a){}const n=(e-1)*t,{data:i,error:s,count:l}=await Ma.from("posts").select("*",{count:"exact"}).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1}).range(n,n+t-1);if(s)throw s;const d=[];for(const e of i)try{const t=await Va.getUserProfile(e.user_id),{data:a,error:r}=await Ma.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),n=a?.perks||[],i=a?.active_perk||n[0]||"user",{count:s}=await Ma.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e.id),{count:l}=await Ma.from("post_comments").select("*",{count:"exact",head:!0}).eq("post_id",e.id);let c=null;e.poll_data&&(c=e.poll_data),d.push({id:e.id,title:e.title||null,content:e.content,image_url:e.image_url,image_urls:e.image_urls||null,created_at:e.created_at,user_id:e.user_id,author:{displayName:t.displayName,avatar:t.avatar,perks:n,activePerk:i,id:e.user_id},styling:o&&e.styling||null,likes_count:s||0,comments_count:l||0,poll_data:c,is_pinned:e.is_pinned||!1})}catch(r){d.push({id:e.id,title:e.title||null,content:e.content,image_url:e.image_url,image_urls:e.image_urls||null,created_at:e.created_at,user_id:e.user_id,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id},styling:null,likes_count:0,comments_count:0,poll_data:null,is_pinned:e.is_pinned||!1})}return{posts:d,totalCount:l||0,hasMore:n+i.length<(l||0),nextPage:n+i.length<(l||0)?e+1:null}}catch(r){throw r}},async createPost(e){try{const{title:a,content:r,imageUrl:o,imageUrls:n,userId:i,poll:s,styling:l,isPinned:d}=e,{data:c,error:_}=await Ma.from("profiles").select("perks, active_perk, email").eq("id",i).single();if(_)throw new Error("Не удалось проверить права пользователя");const m=c?.perks||[],p=c?.active_perk||"";if("igoraor79@gmail.com"!==(c?.email||"")&&!m.includes("admin")&&"admin"!==p)throw new Error("У вас недостаточно прав для создания постов");let u=!1;try{const{data:e,error:t}=await Ma.from("posts").select("image_urls").limit(1);u=!t}catch(t){}const b={title:a||null,content:r,image_url:n&&n.length>0?n[0]:o||null};u&&n&&n.length>0&&(b.image_urls=n),b.user_id=i,b.created_at=(new Date).toISOString(),b.poll_data=s||null,b.styling=l||null,b.is_pinned=d||!1;const{data:g,error:h}=await Ma.from("posts").insert([b]).select();if(h)throw new Error(h.message);if(!g||0===g.length)throw new Error("Не удалось создать пост");const x=await Va.getUserProfile(i);return{...g[0],title:g[0].title||null,image_url:g[0].image_url||null,image_urls:g[0].image_urls||null,author:{id:i,displayName:x.displayName,avatar:x.avatar,activePerk:x.activePerk||"user",id:i},likes_count:0,comments_count:0,poll_data:g[0].poll_data,is_pinned:g[0].is_pinned||!1}}catch(t){throw t}},async getPostById(e){try{let r=!1;try{const{data:e,error:t}=await Ma.from("posts").select("styling").limit(1);r=!t}catch(t){}const{data:o,error:n}=await Ma.from("posts").select("*").eq("id",e).single();if(n)throw n;const i=await Va.getUserProfile(o.user_id),{data:s,error:l}=await Ma.from("profiles").select("perks, active_perk").eq("id",o.user_id).single(),d=s?.perks||[],c=s?.active_perk||d[0]||"user",{count:_}=await Ma.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",o.id),{data:m}=await Ma.from("post_comments").select("*").eq("post_id",o.id).is("parent_id",null).order("created_at",{ascending:!0}),p=[];for(const e of m)try{const t=await Va.getUserProfile(e.user_id),{data:r}=await Ma.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),n=r?.perks||[],i=r?.active_perk||n[0]||"user",{data:s}=await Ma.from("post_comments").select("*").eq("post_id",o.id).eq("parent_id",e.id).order("created_at",{ascending:!0}),l=[];for(const e of s||[])try{const t=await Va.getUserProfile(e.user_id),{data:a}=await Ma.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),r=a?.perks||[],o=a?.active_perk||r[0]||"user";l.push({...e,author:{displayName:t.displayName,avatar:t.avatar,perks:r,activePerk:o,id:e.user_id}})}catch(a){l.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id}})}p.push({...e,author:{displayName:t.displayName,avatar:t.avatar,perks:n,activePerk:i,id:e.user_id},replies:l})}catch(a){p.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id},replies:[]})}return{id:o.id,content:o.content,image_url:o.image_url,image_urls:o.image_urls||null,created_at:o.created_at,user_id:o.user_id,author:{displayName:i.displayName,avatar:i.avatar,perks:d,activePerk:c,id:o.user_id},styling:r&&o.styling||null,likes_count:_||0,comments:p,poll:o.poll_data}}catch(a){throw a}},async toggleLike(e,t){try{const{data:a,error:r}=await Ma.from("post_likes").select("*").eq("post_id",e).eq("user_id",t);if(r)throw r;if(a&&a.length>0){const{error:a}=await Ma.from("post_likes").delete().eq("post_id",e).eq("user_id",t);if(a)throw a;const{count:r}=await Ma.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e);return{liked:!1,likesCount:r||0}}{const{error:a}=await Ma.from("post_likes").insert({post_id:e,user_id:t});if(a)throw a;const{count:r}=await Ma.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e);return{liked:!0,likesCount:r||0}}}catch(a){throw a}},async isLikedByUser(e,t){try{const{data:a,error:r}=await Ma.from("post_likes").select("*").eq("post_id",e).eq("user_id",t);if(r)throw r;return{liked:a&&a.length>0}}catch(a){throw a}},async getLikesCount(e){try{const{count:t,error:a}=await Ma.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e);if(a)throw a;return t||0}catch(t){throw t}},async deletePost(e){try{const{data:t}=await Ma.auth.getSession(),a=t?.session?.user;if(!a)throw new Error("Пользователь не авторизован");const{data:r,error:o}=await Ma.from("profiles").select("perks, active_perk, email").eq("id",a.id).single();if(o)throw new Error("Не удалось проверить права пользователя");const n=r?.perks||[],i=r?.active_perk||"";if("igoraor79@gmail.com"!==(r?.email||"")&&!n.includes("admin")&&"admin"!==i)throw new Error("Только администраторы могут удалять посты");const{error:s}=await Ma.from("post_comments").delete().eq("post_id",e),{error:l}=await Ma.from("post_likes").delete().eq("post_id",e),{error:d}=await Ma.from("poll_votes").delete().eq("post_id",e),{error:c}=await Ma.from("posts").delete().eq("id",e);if(c)throw c;return{success:!0}}catch(t){throw t}},async getPollVoteStatus(e,t){try{const{data:r,error:o}=await Ma.from("posts").select("poll_data").eq("id",e).single();if(o)throw o;if(!r.poll_data)throw new Error("У этого поста нет опроса");try{const{data:a,error:r}=await Ma.from("poll_votes").select("option_index").eq("post_id",e).eq("user_id",t).throwOnError().maybeSingle(),o=await this.getPollResults(e);return{hasVoted:!!a,option:a?a.option_index:null,results:o.results}}catch(a){return{hasVoted:!1,option:null,results:(await this.getPollResults(e)).results}}}catch(r){throw r}},async votePoll(e,t){if(!e||"string"!=typeof e)return{success:!1,message:"Некорректный ID поста"};if("number"!=typeof t||t<0)return{success:!1,message:"Некорректный индекс опции"};try{const{data:o,error:n}=await Ma.auth.getSession();if(n)return{success:!1,message:"Ошибка сессии пользователя"};const i=o?.session?.user;if(!i)return{success:!1,message:"Пользователь не авторизован"};const s=i.id,{data:l,error:d}=await Ma.from("posts").select("poll_data").eq("id",e).single();if(d)return{success:!1,message:"Не удалось получить данные поста"};if(!l.poll_data)return{success:!1,message:"В этом посте нет опроса"};if(!l.poll_data.options||!Array.isArray(l.poll_data.options))return{success:!1,message:"Некорректные данные опроса"};if(t>=l.poll_data.options.length)return{success:!1,message:"Указанный вариант не существует в опросе"};let c=null,_=!0;try{const{data:t,error:a}=await Ma.from("poll_votes").select("id, option_index").eq("post_id",e).eq("user_id",s).maybeSingle();!a&&t&&(c=t,_=!1)}catch(a){}if(c)return{...await this._getPollResults(e,l.poll_data.options,c.option_index),message:"Вы уже проголосовали в этом опросе"};if(_)try{const{error:a}=await Ma.from("poll_votes").insert({post_id:e,user_id:s,option_index:t,created_at:(new Date).toISOString()});if(a){if("42P01"===a.code||a.message?.includes("does not exist")){const e=l.poll_data.options.map(((e,a)=>({option:e,votes:a===t?1:0})));return{success:!0,votedOption:t,results:e,message:"Ваш голос учтен"}}return{success:!1,message:`Ошибка при голосовании: ${a.message}`}}}catch(r){const e=l.poll_data.options.map(((e,a)=>({option:e,votes:a===t?1:0})));return{success:!0,votedOption:t,results:e,message:"Ваш голос учтен"}}return{...await this._getPollResults(e,l.poll_data.options,t),message:"Ваш голос учтен"}}catch(a){return{success:!1,message:a.message||"Произошла ошибка при голосовании",error:a.toString()}}},async _getPollResults(e,t,a){try{let o=[];try{const{data:t,error:a}=await Ma.from("poll_votes").select("option_index").eq("post_id",e);a||(o=t||[])}catch(r){}const n=Array(t.length).fill(0);for(const e of o)e&&"number"==typeof e.option_index&&e.option_index>=0&&e.option_index<t.length&&n[e.option_index]++;const i=t.map(((e,t)=>({option:e,votes:n[t]||0}))),s=i.reduce(((e,t)=>e+t.votes),0);return s>0&&i.forEach((e=>{Math.round(e.votes/s*100)})),{success:!0,votedOption:a,results:i}}catch(r){return{success:!0,votedOption:a,results:t.map((e=>({option:e,votes:0})))}}},async _ensurePollVotesTable(){try{const{data:e,error:t}=await Ma.from("poll_votes").select("id").limit(1);if(!t)return!0;if(t&&"42P01"===t.code){await Ma.rpc("create_poll_votes_table");const{error:e}=await Ma.from("poll_votes").select("id").limit(1);return e&&e.code,!0}return!0}catch(e){return!0}},async getPollResults(e){try{const{data:a,error:r}=await Ma.from("posts").select("poll_data").eq("id",e).single();if(r)throw new Error("Ошибка при получении поста");if(!a.poll_data)throw new Error("У этого поста нет опроса");try{const{data:t,error:r}=await Ma.from("poll_votes").select("option_index, id").eq("post_id",e);if(r)throw r;const o=a.poll_data.options.map(((e,a)=>({option:e,votes:t.filter((e=>e.option_index===a)).length})));return{question:a.poll_data.question,results:o}}catch(t){const e=a.poll_data.options.map((e=>({option:e,votes:0})));return{question:a.poll_data.question,results:e}}}catch(a){throw a}},async pinPost(e){try{const{data:t}=await Ma.auth.getSession(),a=t?.session?.user;if(!a)throw new Error("Пользователь не авторизован");const{data:r,error:o}=await Ma.from("profiles").select("perks, active_perk, email").eq("id",a.id).single();if(o)throw new Error("Не удалось проверить права пользователя");const n=r?.perks||[],i=r?.active_perk||"";if("igoraor79@gmail.com"!==(r?.email||"")&&!n.includes("admin")&&"admin"!==i)throw new Error("Только администраторы могут закреплять посты");const{data:s,error:l}=await Ma.from("posts").select("id").eq("is_pinned",!0).limit(1),d=s&&s.length>0?s[0].id:null;if(!e||"string"!=typeof e||!e.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))throw new Error(`Некорректный ID поста: ${e}`);const{data:c,error:_}=await Ma.rpc("pin_post",{post_id_to_pin:e});if(_){const{error:t}=await Ma.from("posts").update({is_pinned:!1}).eq("is_pinned",!0);if(t)throw t;const{data:a,error:r}=await Ma.from("posts").update({is_pinned:!0}).eq("id",e).select("*");if(r)throw r;return{success:!0,post:a?.[0]||null,previouslyPinnedId:d}}return{success:!0,post:c,previouslyPinnedId:d}}catch(t){throw t}},async unpinPost(e){try{const{data:t}=await Ma.auth.getSession(),a=t?.session?.user;if(!a)throw new Error("Пользователь не авторизован");const{data:r,error:o}=await Ma.from("profiles").select("perks, active_perk, email").eq("id",a.id).single();if(o)throw new Error("Не удалось проверить права пользователя");const n=r?.perks||[],i=r?.active_perk||"";if("igoraor79@gmail.com"!==(r?.email||"")&&!n.includes("admin")&&"admin"!==i)throw new Error("Только администраторы могут открепить посты");const{data:s,error:l}=await Ma.from("posts").update({is_pinned:!1}).eq("id",e).select();if(l)throw l;return{success:!0,post:s?.[0]}}catch(t){throw t}},async updatePost(e,t){try{const{data:o}=await Ma.auth.getSession(),n=o?.session?.user;if(!n)throw new Error("Пользователь не авторизован");const{data:i,error:s}=await Ma.from("profiles").select("perks, active_perk, email").eq("id",n.id).single();if(s)throw new Error("Не удалось проверить права пользователя");const l=i?.perks||[],d=i?.active_perk||"";if("igoraor79@gmail.com"!==(i?.email||"")&&!l.includes("admin")&&"admin"!==d)throw new Error("Только администраторы могут редактировать посты");let c=!1;try{const{data:e,error:t}=await Ma.from("posts").select("image_urls").limit(1);c=!t}catch(a){}const _={updated_at:(new Date).toISOString()};if(void 0!==t.title&&(_.title=t.title||null),void 0!==t.content&&(_.content=t.content),void 0===t.imageUrl&&void 0===t.image_url||(_.image_url=t.imageUrl||t.image_url||null),c&&(void 0!==t.imageUrls||void 0!==t.image_urls)){const e=t.imageUrls||t.image_urls||null;_.image_urls=e,e&&e.length>0&&!_.image_url&&(_.image_url=e[0])}void 0!==t.styling&&(_.styling=t.styling),void 0!==t.poll&&(_.poll_data=t.poll);const{data:m,error:p}=await Ma.from("posts").update(_).eq("id",e).select("*");if(p)throw new Error(`Не удалось обновить пост: ${p.message}`);if(!m||0===m.length)throw new Error("Не удалось найти пост для обновления");try{const e=await Va.getUserProfile(m[0].user_id);return{success:!0,post:{...m[0],author:{id:m[0].user_id,displayName:e.displayName,avatar:e.avatar,activePerk:e.activePerk||"user",id:m[0].user_id}}}}catch(r){return{success:!0,post:m[0]}}}catch(a){throw a}}},go={"хуй":{weight:.9,variations:["xуй","хyй","х*й","х.й","х-й"]},"пизда":{weight:.9,variations:["пи3да","пизд@","писда","п*зда","п1зда"]},"блядь":{weight:.9,variations:["бл*дь","блять","blyad","бл**ь","бля"]},"ебать":{weight:.9,variations:["еб*ть","e6ать","ебaть","eбaть","еб@ть"]},"залупа":{weight:.8,variations:["zалупа","залуп@","залупо"]},"пидор":{weight:.8,variations:["п*дор","пидр","p!dor","пидoр"]},"мудак":{weight:.7,variations:["муд@к","мудaк","мудaчина"]},"хер":{weight:.6,variations:["х*р","xер","хеr"]},"шлюха":{weight:.7,variations:["шл*ха","шлюho","шлюх@"]},"дерьмо":{weight:.5,variations:["д*рьмо","dерьмо","дерьмо"]},"гондон":{weight:.6,variations:["г*ндон","гaндон","гoндон"]},"сука":{weight:.6,variations:["с*ка","сykа","сукa","cyka"]},"жопа":{weight:.4,variations:["ж*па","жoпa","jопа"]},"дурак":{weight:.3,variations:["д*рак","дуpак","дyрак"]},"придурок":{weight:.3,variations:["пр*дурок","придyрок"]},"тупой":{weight:.2,variations:["т*пой","тyпой"]}},ho=["научный","образовательный","медицинский","исторический"],xo=["употребление","херсон","скипидар","хердер","захер","гексахлороциклогексан"],fo=[{pattern:/\.|\*|_|-|#|@|1|3|0|7|4/g,replacement:""},{pattern:/\s+(?=[а-яёa-z])/g,replacement:""},{pattern:/(\w)\1+/g,replacement:"$1"}];function vo(e){if(!e)return"";let t=e.toLowerCase();return fo.forEach((({pattern:e,replacement:a})=>{t=t.replace(e,a)})),t}function yo(e){const t=[e],a=e.replace(/a/g,"а").replace(/e/g,"е").replace(/o/g,"о").replace(/p/g,"р").replace(/x/g,"х").replace(/c/g,"с").replace(/y/g,"у");a!==e&&t.push(a);const r=e.replace(/а/g,"a").replace(/е/g,"e").replace(/о/g,"o").replace(/р/g,"p").replace(/х/g,"x").replace(/с/g,"c").replace(/у/g,"y");return r!==e&&t.push(r),t}function ko(e,t={}){const{threshold:a=.6,safeContext:r=!1}=t;if(!e)return{hasProfanity:!1,score:0,matches:[]};let o=0,n=0;const i=[],s=e.split(/\s+/);let l=a;(r||ho.some((t=>e.includes(t))))&&(l=.85);for(const _ of s){const e=yo(vo(_));for(const t of e)if(!xo.some((e=>t.includes(e)))){for(const[e,a]of Object.entries(go))if(t===e||a.variations.includes(t)){o=Math.max(o,a.weight),n++,i.push({word:_,matchedTo:e,score:a.weight});break}if(0===i.length)for(const[e,a]of Object.entries(go)){const r=.8*a.weight;if(t.length>3&&(t.includes(e)||a.variations.some((e=>t.includes(e))))){o=Math.max(o,r),n++,i.push({word:_,matchedTo:e,score:r});break}}}}const d=o>=l,c=n>0?Math.min(.95,o+.05*Math.min(n,5)):0;return{hasProfanity:d,score:c,matches:i,confidence:d?c>.8?"high":"medium":"low"}}function wo(e,t){if(!e)return"";if("string"!=typeof e)return"";if(function(e){return!!e&&("igoraor79@gmail.com"===e.email||"admin"===e.role||"admin"===e.activePerk||Array.isArray(e.perks)&&e.perks.includes("admin"))}(t))return e;try{return ko(e).hasProfanity?function(e,t={}){if(!e)return"";const{replacementChar:a="*",threshold:r=.6}=t,o=e.split(/(\s+)/),n=[];for(const i of o)/\s+/.test(i)?n.push(i):ko(i,{threshold:r}).hasProfanity?n.push(a.repeat(Math.max(2,i.length))):n.push(i);return n.join("")}(e):e}catch(a){return e}}const jo={async getCommentsByPostId(e){try{const{data:a,error:r}=await Ma.from("post_comments").select("*").eq("post_id",e).is("parent_id",null).order("created_at",{ascending:!1});if(r)throw r;if(!a||0===a.length)return[];const o=[];for(const e of a)try{const a=await Va.getUserProfile(e.user_id),{data:r}=await Ma.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),n=r?.perks||[],i=r?.active_perk||n[0]||"user",{data:s,error:l}=await Ma.from("post_comments").select("*").eq("parent_id",e.id).order("created_at",{ascending:!0});if(l)throw l;const d=[];for(const e of s||[])try{const t=await Va.getUserProfile(e.user_id),{data:a}=await Ma.from("profiles").select("perks, active_perk").eq("id",e.user_id).single(),r=a?.perks||[],o=a?.active_perk||r[0]||"user";d.push({...e,author:{displayName:t.displayName,avatar:t.avatar,perks:r,activePerk:o,id:e.user_id}})}catch(t){d.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id}})}o.push({...e,author:{displayName:a.displayName,avatar:a.avatar,perks:n,activePerk:i,id:e.user_id},replies:d})}catch(t){o.push({...e,author:{displayName:"Пользователь",avatar:null,perks:[],activePerk:"user",id:e.user_id},replies:[]})}return o}catch(t){return[]}},async createComment(e){try{const t=await Va.getUserProfile(e.userId),a=wo(e.content,{id:e.userId,...t}),{data:r,error:o}=await Ma.from("post_comments").insert({content:a,post_id:e.postId,user_id:e.userId,parent_id:null}).select();if(o)throw o;const{data:n}=await Ma.from("profiles").select("perks, active_perk").eq("id",e.userId).single(),i=n?.perks||[],s=n?.active_perk||i[0]||"user";return{...r[0],author:{displayName:t.displayName,avatar:t.avatar,perks:i,activePerk:s,id:e.userId},replies:[]}}catch(t){throw t}},async replyToComment(e){try{const t=await Va.getUserProfile(e.userId),a=wo(e.content,{id:e.userId,...t}),{data:r,error:o}=await Ma.from("post_comments").insert({content:a,post_id:e.postId,user_id:e.userId,parent_id:e.commentId}).select();if(o)throw o;const{data:n}=await Ma.from("profiles").select("perks, active_perk").eq("id",e.userId).single(),i=n?.perks||[],s=n?.active_perk||i[0]||"user";return{...r[0],author:{displayName:t.displayName,avatar:t.avatar,perks:i,activePerk:s,id:e.userId}}}catch(t){throw t}},async getCommentsCount(e){try{const{count:t,error:a}=await Ma.from("post_comments").select("*",{count:"exact",head:!0}).eq("post_id",e);if(a)throw a;return t||0}catch(t){throw t}},async deleteComment(e,t){try{if(t)try{const{data:a,error:r}=await Ma.from("post_comments").select("user_id, post_id").eq("id",e).maybeSingle();if(r);else if(a){const e=a.user_id===t,{data:r,error:o}=await Ma.from("profiles").select("perks, active_perk, email").eq("id",t).maybeSingle(),n=!o&&r&&("igoraor79@gmail.com"===r.email||r.perks&&r.perks.includes("admin")||"admin"===r.active_perk);if(!e&&!n)throw new Error("У вас нет прав для удаления этого комментария")}}catch(a){if("У вас нет прав для удаления этого комментария"===a.message)throw a}try{const{error:t}=await Ma.from("post_comments").delete().eq("parent_id",e)}catch(r){}try{const{data:t,error:a}=await Ma.from("post_comments").delete().eq("id",e).select();if(a)throw a;return{success:!0,message:"Комментарий успешно удален",deletedComment:t&&t.length>0?t[0]:null}}catch(a){throw a}}catch(a){throw a}}},No=O`
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,So=D.div`
  background: var(--bg-highlight, #f5f8fa);
  border-radius: 12px;
  padding: 20px;
  margin: 15px 0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  animation: ${No} 0.3s ease-out;
  border: 1px solid var(--border, #e1e8ed);
  
  [data-theme="dark"] & {
    background: rgba(255, 255, 255, 0.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    border-color: rgba(255, 255, 255, 0.1);
  }
  
  &::before {
    display: none;
  }
`,qo=D.h4`
  color: var(--text-primary);
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  
  &:before {
    content: '';
    display: inline-block;
    width: 16px;
    height: 16px;
    background-color: var(--accent, #1da1f2);
    margin-right: 10px;
    border-radius: 4px;
  }
`,Co=D.div`
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
`,Bo=D.div`
  position: relative;
  cursor: ${e=>e.$disabled?"default":"pointer"};
  opacity: ${e=>e.$disabled?"0.8":"1"};
`,Po=D.div`
  padding: 12px 16px;
  border-radius: 8px;
  border: 1px solid var(--border, #e1e8ed);
  background: ${e=>e.$isSelected?"rgba(29, 161, 242, 0.1)":"transparent"};
  display: flex;
  align-items: center;
  transition: all 0.2s ease;
  
  &:hover {
    background: ${e=>e.$disabled?"transparent":"rgba(29, 161, 242, 0.05)"};
  }
  
  [data-theme="dark"] & {
    border-color: rgba(255, 255, 255, 0.1);
    background: ${e=>e.$isSelected?"rgba(29, 161, 242, 0.2)":"rgba(255, 255, 255, 0.05)"};
    color: var(--text-primary);
    
    &:hover {
      background: ${e=>e.$disabled?"rgba(255, 255, 255, 0.05)":"rgba(29, 161, 242, 0.1)"};
    }
    
    ${e=>e.$isSelected&&"\n      box-shadow: 0 0 5px rgba(29, 161, 242, 0.3);\n      border-color: rgba(29, 161, 242, 0.5);\n    "}
  }
`,Io=D.span`
  color: var(--text-primary) !important;
  font-weight: ${e=>e.$isSelected?"600":"400"};
  font-size: 15px;
  margin-left: ${e=>e.$isVoted?"8px":"0"};
  flex-grow: 1;
  
  // Force color to adapt to theme
  [data-theme="dark"] & {
    color: var(--text-primary) !important;
    ${e=>e.$isSelected&&"\n      text-shadow: 0 0 1px rgba(255, 255, 255, 0.2);\n    "}
  }
`,Ao=D(A)`
  color: var(--accent, #1da1f2);
  margin-right: 10px;
  
  [data-theme="dark"] & {
    color: white;
    filter: drop-shadow(0 0 1px rgba(0, 0, 0, 0.7));
  }
`,zo=D.span`
  color: var(--accent, #1da1f2);
  font-weight: 600;
  font-size: 14px;
  margin-left: auto;
  
  [data-theme="dark"] & {
    color: white;
    text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
  }
`,Eo=D.div`
  width: 100%;
  height: 6px;
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 3px;
  margin-top: 8px;
  overflow: hidden;
  
  [data-theme="dark"] & {
    background-color: rgba(255, 255, 255, 0.05);
  }
`,Oo=D.div`
  height: 100%;
  background: linear-gradient(90deg, var(--accent, #1da1f2) 0%, rgba(29, 161, 242, 0.6) 100%);
  width: ${e=>e.$width}%;
  border-radius: 3px;
  transition: width 0.5s ease-out;
  
  [data-theme="dark"] & {
    background: linear-gradient(90deg, #1d9cf2 0%, #36c3ff 100%);
    box-shadow: 0 0 5px rgba(29, 161, 242, 0.5);
  }
`,Do=D.div`
  text-align: right;
  color: var(--text-secondary);
  font-size: 14px;
  margin-top: 10px;
  font-style: italic;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 5px;
  
  [data-theme="dark"] & {
    color: rgba(255, 255, 255, 0.6);
  }
`,$o=D($)`
  margin-right: 5px;
`,To=O`
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
`;D(o.button)`
  background: none;
  border: none;
  padding: 0;
  font: inherit;
  cursor: pointer;
  outline: inherit;
`;const Uo=D.button`
  display: flex;
  align-items: center;
  gap: 5px;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 14px;
  cursor: pointer;
  padding: 6px 10px;
  border-radius: 4px;
  transition: all 0.2s;
  
  &:hover {
    background-color: rgba(0, 0, 0, 0.05);
    color: var(--accent);
  }
  
  svg {
    font-size: 16px;
    ${e=>e.$isPinned&&"transform: rotate(45deg);"}
  }
  
  [data-theme="dark"] & {
    &:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,Fo=D.span`
  font-size: 12px;
  background-color: #5c6bc0;
  color: white;
  padding: 2px 8px;
  border-radius: 12px;
  margin-right: 8px;
  font-weight: 500;

  [data-theme="dark"] & {
    background-color: #3949ab;
  }
`,Mo=D.div`
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 12px;
  color: var(--accent);
  background-color: var(--accent-light);
  padding: 3px 8px;
  border-radius: 12px;
  font-weight: 500;
  margin-bottom: 5px;
  
  svg {
    font-size: 12px;
    transform: rotate(45deg);
  }
  
  @media (max-width: 576px) {
    font-size: 11px;
    padding: 2px 6px;
  }
  
  /* Для темной темы */
  [data-theme="dark"] & {
    background-color: rgba(29, 161, 242, 0.25);
    color: #ffffff;
    box-shadow: 0 0 5px rgba(29, 161, 242, 0.3);
  }
`,Lo=D.div`
  position: relative;
  border-radius: 16px;
  margin-bottom: 20px;
  
  /* Create an animated gradient border effect */
  &:before {
    content: '';
    position: absolute;
    inset: -3px;
    border-radius: 18px;
    padding: 3px;
    background: linear-gradient(
      45deg, 
      var(--accent, #1da1f2) 0%, 
      rgba(255, 255, 255, 0.3) 50%, 
      var(--accent, #1da1f2) 100%
    );
    -webkit-mask: 
      linear-gradient(#fff 0 0) content-box, 
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    background-size: 300% 300%;
    animation: ${To} 4s ease infinite;
    opacity: 0.8;
    
    [data-theme="dark"] & {
      background: linear-gradient(
        45deg, 
        var(--accent, #1da1f2) 0%, 
        rgba(29, 161, 242, 0.7) 50%, 
        var(--accent, #1da1f2) 100%
      );
      opacity: 0.95;
      box-shadow: 0 0 18px rgba(29, 161, 242, 0.5);
    }
  }
`,Go=D(o.div)`
  overflow: hidden;
`;D(o.div)`
  background-color: rgba(255, 152, 0, 0.1);
  border-left: 4px solid var(--accent, #1da1f2);
  padding: 12px 16px;
  margin: 12px 0;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  overflow: hidden;
  
  svg {
    color: var(--accent, #1da1f2);
    font-size: 20px;
    flex-shrink: 0;
  }
  
  span {
    font-size: 14px;
    color: var(--text-primary);
  }
  
  button {
    background-color: var(--accent, #1da1f2);
    color: white;
    border: none;
    border-radius: 4px;
    padding: 6px 12px;
    font-size: 13px;
    cursor: pointer;
    margin-left: auto;
    transition: all 0.2s;
    
    &:hover {
      background-color: rgba(29, 161, 242, 0.8);
    }
  }
`;const Ro={initial:{opacity:0,height:0,overflow:"hidden"},animate:{opacity:1,height:"auto",transition:{height:{duration:.4,ease:[.04,.62,.23,.98]},opacity:{duration:.3,ease:"easeInOut"}}},exit:{opacity:0,height:0,transition:{height:{duration:.3,ease:[.04,.62,.23,.98]},opacity:{duration:.2,ease:"easeInOut"}}}},Ho=new Map,Wo=e=>{if(!e||"string"!=typeof e)return null;if(Ho.has(e))return Ho.get(e);if(e.includes("res.cloudinary.com/do9t8preg/image/fetch"))return Ho.set(e,e),e;if(e.startsWith("data:image/"))return Ho.set(e,e),e;try{const t=`https://res.cloudinary.com/do9t8preg/image/fetch/f_auto,q_auto:best,dpr_auto,w_auto,c_limit,w_800/${encodeURIComponent(e)}`;return Ho.set(e,t),t}catch(t){return e}},Vo=(e,t=!1)=>{const a=new Date(e),r=new Date,o=Math.floor((r-a)/1e3),n=Math.floor(o/60),i=Math.floor(n/60),s=Math.floor(i/24),l=Math.floor(s/7),d=Math.floor(s/30),c=Math.floor(s/365);return o<60?"только что":n<60?t?`${n}м`:`${n} ${Yo(n,["минуту","минуты","минут"])} назад`:i<24?t?`${i}ч`:`${i} ${Yo(i,["час","часа","часов"])} назад`:s<7?t?`${s}д`:`${s} ${Yo(s,["день","дня","дней"])} назад`:l<4?t?`${l}нед`:`${l} ${Yo(l,["неделю","недели","недель"])} назад`:d<12?t?`${d}мес`:`${d} ${Yo(d,["месяц","месяца","месяцев"])} назад`:t?`${c}г`:`${c} ${Yo(c,["год","года","лет"])} назад`},Yo=(e,t)=>t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]],Jo=e=>{if(!e)return!1;let t=e.replace("#","");return 3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),(.299*parseInt(t.substring(0,2),16)+.587*parseInt(t.substring(2,4),16)+.114*parseInt(t.substring(4,6),16))/255<.5},Xo=({poll:e,postId:t,onVote:a,hasVoted:o,votedOption:n,results:s,isAdmin:l,user:d})=>{const{isAuthenticated:c}=br(),[_,m]=i.useState(!1),[p,u]=i.useState(null),[b,g]=i.useState(!1),[h,x]=i.useState(!1),f=e.optionsColor||e.styling&&e.styling.optionsColor||null,v=e.styling&&e.styling.fontFamily||"inherit",y=i.useMemo((()=>s&&Array.isArray(s)?s.reduce(((e,t)=>e+(t.votes||0)),0):0),[s]),k=i.useMemo((()=>{if(!s||!Array.isArray(s)||0===y)return e.options.map((()=>0));const t=s.map((e=>e.votes/y*100)),a=t.map((e=>Math.floor(e))),r=100-a.reduce(((e,t)=>e+t),0),o=t.map(((e,t)=>t));o.sort(((e,a)=>t[a]-Math.floor(t[a])-(t[e]-Math.floor(t[e]))));const n=[...a];for(let e=0;e<r;e++)n[o[e%o.length]]++;return n}),[s,y,e.options.length]),w=o||l;return r.jsxs(So,{children:[!e.hideQuestion&&r.jsx(qo,{children:e.question}),p&&r.jsx("div",{style:{padding:"10px",margin:"10px 0",backgroundColor:"rgba(255, 0, 0, 0.1)",borderLeft:"3px solid red",color:"var(--text-primary)",fontSize:"14px"},children:p}),r.jsx(Co,{children:e.options.map(((e,t)=>{let i;s&&Array.isArray(s)?(i=s.find((t=>t.option===e)),!i&&s[t]&&(i=s[t]),i||(i={option:e,votes:0})):i={option:e,votes:0};const l=w&&k[t]||0,d=n===t;return r.jsxs(Bo,{onClick:()=>o?null:(async e=>{if(c){if(!o&&!_){m(!0),u(null);try{await a(e)}catch(t){u(t.message||"Ошибка при голосовании. Пожалуйста, попробуйте позже."),setTimeout((()=>u(null)),5e3)}finally{m(!1)}}}else x(!0)})(t),$disabled:o||_,children:[r.jsxs(Po,{$isSelected:d,$disabled:o||_,children:[_&&t===n&&r.jsx("span",{style:{marginRight:"8px"},children:"⏳"}),d&&r.jsx(Ao,{}),r.jsx(Io,{$isSelected:d,$isVoted:o,style:{color:f||"inherit",fontFamily:v},children:e}),w&&r.jsxs(zo,{children:[l,"%"]})]}),w&&r.jsx(Eo,{children:r.jsx(Oo,{$width:l})})]},`option-${t}-${e}`)}))}),h&&r.jsx(Br,{type:"info",message:"Войдите, чтобы проголосовать",show:!!h,onClose:()=>x(!1)}),r.jsxs(Do,{children:[l&&!o&&r.jsx(Fo,{children:"Просмотр администратора"}),r.jsx($o,{}),y," ",Yo(y,["голос","голоса","голосов"])]})]})},Zo=D(o.div)`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(135deg, rgba(33, 33, 38, 0.85) 0%, rgba(68, 68, 77, 0.85) 100%);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  perspective: 1000px;
  box-sizing: border-box;
  overscroll-behavior: contain;
  transform: translateZ(0);
  isolation: isolate;
  padding: 20px;
`,Qo=D(o.div)`
  background: var(--bg-secondary);
  border-radius: 12px;
  padding: 24px;
  width: 100%;
  max-width: 380px;
  box-shadow: var(--modal-shadow, 0 8px 30px rgba(0, 0, 0, 0.2));
  position: relative;
  border: 1px solid var(--modal-border, var(--border));
  backdrop-filter: blur(10px);
  transform-style: preserve-3d;
  margin: auto;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
`,Ko=D.div`
  color: var(--text-secondary);
  margin-bottom: 24px;
  overflow-y: auto;
  max-height: calc(90vh - 150px);
`,en=D.div`
  display: flex;
  align-items: center;
  margin-bottom: 16px;
`,tn=D.h3`
  color: var(--text-primary);
  font-size: 18px;
  margin: 0;
  padding: 0;
  display: flex;
  align-items: center;
  gap: 10px;
  
  svg {
    color: var(--error);
  }
`,an=D.button`
  position: absolute;
  top: 16px;
  right: 16px;
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 4px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  
  &:hover {
    background: var(--bg-highlight);
  }
`,rn=D.div`
  display: flex;
  justify-content: flex-end;
  gap: 12px;
`,on=D.button`
  background: var(--bg-highlight);
  color: var(--text-primary);
  border: 1px solid var(--border);
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 6px;
  
  &:hover {
    background: var(--background-color);
  }
`,nn=D.button`
  background: var(--error);
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 6px;
  
  &:hover {
    opacity: 0.9;
  }
`,sn={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.3}}},ln={hidden:{opacity:0,scale:.95,y:-20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:300}},exit:{opacity:0,scale:.95,y:-20,transition:{duration:.3}}},dn=e=>{const t=a.c(48),{isOpen:o,onClose:s,onConfirm:d,title:c,message:p,confirmText:u,cancelText:b,isDanger:g}=e,h=void 0===c?"Подтверждение":c,x=void 0===p?"Вы уверены?":p,f=void 0===u?"Подтвердить":u,v=void 0===b?"Отмена":b,y=void 0===g||g;let k;t[0]!==s?(k=e=>{e.target===e.currentTarget&&s()},t[0]=s,t[1]=k):k=t[1];const w=k;let j,N,S;if(t[2]!==o?(j=()=>{if(o){const e=window.scrollY;return document.documentElement.style.setProperty("--scroll-y",`${e}px`),document.body.classList.add("modal-open"),document.body.style.top=`-${e}px`,document.body.style.position="fixed",document.body.style.width="100%",()=>{document.body.classList.remove("modal-open"),document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,e)}}},N=[o],t[2]=o,t[3]=j,t[4]=N):(j=t[3],N=t[4]),i.useEffect(j,N),!o)return null;if(t[5]!==v||t[6]!==f||t[7]!==w||t[8]!==y||t[9]!==x||t[10]!==s||t[11]!==d||t[12]!==h){let e,a,o,i,c,p,u,b;t[14]!==y?(e=y&&r.jsx(_,{size:20}),t[14]=y,t[15]=e):e=t[15],t[16]!==e||t[17]!==h?(a=r.jsxs(tn,{children:[e,h]}),t[16]=e,t[17]=h,t[18]=a):a=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(m,{size:18}),t[19]=o):o=t[19],t[20]!==s?(i=r.jsx(an,{onClick:s,children:o}),t[20]=s,t[21]=i):i=t[21],t[22]!==a||t[23]!==i?(c=r.jsxs(en,{children:[a,i]}),t[22]=a,t[23]=i,t[24]=c):c=t[24],t[25]!==x?(p=r.jsx(Ko,{children:x}),t[25]=x,t[26]=p):p=t[26],t[27]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(m,{size:16}),t[27]=u):u=t[27],t[28]!==v||t[29]!==s?(b=r.jsxs(on,{onClick:s,children:[u,v]}),t[28]=v,t[29]=s,t[30]=b):b=t[30];const g=y?"var(--error)":"var(--accent)";let k,j,N,q,C,B;t[31]!==g?(k={background:g},t[31]=g,t[32]=k):k=t[32],t[33]===Symbol.for("react.memo_cache_sentinel")?(j=r.jsx(A,{size:16}),t[33]=j):j=t[33],t[34]!==f||t[35]!==d||t[36]!==k?(N=r.jsxs(nn,{onClick:d,style:k,children:[j,f]}),t[34]=f,t[35]=d,t[36]=k,t[37]=N):N=t[37],t[38]!==b||t[39]!==N?(q=r.jsxs(rn,{children:[b,N]}),t[38]=b,t[39]=N,t[40]=q):q=t[40],t[41]!==c||t[42]!==p||t[43]!==q?(C=r.jsxs(Qo,{variants:ln,initial:"hidden",animate:"visible",exit:"exit",onClick:cn,children:[c,p,q]}),t[41]=c,t[42]=p,t[43]=q,t[44]=C):C=t[44],t[45]!==w||t[46]!==C?(B=r.jsx(n,{mode:"wait",children:r.jsx(Zo,{variants:sn,initial:"hidden",animate:"visible",exit:"exit",onClick:w,children:C})}),t[45]=w,t[46]=C,t[47]=B):B=t[47],S=l.createPortal(B,document.getElementById("modal-root")||document.body),t[5]=v,t[6]=f,t[7]=w,t[8]=y,t[9]=x,t[10]=s,t[11]=d,t[12]=h,t[13]=S}else S=t[13];return S};function cn(e){return e.stopPropagation()}const _n={postsContainer:"_postsContainer_1m97j_2",postsHeader:"_postsHeader_1m97j_9",headerButtons:"_headerButtons_1m97j_34",refreshButton:"_refreshButton_1m97j_46",rulesButton:"_rulesButton_1m97j_46",postsList:"_postsList_1m97j_131",loading:"_loading_1m97j_139",spin:"_spin_1m97j_1",errorMessage:"_errorMessage_1m97j_162",noPosts:"_noPosts_1m97j_178",notAuthenticatedMessage:"_notAuthenticatedMessage_1m97j_193",createPostContainer:"_createPostContainer_1m97j_210",createPostTitle:"_createPostTitle_1m97j_219",createPostForm:"_createPostForm_1m97j_232",contentInput:"_contentInput_1m97j_238",imageUrlInput:"_imageUrlInput_1m97j_258",pollContainer:"_pollContainer_1m97j_275",pollQuestionInput:"_pollQuestionInput_1m97j_306",pollOptions:"_pollOptions_1m97j_332",sectionLabel:"_sectionLabel_1m97j_338",inputWithIcon:"_inputWithIcon_1m97j_354",pollOptionInputWrapper:"_pollOptionInputWrapper_1m97j_369",pollOptionInput:"_pollOptionInput_1m97j_369",removeOptionButton:"_removeOptionButton_1m97j_401",addOptionButton:"_addOptionButton_1m97j_429",formOptions:"_formOptions_1m97j_457",formToggles:"_formToggles_1m97j_464",optionToggle:"_optionToggle_1m97j_470",submitButton:"_submitButton_1m97j_498",postItem:"_postItem_1m97j_523",pinnedPost:"_pinnedPost_1m97j_546",postHeader:"_postHeader_1m97j_575",authorInfo:"_authorInfo_1m97j_584",avatar:"_avatar_1m97j_598",authorName:"_authorName_1m97j_602",postDate:"_postDate_1m97j_619",postContent:"_postContent_1m97j_625",darkTextConversion:"_darkTextConversion_1m97j_633",postImage:"_postImage_1m97j_651",postPoll:"_postPoll_1m97j_685",pollTitle:"_pollTitle_1m97j_696",pollOption:"_pollOption_1m97j_332",pollResults:"_pollResults_1m97j_737",pollResultOption:"_pollResultOption_1m97j_740",pollOptionText:"_pollOptionText_1m97j_743",pollOptionVotes:"_pollOptionVotes_1m97j_749",pollProgressBar:"_pollProgressBar_1m97j_752",pollProgress:"_pollProgress_1m97j_752",pollVotersCount:"_pollVotersCount_1m97j_765",postActions:"_postActions_1m97j_772",actionButtons:"_actionButtons_1m97j_781",likeButton:"_likeButton_1m97j_807",liked:"_liked_1m97j_813",likeCount:"_likeCount_1m97j_824",commentButton:"_commentButton_1m97j_828",deleteButton:"_deleteButton_1m97j_847",commentsSection:"_commentsSection_1m97j_881",commentsHeading:"_commentsHeading_1m97j_887",loadingComments:"_loadingComments_1m97j_897",noComments:"_noComments_1m97j_909",commentForm:"_commentForm_1m97j_918",commentItem:"_commentItem_1m97j_997",commentReply:"_commentReply_1m97j_1005",commentHeader:"_commentHeader_1m97j_1015",commentAuthorAvatar:"_commentAuthorAvatar_1m97j_1021",commentAuthorInfo:"_commentAuthorInfo_1m97j_1034",commentAuthor:"_commentAuthor_1m97j_1021",commentContent:"_commentContent_1m97j_1048",commentDate:"_commentDate_1m97j_1057",commentActions:"_commentActions_1m97j_1069",replyButton:"_replyButton_1m97j_1077",deleteCommentButton:"_deleteCommentButton_1m97j_1078",repliesContainer:"_repliesContainer_1m97j_1116",replyForm:"_replyForm_1m97j_1120",replyFormActions:"_replyFormActions_1m97j_1144",cancelReplyButton:"_cancelReplyButton_1m97j_1166",submitReplyButton:"_submitReplyButton_1m97j_1174",postTitle:"_postTitle_1m97j_1227",stylingOptions:"_stylingOptions_1m97j_1247",stylingTitle:"_stylingTitle_1m97j_1273",stylingGroup:"_stylingGroup_1m97j_1286",colorSelector:"_colorSelector_1m97j_1297",colorOption:"_colorOption_1m97j_1304",active:"_active_1m97j_1315",fontSelector:"_fontSelector_1m97j_1320",colorPickerContainer:"_colorPickerContainer_1m97j_1385",colorPreview:"_colorPreview_1m97j_1390",dropletIcon:"_dropletIcon_1m97j_1412",colorPickerPopup:"_colorPickerPopup_1m97j_1418","react-colorful":"_react-colorful_1m97j_1424",colorPickerCover:"_colorPickerCover_1m97j_1432",colorNote:"_colorNote_1m97j_1441",likeAnimation:"_likeAnimation_1m97j_1455",likePulse:"_likePulse_1m97j_1",authPrompt:"_authPrompt_1m97j_1470",loginButton:"_loginButton_1m97j_1482",titleInput:"_titleInput_1m97j_1496",editButton:"_editButton_1m97j_1536",adminActions:"_adminActions_1m97j_1566",imageContainer:"_imageContainer_1m97j_1588",imageLoading:"_imageLoading_1m97j_1595",imageError:"_imageError_1m97j_1611",editPostForm:"_editPostForm_1m97j_1627",cancelEditButton:"_cancelEditButton_1m97j_1647",imagePreview:"_imagePreview_1m97j_1687",pulse:"_pulse_1m97j_1",loadMoreContainer:"_loadMoreContainer_1m97j_1733",loadMoreSpinner:"_loadMoreSpinner_1m97j_1743",noMorePosts:"_noMorePosts_1m97j_1766",imageUrlInputContainer:"_imageUrlInputContainer_1m97j_1789",addImageButton:"_addImageButton_1m97j_1795",imageGalleryContainer:"_imageGalleryContainer_1m97j_1815",imagePreviewItem:"_imagePreviewItem_1m97j_1832",removeImageButton:"_removeImageButton_1m97j_1849",errorNote:"_errorNote_1m97j_1871",lightboxOverlay:"_lightboxOverlay_1m97j_1882",lightboxContainer:"_lightboxContainer_1m97j_1886",lightboxImage:"_lightboxImage_1m97j_1890",lightboxCloseButton:"_lightboxCloseButton_1m97j_1894"};function mn({comment:e,onReply:t,onDelete:a}){const[o,n]=i.useState(!1),[s,l]=i.useState(""),[c,_]=i.useState(!1),{user:p,isAuthenticated:u}=br(),[g,h]=i.useState(!1),[x,f]=i.useState(!1),[v,y]=i.useState({}),[k,w]=i.useState(!1),[j,N]=i.useState(null),[S,q]=i.useState(null),[C,B]=i.useState(!1),I=i.useRef(null),[A,z]=i.useState(""),[E,O]=i.useState(!1),D=u&&p&&("igoraor79@gmail.com"===p.email||p.perks?.includes("admin")||"admin"===p.activePerk),$=p&&p.id===e.user_id,M=D||$;i.useEffect((()=>{const e=e=>{I.current&&!I.current.contains(e.target)&&B(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const L=e=>{y((t=>({...t,[e]:!1})))};return r.jsxs("div",{className:_n.commentItem,children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"\n  .commentActions {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n    margin-top: 8px;\n  }\n  \n  .replyButton,\n  .deleteCommentButton {\n    display: flex;\n    align-items: center;\n    gap: 5px;\n    font-size: 13px;\n    background: transparent;\n    border: none;\n    color: var(--text-secondary);\n    cursor: pointer;\n    padding: 4px 8px;\n    border-radius: 4px;\n    transition: all 0.2s;\n  }\n  \n  .replyButton:hover,\n  .deleteCommentButton:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n  }\n  \n  .deleteCommentButton {\n    color: #e74c3c;\n  }\n  \n  .commentItem {\n    position: relative;\n    overflow: hidden;\n  }\n  \n  @media (max-width: 576px) {\n    .commentActions {\n      width: 100%;\n    }\n    \n    .replyButton,\n    .deleteCommentButton {\n      font-size: 12px;\n      padding: 3px 6px;\n    }\n  }\n"}}),r.jsx("style",{dangerouslySetInnerHTML:{__html:"\n  @media (max-width: 576px) {\n    .commentItem {\n      position: relative;\n    }\n    \n    .commentHeader {\n      padding-right: 30px;\n    }\n    \n    .mobileOnly {\n      display: block;\n    }\n    \n    .desktopOnly {\n      display: none;\n    }\n  }\n  \n  @media (min-width: 577px) {\n    .mobileOnly {\n      display: none;\n    }\n    \n    .desktopOnly {\n      display: flex;\n    }\n  }\n"}}),r.jsx("style",{dangerouslySetInnerHTML:{__html:"\n  .commentItem {\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .commentSwipeActions {\n    position: absolute;\n    right: -100px;\n    top: 0;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    transition: transform 0.3s ease;\n    touch-action: pan-y;\n  }\n  \n  .commentActionButton {\n    width: 50px;\n    height: 50px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    margin-right: 10px;\n    color: white;\n    cursor: pointer;\n    transition: background-color 0.2s, transform 0.2s;\n  }\n  \n  .replyAction {\n    background-color: var(--accent, #1da1f2);\n  }\n  \n  .deleteAction {\n    background-color: var(--error, #e74c3c);\n  }\n  \n  .commentContent {\n    transition: transform 0.3s ease;\n  }\n  \n  .commentInner {\n    position: relative;\n    width: 100%;\n    padding-right: 10px;\n    transition: transform 0.3s ease;\n  }\n  \n  @media (max-width: 576px) {\n    .commentInner.swiped {\n      transform: translateX(-100px);\n    }\n    \n    .commentActions.mobileOnly {\n      position: absolute;\n      right: 10px;\n      top: 10px;\n    }\n  }\n"}}),r.jsxs("div",{ref:I,className:"commentInner "+(C?"swiped":""),onTouchStart:e=>{N(e.targetTouches[0].clientX)},onTouchMove:e=>{if(q(e.targetTouches[0].clientX),j&&S){const e=j-S;if(e>20&&e<120){const t=-e;I.current&&(I.current.style.transform=`translateX(${t}px)`)}}},onTouchEnd:()=>{j&&S&&(j-S>70?B(!0):(B(!1),I.current&&(I.current.style.transform="translateX(0)")),N(null),q(null))},children:[r.jsxs("div",{className:_n.commentHeader,children:[r.jsx("div",{className:_n.commentAuthorAvatar,children:r.jsx(Fr,{src:e.author.avatar,alt:e.author.displayName,className:_n.avatar})}),r.jsx("div",{className:_n.commentAuthorInfo,children:r.jsx(d,{to:`/profile/${e.user_id}`,className:_n.commentAuthor,children:r.jsx("span",{className:"early_user"===e.author.activePerk?$r:"sponsor"===e.author.activePerk?Dr:"admin"===e.author.activePerk?Tr:Ur,style:{display:"inline-block",margin:0,padding:0},children:e.author.displayName})})})]}),r.jsx("div",{className:_n.commentContent,children:e.content}),r.jsxs("div",{className:_n.commentDate,children:[r.jsx(b,{})," ",Vo(e.created_at)]}),r.jsxs("div",{className:_n.commentActions,children:[r.jsxs("button",{className:_n.replyButton,onClick:()=>{u?(n((e=>!e)),o||setTimeout((()=>{const e=document.querySelectorAll(`.${_n.replyForm} textarea`);e.length>0&&e[e.length-1].focus()}),100)):w("reply")},children:[r.jsx(T,{})," Ответить"]}),M&&r.jsxs("button",{className:_n.deleteCommentButton,onClick:()=>{M&&f(!0)},disabled:g,children:[r.jsx(U,{})," ",g?"Удаление...":"Удалить"]})]})]}),r.jsx(dn,{isOpen:x,onClose:()=>{f(!1)},onConfirm:async()=>{if(M)try{h(!0);const t=await jo.deleteComment(e.id,p.id);if(!t||!t.success)throw new Error("Не удалось удалить комментарий. Попробуйте позже.");a(e.id),f(!1)}catch(t){z(t.message||"Неизвестная ошибка"),O(!0),f(!1)}finally{h(!1)}},title:"Удаление комментария",message:"Вы уверены, что хотите удалить этот комментарий? Это действие нельзя отменить.",confirmText:"Удалить",cancelText:"Отмена",isDanger:!0}),r.jsx(dn,{isOpen:E,onClose:()=>O(!1),onConfirm:()=>O(!1),title:"Ошибка удаления",message:`Не удалось удалить комментарий: ${A}`,confirmText:"Понятно",hideCancel:!0}),o&&r.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),s.trim())try{_(!0);const a=wo(s,p);await t(e.id,a),l(""),n(!1)}catch(r){}finally{_(!1)}},className:_n.replyForm,children:[r.jsx("textarea",{value:s,onChange:e=>l(e.target.value),placeholder:"Напишите ответ...",disabled:c}),r.jsxs("div",{className:_n.replyFormActions,children:[r.jsxs("button",{type:"button",onClick:()=>{n(!1),l("")},className:_n.cancelReplyButton,disabled:c,children:[r.jsx(m,{})," Отмена"]}),r.jsx("button",{type:"submit",className:_n.submitReplyButton,disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx(P,{})," Отправка..."]}):r.jsxs(r.Fragment,{children:[r.jsx(F,{})," Ответить"]})})]})]}),e.replies&&e.replies.length>0&&r.jsx("div",{className:_n.repliesContainer,children:e.replies.map((e=>{const t=p&&p.id===e.user_id,o=D||t;return r.jsxs("div",{className:`${_n.commentItem} ${_n.commentReply}`,children:[r.jsxs("div",{className:_n.commentHeader,children:[r.jsx("div",{className:_n.commentAuthorAvatar,children:r.jsx(Fr,{src:e.author.avatar,alt:e.author.displayName,className:_n.avatar})}),r.jsx("div",{className:_n.commentAuthorInfo,children:r.jsx(d,{to:`/profile/${e.user_id}`,className:_n.commentAuthor,children:r.jsx("span",{className:"early_user"===e.author.activePerk?$r:"sponsor"===e.author.activePerk?Dr:"admin"===e.author.activePerk?Tr:Ur,style:{display:"inline-block",margin:0,padding:0},children:e.author.displayName})})})]}),r.jsx("div",{className:_n.commentContent,children:e.content}),r.jsxs("div",{className:_n.commentDate,children:[r.jsx(b,{})," ",Vo(e.created_at)]}),o&&r.jsx("div",{className:_n.commentActions,children:r.jsxs("button",{className:_n.deleteCommentButton,onClick:()=>y({...v,[e.id]:!0}),children:[r.jsx(U,{})," Удалить"]})}),r.jsx(dn,{isOpen:v[e.id]||!1,onClose:()=>L(e.id),onConfirm:()=>(async(e,t)=>{const r=p&&p.id===t;if(D||r)try{const t=await jo.deleteComment(e,p?.id);if(!t||!t.success)throw new Error("Не удалось удалить ответ. Попробуйте позже.");a(e),L(e)}catch(o){z(o.message||"Неизвестная ошибка"),O(!0),L(e)}})(e.id,e.user_id),title:"Удаление ответа",message:"Вы уверены, что хотите удалить этот ответ? Это действие нельзя отменить.",confirmText:"Удалить",cancelText:"Отмена",isDanger:!0})]},e.id)}))}),k&&r.jsx(Br,{type:"info",message:"Войдите, чтобы ответить на комментарий",show:!!k,onClose:()=>w(!1)})]})}D.div`
  position: relative;
  display: inline-block;
`,D.button`
  background: none;
  border: none;
  color: var(--text-secondary);
  padding: 6px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  
  &:hover {
    background-color: var(--bg-hover);
  }
  
  svg {
    font-size: 18px;
  }
`,D(o.div)`
  position: absolute;
  top: 100%;
  right: 0;
  background: var(--bg-secondary);
  border-radius: 8px;
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);
  min-width: 160px;
  z-index: 100;
  overflow: hidden;
  
  [data-theme="dark"] & {
    background: var(--bg-tertiary);
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3);
  }
`,D.button`
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  text-align: left;
  padding: 10px 16px;
  background: none;
  border: none;
  color: ${e=>e.$danger?"var(--error)":"var(--text-primary)"};
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.2s;
  
  &:hover {
    background-color: ${e=>e.$danger?"rgba(231, 76, 60, 0.1)":"var(--bg-hover)"};
  }
  
  svg {
    font-size: 16px;
  }
`;const pn=e=>{const t=a.c(30),{src:o,alt:n,className:s,style:l}=e,[d,c]=i.useState(!0),[_,m]=i.useState(!1),[p,u]=i.useState(!1);let b,g;t[0]!==o?(g=Wo(o),t[0]=o,t[1]=g):g=t[1];const h=g||o;let x;t[2]!==o||t[3]!==h?(x={displaySrc:h,originalSrc:o},t[2]=o,t[3]=h,t[4]=x):x=t[4],b=x;const{displaySrc:f,originalSrc:v}=b;let y;t[5]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{c(!1),m(!1)},t[5]=y):y=t[5];const k=y;let w;t[6]!==f||t[7]!==v||t[8]!==p?(w=()=>{p||f===v?(c(!1),m(!0)):u(!0)},t[6]=f,t[7]=v,t[8]=p,t[9]=w):w=t[9];const j=w;let N,S;t[10]!==d?(N=()=>{const e=setTimeout((()=>{d&&c(!1)}),5e3);return()=>clearTimeout(e)},t[10]=d,t[11]=N):N=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(S=[],t[12]=S):S=t[12],i.useEffect(N,S);const q=`${s||""} ${_n.imageContainer}`;let C,B;t[13]!==d?(C=d&&r.jsx("div",{className:_n.imageLoading,children:"Загрузка изображения..."}),t[13]=d,t[14]=C):C=t[14],t[15]!==_?(B=_&&r.jsx("div",{className:_n.imageError,children:"Ошибка загрузки"}),t[15]=_,t[16]=B):B=t[16];const P=p?v:f,I=d?"hidden":"visible";let A,z,E;return t[17]!==I?(A={width:"100%",height:"auto",borderRadius:"8px",visibility:I},t[17]=I,t[18]=A):A=t[18],t[19]!==n||t[20]!==j||t[21]!==P||t[22]!==A?(z=r.jsx("img",{src:P,alt:n,style:A,onLoad:k,onError:j,loading:"lazy"}),t[19]=n,t[20]=j,t[21]=P,t[22]=A,t[23]=z):z=t[23],t[24]!==l||t[25]!==C||t[26]!==B||t[27]!==z||t[28]!==q?(E=r.jsxs("div",{className:q,style:l,children:[C,B,z]}),t[24]=l,t[25]=C,t[26]=B,t[27]=z,t[28]=q,t[29]=E):E=t[29],E},un=e=>{const t=a.c(14),{imageUrl:o,onClose:n}=e;let s,l,d,c,_,m,p;return t[0]!==n?(s=()=>{const e=e=>{"Escape"===e.key&&n()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},l=[n],t[0]=n,t[1]=s,t[2]=l):(s=t[1],l=t[2]),i.useEffect(s,l),t[3]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(G,{}),t[3]=d):d=t[3],t[4]!==n?(c=r.jsx("button",{className:_n.lightboxCloseButton,onClick:n,children:d}),t[4]=n,t[5]=c):c=t[5],t[6]!==o?(_=r.jsx("img",{src:o,alt:"Увеличенное изображение",className:_n.lightboxImage,onClick:gn}),t[6]=o,t[7]=_):_=t[7],t[8]!==c||t[9]!==_?(m=r.jsxs("div",{className:_n.lightboxContainer,children:[c,_]}),t[8]=c,t[9]=_,t[10]=m):m=t[10],t[11]!==n||t[12]!==m?(p=r.jsx("div",{className:_n.lightboxOverlay,onClick:n,children:m}),t[11]=n,t[12]=m,t[13]=p):p=t[13],p},bn=e=>{const t=a.c(97),{post:o,onSave:n,onCancel:s,isSubmitting:l}=e,[d,c]=i.useState(o.title||""),[_,p]=i.useState(o.content||""),[u,b]=i.useState("");let g;t[0]!==o.image_url||t[1]!==o.image_urls?(g=o.image_urls||(o.image_url?[o.image_url]:[]),t[0]=o.image_url,t[1]=o.image_urls,t[2]=g):g=t[2];const[x,f]=i.useState(g);let v;t[3]===Symbol.for("react.memo_cache_sentinel")?(v=[],t[3]=v):v=t[3];const[y,k]=i.useState(v);let w;t[4]===Symbol.for("react.memo_cache_sentinel")?(w={},t[4]=w):w=t[4];const[j,N]=i.useState(w);let S;t[5]===Symbol.for("react.memo_cache_sentinel")?(S={},t[5]=S):S=t[5];const[q,C]=i.useState(S),[B,I]=i.useState(""),[A,z]=i.useState(!1),[E,O]=i.useState(""),[D,$]=i.useState(!0);let T,U,G,R,H;t[6]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{const e=()=>{$(window.innerWidth>=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},U=[],t[6]=T,t[7]=U):(T=t[6],U=t[7]),i.useEffect(T,U),t[8]!==x?(G=()=>{const e=x.map(hn);k(e);const t={};x.forEach(((e,a)=>{t[a]=!0})),N(t);const a=setTimeout((()=>{const e={};x.forEach(((t,a)=>{e[a]=!1})),N(e)}),5e3);return()=>clearTimeout(a)},R=[x],t[8]=x,t[9]=G,t[10]=R):(G=t[9],R=t[10]),i.useEffect(G,R),t[11]===Symbol.for("react.memo_cache_sentinel")?(H=e=>{N((t=>({...t,[e]:!1})))},t[11]=H):H=t[11];const W=H;let V;t[12]===Symbol.for("react.memo_cache_sentinel")?(V=e=>{N((t=>({...t,[e]:!1}))),C((t=>({...t,[e]:"Ошибка загрузки изображения. Проверьте URL."})))},t[12]=V):V=t[12];const Y=V;let J;t[13]!==u||t[14]!==q||t[15]!==x?(J=e=>{if(e.preventDefault(),u.trim()){if(x.length>=5)return void C(xn);if(f([...x,u.trim()]),b(""),q.maxImagesReached){const e={...q};delete e.maxImagesReached,C(e)}}},t[13]=u,t[14]=q,t[15]=x,t[16]=J):J=t[16];const X=J;let Z,Q,K,ee,te,ae,re,oe,ne,ie,se,le,de,ce,_e,me,pe;if(t[17]!==_||t[18]!==u||t[19]!==q||t[20]!==X||t[21]!==j||t[22]!==x||t[23]!==D||t[24]!==l||t[25]!==n||t[26]!==y||t[27]!==d){const e=e=>{const t=[...x];t.splice(e,1),f(t);const a={...q};delete a[e],a.maxImagesReached&&delete a.maxImagesReached,C(a);const r={...j};delete r[e],N(r)};let a;t[37]!==D?(a=e=>{D&&(O(e),z(!0))},t[37]=D,t[38]=a):a=t[38];const o=a;let i,s,g,h,v;t[39]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{z(!1),O("")},t[39]=i):i=t[39],Z=i,t[40]!==_||t[41]!==x||t[42]!==n||t[43]!==d?(s=e=>{if(e.preventDefault(),!_.trim())return void I("Текст поста не может быть пустым");const t={title:d.trim()||null,content:_.trim(),imageUrls:x.length>0?x:null,image_url:1===x.length?x[0]:null};n(t)},t[40]=_,t[41]=x,t[42]=n,t[43]=d,t[44]=s):s=t[44],ne=_n.editPostFormContainer,Q=s,K=_n.editPostForm,t[45]===Symbol.for("react.memo_cache_sentinel")?(g=e=>c(e.target.value),t[45]=g):g=t[45],t[46]!==l||t[47]!==d?(ee=r.jsx("input",{type:"text",className:_n.titleInput,value:d,onChange:g,placeholder:"Заголовок (необязательно)",disabled:l}),t[46]=l,t[47]=d,t[48]=ee):ee=t[48],t[49]===Symbol.for("react.memo_cache_sentinel")?(h=e=>p(e.target.value),t[49]=h):h=t[49],t[50]!==_||t[51]!==l?(te=r.jsx("textarea",{className:_n.contentInput,value:_,onChange:h,placeholder:"Текст поста",disabled:l,required:!0}),t[50]=_,t[51]=l,t[52]=te):te=t[52],t[53]===Symbol.for("react.memo_cache_sentinel")?(v=e=>b(e.target.value),t[53]=v):v=t[53];const k=l||x.length>=5;let w;t[54]!==u||t[55]!==k?(w=r.jsx("input",{type:"text",className:_n.imageUrlInput,value:u,onChange:v,placeholder:"URL изображения (необязательно)",disabled:k}),t[54]=u,t[55]=k,t[56]=w):w=t[56];const S=!u.trim()||l||x.length>=5;let B,P;t[57]===Symbol.for("react.memo_cache_sentinel")?(B=r.jsx(L,{}),t[57]=B):B=t[57],t[58]!==X||t[59]!==S?(P=r.jsxs("button",{className:_n.addImageButton,onClick:X,disabled:S,children:[B," Добавить"]}),t[58]=X,t[59]=S,t[60]=P):P=t[60],t[61]!==w||t[62]!==P?(ae=r.jsxs("div",{className:_n.imageUrlInputContainer,children:[w,P]}),t[61]=w,t[62]=P,t[63]=ae):ae=t[63],t[64]!==q.maxImagesReached?(re=q.maxImagesReached&&r.jsx("div",{className:_n.errorNote,children:q.maxImagesReached}),t[64]=q.maxImagesReached,t[65]=re):re=t[65],oe=x.length>0&&r.jsxs("div",{className:_n.imageGalleryContainer,children:[x.map(((t,a)=>r.jsxs("div",{className:_n.imagePreviewItem,children:[r.jsxs("div",{className:_n.imagePreview,children:[j[a]&&r.jsx("div",{className:_n.imageLoading,children:"Загрузка..."}),r.jsx("img",{src:y[a]||t,alt:`Изображение ${a+1}`,onLoad:()=>W(a),onError:()=>Y(a),style:{display:j[a]?"none":"block",cursor:D?"pointer":"default"},onClick:()=>o(y[a]||t)}),r.jsx("button",{className:_n.removeImageButton,onClick:()=>e(a),disabled:l,children:r.jsx(m,{})}),D&&r.jsx("span",{className:_n.zoomHint,children:"Нажмите для увеличения"})]}),q[a]&&r.jsx("div",{className:_n.errorNote,children:q[a]})]},a))),r.jsxs("div",{className:_n.imageNote,children:[r.jsx(M,{})," Максимум ",5," изображений. ",D&&"Нажмите на изображение для увеличения."]})]}),t[17]=_,t[18]=u,t[19]=q,t[20]=X,t[21]=j,t[22]=x,t[23]=D,t[24]=l,t[25]=n,t[26]=y,t[27]=d,t[28]=Z,t[29]=Q,t[30]=K,t[31]=ee,t[32]=te,t[33]=ae,t[34]=re,t[35]=oe,t[36]=ne}else Z=t[28],Q=t[29],K=t[30],ee=t[31],te=t[32],ae=t[33],re=t[34],oe=t[35],ne=t[36];return t[66]!==B?(ie=B&&r.jsxs("div",{className:_n.errorMessage,children:[r.jsx(h,{})," ",B]}),t[66]=B,t[67]=ie):ie=t[67],t[68]!==l||t[69]!==s?(se=r.jsx("button",{type:"button",className:_n.cancelButton,onClick:s,disabled:l,children:"Отмена"}),t[68]=l,t[69]=s,t[70]=se):se=t[70],t[71]!==l?(le=l?r.jsxs(r.Fragment,{children:[r.jsx(P,{className:_n.spinnerIcon})," Сохранение..."]}):r.jsxs(r.Fragment,{children:[r.jsx(F,{})," Сохранить"]}),t[71]=l,t[72]=le):le=t[72],t[73]!==l||t[74]!==le?(de=r.jsx("button",{type:"submit",className:_n.submitButton,disabled:l,children:le}),t[73]=l,t[74]=le,t[75]=de):de=t[75],t[76]!==se||t[77]!==de?(ce=r.jsxs("div",{className:_n.formActions,children:[se,de]}),t[76]=se,t[77]=de,t[78]=ce):ce=t[78],t[79]!==Q||t[80]!==K||t[81]!==ee||t[82]!==te||t[83]!==ae||t[84]!==re||t[85]!==oe||t[86]!==ie||t[87]!==ce?(_e=r.jsxs("form",{onSubmit:Q,className:K,children:[ee,te,ae,re,oe,ie,ce]}),t[79]=Q,t[80]=K,t[81]=ee,t[82]=te,t[83]=ae,t[84]=re,t[85]=oe,t[86]=ie,t[87]=ce,t[88]=_e):_e=t[88],t[89]!==Z||t[90]!==E||t[91]!==A?(me=A&&E&&r.jsx(un,{imageUrl:E,onClose:Z}),t[89]=Z,t[90]=E,t[91]=A,t[92]=me):me=t[92],t[93]!==ne||t[94]!==_e||t[95]!==me?(pe=r.jsxs("div",{className:ne,children:[_e,me]}),t[93]=ne,t[94]=_e,t[95]=me,t[96]=pe):pe=t[96],pe};function gn(e){return e.stopPropagation()}function hn(e){return Wo(e)}function xn(e){return{...e,maxImagesReached:"Максимальное количество изображений: 5"}}const fn=e=>{const t=a.c(85),{post:o,onSave:n,onCancel:s,isSubmitting:l}=e,[d,c]=i.useState(o.title||""),[_,p]=i.useState(o.content||""),[u,b]=i.useState(o.poll_data?.question||"");let g;t[0]!==o.poll_data?.options?(g=o.poll_data?.options||["",""],t[0]=o.poll_data?.options,t[1]=g):g=t[1];const[x,f]=i.useState(g),[v,y]=i.useState("");let k,w,j;t[2]!==u||t[3]!==d?(k=()=>{""===u&&""!==d&&b(d)},w=[d,u],t[2]=u,t[3]=d,t[4]=k,t[5]=w):(k=t[4],w=t[5]),i.useEffect(k,w),t[6]!==x?(j=()=>{x.length<10&&f([...x,""])},t[6]=x,t[7]=j):j=t[7];const N=j;let S;t[8]!==x?(S=e=>{if(x.length>2){const t=[...x];t.splice(e,1),f(t)}},t[8]=x,t[9]=S):S=t[9];const q=S;let C,B,I,A,z,E,O,D,$,T,U,M,G,W,V,Y,J,X,Z,Q;if(t[10]!==_||t[11]!==v||t[12]!==q||t[13]!==l||t[14]!==n||t[15]!==x||t[16]!==u||t[17]!==d){const e=(e,t)=>{const a=[...x];a[e]=t,f(a)};let a;t[28]!==_||t[29]!==n||t[30]!==x||t[31]!==u||t[32]!==d?(a=e=>{if(e.preventDefault(),!d.trim()&&!u.trim())return void y("Заголовок или вопрос опроса не может быть пустым");if(x.filter(vn).length<2)return void y("Требуется минимум два варианта ответа для опроса");const t={question:u.trim()||d.trim(),options:x.filter(yn)},a={title:d.trim(),content:_||"",poll:t};n(a)},t[28]=_,t[29]=n,t[30]=x,t[31]=u,t[32]=d,t[33]=a):a=t[33];const o=a;let i,s,g,k;z=_n.editPostForm,t[34]!==v?(E=v&&r.jsxs("div",{className:_n.errorMessage,children:[r.jsx(h,{})," ",v]}),t[34]=v,t[35]=E):E=t[35],B=o,t[36]===Symbol.for("react.memo_cache_sentinel")?(i=e=>c(e.target.value),t[36]=i):i=t[36],t[37]!==l||t[38]!==d?(I=r.jsx("input",{type:"text",className:_n.titleInput,value:d,onChange:i,placeholder:"Заголовок опроса",disabled:l,required:!0}),t[37]=l,t[38]=d,t[39]=I):I=t[39],t[40]===Symbol.for("react.memo_cache_sentinel")?(s=e=>p(e.target.value),t[40]=s):s=t[40],t[41]!==_||t[42]!==l?(A=r.jsx("textarea",{className:_n.contentInput,value:_,onChange:s,placeholder:"Дополнительное описание (необязательно)",disabled:l}),t[41]=_,t[42]=l,t[43]=A):A=t[43],T=_n.pollContainer,t[44]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(R,{}),t[44]=g):g=t[44],t[45]===Symbol.for("react.memo_cache_sentinel")?(k=e=>b(e.target.value),t[45]=k):k=t[45],t[46]!==l||t[47]!==u?(C=r.jsxs("div",{className:_n.inputWithIcon,children:[g,r.jsx("input",{type:"text",className:_n.pollQuestionInput,value:u,onChange:k,placeholder:"Вопрос опроса (если отличается от заголовка)",disabled:l})]}),t[46]=l,t[47]=u,t[48]=C):C=t[48],O=_n.pollOptions,t[49]===Symbol.for("react.memo_cache_sentinel")?(D=r.jsxs("div",{className:_n.sectionLabel,children:[r.jsx(H,{})," Варианты ответа:"]}),t[49]=D):D=t[49],$=x.map(((t,a)=>r.jsxs("div",{className:_n.pollOptionInputWrapper,children:[r.jsx("input",{type:"text",className:_n.pollOptionInput,value:t,onChange:t=>e(a,t.target.value),placeholder:`Вариант ${a+1}`,disabled:l,required:a<2}),x.length>2&&r.jsx("button",{type:"button",className:_n.removeOptionButton,onClick:()=>q(a),disabled:l,children:r.jsx(m,{})})]},a))),t[10]=_,t[11]=v,t[12]=q,t[13]=l,t[14]=n,t[15]=x,t[16]=u,t[17]=d,t[18]=C,t[19]=B,t[20]=I,t[21]=A,t[22]=z,t[23]=E,t[24]=O,t[25]=D,t[26]=$,t[27]=T}else C=t[18],B=t[19],I=t[20],A=t[21],z=t[22],E=t[23],O=t[24],D=t[25],$=t[26],T=t[27];return t[50]!==O||t[51]!==D||t[52]!==$?(U=r.jsxs("div",{className:O,children:[D,$]}),t[50]=O,t[51]=D,t[52]=$,t[53]=U):U=t[53],t[54]!==N||t[55]!==l||t[56]!==x.length?(M=x.length<10&&r.jsxs("button",{type:"button",className:_n.addOptionButton,onClick:N,disabled:l,children:[r.jsx(L,{})," Добавить вариант"]}),t[54]=N,t[55]=l,t[56]=x.length,t[57]=M):M=t[57],t[58]!==C||t[59]!==U||t[60]!==M||t[61]!==T?(G=r.jsxs("div",{className:T,children:[C,U,M]}),t[58]=C,t[59]=U,t[60]=M,t[61]=T,t[62]=G):G=t[62],t[63]===Symbol.for("react.memo_cache_sentinel")?(W=r.jsx(m,{}),t[63]=W):W=t[63],t[64]!==l||t[65]!==s?(V=r.jsxs("button",{type:"button",className:_n.cancelEditButton,onClick:s,disabled:l,children:[W," Отмена"]}),t[64]=l,t[65]=s,t[66]=V):V=t[66],t[67]!==l?(Y=l?r.jsxs(r.Fragment,{children:[r.jsx(P,{})," Сохранение..."]}):r.jsxs(r.Fragment,{children:[r.jsx(F,{})," Сохранить"]}),t[67]=l,t[68]=Y):Y=t[68],t[69]!==l||t[70]!==Y?(J=r.jsx("button",{type:"submit",className:_n.submitButton,disabled:l,children:Y}),t[69]=l,t[70]=Y,t[71]=J):J=t[71],t[72]!==V||t[73]!==J?(X=r.jsxs("div",{className:_n.formOptions,children:[V,J]}),t[72]=V,t[73]=J,t[74]=X):X=t[74],t[75]!==B||t[76]!==I||t[77]!==A||t[78]!==G||t[79]!==X?(Z=r.jsxs("form",{onSubmit:B,children:[I,A,G,X]}),t[75]=B,t[76]=I,t[77]=A,t[78]=G,t[79]=X,t[80]=Z):Z=t[80],t[81]!==z||t[82]!==E||t[83]!==Z?(Q=r.jsxs("div",{className:z,children:[E,Z]}),t[81]=z,t[82]=E,t[83]=Z,t[84]=Q):Q=t[84],Q};function vn(e){return""!==e.trim()}function yn(e){return""!==e.trim()}const kn=D.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(135deg, rgba(33, 33, 38, 0.85) 0%, rgba(68, 68, 77, 0.85) 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  backdrop-filter: blur(8px);
  box-sizing: border-box;
  perspective: 1000px;
`,wn=D.div`
  position: relative;
  max-width: 90vw;
  max-height: 90vh;
  width: auto;
  height: auto;
  border-radius: 12px;
  background: rgba(25, 25, 30, 0.8);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  
  @media (max-width: 768px) {
    max-width: 95vw;
    padding: 15px;
    border-radius: 8px;
  }
`,jn=D.button`
  position: absolute;
  top: 15px;
  right: 15px;
  background: rgba(255, 255, 255, 0.2);
  border: none;
  font-size: 20px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  cursor: pointer;
  z-index: 10;
  transition: all 0.2s;
  
  &:hover {
    background: rgba(255, 255, 255, 0.4);
    transform: scale(1.05);
  }
  
  @media (max-width: 768px) {
    top: 10px;
    right: 10px;
    width: 32px;
    height: 32px;
    font-size: 18px;
  }
`,Nn=D.button`
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(255, 255, 255, 0.2);
  color: white;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 20px;
  transition: all 0.2s;
  z-index: 10;
  
  &:hover {
    background: rgba(255, 255, 255, 0.4);
  }
  
  &:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }
  
  &.prev {
    left: 15px;
  }
  
  &.next {
    right: 15px;
  }
  
  @media (max-width: 768px) {
    width: 36px;
    height: 36px;
    font-size: 18px;
    
    &.prev {
      left: 10px;
    }
    
    &.next {
      right: 10px;
    }
  }
`,Sn=D.div`
  position: relative;
  max-width: 100%;
  max-height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
`,qn=D(o.img)`
  max-width: 100%;
  max-height: 70vh;
  object-fit: contain;
  border-radius: 4px;
  
  @media (max-width: 768px) {
    max-height: 80vh;
  }
`,Cn=D.div`
  position: absolute;
  bottom: 15px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.6);
  color: white;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 14px;
  
  @media (max-width: 768px) {
    bottom: 10px;
    padding: 4px 10px;
    font-size: 12px;
  }
`,Bn=e=>{const t=a.c(56),{images:o,initialIndex:s,onClose:d,singleImage:c}=e;let _;t[0]!==o?(_=void 0===o?[]:o,t[0]=o,t[1]=_):_=t[1];const p=_,u=void 0===s?0:s,b=void 0===c?null:c;let g;t[2]!==p||t[3]!==b?(g=b?[b]:p,t[2]=p,t[3]=b,t[4]=g):g=t[4];const h=g,[x,f]=i.useState(u);let v;t[5]!==x?(v=()=>{x>0&&f(x-1)},t[5]=x,t[6]=v):v=t[6];const y=v;let k;t[7]!==x||t[8]!==h.length?(k=()=>{x<h.length-1&&f(x+1)},t[7]=x,t[8]=h.length,t[9]=k):k=t[9];const w=k;let j,N,S;t[10]!==w||t[11]!==y||t[12]!==d?(j=()=>{const e=e=>{e:switch(e.key){case"Escape":d();break e;case"ArrowLeft":y();break e;case"ArrowRight":w()}};return window.addEventListener("keydown",e),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",e),document.body.style.overflow=""}},N=[d,y,w],t[10]=w,t[11]=y,t[12]=d,t[13]=j,t[14]=N):(j=t[13],N=t[14]),i.useEffect(j,N),t[15]!==d?(S=e=>{e.target===e.currentTarget&&d()},t[15]=d,t[16]=S):S=t[16];const q=S;if(!h.length)return null;const C=h.length>1;let B;if(t[17]!==x||t[18]!==q||t[19]!==w||t[20]!==y||t[21]!==h||t[22]!==d||t[23]!==C){let e,a,o;t[25]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(m,{}),t[25]=e):e=t[25],t[26]!==d?(a=r.jsx(jn,{onClick:d,children:e}),t[26]=d,t[27]=a):a=t[27],t[28]!==x||t[29]!==w||t[30]!==y||t[31]!==h.length||t[32]!==C?(o=C&&r.jsxs(r.Fragment,{children:[r.jsx(Nn,{className:"prev",onClick:e=>{e.stopPropagation(),y()},disabled:0===x,children:r.jsx(W,{})}),r.jsx(Nn,{className:"next",onClick:e=>{e.stopPropagation(),w()},disabled:x===h.length-1,children:r.jsx(V,{})})]}),t[28]=x,t[29]=w,t[30]=y,t[31]=h.length,t[32]=C,t[33]=o):o=t[33];const i=`lightbox-image-${x}`,s=h[x],c=`Изображение ${x+1}`;let _,p,u,b,g,f,v,k,j;t[34]===Symbol.for("react.memo_cache_sentinel")?(_={opacity:0,scale:.9},p={opacity:1,scale:1},u={opacity:0,scale:.9},b={duration:.3},t[34]=_,t[35]=p,t[36]=u,t[37]=b):(_=t[34],p=t[35],u=t[36],b=t[37]),t[38]!==i||t[39]!==s||t[40]!==c?(g=r.jsx(n,{mode:"wait",children:r.jsx(qn,{src:s,alt:c,initial:_,animate:p,exit:u,transition:b},i)}),t[38]=i,t[39]=s,t[40]=c,t[41]=g):g=t[41],t[42]!==x||t[43]!==h.length||t[44]!==C?(f=C&&r.jsxs(Cn,{children:[x+1," / ",h.length]}),t[42]=x,t[43]=h.length,t[44]=C,t[45]=f):f=t[45],t[46]!==o||t[47]!==g||t[48]!==f?(v=r.jsxs(Sn,{children:[o,g,f]}),t[46]=o,t[47]=g,t[48]=f,t[49]=v):v=t[49],t[50]!==a||t[51]!==v?(k=r.jsxs(wn,{onClick:Pn,children:[a,v]}),t[50]=a,t[51]=v,t[52]=k):k=t[52],t[53]!==q||t[54]!==k?(j=r.jsx(kn,{onClick:q,children:k}),t[53]=q,t[54]=k,t[55]=j):j=t[55],B=l.createPortal(j,document.getElementById("modal-root")||document.body),t[17]=x,t[18]=q,t[19]=w,t[20]=y,t[21]=h,t[22]=d,t[23]=C,t[24]=B}else B=t[24];return B};function Pn(e){return e.stopPropagation()}const In=({post:e,onLikeToggle:t,fullView:a=!1,onDelete:o,onPinChange:s,onUpdate:l})=>{const{user:c,isAuthenticated:_}=br(),[m,p]=i.useState(!1),[u,g]=i.useState(e.likes_count||0),[x,f]=i.useState(a),[v,y]=i.useState(e.is_pinned||!1),[k,w]=i.useState(!1),[N,S]=i.useState([]),[C,B]=i.useState(e.comments_count||0),[I,A]=i.useState(0),[z,E]=i.useState(""),[O,D]=i.useState(!1),[$,T]=i.useState(!1),[M,L]=i.useState(!1),[G,R]=i.useState(!1),[H,W]=i.useState(!1),[V,Z]=i.useState(""),[Q,K]=i.useState(!1),[ee,te]=i.useState(""),[ae,re]=i.useState(""),[oe,ne]=i.useState(!1),[ie,se]=i.useState(!1),[le,de]=i.useState(!1),[ce,_e]=i.useState(null),[me,pe]=i.useState([]),[ue,be]=i.useState(!1),[ge,he]=i.useState(!1),[xe,fe]=i.useState(""),[ve,ye]=i.useState(window.innerWidth>=1024),[ke,we]=i.useState(0),je=e.title&&e.title.trim().length>0,Ne=_&&c&&("igoraor79@gmail.com"===c.email||c.perks?.includes("admin")||"admin"===c.activePerk),Se=e.styling||{},qe=Se.titleColor||"#000000",Ce=Se.contentColor||"#000000",Be=Se.fontFamily||"inherit",Pe=Jo(qe),Ie=Jo(Ce),[Ae,ze]=i.useState(window.innerWidth<=768),Ee=!!e.poll_data;i.useEffect((()=>{const e=()=>{ze(window.innerWidth<=768),ye(window.innerWidth>=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),i.useEffect((()=>{const t=()=>{Z(Vo(e.created_at,Ae))};t();const a=setInterval(t,6e4);return()=>clearInterval(a)}),[e.created_at,Ae]),i.useEffect((()=>{(async()=>{if(_&&c)try{const{liked:t}=await bo.isLikedByUser(e.id,c.id);p(t)}catch(t){}})()}),[e.id,c,_]),i.useEffect((()=>{e.poll_data&&(async()=>{if(e.poll_data&&_&&c)try{const{hasVoted:t,option:a,results:r}=await bo.getPollVoteStatus(e.id,c.id);de(t),_e(a),pe(r);const o=r.some((e=>e.votes>0));be(o)}catch(t){try{const{results:t}=await bo.getPollResults(e.id);pe(t);const a=t.some((e=>e.votes>0));be(a)}catch(a){if(e.poll_data&&e.poll_data.options){const t=e.poll_data.options.map((e=>({option:e,votes:0})));pe(t),be(!1)}}}else if(e.poll_data)try{const{results:t}=await bo.getPollResults(e.id);pe(t);const a=t.some((e=>e.votes>0));be(a)}catch(r){if(e.poll_data&&e.poll_data.options){const t=e.poll_data.options.map((e=>({option:e,votes:0})));pe(t),be(!1)}}})()}),[e.id,e.poll_data,c,_]),i.useEffect((()=>{g(e.likes_count||0)}),[e.likes_count]),i.useEffect((()=>{B(e.comments_count||0)}),[e.comments_count]),i.useEffect((()=>{y(e.is_pinned||!1)}),[e.is_pinned]);const Oe=async()=>{if(_)try{const a=!m,r=a?u+1:u-1;p(a),g(r>0?r:0);const o=document.querySelector(`#like-${e.id}`);o&&(o.classList.add(_n.likeAnimation),setTimeout((()=>{o.classList.remove(_n.likeAnimation)}),1e3));const n=await bo.toggleLike(e.id,c.id);p(n.liked),g(n.likesCount),t&&t(e.id,n.liked,n.likesCount)}catch(a){p(!m);const e=m?u+1:u-1;g(e>0?e:0)}else te("like")},De=()=>{x?f(!1):(D(!0),(async()=>{if(N.length>0&&!x)return f(!0),void D(!1);try{D(!0);const t=await jo.getCommentsByPostId(e.id);let a=0;t.forEach((e=>{e.replies&&(a+=e.replies.length)})),A(t.length);const r=t.length+a;B(r),S(t),f(!0)}catch(t){}finally{D(!1)}})())},$e=async t=>{if(_)try{const a=await bo.votePoll(e.id,t);if(!a.success)throw new Error(a.message||"Ошибка при голосовании");de(!0),_e(t),pe(a.results),be(!0)}catch(a){alert(`Не удалось проголосовать: ${a.message||"Неизвестная ошибка"}`)}else te("poll")},Te=async t=>{if(t.preventDefault(),_)if(z.trim())try{R(!0),re("");const t=wo(z,c),a=await jo.createComment({content:t,postId:e.id,userId:c.id});S([a,...N]),A((e=>e+1)),B((e=>e+1)),E("")}catch(a){re("Не удалось отправить комментарий")}finally{R(!1)}else re("Комментарий не может быть пустым");else re("Войдите, чтобы оставить комментарий")},Ue=async(t,a)=>{if(_)try{const r=wo(a,c),o=await jo.replyToComment({content:r,commentId:t,postId:e.id,userId:c.id}),n=N.map((e=>{if(e.id===t){const t=e.replies||[];return{...e,replies:[...t,o]}}return e}));return S(n),B((e=>e+1)),o}catch(r){throw r}else te("reply")},Fe=e=>{const t=N.findIndex((t=>t.id===e));if(-1!==t){const a=N[t].replies?.length||0;S(N.filter((t=>t.id!==e))),A((e=>e-1)),B((e=>e-(1+a)))}else{const t=N.map((t=>t.replies&&t.replies.some((t=>t.id===e))?{...t,replies:t.replies.filter((t=>t.id!==e))}:t));S(t),B((e=>e-1))}},Me=async()=>{if(Ne)try{if(L(!0),v)(await bo.unpinPost(e.id)).success&&(y(!1),s&&s(e.id,!1));else{const t=await bo.pinPost(e.id);t.success&&(y(!0),s&&s(e.id,!0,t.previousPinnedId))}}catch(t){alert("Не удалось изменить статус закрепления: "+(t.message||"Неизвестная ошибка"))}finally{L(!1)}};i.useEffect((()=>{const t=()=>{Z(Vo(e.created_at,Ae))};return window.addEventListener("themechange",t),()=>{window.removeEventListener("themechange",t)}}),[e.created_at,Ae]);const Le=async t=>{if(Ne)try{W(!0);const a=await bo.updatePost(e.id,t);if(!a||!a.success)throw new Error("Не удалось обновить пост");l&&l(a.post),w(!1)}catch(a){alert("Не удалось обновить пост: "+(a.message||"Неизвестная ошибка"))}finally{W(!1)}},Ge=()=>{Ne&&(Ee?Re():w(!k))},Re=async()=>{try{W(!0);const{results:t}=await bo.getPollResults(e.id);t.reduce(((e,t)=>e+t.votes),0)>=1?ne(!0):w(!0)}catch(t){se(!0)}finally{W(!1)}},He=i.useCallback(((t,a=0)=>{e.image_urls&&e.image_urls.length>0?(fe(""),he(!0),we(a)):e.image_url&&(fe(e.image_url),he(!0)),document.body.style.overflow="hidden"}),[e.image_url,e.image_urls]),We=i.useCallback((()=>{he(!1),fe(""),we(0),document.body.style.overflow=""}),[]),Ve=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:_n.postHeader,children:[r.jsxs(d,{to:`/profile/${e.user_id}`,className:_n.authorInfo,children:[r.jsx(Fr,{src:e.author.avatar,alt:e.author.displayName,className:_n.avatar}),r.jsx("span",{className:"early_user"===e.author.activePerk?$r:"sponsor"===e.author.activePerk?Dr:"admin"===e.author.activePerk?Tr:Ur,style:{display:"inline-block",margin:0,padding:0},children:e.author.displayName})]}),r.jsxs("div",{className:_n.postMeta,children:[v&&r.jsxs(Mo,{children:[r.jsx(Y,{})," Закреплено"]}),r.jsxs("span",{className:_n.postDate,children:[r.jsx(b,{})," ",V]})]})]}),je&&r.jsx("h2",{className:_n.postTitle,style:{color:qe,fontFamily:Be},children:r.jsx("span",{className:Pe?_n.darkTextConversion:"",children:e.title})}),r.jsx("div",{className:_n.postContent,style:{color:Ce,fontFamily:Be},children:r.jsx("span",{className:Ie?_n.darkTextConversion:"",children:e.content})}),e.image_url&&!e.image_urls&&r.jsx("div",{className:_n.postImage,onClick:()=>He(e.image_url),children:r.jsx(pn,{src:e.image_url,alt:"Изображение к посту",className:_n.postImage,style:{display:"block"}})}),e.image_urls&&e.image_urls.length>0&&r.jsx("div",{className:_n.imageGalleryContainer,children:e.image_urls.map(((e,t)=>r.jsx("div",{className:_n.imagePreviewItem,children:r.jsx("div",{className:_n.imagePreview,onClick:()=>He(e,t),children:r.jsx(pn,{src:e,alt:`Изображение ${t+1}`,className:_n.postImage})})},t)))}),e.poll_data&&r.jsx("div",{className:_n.pollContainer,children:r.jsx(Xo,{poll:{...e.poll_data,hideQuestion:e.title&&e.poll_data.question===e.title},postId:e.id,onVote:$e,hasVoted:le,votedOption:ce,results:me,isAdmin:Ne,user:c})})]}),Ye=()=>r.jsxs("div",{className:_n.postActions,children:[r.jsxs("div",{className:_n.actionButtons,children:[r.jsxs("button",{id:`like-${e.id}`,className:`${_n.likeButton} ${m?_n.liked:""}`,onClick:Oe,children:[r.jsx(J,{})," ",r.jsx("span",{className:_n.likeCount,children:u})]}),r.jsxs("button",{className:_n.commentButton,onClick:De,children:[r.jsx(j,{})," ",r.jsx("span",{children:C})]}),_&&Ne&&r.jsxs(Uo,{onClick:Me,disabled:M,$isPinned:v,children:[r.jsx(Y,{})," ",v?"Открепить":"Закрепить"]})]}),_&&Ne&&r.jsxs("div",{className:_n.adminActions,children:[(!Ee||Ee&&!ue)&&r.jsx("button",{className:_n.editButton,onClick:Ge,disabled:k||H,children:H?r.jsxs(r.Fragment,{children:[r.jsx(P,{})," Проверка..."]}):r.jsxs(r.Fragment,{children:[r.jsx(q,{})," Изменить"]})}),r.jsxs("button",{className:_n.deleteButton,onClick:e=>{e.preventDefault(),e.stopPropagation(),K(!0)},disabled:$,style:{cursor:"pointer",transition:"all 0.2s ease",background:$?"rgba(0, 0, 0, 0.05)":"transparent"},onMouseOver:e=>{e.currentTarget.style.background="rgba(231, 76, 60, 0.1)",e.currentTarget.style.color="#e74c3c"},onMouseOut:e=>{e.currentTarget.style.background=$?"rgba(0, 0, 0, 0.05)":"transparent",e.currentTarget.style.color=""},children:[r.jsx(U,{style:{verticalAlign:"middle"}})," ",$?"Удаление...":"Удалить"]})]})]}),Je=()=>r.jsx(n,{children:x&&r.jsx(Go,{variants:Ro,initial:"initial",animate:"animate",exit:"exit",children:r.jsxs("div",{className:_n.commentsSection,children:[r.jsxs("h4",{className:_n.commentsHeading,children:[r.jsx(X,{})," Комментарии (",C,")"]}),O?r.jsxs("div",{className:_n.loadingComments,children:[r.jsx(P,{})," Загрузка комментариев..."]}):r.jsxs(r.Fragment,{children:[N&&N.length>0?r.jsx("div",{className:_n.commentsList,children:N.map((e=>r.jsx(mn,{comment:e,onReply:Ue,onDelete:Fe},e.id)))}):r.jsx("div",{className:_n.noComments,children:"Комментариев пока нет. Будьте первым!"}),_&&r.jsxs("form",{onSubmit:Te,className:_n.commentForm,children:[ae&&r.jsxs("div",{className:_n.errorMessage,children:[r.jsx(h,{})," ",ae]}),r.jsx("textarea",{value:z,onChange:e=>E(e.target.value),placeholder:"Напишите комментарий...",disabled:G}),r.jsx("button",{type:"submit",disabled:G,children:G?r.jsxs(r.Fragment,{children:[r.jsx(P,{})," Отправка..."]}):r.jsxs(r.Fragment,{children:[r.jsx(F,{})," Отправить"]})})]})]})]})})});return r.jsxs(r.Fragment,{children:[Q&&r.jsx(dn,{title:"Удаление поста",message:"Вы уверены, что хотите удалить этот пост? Это действие нельзя отменить.",confirmText:"Удалить",cancelText:"Отмена",onConfirm:async()=>{try{if(T(!0),!(await bo.deletePost(e.id)).success)throw new Error("Не удалось удалить пост");o&&o(e.id),K(!1)}catch(t){alert("Не удалось удалить пост: "+(t.message||"Попробуйте позже."))}finally{T(!1)}},onClose:()=>K(!1),isOpen:Q,isDanger:!0}),oe&&r.jsx(dn,{title:"Редактирование невозможно",message:"Нельзя редактировать опрос, в котором уже есть голоса.",confirmText:"Понятно",onConfirm:()=>ne(!1),onClose:()=>ne(!1),isOpen:oe,hideCancel:!0}),ie&&r.jsx(dn,{title:"Ошибка проверки",message:"Не удалось проверить статус опроса. Попробуйте позже.",confirmText:"Понятно",onConfirm:()=>se(!1),onClose:()=>se(!1),isOpen:ie,hideCancel:!0}),v?r.jsx(Lo,{children:r.jsxs("div",{className:`${_n.postItem} ${_n.pinnedPost}`,children:[k?Ee?r.jsx(fn,{post:e,onSave:Le,onCancel:()=>w(!1),isSubmitting:H}):r.jsx(bn,{post:e,onSave:Le,onCancel:()=>w(!1),isSubmitting:H}):Ve(),!k&&Ye(),Je(),ee&&r.jsx(Br,{type:"info",message:"like"===ee?"Войдите, чтобы поставить лайк":"poll"===ee?"Войдите, чтобы проголосовать":"Войдите, чтобы ответить на комментарий",show:!!ee,onClose:()=>te("")})]})}):r.jsxs("div",{className:_n.postItem,children:[k?Ee?r.jsx(fn,{post:e,onSave:Le,onCancel:()=>w(!1),isSubmitting:H}):r.jsx(bn,{post:e,onSave:Le,onCancel:()=>w(!1),isSubmitting:H}):Ve(),!k&&Ye(),Je(),ee&&r.jsx(Br,{type:"info",message:"like"===ee?"Войдите, чтобы поставить лайк":"poll"===ee?"Войдите, чтобы проголосовать":"Войдите, чтобы ответить на комментарий",show:!!ee,onClose:()=>te("")})]}),ge&&(e.image_urls&&e.image_urls.length>0?r.jsx(Bn,{images:e.image_urls,initialIndex:ke,onClose:We}):xe&&r.jsx(Bn,{singleImage:xe,onClose:We}))]})},An=new Map,zn=[{name:"По умолчанию",value:"inherit"},{name:"Arial",value:"Arial, sans-serif"},{name:"Times New Roman",value:"Times New Roman, serif"},{name:"Courier New",value:"Courier New, monospace"},{name:"Georgia",value:"Georgia, serif"},{name:"Verdana",value:"Verdana, sans-serif"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Montserrat",value:"'Montserrat', sans-serif"},{name:"Poppins",value:"'Poppins', sans-serif"},{name:"Source Sans Pro",value:"'Source Sans Pro', sans-serif"},{name:"Ubuntu",value:"'Ubuntu', sans-serif"},{name:"Raleway",value:"'Raleway', sans-serif"},{name:"Nunito",value:"'Nunito', sans-serif"}],En=e=>{if(!e)return!1;let t=e.replace("#","");return 3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),(.299*parseInt(t.substring(0,2),16)+.587*parseInt(t.substring(2,4),16)+.114*parseInt(t.substring(4,6),16))/255<.5},On=e=>{const t=a.c(14),{imageUrl:o,onClose:n}=e;let s,l,d,c,_,m,p;return t[0]!==n?(s=()=>{const e=e=>{"Escape"===e.key&&n()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},l=[n],t[0]=n,t[1]=s,t[2]=l):(s=t[1],l=t[2]),i.useEffect(s,l),t[3]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(G,{}),t[3]=d):d=t[3],t[4]!==n?(c=r.jsx("button",{className:_n.lightboxCloseButton,onClick:n,children:d}),t[4]=n,t[5]=c):c=t[5],t[6]!==o?(_=r.jsx("img",{src:o,alt:"Увеличенное изображение",className:_n.lightboxImage,onClick:$n}),t[6]=o,t[7]=_):_=t[7],t[8]!==c||t[9]!==_?(m=r.jsxs("div",{className:_n.lightboxContainer,children:[c,_]}),t[8]=c,t[9]=_,t[10]=m):m=t[10],t[11]!==n||t[12]!==m?(p=r.jsx("div",{className:_n.lightboxOverlay,onClick:n,children:m}),t[11]=n,t[12]=m,t[13]=p):p=t[13],p},Dn=e=>{const t=a.c(53),{imageUrls:o,setImageUrls:n,isSubmitting:s}=e,[l,d]=i.useState("");let c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],t[0]=c):c=t[0];const[_,p]=i.useState(c);let u;t[1]===Symbol.for("react.memo_cache_sentinel")?(u={},t[1]=u):u=t[1];const[b,g]=i.useState(u);let h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h={},t[2]=h):h=t[2];const[x,f]=i.useState(h),[v,y]=i.useState(!1),[k,w]=i.useState(""),[j,N]=i.useState(!0);let S,q,C,B,P;t[3]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{const e=()=>{N(window.innerWidth>=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},q=[],t[3]=S,t[4]=q):(S=t[3],q=t[4]),i.useEffect(S,q),t[5]!==o?(C=()=>{const e=o.map(Tn);p(e);const t={};o.forEach(((e,a)=>{t[a]=!0})),g(t);const a=setTimeout((()=>{const e={};o.forEach(((t,a)=>{e[a]=!1})),g(e)}),5e3);return()=>clearTimeout(a)},B=[o],t[5]=o,t[6]=C,t[7]=B):(C=t[6],B=t[7]),i.useEffect(C,B),t[8]===Symbol.for("react.memo_cache_sentinel")?(P=e=>{g((t=>({...t,[e]:!1})))},t[8]=P):P=t[8];const I=P;let A;t[9]===Symbol.for("react.memo_cache_sentinel")?(A=e=>{g((t=>({...t,[e]:!1}))),f((t=>({...t,[e]:"Ошибка загрузки изображения. Проверьте URL."})))},t[9]=A):A=t[9];const z=A;let E;t[10]!==l||t[11]!==x||t[12]!==o||t[13]!==n?(E=e=>{if(e.preventDefault(),l.trim()){if(o.length>=5)return void f(Un);if(n([...o,l.trim()]),d(""),x.maxImagesReached){const e={...x};delete e.maxImagesReached,f(e)}}},t[10]=l,t[11]=x,t[12]=o,t[13]=n,t[14]=E):E=t[14];const O=E;let D,$,T,U,F,G;if(t[15]!==l||t[16]!==x||t[17]!==O||t[18]!==b||t[19]!==o||t[20]!==j||t[21]!==s||t[22]!==_||t[23]!==n){const e=e=>{const t=[...o];t.splice(e,1),n(t);const a={...x};delete a[e],a.maxImagesReached&&delete a.maxImagesReached,f(a);const r={...b};delete r[e],g(r)};let a;t[28]!==j?(a=e=>{j&&(w(e),y(!0))},t[28]=j,t[29]=a):a=t[29];const i=a;let c,p;t[30]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{y(!1),w("")},t[30]=c):c=t[30],D=c,t[31]===Symbol.for("react.memo_cache_sentinel")?(p=e=>d(e.target.value),t[31]=p):p=t[31];const u=s||o.length>=5;let h;t[32]!==l||t[33]!==u?(h=r.jsx("input",{type:"text",className:_n.imageUrlInput,value:l,onChange:p,placeholder:"URL изображения (необязательно)",disabled:u}),t[32]=l,t[33]=u,t[34]=h):h=t[34];const v=!l.trim()||s||o.length>=5;let k,N;t[35]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx(L,{}),t[35]=k):k=t[35],t[36]!==O||t[37]!==v?(N=r.jsxs("button",{className:_n.addImageButton,onClick:O,disabled:v,children:[k," Добавить"]}),t[36]=O,t[37]=v,t[38]=N):N=t[38],t[39]!==h||t[40]!==N?($=r.jsxs("div",{className:_n.imageUrlInputContainer,children:[h,N]}),t[39]=h,t[40]=N,t[41]=$):$=t[41],t[42]!==x.maxImagesReached?(T=x.maxImagesReached&&r.jsx("div",{className:_n.errorNote,children:x.maxImagesReached}),t[42]=x.maxImagesReached,t[43]=T):T=t[43],U=o.length>0&&r.jsxs("div",{className:_n.imageGalleryContainer,children:[o.map(((t,a)=>r.jsxs("div",{className:_n.imagePreviewItem,children:[r.jsxs("div",{className:_n.imagePreview,children:[b[a]&&r.jsx("div",{className:_n.imageLoading,children:"Загрузка..."}),r.jsx("img",{src:_[a]||t,alt:`Изображение ${a+1}`,onLoad:()=>I(a),onError:()=>z(a),style:{display:b[a]?"none":"block",cursor:j?"pointer":"default"},onClick:()=>i(_[a]||t)}),r.jsx("button",{className:_n.removeImageButton,onClick:()=>e(a),disabled:s,children:r.jsx(m,{})}),j&&r.jsx("span",{className:_n.zoomHint,children:"Нажмите для увеличения"})]}),x[a]&&r.jsx("div",{className:_n.errorNote,children:x[a]})]},a))),r.jsxs("div",{className:_n.imageNote,children:[r.jsx(M,{})," Максимум ",5," изображений. ",j&&"Нажмите на изображение для увеличения."]})]}),t[15]=l,t[16]=x,t[17]=O,t[18]=b,t[19]=o,t[20]=j,t[21]=s,t[22]=_,t[23]=n,t[24]=D,t[25]=$,t[26]=T,t[27]=U}else D=t[24],$=t[25],T=t[26],U=t[27];return t[44]!==D||t[45]!==k||t[46]!==v?(F=v&&k&&r.jsx(On,{imageUrl:k,onClose:D}),t[44]=D,t[45]=k,t[46]=v,t[47]=F):F=t[47],t[48]!==$||t[49]!==T||t[50]!==U||t[51]!==F?(G=r.jsxs(r.Fragment,{children:[$,T,U,F]}),t[48]=$,t[49]=T,t[50]=U,t[51]=F,t[52]=G):G=t[52],G};function $n(e){return e.stopPropagation()}function Tn(e){return(e=>{if(!e)return null;if(An.has(e))return An.get(e);if(e.includes("cloudinary.com"))return An.set(e,e),e;try{const t=`https://res.cloudinary.com/do9t8preg/image/fetch/f_auto,q_auto:best,dpr_auto,w_auto,c_limit,w_800/${encodeURIComponent(e)}`;return An.set(e,t),t}catch(t){return e}})(e)}function Un(e){return{...e,maxImagesReached:"Максимальное количество изображений: 5"}}const Fn=e=>{const t=a.c(26),{pollOptions:o,setPollOptions:n,isSubmitting:i,selectedFont:s,pollOptionsColor:l}=e;let d;t[0]!==o||t[1]!==n?(d=()=>{o.length<6&&n([...o,""])},t[0]=o,t[1]=n,t[2]=d):d=t[2];const c=d;let _;t[3]!==o||t[4]!==n?(_=e=>{if(o.length>2){const t=[...o];t.splice(e,1),n(t)}},t[3]=o,t[4]=n,t[5]=_):_=t[5];const m=_;let p,u,b,g;if(t[6]!==m||t[7]!==i||t[8]!==o||t[9]!==l||t[10]!==s||t[11]!==n){const e=(e,t)=>{const a=[...o];a[e]=t,n(a)};b=_n.pollContainer,p=_n.pollOptions,u=o.map(((t,a)=>r.jsx("div",{className:_n.pollOption,children:r.jsxs("div",{className:_n.pollOptionInputWrapper,children:[r.jsx("input",{type:"text",className:_n.pollOptionInput,value:t,onChange:t=>e(a,t.target.value),placeholder:`Вариант ${a+1}`,disabled:i,style:{color:l,fontFamily:s}}),o.length>2&&r.jsx("button",{type:"button",onClick:()=>m(a),className:_n.removeOptionButton,disabled:i,children:r.jsx(Z,{})})]})},a))),t[6]=m,t[7]=i,t[8]=o,t[9]=l,t[10]=s,t[11]=n,t[12]=p,t[13]=u,t[14]=b}else p=t[12],u=t[13],b=t[14];t[15]!==p||t[16]!==u?(g=r.jsx("div",{className:p,children:u}),t[15]=p,t[16]=u,t[17]=g):g=t[17];const h=i||o.length>=6;let x,f,v;return t[18]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(L,{}),t[18]=x):x=t[18],t[19]!==c||t[20]!==h?(f=r.jsxs("button",{type:"button",onClick:c,className:_n.addOptionButton,disabled:h,children:[x," Добавить вариант"]}),t[19]=c,t[20]=h,t[21]=f):f=t[21],t[22]!==b||t[23]!==g||t[24]!==f?(v=r.jsxs("div",{className:b,children:[g,f]}),t[22]=b,t[23]=g,t[24]=f,t[25]=v):v=t[25],v},Mn=`\n  .${_n.formOptions} {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    margin-top: 15px;\n  }\n  \n  .${_n.formToggles} {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n  \n  .${_n.optionToggle} {\n    display: flex;\n    align-items: center;\n    gap: 5px;\n    background-color: rgba(0, 0, 0, 0.03);\n    padding: 6px 10px;\n    border-radius: 4px;\n    font-size: 14px;\n    cursor: pointer;\n    white-space: nowrap;\n    margin-bottom: 5px;\n  }\n  \n  .${_n.submitButton} {\n    margin-top: 5px;\n    align-self: flex-end;\n  }\n\n  .${_n.imagePreview} {\n    max-width: 100%;\n    margin-top: 10px;\n    border-radius: 8px;\n    overflow: hidden;\n    border: 1px solid #ddd;\n    position: relative;\n  }\n  \n  .${_n.imagePreview} img {\n    max-width: 100%;\n    height: auto;\n    display: block;\n  }\n  \n  .${_n.imageNote} {\n    font-size: 12px;\n    color: #666;\n    margin-top: 5px;\n  }\n  \n  .${_n.imageUrlInputContainer} {\n    display: flex;\n    gap: 10px;\n  }\n  \n  .${_n.imageUrlInput} {\n    flex: 1;\n  }\n  \n  .${_n.addImageButton} {\n    background-color: #f0f2f5;\n    border: none;\n    border-radius: 4px;\n    padding: 8px 12px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    gap: 5px;\n    font-size: 14px;\n    transition: background-color 0.2s;\n  }\n  \n  .${_n.addImageButton}:hover {\n    background-color: #e4e6eb;\n  }\n  \n  .${_n.addImageButton}:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n  \n  .${_n.imageGalleryContainer} {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n    gap: 15px;\n    margin-top: 15px;\n  }\n  \n  .${_n.imagePreviewItem} {\n    position: relative;\n  }\n  \n  .${_n.removeImageButton} {\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    background: rgba(0, 0, 0, 0.5);\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    padding: 0;\n    transition: background-color 0.2s;\n  }\n  \n  .${_n.removeImageButton}:hover {\n    background: rgba(0, 0, 0, 0.7);\n  }\n  \n  .${_n.imageLoading} {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: rgba(255, 255, 255, 0.7);\n    font-size: 14px;\n  }\n  \n  @media (max-width: 768px) {\n    .${_n.formOptions} {\n      width: 100%;\n    }\n    \n    .${_n.formToggles} {\n      width: 100%;\n      justify-content: flex-start;\n    }\n    \n    .${_n.optionToggle} {\n      flex: 0 0 auto;\n      font-size: 13px;\n    }\n    \n    .${_n.submitButton} {\n      width: 100%;\n      margin-top: 10px;\n    }\n    \n    .${_n.imageGalleryContainer} {\n      grid-template-columns: 1fr;\n    }\n  }\n`;D.div`
  position: relative;
  display: inline-block;
  margin-left: 10px;
`,D.div`
  width: 36px;
  height: 36px;
  border-radius: 6px;
  cursor: pointer;
  border: 2px solid #ddd;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
  transition: all 0.3s ease;
  position: relative;
  
  &:hover {
    transform: scale(1.15);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    z-index: 5;
  }
  
  &:active {
    transform: scale(0.95);
  }
`,D(Q).attrs((e=>({style:{color:e.$isDark?"white":"black"}})))`
  opacity: 0.7;
  stroke-width: 2.5px;
  font-size: 16px;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2));
  
  &:hover {
    opacity: 1;
  }
`,D.div`
  position: absolute;
  z-index: 1000;
  top: calc(100% + 8px);
  left: 0;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
  border: 2px solid #fff;
  animation: fadeIn 0.2s ease-in-out;
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .react-colorful {
    width: 240px !important;
    height: 240px !important;
  }
`,D.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  cursor: default;
`;const Ln=D.div`
  font-size: 12px;
  color: #666;
  margin-top: 5px;
  max-width: 300px;
`,Gn=e=>{const t=a.c(57),{selectedFont:o,setSelectedFont:n,titleColor:i,setTitleColor:s,contentColor:l,setContentColor:d,pollOptionsColor:c,setPollOptionsColor:_,showPoll:m,isSubmitting:p}=e;let u,b,g,h,x,f,v,y,k,w,j,N,S,q,C,B,P,I,A,z,E,O,D,$,T,U;return t[0]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsxs("h4",{className:_n.stylingTitle,children:[r.jsx(Q,{})," Настройки стиля"]}),t[0]=u):u=t[0],t[1]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx("label",{children:"Шрифт:"}),t[1]=b):b=t[1],t[2]!==n?(g=e=>n(e.target.value),t[2]=n,t[3]=g):g=t[3],t[4]!==o?(h={fontFamily:o},t[4]=o,t[5]=h):h=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(x=zn.map(Rn),t[6]=x):x=t[6],t[7]!==p||t[8]!==o||t[9]!==g||t[10]!==h?(f=r.jsxs("div",{className:_n.stylingGroup,children:[b,r.jsx("select",{value:o,onChange:g,className:_n.fontSelector,disabled:p,style:h,children:x})]}),t[7]=p,t[8]=o,t[9]=g,t[10]=h,t[11]=f):f=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("label",{children:"Цвет заголовка:"}),y={display:"flex",alignItems:"center",gap:"10px"},t[12]=v,t[13]=y):(v=t[12],y=t[13]),t[14]!==s?(k=e=>s(e.target.value),t[14]=s,t[15]=k):k=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(w={width:"40px",height:"40px",border:"none",cursor:"pointer"},t[16]=w):w=t[16],t[17]!==k||t[18]!==i?(j=r.jsx("input",{type:"color",value:i,onChange:k,style:w}),t[17]=k,t[18]=i,t[19]=j):j=t[19],t[20]!==i?(N=r.jsx("span",{children:i}),t[20]=i,t[21]=N):N=t[21],t[22]!==j||t[23]!==N?(S=r.jsxs("div",{style:y,children:[j,N]}),t[22]=j,t[23]=N,t[24]=S):S=t[24],t[25]!==i?(q=En(i)&&r.jsx(Ln,{children:"Примечание: тёмные цвета будут автоматически адаптированы в темной теме для лучшей читаемости."}),t[25]=i,t[26]=q):q=t[26],t[27]!==S||t[28]!==q?(C=r.jsxs("div",{className:_n.stylingGroup,children:[v,S,q]}),t[27]=S,t[28]=q,t[29]=C):C=t[29],t[30]===Symbol.for("react.memo_cache_sentinel")?(B=r.jsx("label",{children:"Цвет текста поста:"}),P={display:"flex",alignItems:"center",gap:"10px"},t[30]=B,t[31]=P):(B=t[30],P=t[31]),t[32]!==d?(I=e=>d(e.target.value),t[32]=d,t[33]=I):I=t[33],t[34]===Symbol.for("react.memo_cache_sentinel")?(A={width:"40px",height:"40px",border:"none",cursor:"pointer"},t[34]=A):A=t[34],t[35]!==l||t[36]!==I?(z=r.jsx("input",{type:"color",value:l,onChange:I,style:A}),t[35]=l,t[36]=I,t[37]=z):z=t[37],t[38]!==l?(E=r.jsx("span",{children:l}),t[38]=l,t[39]=E):E=t[39],t[40]!==z||t[41]!==E?(O=r.jsxs("div",{style:P,children:[z,E]}),t[40]=z,t[41]=E,t[42]=O):O=t[42],t[43]!==l?(D=En(l)&&r.jsx(Ln,{children:"Примечание: тёмные цвета будут автоматически адаптированы в темной теме для лучшей читаемости."}),t[43]=l,t[44]=D):D=t[44],t[45]!==O||t[46]!==D?($=r.jsxs("div",{className:_n.stylingGroup,children:[B,O,D]}),t[45]=O,t[46]=D,t[47]=$):$=t[47],t[48]!==c||t[49]!==_||t[50]!==m?(T=m&&r.jsxs("div",{className:_n.stylingGroup,children:[r.jsx("label",{children:"Цвет вариантов опроса:"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx("input",{type:"color",value:c,onChange:e=>_(e.target.value),style:{width:"40px",height:"40px",border:"none",cursor:"pointer"}}),r.jsx("span",{children:c})]})]}),t[48]=c,t[49]=_,t[50]=m,t[51]=T):T=t[51],t[52]!==C||t[53]!==$||t[54]!==T||t[55]!==f?(U=r.jsxs("div",{className:_n.stylingOptions,children:[u,f,C,$,T]}),t[52]=C,t[53]=$,t[54]=T,t[55]=f,t[56]=U):U=t[56],U};function Rn(e){return r.jsx("option",{value:e.value,style:{fontFamily:e.value},children:e.name},e.value)}const Hn=e=>{const t=a.c(39),{showPoll:o,togglePoll:n,showStylingOptions:i,toggleStylingOptions:s,isPinned:l,setIsPinned:d,isSubmitting:c}=e;let _,m;t[0]!==c||t[1]!==o||t[2]!==n?(_=r.jsx("input",{type:"checkbox",checked:o,onChange:n,disabled:c}),t[0]=c,t[1]=o,t[2]=n,t[3]=_):_=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx($,{}),t[4]=m):m=t[4];const p=o?"Убрать опрос":"Добавить опрос";let u,b,g;t[5]!==_||t[6]!==p?(u=r.jsxs("label",{className:_n.optionToggle,children:[_,m," ",p]}),t[5]=_,t[6]=p,t[7]=u):u=t[7],t[8]!==c||t[9]!==i||t[10]!==s?(b=r.jsx("input",{type:"checkbox",checked:i,onChange:s,disabled:c}),t[8]=c,t[9]=i,t[10]=s,t[11]=b):b=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(N,{}),t[12]=g):g=t[12];const h=i?"Скрыть настройки":"Настройки стиля";let x,f,v,y;t[13]!==b||t[14]!==h?(x=r.jsxs("label",{className:_n.optionToggle,children:[b,g," ",h]}),t[13]=b,t[14]=h,t[15]=x):x=t[15],t[16]!==l||t[17]!==d?(f=()=>d(!l),t[16]=l,t[17]=d,t[18]=f):f=t[18],t[19]!==l||t[20]!==c||t[21]!==f?(v=r.jsx("input",{type:"checkbox",checked:l,onChange:f,disabled:c}),t[19]=l,t[20]=c,t[21]=f,t[22]=v):v=t[22],t[23]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(Y,{}),t[23]=y):y=t[23];const k=l?"Открепить":"Закрепить";let w,j,S,q,C;return t[24]!==v||t[25]!==k?(w=r.jsxs("label",{className:_n.optionToggle,children:[v,y," ",k]}),t[24]=v,t[25]=k,t[26]=w):w=t[26],t[27]!==w||t[28]!==u||t[29]!==x?(j=r.jsxs("div",{className:_n.formToggles,children:[u,x,w]}),t[27]=w,t[28]=u,t[29]=x,t[30]=j):j=t[30],t[31]!==c?(S=c?"Публикация...":r.jsxs(r.Fragment,{children:[r.jsx(F,{})," Опубликовать"]}),t[31]=c,t[32]=S):S=t[32],t[33]!==c||t[34]!==S?(q=r.jsx("button",{type:"submit",className:_n.submitButton,disabled:c,children:S}),t[33]=c,t[34]=S,t[35]=q):q=t[35],t[36]!==j||t[37]!==q?(C=r.jsxs("div",{className:_n.formOptions,children:[j,q]}),t[36]=j,t[37]=q,t[38]=C):C=t[38],C},Wn=({onPostCreated:e})=>{const{user:t,isAuthenticated:a}=br(),[o,n]=i.useState(""),[s,l]=i.useState(""),[d,c]=i.useState([]),[_,m]=i.useState(!1),[p,u]=i.useState(""),[b,g]=i.useState(!1),[x,f]=i.useState(["",""]),[v,y]=i.useState(!1),[k,w]=i.useState(!1),[j,N]=i.useState("#000000"),[S,C]=i.useState("#000000"),[B,P]=i.useState("#000000"),[I,A]=i.useState("inherit"),z=a&&t&&("igoraor79@gmail.com"===t.email||t.perks?.includes("admin")||"admin"===t.activePerk);return z?r.jsxs("div",{className:_n.createPostContainer,children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:Mn}}),r.jsxs("h3",{className:_n.createPostTitle,children:[r.jsx(q,{})," Создать пост"]}),p&&r.jsxs("div",{className:_n.errorMessage,children:[r.jsx(h,{})," ",p]}),r.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),z)if(b||s.trim())if(!b||s.trim()||o.trim()){if(!(b&&x.filter((e=>e.trim().length>0)).length<2&&(u("Для опроса необходимо минимум два варианта ответа"),1)))try{m(!0),u("");const a=b?{question:o.trim()||s.trim().split(" ").slice(0,5).join(" ")+"...",options:x.filter((e=>e.trim().length>0)).map((e=>e.trim())),optionsColor:B,styling:{optionsColor:B,fontFamily:I}}:null,r={title:o.trim()||null,content:s.trim(),imageUrls:d.length>0?d:null,userId:t.id,styling:{titleColor:j,contentColor:S,fontFamily:I},poll:a,isPinned:v},i=await bo.createPost(r);n(""),l(""),c([]),g(!1),f(["",""]),w(!1),N("#000000"),C("#000000"),P("#000000"),A("inherit"),y(!1),e&&e(i)}catch(r){r.message?u("Failed to create post: "+r.message):r.details?u("Error: "+r.details):u("Failed to create post. Try again later.")}finally{m(!1)}}else u("Добавьте текст поста или заголовок для опроса");else u("Текст поста не может быть пустым");else u("У вас недостаточно прав для создания постов")},className:_n.createPostForm,children:[r.jsx("input",{type:"text",className:_n.titleInput,value:o,onChange:e=>n(e.target.value),placeholder:"Заголовок поста",disabled:_,style:{color:j,fontFamily:I}}),r.jsx("textarea",{className:_n.contentInput,value:s,onChange:e=>l(e.target.value),placeholder:b?"Текст поста с опросом (необязательно)...":"Текст вашего поста...",rows:4,disabled:_,required:!b,style:{color:S,fontFamily:I}}),!b&&r.jsx(Dn,{imageUrls:d,setImageUrls:c,isSubmitting:_}),b&&r.jsx(Fn,{pollOptions:x,setPollOptions:f,isSubmitting:_,selectedFont:I,pollOptionsColor:B}),k&&r.jsx(Gn,{selectedFont:I,setSelectedFont:A,titleColor:j,setTitleColor:N,contentColor:S,setContentColor:C,pollOptionsColor:B,setPollOptionsColor:P,showPoll:b,isSubmitting:_}),r.jsx(Hn,{showPoll:b,togglePoll:()=>{g(!b),f(["",""])},showStylingOptions:k,toggleStylingOptions:()=>{w(!k)},isPinned:v,setIsPinned:y,isSubmitting:_})]})]}):null},Vn=D(o.div)`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(135deg, 
    rgba(33, 33, 38, 0.85) 0%, 
    rgba(68, 68, 77, 0.85) 100%
  );
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  perspective: 1000px;
  box-sizing: border-box;
  overscroll-behavior: contain;
  transform: translateZ(0);
  isolation: isolate;
  padding: 20px;
`,Yn=D(o.div)`
  background: var(--bg-secondary);
  border-radius: 12px;
  padding: 24px;
  width: 100%;
  max-width: 600px;
  box-shadow: var(--modal-shadow, 0 8px 30px rgba(0, 0, 0, 0.2));
  position: relative;
  border: 1px solid var(--modal-border, var(--border));
  transform-style: preserve-3d;
  margin: auto;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
`,Jn=D.div`
  color: var(--text-primary);
  margin-bottom: 24px;
  overflow-y: auto;
  max-height: calc(90vh - 150px);
  padding-right: 10px;
  font-feature-settings: "kern" 1, "liga" 1;
  text-rendering: optimizeLegibility;
  
  h3 {
    color: var(--text-primary);
    margin: 20px 0 10px;
    font-weight: 600;
    font-size: 18px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    
    &:first-child {
      margin-top: 0;
    }
  }
  
  p {
    margin: 10px 0;
    line-height: 1.6;
    font-size: 15px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  ul, ol {
    margin: 10px 0;
    padding-left: 20px;
    font-size: 14px;
    
    li {
      margin-bottom: 8px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
  }
  
  .highlight {
    background: lightgray;
    padding: 2px 4px;
    border-radius: 4px;
    color: var(--accent);
    font-weight: 500;
  }
  
  @media (max-width: 480px) {
    h3 {
      font-size: 17px;
    }
    
    p {
      font-size: 14px;
    }
    
    ul, ol {
      font-size: 13px;
    }
  }
`,Xn=D.div`
  display: flex;
  align-items: center;
  margin-bottom: 16px;
`,Zn=D.h2`
  color: var(--text-primary);
  font-size: 22px;
  margin: 0;
  padding: 0;
  display: flex;
  align-items: center;
  gap: 12px;

  svg {
    color: ${({isDark:e})=>e?"#fff":"var(--accent)"};
    transition: color 0.3s ease;
  }
`,Qn=D.button`
  position: absolute;
  top: 20px;
  right: 20px;
  background: none;
  border: none;
  color: ${({isDark:e})=>e?"#fff":"var(--text-tertiary)"};
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  
  &:hover {
    background: var(--bg-highlight);
    color: var(--text-primary);
  }
  
  svg {
    width: 20px;
    height: 20px;
  }
`,Kn=D.div`
  height: 1px;
  background: var(--border);
  margin: 16px 0;
  width: 100%;
`,ei={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}},ti={hidden:{opacity:0,y:20,rotateX:5},visible:{opacity:1,y:0,rotateX:0,transition:{duration:.4,ease:[.19,1,.22,1],delay:.1}},exit:{opacity:0,y:20,transition:{duration:.3}}},ai=e=>{const t=a.c(33),{isOpen:o,onClose:s}=e,{theme:d}=i.useContext(tt),c="dark"===d;let _,p,u;t[0]!==o?(_=()=>(document.body.style.overflow=o?"hidden":"",ri),p=[o],t[0]=o,t[1]=_,t[2]=p):(_=t[1],p=t[2]),i.useEffect(_,p),t[3]!==s?(u=e=>{e.target===e.currentTarget&&s()},t[3]=s,t[4]=u):u=t[4];const b=u;let g,h,x;if(t[5]!==o||t[6]!==s?(g=()=>{const e=e=>{"Escape"===e.key&&o&&s()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},h=[o,s],t[5]=o,t[6]=s,t[7]=g,t[8]=h):(g=t[7],h=t[8]),i.useEffect(g,h),!o)return null;if(t[9]!==b||t[10]!==c||t[11]!==s){let e,a,o,i,d,_,p,u,g,h,f,v,y;t[13]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(m,{size:20}),t[13]=e):e=t[13],t[14]!==c||t[15]!==s?(a=r.jsx(Qn,{onClick:s,isDark:c,children:e}),t[14]=c,t[15]=s,t[16]=a):a=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(K,{size:24}),t[17]=o):o=t[17],t[18]!==c?(i=r.jsx(Xn,{children:r.jsxs(Zn,{isDark:c,children:[o,"Правила сообщества"]})}),t[18]=c,t[19]=i):i=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(Kn,{}),t[20]=d):d=t[20],t[21]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx("h3",{children:"1. Общие правила"}),p=r.jsx("p",{children:"Добро пожаловать в наше сообщество! Эти правила помогут создать комфортную и безопасную среду для всех участников:"}),u=r.jsxs("ul",{children:[r.jsx("li",{children:"Относитесь к другим участникам с уважением"}),r.jsx("li",{children:"Запрещены оскорбления, унижения, травля и дискриминация"}),r.jsx("li",{children:"Уважайте личное пространство и частную информацию других пользователей"}),r.jsx("li",{children:"Не публикуйте контент, нарушающий законодательство РФ"})]}),g=r.jsx("h3",{children:"2. Публикации и комментарии"}),h=r.jsx("p",{children:"При создании постов и комментариев просим придерживаться следующих принципов:"}),t[21]=_,t[22]=p,t[23]=u,t[24]=g,t[25]=h):(_=t[21],p=t[22],u=t[23],g=t[24],h=t[25]),t[26]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsxs(Jn,{children:[_,p,u,g,h,r.jsxs("ul",{children:[r.jsxs("li",{children:["Используйте ",r.jsx("span",{className:"highlight",children:"понятный и уважительный язык"})]}),r.jsx("li",{children:"Не используйте нецензурную лексику и оскорбительные выражения"}),r.jsx("li",{children:"Не публикуйте спам, рекламу и другой нежелательный контент"}),r.jsx("li",{children:"Избегайте публикации недостоверной информации"}),r.jsx("li",{children:"Не публикуйте спойлеры"})]}),r.jsx("h3",{children:"3. Профиль и личные данные"}),r.jsx("p",{children:"Обеспечение безопасности ваших данных - наш приоритет:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Не публикуйте личную информацию других пользователей"}),r.jsx("li",{children:"Не размещайте в публичном доступе свои персональные данные"}),r.jsx("li",{children:"Выбирайте безопасные пароли и не передавайте их третьим лицам"})]}),r.jsx("h3",{children:"4. Нарушения и санкции"}),r.jsx("p",{children:"За нарушение правил могут последовать:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Предупреждение от модерации"}),r.jsx("li",{children:"Временная блокировка аккаунта"})]}),r.jsx("p",{children:"Правила могут обновляться и дополняться. Следите за изменениями в этом разделе."})]}),t[26]=f):f=t[26],t[27]!==i||t[28]!==a?(v=r.jsxs(Yn,{variants:ti,initial:"hidden",animate:"visible",exit:"exit",onClick:oi,children:[a,i,d,f]}),t[27]=i,t[28]=a,t[29]=v):v=t[29],t[30]!==b||t[31]!==v?(y=r.jsx(n,{mode:"wait",children:r.jsx(Vn,{variants:ei,initial:"hidden",animate:"visible",exit:"exit",onClick:b,children:v})}),t[30]=b,t[31]=v,t[32]=y):y=t[32],x=l.createPortal(y,document.body),t[9]=b,t[10]=c,t[11]=s,t[12]=x}else x=t[12];return x};function ri(){document.body.style.overflow=""}function oi(e){return e.stopPropagation()}const ni=()=>{const{user:e,isAuthenticated:t}=br(),[a,o]=i.useState([]),[n,s]=i.useState(!0),[l,d]=i.useState(!1),[c,_]=i.useState(""),[m,p]=i.useState(0),[u,b]=i.useState(!1),[g,x]=i.useState(1),[f,v]=i.useState(!0),[y,k]=i.useState(0),w=i.useRef(),j=i.useRef(),N=t&&e&&("igoraor79@gmail.com"===e.email||e.perks?.includes("admin")||"admin"===e.activePerk),S=async(e=1,t=!1)=>{try{1===e?s(!0):d(!0);const a=await bo.getPosts(e,10);if(!a||!a.posts)throw new Error("Не удалось получить данные постов");o(t?e=>[...e,...a.posts]:a.posts),v(a.hasMore),k(a.totalCount),_(""),s(!1),d(!1)}catch(a){_("Не удалось загрузить посты. Попробуйте позже."),s(!1),d(!1)}},q=i.useCallback((()=>{if(!l&&f){const e=g+1;x(e),S(e,!0)}}),[g,l,f]);i.useEffect((()=>{w.current&&w.current.disconnect(),w.current=new IntersectionObserver((e=>{e[0].isIntersecting&&f&&!l&&!n&&q()}),{rootMargin:"100px",threshold:.1});const e=j.current;return e&&w.current.observe(e),()=>{e&&w.current.unobserve(e)}}),[q,f,l,n]),i.useEffect((()=>{x(1),S(1,!1)}),[m]);const C=(e,t,a)=>{o((t=>t.map((t=>t.id===e?{...t,likes_count:a}:t))))},B=async e=>{try{(await bo.deletePost(e)).success&&(o((t=>t.filter((t=>t.id!==e)))),k((e=>e-1)))}catch(t){_("Не удалось удалить пост. "+(t.message||"Попробуйте позже."))}},I=async(e,t,r)=>{const n=a.map((a=>a.id===e?{...a,is_pinned:t}:r&&a.id===r&&t?{...a,is_pinned:!1}:a)),i=n.filter((e=>e.is_pinned)),s=n.filter((e=>!e.is_pinned));i.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))),s.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))),o([...i,...s])},A=e=>{o((t=>t.map((t=>t.id===e.id?{...t,...e}:t))))};return r.jsxs("div",{className:_n.postsContainer,children:[r.jsxs("div",{className:_n.postsHeader,children:[r.jsxs("h2",{children:[r.jsx(ee,{})," Лента постов ",y>0&&`(${a.length}/${y})`]}),r.jsxs("div",{className:_n.headerButtons,children:[r.jsxs("button",{className:_n.rulesButton,onClick:()=>{b((e=>!e))},children:[r.jsx(te,{})," Правила"]}),r.jsxs("button",{className:_n.refreshButton,onClick:()=>{x(1),p((e=>e+1))},disabled:n,children:[n?r.jsx(P,{}):r.jsx(ae,{})," Обновить"]})]})]}),N&&r.jsx(Wn,{onPostCreated:e=>{o((t=>{if(e.is_pinned)return[e,...t];const a=t.filter((e=>e.is_pinned)),r=t.filter((e=>!e.is_pinned));return[...a,e,...r]})),k((e=>e+1))}}),c&&r.jsxs("div",{className:_n.errorMessage,children:[r.jsx(h,{})," ",c]}),n&&1===g?r.jsxs("div",{className:_n.loading,children:[r.jsx(P,{})," Загрузка постов..."]}):a.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:_n.postsList,children:a.map((e=>r.jsx(In,{post:e,onLikeToggle:C,onDelete:B,onPinChange:I,onUpdate:A},e.id)))}),r.jsxs("div",{ref:j,className:_n.loadMoreContainer,children:[l&&r.jsxs("div",{className:_n.loadMoreSpinner,children:[r.jsx(P,{})," Загрузка старых постов..."]}),!f&&a.length>=y&&r.jsx("div",{className:_n.noMorePosts,children:"Вы загрузили все посты"})]})]}):r.jsxs("div",{className:_n.noPosts,children:[r.jsx(re,{}),r.jsxs("p",{children:["Постов пока нет. ",N?"Создайте первый пост!":"Скоро здесь появится интересный контент!"]})]}),r.jsx(ai,{isOpen:u,onClose:()=>b(!1)})]})},ii={adminPanel:"_adminPanel_1idaq_2",title:"_title_1idaq_23",error:"_error_1idaq_38",fadeIn:"_fadeIn_1idaq_1",message:"_message_1idaq_51",success:"_success_1idaq_60",info:"_info_1idaq_65",content:"_content_1idaq_86",usersSection:"_usersSection_1idaq_98",editSection:"_editSection_1idaq_98",loader:"_loader_1idaq_118",spin:"_spin_1idaq_1005",userList:"_userList_1idaq_140",userGrid:"_userGrid_1idaq_163",userCard:"_userCard_1idaq_170",selected:"_selected_1idaq_185",banned:"_banned_1idaq_189",userAvatar:"_userAvatar_1idaq_204",userInfo:"_userInfo_1idaq_237",userPerks:"_userPerks_1idaq_254",userActions:"_userActions_1idaq_261",editButton:"_editButton_1idaq_287",banButton:"_banButton_1idaq_291",unbanButton:"_unbanButton_1idaq_295",banInfo:"_banInfo_1idaq_300",editForm:"_editForm_1idaq_328",formGroup:"_formGroup_1idaq_337",perksOptions:"_perksOptions_1idaq_381",perkOption:"_perkOption_1idaq_392",basePerk:"_basePerk_1idaq_412",baseLabel:"_baseLabel_1idaq_422",baseNote:"_baseNote_1idaq_425",protectedUser:"_protectedUser_1idaq_432",selectedUser:"_selectedUser_1idaq_460",editUserButton:"_editUserButton_1idaq_464",formActions:"_formActions_1idaq_486",cancelButton:"_cancelButton_1idaq_493",saveButton:"_saveButton_1idaq_494",noUserSelected:"_noUserSelected_1idaq_540",emptyList:"_emptyList_1idaq_564",banUserButton:"_banUserButton_1idaq_576",bannedUser:"_bannedUser_1idaq_597",modalOverlay:"_modalOverlay_1idaq_608",banDialog:"_banDialog_1idaq_634",slideUp:"_slideUp_1idaq_1",banDialogHeader:"_banDialogHeader_1idaq_680",closeButton:"_closeButton_1idaq_696",banDialogContent:"_banDialogContent_1idaq_724",currentBanInfo:"_currentBanInfo_1idaq_728",banDialogActions:"_banDialogActions_1idaq_792",eventsSection:"_eventsSection_1idaq_886",eventsList:"_eventsList_1idaq_909",eventItem:"_eventItem_1idaq_915",eventInfo:"_eventInfo_1idaq_931",eventToggle:"_eventToggle_1idaq_953",active:"_active_1idaq_974",loadingContainer:"_loadingContainer_1idaq_985",spinningLoader:"_spinningLoader_1idaq_1005"},si=e=>{const t=a.c(11),{users:o,loading:n,selectedUser:i,handleSelectUser:s,handleUnbanUser:l,setShowBanDialog:d,setBanDialogUser:c,setTemporaryMessage:_}=e;let m;t[0]!==c||t[1]!==d?(m=e=>{c(e),d(!0)},t[0]=c,t[1]=d,t[2]=m):m=t[2];const p=m,b=li;let g;return t[3]!==p||t[4]!==s||t[5]!==l||t[6]!==n||t[7]!==i?.id||t[8]!==_||t[9]!==o?(g=r.jsx("div",{className:ii.userList,children:n?r.jsxs("div",{className:ii.loader,children:[r.jsx(P,{size:24})," Загрузка пользователей..."]}):r.jsx(r.Fragment,{children:0===o.length?r.jsx("p",{children:"Пользователи не найдены"}):r.jsx("div",{className:ii.userGrid,children:o.map((e=>r.jsxs("div",{className:`${ii.userCard} ${i?.id===e.id?ii.selected:""} ${e.is_banned?ii.banned:""}`,onClick:()=>s(e),children:[r.jsx("div",{className:ii.userAvatar,children:e.avatar?r.jsx(Ce,{avatar:e.avatar,alt:e.displayName||"Пользователь",size:64,style:{objectFit:"cover",width:"100%",height:"100%"}}):r.jsx(u,{size:32})}),r.jsxs("div",{className:ii.userInfo,children:[r.jsx("h3",{children:e.displayName||"Без имени"}),r.jsx("p",{children:e.email}),r.jsx("div",{className:ii.userPerks,children:e.perks?.map(di)})]}),r.jsxs("div",{className:ii.userActions,children:[r.jsx("button",{className:ii.editButton,onClick:t=>{t.stopPropagation(),s(e)},title:"Редактировать профиль",children:r.jsx(q,{size:16})}),e.is_banned?r.jsx("button",{className:ii.unbanButton,onClick:t=>{t.stopPropagation(),l(e.id)},title:"Разблокировать пользователя",children:r.jsx(oe,{size:16})}):r.jsx("button",{className:ii.banButton,onClick:t=>{t.stopPropagation(),b(e)?_({type:"error",text:"Нельзя заблокировать администратора или разработчика"}):p(e)},title:"Заблокировать пользователя",disabled:b(e),children:r.jsx(f,{size:16})})]}),e.is_banned&&r.jsxs("div",{className:ii.banInfo,children:[r.jsxs("p",{children:["Заблокирован: ",e.ban_reason]}),e.ban_end_at&&r.jsxs("p",{children:["До: ",new Date(e.ban_end_at).toLocaleString()]}),r.jsxs("p",{children:["Админ: ",e.ban_admin_name]})]})]},e.id)))})})}),t[3]=p,t[4]=s,t[5]=l,t[6]=n,t[7]=i?.id,t[8]=_,t[9]=o,t[10]=g):g=t[10],g};function li(e){const t=localStorage.getItem("userEmail");return e.email===t||e.perks?.includes("admin")||e.perks?.includes("developer")}function di(e){return r.jsx("span",{className:`${ii.perk} ${ii[e]}`,children:e},e)}const ci=e=>{const t=a.c(64),{formData:o,handleChange:n,handlePerkChange:i,handleSubmit:s,loading:l,setIsEditing:d}=e;let c,_,p,b,g,h,f,v,y,k,w,j,N,S,q,C,A,z,E,O,D,$,T,U,F,M,L,G,R,H;return t[0]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsxs("label",{htmlFor:"displayName",children:[r.jsx(u,{size:18})," Отображаемое имя:"]}),t[0]=c):c=t[0],t[1]!==o.displayName||t[2]!==n?(_=r.jsxs("div",{className:ii.formGroup,children:[c,r.jsx("input",{type:"text",id:"displayName",name:"displayName",value:o.displayName,onChange:n,placeholder:"Введите имя пользователя"})]}),t[1]=o.displayName,t[2]=n,t[3]=_):_=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsxs("label",{htmlFor:"email",children:[r.jsx(x,{size:18})," Email:"]}),t[4]=p):p=t[4],t[5]!==o.email||t[6]!==n?(b=r.jsxs("div",{className:ii.formGroup,children:[p,r.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:n,placeholder:"Введите email",readOnly:!0})]}),t[5]=o.email,t[6]=n,t[7]=b):b=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsxs("label",{children:[r.jsx(B,{size:18})," Привилегии:"]}),t[8]=g):g=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("input",{type:"checkbox",id:"perk-user",checked:!0,disabled:!0,readOnly:!0}),t[9]=h):h=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsxs("div",{className:`${ii.perkOption} ${ii.basePerk}`,children:[h,r.jsxs("label",{htmlFor:"perk-user",className:ii.baseLabel,children:["Пользователь ",r.jsx("span",{className:ii.baseNote,children:"(базовая привилегия)"})]})]}),t[10]=f):f=t[10],t[11]!==o.perks?(v=o.perks.includes("early_user"),t[11]=o.perks,t[12]=v):v=t[12],t[13]!==i?(y=()=>i("early_user"),t[13]=i,t[14]=y):y=t[14],t[15]!==v||t[16]!==y?(k=r.jsx("input",{type:"checkbox",id:"perk-early_user",checked:v,onChange:y}),t[15]=v,t[16]=y,t[17]=k):k=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(w=r.jsx("label",{htmlFor:"perk-early_user",children:"Ранний пользователь"}),t[18]=w):w=t[18],t[19]!==k?(j=r.jsxs("div",{className:ii.perkOption,children:[k,w]}),t[19]=k,t[20]=j):j=t[20],t[21]!==o.perks?(N=o.perks.includes("sponsor"),t[21]=o.perks,t[22]=N):N=t[22],t[23]!==i?(S=()=>i("sponsor"),t[23]=i,t[24]=S):S=t[24],t[25]!==N||t[26]!==S?(q=r.jsx("input",{type:"checkbox",id:"perk-sponsor",checked:N,onChange:S}),t[25]=N,t[26]=S,t[27]=q):q=t[27],t[28]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("label",{htmlFor:"perk-sponsor",children:"Спонсор"}),t[28]=C):C=t[28],t[29]!==q?(A=r.jsxs("div",{className:ii.perkOption,children:[q,C]}),t[29]=q,t[30]=A):A=t[30],t[31]!==o.perks?(z=o.perks.includes("admin"),t[31]=o.perks,t[32]=z):z=t[32],t[33]!==i?(E=()=>i("admin"),t[33]=i,t[34]=E):E=t[34],t[35]!==z||t[36]!==E?(O=r.jsx("input",{type:"checkbox",id:"perk-admin",checked:z,onChange:E}),t[35]=z,t[36]=E,t[37]=O):O=t[37],t[38]===Symbol.for("react.memo_cache_sentinel")?(D=r.jsx("label",{htmlFor:"perk-admin",children:"Администратор"}),t[38]=D):D=t[38],t[39]!==O?($=r.jsxs("div",{className:ii.perkOption,children:[O,D]}),t[39]=O,t[40]=$):$=t[40],t[41]!==j||t[42]!==A||t[43]!==$?(T=r.jsxs("div",{className:ii.formGroup,children:[g,r.jsxs("div",{className:ii.perksOptions,children:[f,j,A,$]})]}),t[41]=j,t[42]=A,t[43]=$,t[44]=T):T=t[44],t[45]!==d?(U=()=>d(!1),t[45]=d,t[46]=U):U=t[46],t[47]===Symbol.for("react.memo_cache_sentinel")?(F=r.jsx(m,{size:18}),t[47]=F):F=t[47],t[48]!==U?(M=r.jsxs("button",{type:"button",className:ii.cancelButton,onClick:U,children:[F," Отмена"]}),t[48]=U,t[49]=M):M=t[49],t[50]!==l?(L=l?r.jsx(P,{size:18}):r.jsx(I,{size:18}),t[50]=l,t[51]=L):L=t[51],t[52]!==l||t[53]!==L?(G=r.jsxs("button",{type:"submit",className:ii.saveButton,disabled:l,children:[L," Сохранить"]}),t[52]=l,t[53]=L,t[54]=G):G=t[54],t[55]!==M||t[56]!==G?(R=r.jsxs("div",{className:ii.formActions,children:[M,G]}),t[55]=M,t[56]=G,t[57]=R):R=t[57],t[58]!==s||t[59]!==_||t[60]!==T||t[61]!==R||t[62]!==b?(H=r.jsxs("form",{className:ii.editForm,onSubmit:s,children:[_,b,T,R]}),t[58]=s,t[59]=_,t[60]=T,t[61]=R,t[62]=b,t[63]=H):H=t[63],H},_i=e=>{const t=a.c(5),{siteEvents:o,eventsLoading:n,toggleSiteEvent:i}=e;let s,l;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsxs("h2",{children:[r.jsx(C,{size:18})," События сайта"]}),t[0]=s):s=t[0],t[1]!==n||t[2]!==o||t[3]!==i?(l=r.jsxs("div",{className:ii.eventsSection,children:[s,n?r.jsxs("div",{className:ii.loader,children:[r.jsx(P,{size:24})," Загрузка настроек событий..."]}):r.jsx("div",{className:ii.eventsList,children:r.jsxs("div",{className:ii.eventItem,children:[r.jsxs("div",{className:ii.eventInfo,children:[r.jsx("h3",{children:'Привилегия "Ранний пользователь"'}),r.jsx("p",{children:'Автоматически выдает привилегию "Ранний пользователь" всем новым пользователям при регистрации.'}),r.jsxs("p",{children:[r.jsx("strong",{children:"Статус:"})," ",o.earlyUserPromotion?"Активно":"Неактивно"]})]}),r.jsxs("button",{className:`${ii.eventToggle} ${o.earlyUserPromotion?ii.active:""}`,onClick:()=>i("earlyUserPromotion"),disabled:n,children:[o.earlyUserPromotion?r.jsx(ne,{size:24}):r.jsx(ie,{size:24}),o.earlyUserPromotion?"Выключить":"Включить"]})]})})]}),t[1]=n,t[2]=o,t[3]=i,t[4]=l):l=t[4],l},mi=e=>{const t=a.c(27),{showBanDialog:o,banDialogUser:n,banReason:i,setBanReason:s,banDuration:d,setBanDuration:c,banLoading:_,handleBanUser:p,handleUnbanUser:u,setShowBanDialog:b}=e;if(!o||!n)return null;let g;if(t[0]!==n.displayName||t[1]!==n.id||t[2]!==n.is_banned||t[3]!==d||t[4]!==_||t[5]!==i||t[6]!==p||t[7]!==u||t[8]!==c||t[9]!==s||t[10]!==b){const e=n.is_banned?"Управление блокировкой":"Блокировка пользователя";let a,o,h,x,f;t[12]!==e?(a=r.jsx("h3",{children:e}),t[12]=e,t[13]=a):a=t[13],t[14]!==b?(o=()=>b(!1),t[14]=b,t[15]=o):o=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(m,{}),t[16]=h):h=t[16],t[17]!==o?(x=r.jsx("button",{className:ii.closeButton,onClick:o,children:h}),t[17]=o,t[18]=x):x=t[18],t[19]!==a||t[20]!==x?(f=r.jsxs("div",{className:ii.banDialogHeader,children:[a,x]}),t[19]=a,t[20]=x,t[21]=f):f=t[21];const v=n.is_banned?r.jsxs("div",{className:ii.currentBanInfo,children:[r.jsxs("p",{children:["Пользователь ",r.jsx("strong",{children:n.displayName})," в настоящее время заблокирован."]}),r.jsxs("button",{className:ii.unbanButton,onClick:()=>u(n.id),disabled:_,children:[_?r.jsx(P,{size:16}):r.jsx(A,{size:16})," Разблокировать пользователя"]})]}):r.jsxs("form",{onSubmit:p,children:[r.jsxs("div",{className:ii.formGroup,children:[r.jsx("label",{htmlFor:"banReason",children:"Причина блокировки:"}),r.jsx("textarea",{id:"banReason",value:i,onChange:e=>s(e.target.value),placeholder:"Укажите причину блокировки пользователя",rows:4,required:!0})]}),r.jsxs("div",{className:ii.formGroup,children:[r.jsx("label",{htmlFor:"banDuration",children:"Длительность блокировки:"}),r.jsxs("select",{id:"banDuration",value:d,onChange:e=>c(e.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Выберите длительность"}),r.jsx("option",{value:"30m",children:"30 минут"}),r.jsx("option",{value:"2h",children:"2 часа"}),r.jsx("option",{value:"6h",children:"6 часов"}),r.jsx("option",{value:"24h",children:"24 часа"}),r.jsx("option",{value:"7d",children:"7 дней"})]})]}),r.jsxs("div",{className:ii.banDialogActions,children:[r.jsxs("button",{type:"button",className:ii.cancelButton,onClick:()=>b(!1),disabled:_,children:[r.jsx(m,{size:16})," Отмена"]}),r.jsxs("button",{type:"submit",className:ii.banButton,disabled:!i.trim()||!d||_,children:[_?r.jsx(P,{size:16}):r.jsx(z,{size:16})," Заблокировать"]})]})]});let y,k;t[22]!==v?(y=r.jsx("div",{className:ii.banDialogContent,children:v}),t[22]=v,t[23]=y):y=t[23],t[24]!==f||t[25]!==y?(k=r.jsx("div",{className:ii.modalOverlay,children:r.jsxs("div",{className:ii.banDialog,children:[f,y]})}),t[24]=f,t[25]=y,t[26]=k):k=t[26],g=l.createPortal(k,document.getElementById("modal-root")||document.body),t[0]=n.displayName,t[1]=n.id,t[2]=n.is_banned,t[3]=d,t[4]=_,t[5]=i,t[6]=p,t[7]=u,t[8]=c,t[9]=s,t[10]=b,t[11]=g}else g=t[11];return g},pi=e=>{const t=a.c(12),{message:o}=e;if(!o)return null;const n=`${ii.message} ${ii[o.type]}`;let i,s,l,d;return t[0]!==o.type?(i="success"===o.type&&r.jsx(g,{size:20,style:{marginRight:"10px"}}),t[0]=o.type,t[1]=i):i=t[1],t[2]!==o.type?(s="error"===o.type&&r.jsx(h,{size:20,style:{marginRight:"10px"}}),t[2]=o.type,t[3]=s):s=t[3],t[4]!==o.type?(l="info"===o.type&&r.jsx(p,{size:20,style:{marginRight:"10px"}}),t[4]=o.type,t[5]=l):l=t[5],t[6]!==o.text||t[7]!==n||t[8]!==i||t[9]!==s||t[10]!==l?(d=r.jsxs("div",{className:n,children:[i,s,l,o.text]}),t[6]=o.text,t[7]=n,t[8]=i,t[9]=s,t[10]=l,t[11]=d):d=t[11],d},ui=async()=>{try{const{data:t,error:a}=await Ma.from("profiles").select("*").order("created_at",{ascending:!1});if(a)throw new Error("Ошибка загрузки профилей пользователей");if(!t||0===t.length)return[];let r=[];try{const{data:e,error:t}=await Ma.rpc("admin_get_users");!t&&e&&(r=e)}catch(e){}let o=t.map((e=>{const t=r.find((t=>t.id===e.id)),a=t?.raw_user_meta_data||{};return{id:e.id,displayName:e.display_name||a.display_name||"Пользователь",email:t?.email||e.email||"Нет email",perks:e.perks||["user"],activePerk:e.active_perk||"user",avatar:e.avatar||a.avatar,createdAt:t?.created_at||e.created_at||(new Date).toISOString(),is_banned:e.is_banned||!1,ban_reason:e.ban_reason,ban_end_at:e.ban_end_at,ban_admin_id:e.ban_admin_id,ban_admin_name:e.ban_admin_name}}));return o=await(async e=>{const t=new Date,a=[];for(const r of e)r.is_banned&&r.ban_end_at&&new Date(r.ban_end_at)<t&&(a.push(Ma.from("profiles").update({is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_id:null,ban_admin_name:null}).eq("id",r.id)),a.push(Ma.from("user_bans").update({is_active:!1}).eq("user_id",r.id).eq("is_active",!0)),r.is_banned=!1,r.ban_reason=null,r.ban_end_at=null,r.ban_admin_id=null,r.ban_admin_name=null);return a.length>0&&await Promise.all(a),e})(o),o}catch(t){throw t}},bi=(e,t,a)=>{const[r,o]=i.useState([]),[n,s]=i.useState(!0),[l,d]=i.useState(null),[c,_]=i.useState(!1),[m,p]=i.useState({displayName:"",email:"",perks:[]});return{users:r,setUsers:o,loading:n,setLoading:s,selectedUser:l,isEditing:c,formData:m,loadUsers:async()=>{try{s(!0);const e=await ui();return o(e),e}catch(e){throw e}finally{s(!1)}},handleSelectUser:e=>{d(e),p({displayName:e.displayName||"",email:e.email||"",perks:e.perks||["user"]}),_(!0)},handleChange:e=>{const{name:t,value:a}=e.target;p({...m,[t]:a})},handlePerkChange:e=>{if("user"===e)return;const t=m.perks.includes(e)?m.perks.filter((t=>t!==e)):[...m.perks,e];t.includes("user")||t.push("user"),p({...m,perks:t})},handleSubmit:async r=>{r.preventDefault();try{s(!0);let r=!1;if(m.displayName!==l.displayName&&(await nr.adminUpdateDisplayName(l.id,m.displayName,ui),r=!0),JSON.stringify(m.perks)!==JSON.stringify(l.perks)&&(await(async(e,t)=>{try{const{data:r,error:o}=await Ma.from("profiles").select("*").eq("id",e).single();if(o)throw new Error(`Не удалось получить профиль: ${o.message}`);let n=["user"];t.includes("early_user")&&n.push("early_user"),t.includes("sponsor")&&n.push("sponsor"),t.includes("admin")&&n.push("admin");let i=r.active_perk;if(n.includes(i)||(i=n[0]),(await Ma.from("profiles").update({perks:n,active_perk:i,updated_at:(new Date).toISOString()}).eq("id",e)).error)try{const{error:t}=await Ma.rpc("admin_update_privileges",{user_id:e,privileges:n});if(t)throw new Error(`Ошибка при обновлении привилегий через RPC: ${t.message}`);const{error:a}=await Ma.from("profiles").update({active_perk:i}).eq("id",e)}catch(a){const t=JSON.stringify(n),{error:r}=await Ma.from("profiles").update({raw_perks:t,special_update:!0,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r}const{data:s}=await Ma.from("profiles").select("*").eq("id",e).single();return!0}catch(r){throw r}})(l.id,m.perks),r=!0),!r)return a({type:"info",text:"Нет изменений для сохранения"}),void s(!1);const n=await ui();o(n),e&&e.id===l.id&&t(),a({type:"success",text:"Профиль пользователя успешно обновлен"}),setTimeout((()=>{_(!1),d(null)}),2e3)}catch(n){a({type:"error",text:n.message})}finally{s(!1)}},setIsEditing:_,handleResetPasswordByEmail:async e=>{try{s(!0),a({type:"info",text:`Отправка ссылки для сброса пароля на ${e}...`});const t=`${window.location.origin}/reset-password`,{error:r}=await Ma.auth.resetPasswordForEmail(e,{redirectTo:t});if(r)throw new Error(`Ошибка при отправке ссылки: ${r.message}`);a({type:"success",text:`Ссылка для сброса пароля отправлена на ${e}`})}catch(t){a({type:"error",text:t.message})}finally{s(!1)}}}},gi="site_events_cache",hi=()=>{const{user:e,isAuthenticated:t,loading:o}=br(),n=k(),s=i.useRef(!1),l=i.useRef(!1),d=i.useMemo((()=>e&&(e.email===Ka||e.perks?.includes("admin")||"admin"===e.activePerk)),[e]),[c,_]=i.useState("overview"),[m,p]=i.useState(""),[b,g]=i.useState(null),[h,x]=i.useState(!0),{message:f,setTemporaryMessage:v}=(()=>{const e=a.c(5),[t,r]=i.useState(null),o=i.useRef(null);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=(e,t)=>{const a=void 0===t?3e3:t;o.current&&clearTimeout(o.current),r(e),o.current=setTimeout((()=>{r(null)}),a)},e[0]=n):n=e[0];const s=n;let l,d,c;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>()=>{o.current&&clearTimeout(o.current)},d=[],e[1]=l,e[2]=d):(l=e[1],d=e[2]),i.useEffect(l,d),e[3]!==t?(c={message:t,setTemporaryMessage:s},e[3]=t,e[4]=c):c=e[4],c})(),{siteEvents:y,eventsLoading:w,loadSiteEvents:j,toggleSiteEvent:S}=((e,t)=>{const[a,r]=i.useState((()=>{try{const e=localStorage.getItem(gi);if(e)return JSON.parse(e)}catch(e){}return{earlyUserPromotion:!1}})),[o,n]=i.useState(!1),s=i.useRef(!1),l=i.useRef(!1);return i.useEffect((()=>{try{localStorage.setItem(gi,JSON.stringify(a));const e=new CustomEvent("siteEventsChanged",{detail:{siteEvents:a}});window.dispatchEvent(e)}catch(e){}}),[a]),i.useEffect((()=>{const e=e=>{if(e.key===gi&&e.newValue)try{const t=JSON.parse(e.newValue);r(t)}catch(t){}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]),{siteEvents:a,eventsLoading:o,loadSiteEvents:async()=>{if(!s.current)try{s.current=!0,n(!0);try{const{data:o,error:n}=await Ma.from("site_settings").select("*").limit(1);if(n){try{await Ma.rpc("create_site_settings_if_not_exists")}catch(e){}try{await Ma.from("site_settings").insert({early_user_promotion:a.earlyUserPromotion||!1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})}catch(t){}}else if(o&&0!==o.length){const e={earlyUserPromotion:o[0].early_user_promotion||!1};r(e),localStorage.setItem(gi,JSON.stringify(e));const t=new CustomEvent("siteEventsChanged",{detail:{siteEvents:e}});window.dispatchEvent(t)}else try{await Ma.from("site_settings").insert({early_user_promotion:a.earlyUserPromotion||!1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})}catch(t){}}catch(o){}l.current=!0}finally{n(!1),s.current=!1}},toggleSiteEvent:async o=>{if(!s.current)try{if(!e||e.email!==Ka&&!e.perks?.includes("admin")&&"admin"!==e.activePerk)return void t({type:"error",text:"Только администраторы могут управлять событиями сайта"});s.current=!0,n(!0);const l=!a[o];let d="earlyUserPromotion"===o?"early_user_promotion":o.replace(/([A-Z])/g,"_$1").toLowerCase();try{const{data:e,error:n}=await Ma.from("site_settings").select("id").limit(1);n||!e||0===e.length?await Ma.from("site_settings").insert({[d]:l,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}):await Ma.from("site_settings").update({[d]:l,updated_at:(new Date).toISOString()}).eq("id",e[0].id);const i={...a,[o]:l};r(i),localStorage.setItem(gi,JSON.stringify(i));const s=new CustomEvent("siteEventsChanged",{detail:{siteEvents:i}});window.dispatchEvent(s),t({type:"success",text:`Событие "${"earlyUserPromotion"===o?"Ранний пользователь":o}" ${l?"включено":"отключено"}`})}catch(i){t({type:"error",text:i.message||"Не удалось изменить настройку"})}}catch(l){t({type:"error",text:l.message})}finally{n(!1),s.current=!1}}}})(e,g),{users:C,loading:B,selectedUser:I,isEditing:A,formData:z,loadUsers:E,handleSelectUser:O,handleChange:D,handlePerkChange:$,handleSubmit:T,setIsEditing:U}=bi(e,t,v),{showBanDialog:F,setShowBanDialog:M,banDialogUser:L,setBanDialogUser:G,banReason:R,setBanReason:H,banDuration:W,setBanDuration:V,banLoading:Y,handleBanUser:J,handleUnbanUser:X}=((e,t,a)=>{const[r,o]=i.useState(!1),[n,s]=i.useState(null),[l,d]=i.useState(""),[c,_]=i.useState(""),[m,p]=i.useState(!1);return{showBanDialog:r,setShowBanDialog:o,banDialogUser:n,setBanDialogUser:s,banReason:l,setBanReason:d,banDuration:c,setBanDuration:_,banLoading:m,handleBanUser:async r=>{if(r&&r.preventDefault(),n&&l.trim()&&c)try{p(!0);let r=null;if("permanent"!==c)switch(r=new Date,c){case"30m":r.setMinutes(r.getMinutes()+30);break;case"2h":r.setHours(r.getHours()+2);break;case"6h":r.setHours(r.getHours()+6);break;case"12h":r.setHours(r.getHours()+12);break;case"24h":r.setHours(r.getHours()+24);break;case"7d":r.setDate(r.getDate()+7);break;default:r=null}const i={user_id:n.id,admin_id:e.id,admin_name:e.displayName,reason:l.trim(),created_at:(new Date).toISOString(),end_at:r?r.toISOString():null,is_active:!0,ban_type:c},{error:m}=await Ma.from("user_bans").insert(i);if(m)throw new Error(`Ошибка при сохранении бана: ${m.message}`);const u={is_banned:!0,ban_reason:l.trim(),ban_end_at:r?r.toISOString():null,ban_admin_id:e.id,ban_admin_name:e.displayName};await Ma.from("profiles").update(u).eq("id",n.id);const b=await ui();a(b),t({type:"success",text:`Пользователь ${n.displayName} успешно заблокирован`}),o(!1),d(""),_(""),s(null)}catch(i){t({type:"error",text:`Ошибка при блокировке: ${i.message}`})}finally{p(!1)}},handleUnbanUser:async e=>{if(e)try{p(!0);const n=(await ui()).find((t=>t.id===e));await Ma.from("user_bans").update({is_active:!1}).eq("user_id",e).eq("is_active",!0);const i={is_banned:!1,ban_reason:null,ban_end_at:null,ban_admin_id:null,ban_admin_name:null};await Ma.from("profiles").update(i).eq("id",e);const l=await ui();a(l),t({type:"success",text:`Пользователь ${n?.displayName||"выбранный"} успешно разблокирован`}),r&&(o(!1),s(null))}catch(n){t({type:"error",text:`Ошибка при разблокировке: ${n.message}`})}finally{p(!1)}}}})(e,v,C);return i.useEffect((()=>{o||(d||o?!d||s.current||l.current?d&&s.current&&x(!1):(l.current=!0,(async()=>{x(!0);try{await Promise.all([E(),j()]),s.current=!0}catch(e){v({type:"error",text:"Ошибка загрузки данных. Пожалуйста, обновите страницу."})}finally{x(!1)}})()):n("/"))}),[o,d,n,E,j,v]),o||h?r.jsxs("div",{className:ii.adminPanel,children:[r.jsxs("h1",{className:ii.title,children:[r.jsx(N,{size:24})," Панель администратора"]}),r.jsxs("div",{className:ii.loadingContainer,children:[r.jsx(P,{size:32,className:ii.spinningLoader}),r.jsx("p",{children:"Загрузка панели администратора..."})]})]}):e&&d?r.jsxs("div",{className:ii.adminPanel,children:[r.jsxs("h1",{className:ii.title,children:[r.jsx(N,{size:24})," Панель администратора"]}),r.jsx(pi,{message:f}),r.jsx(_i,{siteEvents:y,eventsLoading:w,toggleSiteEvent:S}),r.jsxs("div",{className:ii.content,children:[r.jsxs("div",{className:ii.usersSection,children:[r.jsxs("h2",{children:[r.jsx(se,{size:18})," Список пользователей"]}),r.jsx(si,{users:C,loading:B,selectedUser:I,handleSelectUser:O,handleUnbanUser:X,setShowBanDialog:M,setBanDialogUser:G,setTemporaryMessage:v})]}),r.jsxs("div",{className:ii.editSection,children:[r.jsxs("h2",{children:[r.jsx(q,{size:18})," Редактирование профиля"]}),I&&A?r.jsx(ci,{formData:z,handleChange:D,handlePerkChange:$,handleSubmit:T,loading:B,setIsEditing:U}):r.jsx("div",{className:ii.noUserSelected,children:B?r.jsxs("div",{className:ii.loader,children:[r.jsx(P,{size:24})," Загрузка данных..."]}):r.jsxs("p",{children:[r.jsx(u,{size:64}),r.jsx("br",{}),"Выберите пользователя из списка слева, чтобы редактировать"]})})]})]}),r.jsx(mi,{showBanDialog:F,banDialogUser:L,banReason:R,setBanReason:H,banDuration:W,setBanDuration:V,banLoading:Y,handleBanUser:J,handleUnbanUser:X,setShowBanDialog:M})]}):null},xi={resetContainer:"_resetContainer_1iy2b_1",resetCard:"_resetCard_1iy2b_10",resetForm:"_resetForm_1iy2b_24",formGroup:"_formGroup_1iy2b_29",resetButton:"_resetButton_1iy2b_59",message:"_message_1iy2b_80",success:"_success_1iy2b_86",info:"_info_1iy2b_91",error:"_error_1iy2b_96"},fi=()=>{const[e,t]=i.useState(""),[a,o]=i.useState(""),[n,s]=i.useState(!1),[l,d]=i.useState(null),[c,_]=i.useState(""),m=k();return i.useEffect((()=>{const e=window.location.hash.substring(1).split("&").reduce(((e,t)=>{const[a,r]=t.split("=");return e[a]=r,e}),{});if(e.access_token){_(e.access_token);const t=async()=>{try{const{data:t,error:a}=await Ma.auth.setSession({access_token:e.access_token,refresh_token:e.refresh_token||""});d(a?{type:"error",text:"Ошибка при аутентификации: "+a.message}:{type:"info",text:"Введите новый пароль"})}catch(t){}};t()}else d({type:"error",text:"Ссылка недействительна. Запросите новую ссылку для сброса пароля."})}),[]),r.jsx("div",{className:xi.resetContainer,children:r.jsxs("div",{className:xi.resetCard,children:[r.jsx("h2",{children:"Сброс пароля"}),l&&r.jsx("div",{className:`${xi.message} ${xi[l.type]}`,children:l.text}),r.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e===a)if(e.length<6)d({type:"error",text:"Пароль должен содержать не менее 6 символов"});else try{s(!0),d({type:"info",text:"Обновление пароля..."});const{data:t,error:a}=await Ma.auth.updateUser({password:e});if(a)throw a;await Ma.auth.signOut(),d({type:"success",text:"Пароль успешно обновлен! Переход на страницу входа..."}),setTimeout((()=>{m("/")}),3e3)}catch(r){d({type:"error",text:r.message||"Произошла ошибка при обновлении пароля"})}finally{s(!1)}else d({type:"error",text:"Пароли не совпадают"})},className:xi.resetForm,children:[r.jsxs("div",{className:xi.formGroup,children:[r.jsx("label",{htmlFor:"password",children:"Новый пароль"}),r.jsx("input",{type:"password",id:"password",value:e,onChange:e=>t(e.target.value),required:!0,disabled:n||!c})]}),r.jsxs("div",{className:xi.formGroup,children:[r.jsx("label",{htmlFor:"confirmPassword",children:"Подтвердите пароль"}),r.jsx("input",{type:"password",id:"confirmPassword",value:a,onChange:e=>o(e.target.value),required:!0,disabled:n||!c})]}),r.jsx("button",{type:"submit",className:xi.resetButton,disabled:n||!c,children:n?"Обновление...":"Обновить пароль"})]})]})})},vi="_pageContainer_1uaky_1",yi="_formContainer_1uaky_9",ki="_title_1uaky_30",wi="_formGroup_1uaky_87",ji="_inputIcon_1uaky_98",Ni="_inputWrapper_1uaky_103",Si="_inputIconInside_1uaky_107",qi="_disabledInput_1uaky_150",Ci="_textarea_1uaky_158",Bi="_dropArea_1uaky_191",Pi="_highlight_1uaky_200",Ii="_dropHint_1uaky_208",Ai="_browseButton_1uaky_227",zi="_imagePreviewContainer_1uaky_241",Ei="_imagePreview_1uaky_241",Oi="_removeImageButton_1uaky_261",Di="_submitButton_1uaky_283",$i="_buttonIcon_1uaky_301",Ti=()=>{const{user:e}=br(),[t,a]=i.useState(""),[n,s]=i.useState([]),[l,d]=i.useState(!1),[c,_]=i.useState(!1),[p,u]=i.useState(""),b=i.useRef(null),g=i.useRef(null),h=i.useRef(null);i.useEffect((()=>{const e=e=>{if(e.clipboardData&&e.clipboardData.items){const t=e.clipboardData.items;for(let a=0;a<t.length;a++)if(-1!==t[a].type.indexOf("image")){const r=t[a].getAsFile();f(r),e.preventDefault()}}},t=h.current,a=()=>t.classList.add(Pi),r=()=>t.classList.remove(Pi),o=e=>{e.preventDefault(),e.stopPropagation(),r(),e.dataTransfer.files&&e.dataTransfer.files.length>0&&Array.from(e.dataTransfer.files).filter((e=>e.type.startsWith("image/"))).forEach((e=>{f(e)}))};return document.addEventListener("paste",e),t.addEventListener("dragenter",a),t.addEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation(),a()})),t.addEventListener("dragleave",r),t.addEventListener("drop",o),()=>{document.removeEventListener("paste",e),t.removeEventListener("dragenter",a),t.removeEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation()})),t.removeEventListener("dragleave",r),t.removeEventListener("drop",o)}}),[]);const f=e=>{if(n.length>=5)return void u("Максимальное количество изображений: 5");const t=URL.createObjectURL(e);s((a=>[...a,{file:e,url:t}])),u("")},v={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}},hover:{scale:1.03,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.2)"},tap:{scale:.98}};return r.jsx("div",{className:vi,children:r.jsxs(o.div,{className:yi,variants:{hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.1,duration:.3}}},initial:"hidden",animate:"visible",children:[r.jsx(o.h1,{className:ki,variants:v,children:"Обратная связь"}),r.jsx(Br,{type:"error",message:p,show:!!p}),r.jsx(Br,{type:"success",message:"Ваше сообщение успешно отправлено! Спасибо за обратную связь.",show:c}),r.jsxs("form",{ref:g,onSubmit:async r=>{if(r.preventDefault(),e&&e.email)if(t.trim())try{d(!0),u("");const r=new FormData;r.append("message",t),r.append("email",e.email),r.append("displayName",e.displayName||"Пользователь"),n.forEach((e=>{r.append("images",e.file)}));const o=await fetch("https://scform.onrender.com/api/feedback",{method:"POST",body:r}),i=await o.json().catch((()=>({})));if(!o.ok)throw new Error(i.error||"Произошла ошибка при отправке");a(""),s([]),_(!0),setTimeout((()=>{_(!1)}),5e3)}catch(o){u(`Не удалось отправить сообщение: ${o.message}. Пожалуйста, попробуйте позже или свяжитесь напрямую: igoraor79@gmail.com.`)}finally{d(!1)}else u("Пожалуйста, введите текст сообщения");else u("Необходимо войти в аккаунт для отправки обратной связи")},children:[r.jsxs(o.div,{className:wi,variants:v,children:[r.jsxs("label",{children:[r.jsx(x,{className:ji})," Email:"]}),r.jsxs("div",{className:Ni,children:[r.jsx(x,{className:Si}),r.jsx("input",{type:"email",value:e?.email||"Пожалуйста, войдите в аккаунт",disabled:!0,readOnly:!0,className:qi})]})]}),r.jsxs(o.div,{className:wi,variants:v,children:[r.jsx("label",{children:"Суть запроса:"}),r.jsx("textarea",{value:t,onChange:e=>a(e.target.value),disabled:l,placeholder:"Опишите ваш запрос или предложение детально...",rows:6,className:Ci,required:!0})]}),r.jsxs(o.div,{className:wi,variants:v,children:[r.jsxs("label",{children:[r.jsx(le,{className:ji})," Вложения:"]}),r.jsxs("div",{ref:h,className:Bi,children:[r.jsxs("p",{children:["Перетащите изображения сюда или ",r.jsx("button",{type:"button",className:Ai,onClick:()=>b.current.click(),children:"выберите файлы"})]}),r.jsx("p",{className:Ii,children:"Вы также можете вставить изображения из буфера обмена (Ctrl+V)"}),r.jsx("input",{type:"file",ref:b,onChange:e=>{e.target.files&&e.target.files.length>0&&Array.from(e.target.files).filter((e=>e.type.startsWith("image/"))).forEach((e=>{f(e)}))},style:{display:"none"},accept:"image/*",multiple:!0})]}),n.length>0&&r.jsx(o.div,{className:zi,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:n.map(((e,t)=>r.jsxs("div",{className:Ei,children:[r.jsx("img",{src:e.url,alt:`Прикрепленное изображение ${t+1}`}),r.jsx("button",{type:"button",className:Oi,onClick:()=>{return e=t,void s((t=>{const a=[...t];return URL.revokeObjectURL(a[e].url),a.splice(e,1),a}));var e},children:r.jsx(m,{})})]},t)))})]}),r.jsx(o.button,{type:"submit",className:Di,disabled:l||!e?.email,variants:v,initial:"hidden",animate:"visible",whileHover:"hover",whileTap:"tap",children:l?"Отправка...":r.jsxs(r.Fragment,{children:[r.jsx(F,{className:$i}),r.jsx("span",{children:"Отправить"})]})})]})]})})};function Ui(){const e=a.c(32),{user:t}=br(),[o,n]=i.useState(!1);let s,l;t&&("igoraor79@gmail.com"===t.email||t.perks?.includes("admin")||t.activePerk),e[0]!==o?(s=()=>{const e=e=>{const t=document.querySelector(`.${ma}`),a=document.querySelector(`.${da}`);o&&t&&a&&!t.contains(e.target)&&!a.contains(e.target)&&n(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},l=[o],e[0]=o,e[1]=s,e[2]=l):(s=e[1],l=e[2]),i.useEffect(s,l);const c=de();let _,m,p;e[3]!==o?(_=()=>{o&&n(!1)},e[3]=o,e[4]=_):_=e[4],e[5]!==c.pathname?(m=[c.pathname],e[5]=c.pathname,e[6]=m):m=e[6],i.useEffect(_,m),e[7]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{n(!1)},e[7]=p):p=e[7];const u=p;let b,g,h,x;e[8]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsxs("header",{className:ta,children:[r.jsx(d,{to:"/",children:r.jsx(ga,{src:"sclogo",alt:"Логотип"})}),r.jsx("h1",{className:oa,children:"Цикл Душ"})]}),e[8]=b):b=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("li",{className:sa,children:r.jsx(d,{to:"/",children:"Главная"})}),e[9]=g):g=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("li",{className:sa,children:r.jsx(d,{to:"/characters",children:"Персонажи"})}),e[10]=h):h=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsxs("ul",{className:ia,children:[g,h,r.jsx("li",{className:sa,children:r.jsx(d,{to:"/about",children:"О нас"})})]}),e[11]=x):x=e[11];const f=`${da} ${o?_a:""}`;let v,y,k,w,j;e[12]!==o?(v=e=>{e.stopPropagation(),n(!o)},e[12]=o,e[13]=v):v=e[13],e[14]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx("div",{className:ca}),k=r.jsx("div",{className:ca}),w=r.jsx("div",{className:ca}),e[14]=y,e[15]=k,e[16]=w):(y=e[14],k=e[15],w=e[16]),e[17]!==v||e[18]!==f?(j=r.jsxs("div",{className:f,onClick:v,children:[y,k,w]}),e[17]=v,e[18]=f,e[19]=j):j=e[19];const N=`${ma} ${o?_a:""}`;let S,q,C,B,P,I,A,z;return e[20]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx("li",{className:ua,children:r.jsx(d,{to:"/",onClick:u,children:"Главная"})}),e[20]=S):S=e[20],e[21]===Symbol.for("react.memo_cache_sentinel")?(q=r.jsx("li",{className:ua,children:r.jsx(d,{to:"/characters",onClick:u,children:"Персонажи"})}),e[21]=q):q=e[21],e[22]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsxs("ul",{className:pa,children:[S,q,r.jsx("li",{className:ua,children:r.jsx(d,{to:"/about",onClick:u,children:"О нас"})})]}),e[22]=C):C=e[22],e[23]!==N?(B=r.jsx("div",{className:N,children:C}),e[23]=N,e[24]=B):B=e[24],e[25]===Symbol.for("react.memo_cache_sentinel")?(P=r.jsx("div",{className:la,children:r.jsx(Rr,{})}),e[25]=P):P=e[25],e[26]!==j||e[27]!==B?(I=r.jsxs("nav",{className:na,children:[x,j,B,P]}),e[26]=j,e[27]=B,e[28]=I):I=e[28],e[29]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx(Fi,{}),e[29]=A):A=e[29],e[30]!==I?(z=r.jsxs("div",{className:ea,children:[b,I,A]}),e[30]=I,e[31]=z):z=e[31],z}function Fi(){const e=a.c(14),t=de(),{user:i}=br();let s,l,d,c,_,m,p,u,b,g,h,x,f;return i&&("igoraor79@gmail.com"===i.email||i.perks?.includes("admin")||i.activePerk),e[0]===Symbol.for("react.memo_cache_sentinel")?(s={opacity:0,y:20},l={opacity:1,y:0},d={opacity:0,y:-20},c={duration:.3},e[0]=s,e[1]=l,e[2]=d,e[3]=c):(s=e[0],l=e[1],d=e[2],c=e[3]),e[4]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx(ce,{path:"/",element:r.jsx(o.div,{initial:s,animate:l,exit:d,transition:c,children:r.jsx("div",{className:ba,children:r.jsx(ni,{})})})}),e[4]=_):_=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(ce,{path:"/characters",element:r.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:r.jsx(wt,{})})}),e[5]=m):m=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(ce,{path:"/about",element:r.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:r.jsx(Kt,{})})}),e[6]=p):p=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(ce,{path:"/profile",element:r.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:r.jsx(uo,{})})}),e[7]=u):u=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(ce,{path:"/profile/:userId",element:r.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:r.jsx(uo,{})})}),e[8]=b):b=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(ce,{path:"/reset-password",element:r.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:r.jsx(fi,{})})}),e[9]=g):g=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(ce,{path:"/admin",element:r.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:r.jsx(hi,{})})}),e[10]=h):h=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(ce,{path:"/feedback",element:r.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:r.jsx(Ti,{})})}),e[11]=x):x=e[11],e[12]!==t?(f=r.jsx(n,{mode:"wait",children:r.jsxs(_e,{location:t,children:[_,m,p,u,b,g,h,x]},t.pathname)}),e[12]=t,e[13]=f):f=e[13],f}const Mi={v:"4.8.0",meta:{g:"LottieFiles AE 1.0.0",a:"Bas Milius",k:"Meteocons, Weather icons, Icon set",d:"Clear day - Meteocons.com",tc:""},fr:60,ip:0,op:360,w:512,h:512,nm:"clear-day",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"rays",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:359,s:[45]}],ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[180,0],[130.345,0]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-130.345,0],[-180,0]],c:!1},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ind:2,ty:"sh",ix:3,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[127.279,127.279],[92.168,92.168]],c:!1},ix:2},nm:"Path 3",mn:"ADBE Vector Shape - Group",hd:!1},{ind:3,ty:"sh",ix:4,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-92.168,-92.168],[-127.279,-127.279]],c:!1},ix:2},nm:"Path 4",mn:"ADBE Vector Shape - Group",hd:!1},{ind:4,ty:"sh",ix:5,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-127.279,127.279],[-92.168,92.168]],c:!1},ix:2},nm:"Path 5",mn:"ADBE Vector Shape - Group",hd:!1},{ind:5,ty:"sh",ix:6,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[92.168,-92.168],[127.279,-127.279]],c:!1},ix:2},nm:"Path 6",mn:"ADBE Vector Shape - Group",hd:!1},{ind:6,ty:"sh",ix:7,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,180],[0,130.345]],c:!1},ix:2},nm:"Path 7",mn:"ADBE Vector Shape - Group",hd:!1},{ind:7,ty:"sh",ix:8,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[0,-130.345],[0,-180]],c:!1},ix:2},nm:"Path 8",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.984313726425,.749019622803,.141176477075,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:24,ix:5},lc:2,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1}],ip:0,op:360,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"core",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-46.392],[46.392,0],[0,46.392],[-46.392,0]],o:[[0,46.392],[-46.392,0],[0,-46.392],[46.392,0]],v:[[84,0],[0,84],[-84,0],[0,-84]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.972549021244,.686274528503,.0941176489,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:6,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"gf",o:{a:0,k:100,ix:10},r:1,bm:0,g:{p:5,k:{a:0,k:[0,.984,.749,.141,.225,.984,.749,.141,.45,.984,.749,.141,.725,.973,.684,.092,1,.961,.62,.043],ix:9}},s:{a:0,k:[-41.517,-71.871],ix:5},e:{a:0,k:[42.497,73.645],ix:6},t:1,nm:"Gradient Fill 1",mn:"ADBE Vector Graphic - G-Fill",hd:!1}],ip:0,op:360,st:0,bm:0}],markers:[]},Li={v:"5.5.8",fr:29.9700012207031,ip:0,op:160.000006516934,w:150,h:150,nm:"icon_moon",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"moon Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[77.728,68.567,0],ix:2},a:{a:0,k:[583,600,0],ix:1},s:{a:0,k:[45,45,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,13.612],[-13.612,0],[0,0],[0,4.127],[-13.613,0],[0,0],[0,-13.612],[13.613,0],[0,0],[0,-4.127],[13.613,0]],o:[[-13.612,0],[0,-13.613],[0,0],[-1.971,-3.611],[0,-13.612],[0,0],[13.613,0],[0,13.614],[0,0],[1.971,3.611],[0,13.612],[0,0]],v:[[-57.605,42.935],[-82.292,18.248],[-57.605,-6.44],[-27.961,-6.44],[-30.971,-18.248],[-6.283,-42.935],[57.604,-42.935],[82.292,-18.248],[57.604,6.441],[27.961,6.441],[30.97,18.248],[6.282,42.935]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.733333349228,.96862745285,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[504.292,658.677],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Group 5",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[504.291,658.677],to:[-3.333,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:40,s:[484.291,658.677],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:80,s:[504.291,658.677],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:120,s:[484.291,658.677],to:[0,0],ti:[-3.333,0]},{t:160.000006516934,s:[504.291,658.677]}],ix:2},a:{a:0,k:[480.291,623.677],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"c1",np:1,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,7.3],[-7.3,0],[0,0],[0,-7.3],[7.299,0]],o:[[-7.3,0],[0,-7.3],[0,0],[7.299,0],[0,7.3],[0,0]],v:[[-49.017,13.239],[-62.255,.001],[-49.017,-13.238],[49.017,-13.238],[62.255,.001],[49.017,13.239]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.733333349228,.96862745285,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[608.408,572.45],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Group 9",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[608.408,572.45],to:[2.361,0],ti:[-5.079,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:33,s:[624.897,572.45],to:[2.092,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:40,s:[628.408,572.45],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:80,s:[608.408,572.45],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:120,s:[628.408,572.45],to:[0,0],ti:[3.333,0]},{t:160.000006516934,s:[608.408,572.45]}],ix:2},a:{a:0,k:[608.408,548.45],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"c2",np:1,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[23.394,0],[0,61.75],[-15.662,19.738],[-24.17,5.763],[2.294,-4.352],[0,-15.361],[-51.493,0],[-11.283,4.614],[1.603,-4.652],[19.108,-13.726]],o:[[-61.75,0],[0,-25.147],[15.552,-19.598],[4.785,-1.142],[-7.101,13.467],[0,51.492],[12.2,0],[4.556,-1.863],[-7.555,21.932],[-19.251,13.829]],v:[[2.221,111.03],[-109.767,-.958],[-85.479,-70.561],[-23.882,-109.888],[-17.49,-101.649],[-28.191,-58.205],[65.193,35.178],[100.583,28.225],[108.163,35.387],[67.407,89.892]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[1,.831372559071,.352941185236,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[599.388,602.031],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"banana",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,6.708],[-6.708,0],[0,0],[0,0],[1.729,-4.168],[0,0]],o:[[-6.708,0],[0,-6.708],[0,0],[0,0],[-2.247,3.961],[0,0],[0,0]],v:[[-13.228,12.165],[-25.393,0],[-13.228,-12.165],[25.393,-12.165],[20.546,-3.616],[14.555,8.634],[13.089,12.165]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.733333349228,.96862745285,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[474.245,549.909],to:[3.333,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:40,s:[494.245,549.909],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:80,s:[474.245,549.909],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:120,s:[494.245,549.909],to:[0,0],ti:[3.333,0]},{t:160.000006516934,s:[474.245,549.909]}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Group 14",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tr",p:{a:0,k:[484.245,549.909],ix:2},a:{a:0,k:[475.245,549.909],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"c3",np:1,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1798.00007323404,st:0,bm:0}],markers:[]},Gi="_themeButton_1p4eo_1",Ri="_disabled_1p4eo_33",Hi=s.memo((()=>{const e=a.c(14),{theme:t,toggleTheme:o}=i.useContext(tt),[n,s]=i.useState(!1);let l;const d="dark"===t?Mi:Li;let c;e[0]!==d?(c={animationData:d,loop:!0,autoplay:!0},e[0]=d,e[1]=c):c=e[1],l=c;const _=l;let m;e[2]!==n||e[3]!==o?(m=()=>{n||(o(),s(!0),setTimeout((()=>{s(!1)}),3e3))},e[2]=n,e[3]=o,e[4]=m):m=e[4];const p=m,u=`${Gi} ${n?Ri:""}`,b="dark"===t?"Switch to Light Mode":"Switch to Dark Mode";let g,h,x;return e[5]===Symbol.for("react.memo_cache_sentinel")?(g={width:"35px",height:"35px",display:"block"},e[5]=g):g=e[5],e[6]!==_?(h=r.jsx(me,{config:_,speed:1,style:g}),e[6]=_,e[7]=h):h=e[7],e[8]!==p||e[9]!==n||e[10]!==u||e[11]!==b||e[12]!==h?(x=r.jsx("button",{className:u,onClick:p,disabled:n,"aria-label":b,children:h}),e[8]=p,e[9]=n,e[10]=u,e[11]=b,e[12]=h,e[13]=x):x=e[13],x}));Hi.displayName="ThemeToggleButton";const Wi="app_version",Vi=()=>(i.useEffect((()=>{(async()=>{try{const e=(()=>{const e=window.location.hostname.includes("github.io")?"/soulcycle":"";return`${window.location.protocol}//${window.location.host}${e}`})(),t=await fetch(`${e}/version.json?_=${Date.now()}`);if(!t.ok)return;const a=await t.json(),r=a.version,o=a.buildTimestamp,n=localStorage.getItem(Wi);if(n){const e=JSON.parse(n);e.version===r&&e.timestamp===o||((()=>{const e=[];for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);e.includes(a)||localStorage.removeItem(a)}"caches"in window&&caches.keys().then((e=>{e.forEach((e=>{caches.delete(e)}))})),window.location.reload(!0)})(),localStorage.setItem(Wi,JSON.stringify({version:r,timestamp:o})))}else localStorage.setItem(Wi,JSON.stringify({version:r,timestamp:o}))}catch(e){}})()}),[]),null);function Yi(){const e=a.c(8),{theme:o}=i.useContext(tt),{refreshUser:n}=br();let s,l,d,c,_,m;return e[0]!==n?(s=()=>{const e=()=>{n()};return window.addEventListener("auth:refresh",e),()=>{window.removeEventListener("auth:refresh",e)}},l=[n],e[0]=n,e[1]=s,e[2]=l):(s=e[1],l=e[2]),i.useEffect(s,l),e[3]!==o?(d=()=>{let e=null;(async()=>{const t=qe("dark"===o?"backgroundblack":"background",{format:await(async()=>{if(e)return e;const t=Xi,a=Ji,r=await t(),o=a();let n="jpg";return r?n="avif":o&&(n="webp"),e=n,n})(),quality:90});document.documentElement.style.setProperty("--page-bg",`url('${t}')`)})()},c=[o],e[3]=o,e[4]=d,e[5]=c):(d=e[4],c=e[5]),i.useEffect(d,c),e[6]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx(Vi,{}),e[6]=_):_=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsxs(pe,{children:[_,r.jsxs("div",{className:t,children:[r.jsx(Hi,{}),r.jsx(Ui,{})]})]}),e[7]=m):m=e[7],m}function Ji(){const e=document.createElement("canvas");return!!(e&&e.getContext&&e.getContext("2d"))&&0===e.toDataURL("image/webp").indexOf("data:image/webp")}async function Xi(){try{return!!self.createImageBitmap&&await fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",{method:"HEAD"}).then(Zi)}catch(e){return!1}}function Zi(e){return e.ok}ue.createRoot(document.getElementById("root")).render(r.jsxs(rt,{children:[" ",r.jsxs(ur,{children:[" ",r.jsx(Yi,{})]})]}))}}}));
